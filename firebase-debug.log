[debug] [2023-08-17T12:57:56.280Z] ----------------------------------------------------------------------
[debug] [2023-08-17T12:57:56.282Z] Command:       C:\Program Files\nodejs\node.exe C:\Users\danie\AppData\Local\Yarn\Data\global\node_modules\firebase-tools\lib\bin\firebase.js emulators:start --import=firebase-export-16922770325459aqoyl
[debug] [2023-08-17T12:57:56.282Z] CLI Version:   12.4.7
[debug] [2023-08-17T12:57:56.282Z] Platform:      win32
[debug] [2023-08-17T12:57:56.282Z] Node Version:  v18.17.0
[debug] [2023-08-17T12:57:56.283Z] Time:          Thu Aug 17 2023 08:57:56 GMT-0400 (Venezuela Time)
[debug] [2023-08-17T12:57:56.283Z] ----------------------------------------------------------------------
[debug] 
[debug] [2023-08-17T12:57:56.335Z] Object ".extensions" in "firebase.json" has unknown property: {"additionalProperty":"firestore-send-email"}
[debug] [2023-08-17T12:57:56.338Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2023-08-17T12:57:56.338Z] > authorizing via signed-in user (daniel.uzcategui@chopzi.com)
[debug] [2023-08-17T12:57:56.401Z] openjdk version "11.0.17" 2022-10-18
[debug] [2023-08-17T12:57:56.401Z] 
OpenJDK Runtime Environment OpenLogic-OpenJDK (build 11.0.17+8-adhoc..jdk11u)
OpenJDK 64-Bit Server VM OpenLogic-OpenJDK (build 11.0.17+8-adhoc..jdk11u, mixed mode)

[debug] [2023-08-17T12:57:56.411Z] Parsed Java major version: 11
[info] i  emulators: Starting emulators: functions, firestore, database, hosting, eventarc, extensions {"metadata":{"emulator":{"name":"hub"},"message":"Starting emulators: functions, firestore, database, hosting, eventarc, extensions"}}
[debug] [2023-08-17T12:57:56.414Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/ecrphmsb [none]
[debug] [2023-08-17T12:57:56.758Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/ecrphmsb 200
[debug] [2023-08-17T12:57:56.758Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/ecrphmsb {"projectId":"ecrphmsb","projectNumber":"9151880564","displayName":"ecrphmsb","name":"projects/ecrphmsb","resources":{"hostingSite":"ecrphmsb","storageBucket":"ecrphmsb.appspot.com","locationId":"us-central"},"state":"ACTIVE","etag":"1_46b9d145-f9f9-4cf7-9388-1bce6b665d61"}
[debug] [2023-08-17T12:57:56.759Z] Successfully read params from firestore-send-email.env
[debug] [2023-08-17T12:57:56.760Z] Error: ENOENT: no such file or directory, open 'C:\Users\danie\Documents\GitHub\PagosColegio\extensions\firestore-send-email.env.default'
[debug] [2023-08-17T12:57:56.760Z] Error: ENOENT: no such file or directory, open 'C:\Users\danie\Documents\GitHub\PagosColegio\extensions\firestore-send-email.env.9151880564'
[debug] [2023-08-17T12:57:56.760Z] Error: ENOENT: no such file or directory, open 'C:\Users\danie\Documents\GitHub\PagosColegio\extensions\firestore-send-email.env.ecrphmsb'
[debug] [2023-08-17T12:57:56.760Z] Error: ENOENT: no such file or directory, open 'C:\Users\danie\Documents\GitHub\PagosColegio\extensions\firestore-send-email.env.local'
[debug] [2023-08-17T12:57:56.760Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/ecrphmsb/adminSdkConfig [none]
[debug] [2023-08-17T12:57:57.079Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/ecrphmsb/adminSdkConfig 200
[debug] [2023-08-17T12:57:57.079Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/ecrphmsb/adminSdkConfig {"projectId":"ecrphmsb","storageBucket":"ecrphmsb.appspot.com","locationId":"us-central"}
[debug] [2023-08-17T12:57:57.083Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/ecrphmsb [none]
[debug] [2023-08-17T12:57:57.408Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/ecrphmsb 200
[debug] [2023-08-17T12:57:57.408Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/ecrphmsb {"projectId":"ecrphmsb","projectNumber":"9151880564","displayName":"ecrphmsb","name":"projects/ecrphmsb","resources":{"hostingSite":"ecrphmsb","storageBucket":"ecrphmsb.appspot.com","locationId":"us-central"},"state":"ACTIVE","etag":"1_46b9d145-f9f9-4cf7-9388-1bce6b665d61"}
[debug] [2023-08-17T12:57:57.410Z] >>> [apiv2][query] GET https://firebaseextensions.googleapis.com/v1beta/publishers/firebase/extensions/firestore-send-email/versions filter=&showPrereleases=true&pageSize=100&pageToken=
[debug] [2023-08-17T12:57:58.083Z] <<< [apiv2][status] GET https://firebaseextensions.googleapis.com/v1beta/publishers/firebase/extensions/firestore-send-email/versions 200
[debug] [2023-08-17T12:57:58.086Z] <<< [apiv2][body] GET https://firebaseextensions.googleapis.com/v1beta/publishers/firebase/extensions/firestore-send-email/versions {"extensionVersions":[{"name":"publishers/firebase/extensions/firestore-send-email/versions/0.1.0","ref":"firebase/firestore-send-email@0.1.0","spec":{"specVersion":"v1beta","name":"firestore-send-email","version":"0.1.0","description":"Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.","roles":[{"role":"datastore.user","reason":"Allows this extension to access Cloud Firestore to read and process added email documents."}],"resources":[{"name":"processQueue","type":"firebaseextensions.v1beta.function","propertiesYaml":"eventTrigger:\n  eventType: providers/cloud.firestore/eventTypes/document.write\n  resource: projects/${PROJECT_ID}/databases/(default)/documents/${MAIL_COLLECTION}/{id}\nlocation: ${LOCATION}\nsourceDirectory: .\n","description":"Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.","deletionPolicy":"DELETE"}],"billingRequired":true,"author":{"authorName":"Firebase","url":"https://firebase.google.com"},"contributors":[{"authorName":"Michael Bleigh","url":"https://github.com/mbleigh"},{"authorName":"Elliot Hesp","email":"elliot@invertase.io","url":"https://github.com/ehesp"}],"license":"Apache-2.0","releaseNotesUrl":"https://github.com/firebase/extensions/commits/master","sourceUrl":"https://github.com/firebase/extensions/tree/master/firestore-send-email","params":[{"param":"LOCATION","label":"Deployment location","type":"SELECT","description":"Where should the extension be deployed? For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).","required":true,"options":[{"value":"us-central1","label":"Iowa (us-central1)"},{"value":"us-east1","label":"South Carolina (us-east1)"},{"value":"us-east4","label":"Northern Virginia (us-east4)"},{"value":"europe-west1","label":"Belgium (europe-west1)"},{"value":"europe-west2","label":"London (europe-west2)"},{"value":"asia-east2","label":"Hong Kong (asia-east2)"},{"value":"asia-northeast1","label":"Tokyo (asia-northeast1)"}],"default":"us-central1"},{"param":"SMTP_CONNECTION_URI","label":"SMTP connection URI","type":"STRING","description":"A URI representing an SMTP server that this extension can use to deliver email.","required":true,"example":"smtps://username:password@smtp.hostname.com:465","validationRegex":"^smtps?://[^:]+:[^:]+@.*$","validationErrorMessage":"Invalid SMTP connection URI. Must be in the form `smtp(s)://username:password@hostname:port`."},{"param":"MAIL_COLLECTION","label":"Email documents collection","type":"STRING","description":"What is the path to the collection that contains the documents used to build and send the emails?","required":true,"default":"mail","validationRegex":"^[^/]+(/[^/]+/[^/]+)*$","validationErrorMessage":"Must be a valid Cloud Firestore collection"},{"param":"DEFAULT_FROM","label":"Default FROM address","type":"STRING","description":"The email address to use as the sender's address (if it's not specified in the added email document).","required":true,"validationRegex":"^\\S+@\\S+\\.\\S+$","validationErrorMessage":"Must be a valid email address"},{"param":"DEFAULT_REPLY_TO","label":"Default REPLY-TO address","type":"STRING","description":"The email address to use as the reply-to address (if it's not specified in the added email document)."},{"param":"USERS_COLLECTION","label":"Users collection","type":"STRING","description":"A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection."},{"param":"TEMPLATES_COLLECTION","label":"Templates collection","type":"STRING","description":"A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document."}],"preinstallContent":"Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\n\nThis extension uses other Firebase or Google Cloud Platform services which may have associated charges:\n\n- Cloud Firestore\n- Cloud Functions\n\nWhen you use Firebase Extensions, you're only charged for the underlying resources that you use. A paid-tier billing plan is only required if the extension uses a service that requires a paid-tier plan, for example calling to a Google Cloud Platform API or making outbound network requests to non-Google services. All Firebase services offer a free tier of usage. [Learn more about Firebase billing.](https://firebase.google.com/pricing)\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n","postinstallContent":"### See it in action\n\nYou can test out this extension right away:\n\n1.  Go to your [Cloud Firestore dashboard](https://console.firebase.google.com/project/${param:PROJECT_ID}/database/firestore/data).\n\n1.  If it doesn't already exist, create the collection you specified during installation: `${param:MAIL_COLLECTION}`.\n\n1.  Add a document with a `to` field and a `message` field with the following content:\n\n    ```\n    to: ['someone@example.com'],\n    message: {\n      subject: 'Hello from Firebase!',\n      text: 'This is the plaintext section of the email body.',\n      html: 'This is the <code>HTML</code> section of the email body.',\n    }\n    ```\n\n1.  In a few seconds, you'll see a `delivery` field appear in the document. The field will update as the extension processes the email.\n\n**Note:** You can also use the [Firebase Admin SDK][admin_sdk] to add a document:\n```\nadmin.firestore().collection('${param:MAIL_COLLECTION}').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    text: 'This is the plaintext section of the email body.',\n    html: 'This is the <code>HTML</code> section of the email body.',\n  }\n}).then(() => console.log('Queued email for delivery!'));\n```\n\n### Using this extension\n\nAfter its installation, this extension monitors all document writes to the `${param:MAIL_COLLECTION}` collection. Email is delivered based on the contents of the document's fields. The top-level fields specify the email's sender and recipients. The `message` field contains the details of the email to deliver, including the email body.\n\n#### Sender and recipient fields\n\nThe top-level fields of the document supply the email sender and recipient information. Available fields are:\n\n* **from:** The sender's email address. If not specified in the document, uses the configured \"Default FROM address\" parameter.\n* **replyTo:** The reply-to email address. If not specified in the document, uses the configured \"Default REPLY-TO address\" parameter.\n* **to:** A single recipient email address or an array containing multiple recipient email addresses.\n* **toUids:** An array containing the recipient UIDs.\n* **cc:** A single recipient email address or an array containing multiple recipient email addresses.\n* **ccUids:** An array containing the CC recipient UIDs.\n* **bcc:** A single recipient email address or an array containing multiple recipient email addresses.\n* **bccUids:** An array containing the BCC recipient UIDs.\n\n**NOTE:** The `toUids`, `ccUids`, and `bccUids` options deliver emails based on user UIDs keyed to email addresses within a Cloud Firestore document. To use these recipient options, you need to specify a Cloud Firestore collection for the extension's \"Users collection\" parameter. The extension can then read the `email` field for each UID specified in the `toUids`, `ccUids`, and/or `bccUids` fields.\n\n#### Message field\n\nThe `message` field of the document contains raw delivery information for the email. This field should generally only be populated by trusted code running in your own servers or Cloud Functions (refer to the \"Security rules and sending email\" section below).\n\nAvailable properties for the `message` field are:\n\n* **messageId:** A message ID header for the email, if any.\n* **subject:** The subject of the email.\n* **text:** The plaintext content of the email.\n* **html:** The HTML content of the email.\n* **amp:** The [AMP4EMAIL][amp4email] content of the email.\n\n#### Using templates\n\nIf you specified a \"Templates collection\" parameter during configuration of the extension, you can create and manage [Handlebars][handlebars] templates for your emails. Each document for a template should have a memorable ID that you use as the *template name* in the document that's written to your `${param:MAIL_COLLECTION}` collection.\n\nThe template document can include any of the following fields:\n\n* **subject:** A template string for the subject of the email.\n* **text:** A template string for the plaintext content of the email.\n* **html:** A template string for the HTML content of the email.\n* **amp:** A template string for the [AMP4EMAIL][amp4email] content of the email.\n\nAn example template might have an ID of `following` and content like:\n\n```js\n{\n  subject: \"@{{username}} is now following you!\",\n  html: \"Just writing to let you know that <code>@{{username}}</code> ({{name}}) is now following you.\"\n}\n```\n\nTo deliver email using templates, when adding documents to your `${param:MAIL_COLLECTION}` collection, include a `template` field with `name` and `data` properties. For example, using our `following` template from above:\n\n```js\nadmin.firestore().collection('${param:MAIL_COLLECTION}').add({\n  toUids: ['abc123'],\n  template: {\n    name: 'following',\n    data: {\n      username: 'ada',\n      name: 'Ada Lovelace'\n    }\n  }\n})\n```\n\n#### Security rules and sending email\n\nThis extension can be used to trigger email delivery directly from client applications. However, you should carefully control client access to the `${param:MAIL_COLLECTION}` collection to avoid potential abuse (you don't want users able to send arbitrary emails from your company's address!).\n\nSecurity rules will vary from application to application, but you should always make sure that emails are sent only to intended recipients and free-form content is kept to a minimum. Templates can help here -- you can use security rules to verify that the data being populated to the template matches your expectations for what a user should be allowed to trigger.\n\n#### Email delivery processing\n\nWhen a document is added to the `${param:MAIL_COLLECTION}` collection, the extension picks it up for email delivery processing. The extension creates and updates a `delivery` field in the document as it processes the email. The `delivery` field can be populated with the following fields:\n\n* **state:** One of `PENDING`, `PROCESSING`, `SUCCESS`, or `ERROR`.\n* **startTime:** Timestamp when email processing began.\n* **endTime:** Timestamp when email processing completed (that is, ended in either a `SUCCESS` or `ERROR` state).\n* **error:** If there was an email delivery error, an error message will be populated here.\n* **attempts:** Number of delivery attempts for this email.\n* **leaseExpireTime:** In case of a hang or timeout, the time at which a `PROCESSING` state should be considered an error.\n* **info:** After successful email delivery (to at least one address), this field will be populated with the following fields:\n  * **messageId:** The message ID of the delivered email.\n  * **accepted:** Array of email addresses to which the email was successfully delivered.\n  * **rejected:** Array of email addresses to which the email could not be delivered.\n  * **pending:** Array of email addresses that were temporarily rejected by SMTP.\n  * **response:** The last response from the SMTP server.\n\nAn email will typically go from `PENDING` to `PROCESSING` to either `SUCCESS` or `ERROR`. Once in the `SUCCESS` or `ERROR` state, additional changes to the document will not trigger the extension to send another email. To resend an email with document updates, you can change the `state` to `PENDING` or `RETRY`.\n\n#### Manual retries\n\nThere are instances in which email delivery fails in a recoverable fashion or the document can be manually corrected for proper delivery with minor modifications. While retries are not automatic, you can manually change the `state` in the `delivery` field to `RETRY` so that the extension attempts email delivery again (and increments the number of `attempts`).\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n\n[mail_collection]: https://console.firebase.google.com/project/_/database/firestore/data~2F${param:MAIL_COLLECTION}\n[admin_sdk]: https://firebase.google.com/docs/admin/setup\n[amp4email]: https://amp.dev/documentation/guides-and-tutorials/learn/email-spec/amp-email-format/\n[handlebars]: https://handlebarsjs.com/\n","readmeContent":"# firestore-send-email\n\n**VERSION**: 0.1.0\n\n**DESCRIPTION**: Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.\n\n\n\n**CONFIGURATION PARAMETERS:**\n\n* Deployment location: Where should the extension be deployed? For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).\n\n* SMTP connection URI: A URI representing an SMTP server that this extension can use to deliver email.\n\n* Email documents collection: What is the path to the collection that contains the documents used to build and send the emails?\n\n* Default FROM address: The email address to use as the sender's address (if it's not specified in the added email document).\n\n* Default REPLY-TO address: The email address to use as the reply-to address (if it's not specified in the added email document).\n\n* Users collection: A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection.\n\n* Templates collection: A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document.\n\n\n\n**CLOUD FUNCTIONS CREATED:**\n\n* processQueue (providers/cloud.firestore/eventTypes/document.write)\n\n\n\n**DETAILS**: Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\n\nThis extension uses other Firebase or Google Cloud Platform services which may have associated charges:\n\n- Cloud Firestore\n- Cloud Functions\n\nWhen you use Firebase Extensions, you're only charged for the underlying resources that you use. A paid-tier billing plan is only required if the extension uses a service that requires a paid-tier plan, for example calling to a Google Cloud Platform API or making outbound network requests to non-Google services. All Firebase services offer a free tier of usage. [Learn more about Firebase billing.](https://firebase.google.com/pricing)\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n\n\n\n**ACCESS REQUIRED**:\n\n\n\nThis extension will operate with the following project IAM roles:\n\n* datastore.user (Reason: Allows this extension to access Cloud Firestore to read and process added email documents.)\n","displayName":"Trigger Email","systemParams":[{"param":"firebaseextensions.v1beta.function/memory","label":"Function memory","type":"SELECT","description":"How much memory should be allocated to each function?","options":[{"value":"128","label":"128MB"},{"value":"256","label":"256MB"},{"value":"512","label":"512MB"},{"value":"1024","label":"1GB"},{"value":"2048","label":"2GB"},{"value":"4096","label":"4GB"},{"value":"8192","label":"8GB"}],"default":"256","advanced":true},{"param":"firebaseextensions.v1beta.function/timeoutSeconds","label":"Function timeout seconds","type":"STRING","description":"How long should functions run before timing out, in seconds (0-540)?","validationRegex":"^[1-9][0-9]{0,2}$","validationErrorMessage":"Function timeout should be an integer number of seconds, between 0 and 540","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnector","label":"VPC Connector","type":"STRING","description":"The VPC Network Connector that this cloud function can connect to. It can be either the fully-qualified URI, or the short name of the network connector resource. The format of this field is projects/*/locations/*/connectors/*.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/connectors/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnectorEgressSettings","label":"VPC Connector Egress settings","type":"SELECT","description":"Controls outgoing traffic when a VPC connector is configured","options":[{"value":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","label":"Unspecified"},{"value":"PRIVATE_RANGES_ONLY","label":"Private ranges only"},{"value":"ALL_TRAFFIC","label":"All traffic"}],"default":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","advanced":true},{"param":"firebaseextensions.v1beta.function/minInstances","label":"Minimum function instances","type":"STRING","description":"The minimum number of instances of each function to run at once (0-1000)","default":"0","validationRegex":"^[0-9]*$","validationErrorMessage":"Min instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/maxInstances","label":"Maximum function instances","type":"STRING","description":"The maximum number of instances of each function to run at once","default":"3000","validationRegex":"^[0-9]*$","validationErrorMessage":"Max instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/ingressSettings","label":"Function ingress settings","type":"SELECT","description":"Where should functions allow incoming traffic from?","options":[{"value":"ALLOW_ALL","label":"Allow all"},{"value":"ALLOW_INTERNAL_ONLY","label":"Allow internal only"},{"value":"ALLOW_INTERNAL_AND_GCLB","label":"Allow internal and GCLB"}],"advanced":true},{"param":"firebaseextensions.v1beta.function/labels","label":"Function labels","type":"STRING","description":"Do you wish to set any labels on this instance's Cloud Functions? If so, provide up to 55 labels in the format 'key1:value, key2:value'","validationRegex":"^([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63},\\s*)*([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63})$","advanced":true},{"param":"firebaseextensions.v1beta.function/kmsKeyName","label":"KMS key name","type":"STRING","description":"Do you want to use a Customer Managed Eencryption Key (CMEK) to encrypt this extension's functions? If you set this, you must also set a Docker repository encrypted by that key. See https://cloud.google.com/functions/docs/securing/cmek for more details.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/keyRings/([^/]+)/cryptoKeys/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/dockerRepository","label":"Docker repository","type":"STRING","description":"What Docker repository should be used to store function images? Default repository will be used if not set.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/repositories/([^/]+)$","advanced":true}]},"state":"DEPRECATED","hash":"ed8c6b25ddb6a9499f8c4b9e90985668a583cf54285bf80a35987a7ab989f04b","createTime":"2019-09-18T20:51:55.866666149Z","id":"0.1.0","releaseNotes":"Initial release of the _Trigger Email_ extension.\n","listing":{"state":"APPROVED"},"metrics":{"activeInstallCount":"100"}},{"name":"publishers/firebase/extensions/firestore-send-email/versions/0.1.0-rc.1","ref":"firebase/firestore-send-email@0.1.0-rc.1","spec":{"specVersion":"v1beta","name":"firestore-send-email","version":"0.1.0","description":"Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.","roles":[{"role":"datastore.user","reason":"Allows this extension to access Cloud Firestore to read and process added email documents."}],"resources":[{"name":"processQueue","type":"firebaseextensions.v1beta.function","propertiesYaml":"eventTrigger:\n  eventType: providers/cloud.firestore/eventTypes/document.write\n  resource: projects/${PROJECT_ID}/databases/(default)/documents/${MAIL_COLLECTION}/{id}\nlocation: ${LOCATION}\nsourceDirectory: .\n","description":"Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.","deletionPolicy":"DELETE"}],"billingRequired":true,"author":{"authorName":"Firebase","url":"https://firebase.google.com"},"contributors":[{"authorName":"Michael Bleigh","url":"https://github.com/mbleigh"}],"license":"Apache-2.0","releaseNotesUrl":"https://dev-partners.googlesource.com/samples/firebase/mods/+log","sourceUrl":"https://accounts.google.com/AccountChooser/signinchooser?service=gerritcodereview&continue=https%3A%2F%2Fdev-partners.googlesource.com%2Flogin%2Fsamples%2Ffirebase%2Fmods%2F%2B%2Fmaster%2Ffirestore-send-email","params":[{"param":"LOCATION","label":"Deployment location","type":"SELECT","description":"Where should the extension be deployed? For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).","required":true,"options":[{"value":"us-central1","label":"Iowa (us-central1)"},{"value":"us-east1","label":"South Carolina (us-east1)"},{"value":"us-east4","label":"Northern Virginia (us-east4)"},{"value":"europe-west1","label":"Belgium (europe-west1)"},{"value":"europe-west2","label":"London (europe-west2)"},{"value":"asia-east2","label":"Hong Kong (asia-east2)"},{"value":"asia-northeast1","label":"Tokyo (asia-northeast1)"}],"default":"us-central1"},{"param":"SMTP_CONNECTION_URI","label":"SMTP connection URI","type":"STRING","description":"A URI representing an SMTP server that this extension can use to deliver email.","required":true,"example":"smtps://username:password@smtp.hostname.com:465","validationRegex":"^smtps?://[^:]+:[^:]+@.*$","validationErrorMessage":"Invalid SMTP connection URI. Must be in the form `smtp(s)://username:password@hostname:port`."},{"param":"MAIL_COLLECTION","label":"Email documents collection","type":"STRING","description":"What is the path to the collection that contains the documents used to build and send the emails?","required":true,"default":"mail"},{"param":"DEFAULT_FROM","label":"Default FROM address","type":"STRING","description":"The email address to use as the sender's address (if it's not specified in the added email document)."},{"param":"DEFAULT_REPLY_TO","label":"Default REPLY-TO address","type":"STRING","description":"The email address to use as the reply-to address (if it's not specified in the added email document)."},{"param":"USERS_COLLECTION","label":"Users collection","type":"STRING","description":"A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection."},{"param":"TEMPLATES_COLLECTION","label":"Templates collection","type":"STRING","description":"A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document."}],"preinstallContent":"Use this extension to render and send emails that contain the information from documents added to Cloud Firestore.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example documment write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: ['someone@example.com'],\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nBecause each email is built from a Cloud Firestore document, you can reference information stored in _other_ Cloud Firestore documents and fields, like image URLs.\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery** and specify the Cloud Firestore collection where you'll add documents. If you want to use templates, you'll also need to specify the collection containing your template documents.\n\n### Billing\n\nThis extension uses other Firebase or Google Cloud Platform services which may have associated charges:\n\n- Cloud Firestore\n- Cloud Functions\n\nWhen you use Firebase Extensions, you're only charged for the underlying resources that you use. A paid-tier billing plan is only required if the extension uses a service that requires a paid-tier plan, for example calling to a Google Cloud Platform API or making outbound network requests to non-Google services. All Firebase services offer a free tier of usage. [Learn more about Firebase billing.](https://firebase.google.com/pricing)\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n\n","postinstallContent":"### See it in action\n\nTo test out this extension, add a document with a `to` field and a `message` field to the `${param:MAIL_COLLECTION}` collection in the [Firebase console][mail_collection] or using the [Firebase Admin SDK][admin_sdk]:\n\n```\nadmin.firestore().collection('${param:MAIL_COLLECTION}').add({\n  to: ['someone@example.com'],\n  message: {\n    subject: 'Hello from Firebase!',\n    text: 'This is the plaintext section of the email body.',\n    html: 'This is the <code>HTML</code> section of the email body.',\n  }\n}).then(() => console.log('Queued email for delivery!'));\n```\n\n### Use this extension\n\nAfter its installation, this extension monitors all document writes to the `${param:MAIL_COLLECTION}` collection. Email is delivered based on the contents of the document's fields. The top-level fields specify the email's sender and recipients. The `message` field contains the details of the email to deliver, including the email body.\n\n#### Sender and recipient fields\n\nThe top-level fields of the document supply the email sender and recipient information. Available fields are:\n\n* **from:** The sender's email address. If not specified in the document, uses the configured \"Default FROM address\" parameter.\n* **replyTo:** The reply-to email address. If not specified in the document, uses the configured \"Default REPLY-TO address\" parameter.\n* **to:** An array containing the recipient email addresses.\n* **toUids:** An array containing the recipient UIDs.\n* **cc:** An array containing the CC recipient email addresses.\n* **ccUids:** An array containing the CC recipient UIDs.\n* **bcc:** An array containing the BCC recipient email addresses.\n* **bccUids:** An array containing the BCC recipient UIDs.\n\n**NOTE:** The `toUids`, `ccUids`, and `bccUids` options deliver emails based on user UIDs keyed to email addresses within a Cloud Firestore document. To use these recipient options, you need to specify a Cloud Firestore collection for the extension's \"Users collection\" parameter. The extension can then read the `email` field for each UID specified in the `toUids`, `ccUids`, and/or `bccUids` fields.\n\n#### Message field\n\nThe `message` field of the document contains raw delivery information for the email. This field should generally only be populated by trusted code running in your own servers or Cloud Functions (refer to the \"Security rules and sending email\" section below).\n\nAvailable properties for the `message` field are:\n\n* **messageId:** A message ID header for the email, if any.\n* **subject:** The subject of the email.\n* **text:** The plaintext content of the email.\n* **html:** The HTML content of the email.\n* **amp:** The [AMP4EMAIL][amp4email] content of the email.\n\n#### Using templates\n\nIf you specified a \"Templates collection\" parameter during configuration of the extension, you can create and manage [Handlebars][handlebars] templates for your emails. Each document for a template should have a memorable ID that you use as the *template name* in the document that's written to your `${param:MAIL_COLLECTION}` collection.\n\nThe template document can include any of the following fields:\n\n* **subject:** A template string for the subject of the email.\n* **text:** A template string for the plaintext content of the email.\n* **html:** A template string for the HTML content of the email.\n* **amp:** A template string for the [AMP4EMAIL][amp4email] content of the email.\n\nAn example template might have an ID of `following` and content like:\n\n```js\n{\n  subject: \"@{{username}} is now following you!\",\n  html: \"Just writing to let you know that <code>@{{username}}</code> ({{name}}) is now following you.\"\n}\n```\n\nTo deliver email using templates, when adding documents to your `${param:MAIL_COLLECTION}` collection, include a `template` field with `name` and `data` properties. For example, using our `following` template from above:\n\n```js\nadmin.firestore().collection('${param:MAIL_COLLECTION}').add({\n  toUids: ['abc123'],\n  template: {\n    name: 'following',\n    data: {\n      username: 'ada',\n      name: 'Ada Lovelace'\n    }\n  }\n})\n```\n\n#### Security rules and sending email\n\nThis extension can be used to trigger email delivery directly from client applications. However, you should carefully control client access to the `${param:MAIL_COLLECTION}` collection to avoid potential abuse (you don't want users able to send arbitrary emails from your company's address!).\n\nSecurity rules will vary from application to application, but you should always make sure that emails are sent only to intended recipients and free-form content is kept to a minimum. Templates can help here -- you can use security rules to verify that the data being populated to the template matches your expectations for what a user should be allowed to trigger.\n\n#### Email delivery processing\n\nWhen a document is added to the `${param:MAIL_COLLECTION}` collection, the extension picks it up for email delivery processing. The extension creates and updates a `delivery` field in the document as it processes the email. The `delivery` field can be populated with the following fields:\n\n* **state:** One of `PENDING`, `PROCESSING`, `SUCCESS`, or `ERROR`.\n* **startTime:** Timestamp when email processing began.\n* **endTime:** Timestamp when email processing completed (that is, ended in either a `SUCCESS` or `ERROR` state).\n* **error:** If there was an email delivery error, an error message will be populated here.\n* **attempts:** Number of delivery attempts for this email.\n* **leaseExpireTime:** In case of a hang or timeout, the time at which a `PROCESSING` state should be considered an error.\n* **info:** After successful email delivery (to at least one address), this field will be populated with the following fields:\n  * **messageId:** The message ID of the delivered email.\n  * **accepted:** Array of email addresses to which the email was successfully delivered.\n  * **rejected:** Array of email addresses to which the email could not be delivered.\n  * **pending:** Array of email addresses that were temporarily rejected by SMTP.\n  * **response:** The last response from the SMTP server.\n\nAn email will typically go from `PENDING` to `PROCESSING` to either `SUCCESS` or `ERROR`. Once in the `SUCCESS` or `ERROR` state, additional changes to the document will not trigger the extension to send another email. To resend an email with document updates, you can change the `state` to `PENDING` or `RETRY`.\n\n#### Manual retries\n\nThere are instances in which email delivery fails in a recoverable fashion or the document can be manually corrected for proper delivery with minor modifications. While retries are not automatic, you can manually change the `state` in the `delivery` field to `RETRY` so that the extension attempts email delivery again (and increments the number of `attempts`).\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n\n[mail_collection]: https://console.firebase.google.com/project/_/database/firestore/data~2F${param:MAIL_COLLECTION}\n[admin_sdk]: https://firebase.google.com/docs/admin/setup\n[amp4email]: https://amp.dev/documentation/guides-and-tutorials/learn/email-spec/amp-email-format/\n[handlebars]: https://handlebarsjs.com/\n","readmeContent":"# firestore-send-email\n\n**VERSION**: 0.1.0\n\n**DESCRIPTION**: Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.\n\n\n\n**CONFIGURATION PARAMETERS:**\n\n* Deployment location: *Where should the extension be deployed? For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).*\n\n* SMTP connection URI: *A URI representing an SMTP server that this extension can use to deliver email.*\n\n* Email documents collection: *What is the path to the collection that contains the documents used to build and send the emails?*\n\n* Default FROM address: *The email address to use as the sender's address (if it's not specified in the added email document).*\n\n* Default REPLY-TO address: *The email address to use as the reply-to address (if it's not specified in the added email document).*\n\n* Users collection: *A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection.*\n\n* Templates collection: *A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document.*\n\n\n\n**NON-CLOUD FUNCTION RESOURCES CREATED**:\n\n* processQueue (firebaseextensions.v1beta.function)\n\n\n\n**DETAILS**: Use this extension to render and send emails that contain the information from documents added to Cloud Firestore.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example documment write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: ['someone@example.com'],\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nBecause each email is built from a Cloud Firestore document, you can reference information stored in _other_ Cloud Firestore documents and fields, like image URLs.\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery** and specify the Cloud Firestore collection where you'll add documents. If you want to use templates, you'll also need to specify the collection containing your template documents.\n\n### Billing\n\nThis extension uses other Firebase or Google Cloud Platform services which may have associated charges:\n\n- Cloud Firestore\n- Cloud Functions\n\nWhen you use Firebase Extensions, you're only charged for the underlying resources that you use. A paid-tier billing plan is only required if the extension uses a service that requires a paid-tier plan, for example calling to a Google Cloud Platform API or making outbound network requests to non-Google services. All Firebase services offer a free tier of usage. [Learn more about Firebase billing.](https://firebase.google.com/pricing)\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n\n\n\n**ACCESS REQUIRED**:\n\n\n\nThis extension will operate with the following project IAM roles:\n\n* datastore.user (Reason: Allows this extension to access Cloud Firestore to read and process added email documents.)\n","displayName":"Trigger Email","systemParams":[{"param":"firebaseextensions.v1beta.function/memory","label":"Function memory","type":"SELECT","description":"How much memory should be allocated to each function?","options":[{"value":"128","label":"128MB"},{"value":"256","label":"256MB"},{"value":"512","label":"512MB"},{"value":"1024","label":"1GB"},{"value":"2048","label":"2GB"},{"value":"4096","label":"4GB"},{"value":"8192","label":"8GB"}],"default":"256","advanced":true},{"param":"firebaseextensions.v1beta.function/timeoutSeconds","label":"Function timeout seconds","type":"STRING","description":"How long should functions run before timing out, in seconds (0-540)?","validationRegex":"^[1-9][0-9]{0,2}$","validationErrorMessage":"Function timeout should be an integer number of seconds, between 0 and 540","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnector","label":"VPC Connector","type":"STRING","description":"The VPC Network Connector that this cloud function can connect to. It can be either the fully-qualified URI, or the short name of the network connector resource. The format of this field is projects/*/locations/*/connectors/*.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/connectors/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnectorEgressSettings","label":"VPC Connector Egress settings","type":"SELECT","description":"Controls outgoing traffic when a VPC connector is configured","options":[{"value":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","label":"Unspecified"},{"value":"PRIVATE_RANGES_ONLY","label":"Private ranges only"},{"value":"ALL_TRAFFIC","label":"All traffic"}],"default":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","advanced":true},{"param":"firebaseextensions.v1beta.function/minInstances","label":"Minimum function instances","type":"STRING","description":"The minimum number of instances of each function to run at once (0-1000)","default":"0","validationRegex":"^[0-9]*$","validationErrorMessage":"Min instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/maxInstances","label":"Maximum function instances","type":"STRING","description":"The maximum number of instances of each function to run at once","default":"3000","validationRegex":"^[0-9]*$","validationErrorMessage":"Max instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/ingressSettings","label":"Function ingress settings","type":"SELECT","description":"Where should functions allow incoming traffic from?","options":[{"value":"ALLOW_ALL","label":"Allow all"},{"value":"ALLOW_INTERNAL_ONLY","label":"Allow internal only"},{"value":"ALLOW_INTERNAL_AND_GCLB","label":"Allow internal and GCLB"}],"advanced":true},{"param":"firebaseextensions.v1beta.function/labels","label":"Function labels","type":"STRING","description":"Do you wish to set any labels on this instance's Cloud Functions? If so, provide up to 55 labels in the format 'key1:value, key2:value'","validationRegex":"^([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63},\\s*)*([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63})$","advanced":true},{"param":"firebaseextensions.v1beta.function/kmsKeyName","label":"KMS key name","type":"STRING","description":"Do you want to use a Customer Managed Eencryption Key (CMEK) to encrypt this extension's functions? If you set this, you must also set a Docker repository encrypted by that key. See https://cloud.google.com/functions/docs/securing/cmek for more details.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/keyRings/([^/]+)/cryptoKeys/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/dockerRepository","label":"Docker repository","type":"STRING","description":"What Docker repository should be used to store function images? Default repository will be used if not set.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/repositories/([^/]+)$","advanced":true}]},"state":"PUBLISHED","createTime":"2019-09-12T20:41:20.273584183Z","id":"0.1.0-rc.1","listing":{"state":"UNLISTED"}},{"name":"publishers/firebase/extensions/firestore-send-email/versions/0.1.0-rc.2","ref":"firebase/firestore-send-email@0.1.0-rc.2","spec":{"specVersion":"v1beta","name":"firestore-send-email","version":"0.1.0","description":"Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.","roles":[{"role":"datastore.user","reason":"Allows this extension to access Cloud Firestore to read and process added email documents."}],"resources":[{"name":"processQueue","type":"firebaseextensions.v1beta.function","propertiesYaml":"eventTrigger:\n  eventType: providers/cloud.firestore/eventTypes/document.write\n  resource: projects/${PROJECT_ID}/databases/(default)/documents/${MAIL_COLLECTION}/{id}\nlocation: ${LOCATION}\nsourceDirectory: .\n","description":"Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.","deletionPolicy":"DELETE"}],"billingRequired":true,"author":{"authorName":"Firebase","url":"https://firebase.google.com"},"contributors":[{"authorName":"Michael Bleigh","url":"https://github.com/mbleigh"},{"authorName":"Elliot Hesp","email":"elliot@invertase.io","url":"https://github.com/ehesp"}],"license":"Apache-2.0","releaseNotesUrl":"https://github.com/firebase/extensions/commits/master","sourceUrl":"https://github.com/firebase/extensions/tree/master/firestore-send-email","params":[{"param":"LOCATION","label":"Deployment location","type":"SELECT","description":"Where should the extension be deployed? For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).","required":true,"options":[{"value":"us-central1","label":"Iowa (us-central1)"},{"value":"us-east1","label":"South Carolina (us-east1)"},{"value":"us-east4","label":"Northern Virginia (us-east4)"},{"value":"europe-west1","label":"Belgium (europe-west1)"},{"value":"europe-west2","label":"London (europe-west2)"},{"value":"asia-east2","label":"Hong Kong (asia-east2)"},{"value":"asia-northeast1","label":"Tokyo (asia-northeast1)"}],"default":"us-central1"},{"param":"SMTP_CONNECTION_URI","label":"SMTP connection URI","type":"STRING","description":"A URI representing an SMTP server that this extension can use to deliver email.","required":true,"example":"smtps://username:password@smtp.hostname.com:465","validationRegex":"^smtps?://[^:]+:[^:]+@.*$","validationErrorMessage":"Invalid SMTP connection URI. Must be in the form `smtp(s)://username:password@hostname:port`."},{"param":"MAIL_COLLECTION","label":"Email documents collection","type":"STRING","description":"What is the path to the collection that contains the documents used to build and send the emails?","required":true,"default":"mail","validationRegex":"^[^/]+(/[^/]+/[^/]+)*$","validationErrorMessage":"Must be a valid Cloud Firestore collection"},{"param":"DEFAULT_FROM","label":"Default FROM address","type":"STRING","description":"The email address to use as the sender's address (if it's not specified in the added email document).","required":true,"validationRegex":"^\\S+@\\S+\\.\\S+$","validationErrorMessage":"Must be a valid email address"},{"param":"DEFAULT_REPLY_TO","label":"Default REPLY-TO address","type":"STRING","description":"The email address to use as the reply-to address (if it's not specified in the added email document).","validationRegex":"^\\S+@\\S+\\.\\S+$","validationErrorMessage":"Must be a valid email address"},{"param":"USERS_COLLECTION","label":"Users collection","type":"STRING","description":"A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection.","validationRegex":"^[^/]+(/[^/]+/[^/]+)*$","validationErrorMessage":"Must be a valid Cloud Firestore collection"},{"param":"TEMPLATES_COLLECTION","label":"Templates collection","type":"STRING","description":"A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document.","validationRegex":"^[^/]+(/[^/]+/[^/]+)*$","validationErrorMessage":"Must be a valid Cloud Firestore collection"}],"preinstallContent":"Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\n\nThis extension uses other Firebase or Google Cloud Platform services which may have associated charges:\n- Cloud Firestore\n- Cloud Functions\n\nWhen you use Firebase Extensions, you're only charged for the underlying resources that you use. A paid-tier billing plan is only required if the extension uses a service that requires a paid-tier plan, for example calling to a Google Cloud Platform API or making outbound network requests to non-Google services. All Firebase services offer a free tier of usage. [Learn more about Firebase billing.](https://firebase.google.com/pricing)\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n","postinstallContent":"### See it in action\n\nYou can test out this extension right away:\n\n1.  Go to your [Cloud Firestore dashboard](https://console.firebase.google.com/project/${param:PROJECT_ID}/database/firestore/data).\n\n1.  If it doesn't already exist, create the collection you specified during installation: `${param:MAIL_COLLECTION}`.\n\n1.  Add a document with a `to` field and a `message` field with the following content:\n\n    ```\n    to: ['someone@example.com'],\n    message: {\n      subject: 'Hello from Firebase!',\n      text: 'This is the plaintext section of the email body.',\n      html: 'This is the <code>HTML</code> section of the email body.',\n    }\n    ```\n\n1.  In a few seconds, you'll see a `delivery` field appear in the document. The field will update as the extension processes the email.\n\n**Note:** You can also use the [Firebase Admin SDK][admin_sdk] to add a document:\n```\nadmin.firestore().collection('${param:MAIL_COLLECTION}').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    text: 'This is the plaintext section of the email body.',\n    html: 'This is the <code>HTML</code> section of the email body.',\n  }\n}).then(() => console.log('Queued email for delivery!'));\n```\n\n### Using this extension\n\nAfter its installation, this extension monitors all document writes to the `${param:MAIL_COLLECTION}` collection. Email is delivered based on the contents of the document's fields. The top-level fields specify the email's sender and recipients. The `message` field contains the details of the email to deliver, including the email body.\n\n#### Sender and recipient fields\n\nThe top-level fields of the document supply the email sender and recipient information. Available fields are:\n\n* **from:** The sender's email address. If not specified in the document, uses the configured \"Default FROM address\" parameter.\n* **replyTo:** The reply-to email address. If not specified in the document, uses the configured \"Default REPLY-TO address\" parameter.\n* **to:** A single recipient email address or an array containing multiple recipient email addresses.\n* **toUids:** An array containing the recipient UIDs.\n* **cc:** A single recipient email address or an array containing multiple recipient email addresses.\n* **ccUids:** An array containing the CC recipient UIDs.\n* **bcc:** A single recipient email address or an array containing multiple recipient email addresses.\n* **bccUids:** An array containing the BCC recipient UIDs.\n\n**NOTE:** The `toUids`, `ccUids`, and `bccUids` options deliver emails based on user UIDs keyed to email addresses within a Cloud Firestore document. To use these recipient options, you need to specify a Cloud Firestore collection for the extension's \"Users collection\" parameter. The extension can then read the `email` field for each UID specified in the `toUids`, `ccUids`, and/or `bccUids` fields.\n\n#### Message field\n\nThe `message` field of the document contains raw delivery information for the email. This field should generally only be populated by trusted code running in your own servers or Cloud Functions (refer to the \"Security rules and sending email\" section below).\n\nAvailable properties for the `message` field are:\n\n* **messageId:** A message ID header for the email, if any.\n* **subject:** The subject of the email.\n* **text:** The plaintext content of the email.\n* **html:** The HTML content of the email.\n* **amp:** The [AMP4EMAIL][amp4email] content of the email.\n\n#### Using templates\n\nIf you specified a \"Templates collection\" parameter during configuration of the extension, you can create and manage [Handlebars][handlebars] templates for your emails. Each document for a template should have a memorable ID that you use as the *template name* in the document that's written to your `${param:MAIL_COLLECTION}` collection.\n\nThe template document can include any of the following fields:\n* **subject:** A template string for the subject of the email.\n* **text:** A template string for the plaintext content of the email.\n* **html:** A template string for the HTML content of the email.\n* **amp:** A template string for the [AMP4EMAIL][amp4email] content of the email.\n\nAn example template might have an ID of `following` and content like:\n\n```js\n{\n  subject: \"@{{username}} is now following you!\",\n  html: \"Just writing to let you know that <code>@{{username}}</code> ({{name}}) is now following you.\"\n}\n```\n\nTo deliver email using templates, when adding documents to your `${param:MAIL_COLLECTION}` collection, include a `template` field with `name` and `data` properties. For example, using our `following` template from above:\n\n```js\nadmin.firestore().collection('${param:MAIL_COLLECTION}').add({\n  toUids: ['abc123'],\n  template: {\n    name: 'following',\n    data: {\n      username: 'ada',\n      name: 'Ada Lovelace'\n    }\n  }\n})\n```\n\n#### Security rules and sending email\n\nThis extension can be used to trigger email delivery directly from client applications. However, you should carefully control client access to the `${param:MAIL_COLLECTION}` collection to avoid potential abuse (you don't want users able to send arbitrary emails from your company's address!).\n\nSecurity rules will vary from application to application, but you should always make sure that emails are sent only to intended recipients and free-form content is kept to a minimum. Templates can help here -- you can use security rules to verify that the data being populated to the template matches your expectations for what a user should be allowed to trigger.\n\n#### Email delivery processing\n\nWhen a document is added to the `${param:MAIL_COLLECTION}` collection, the extension picks it up for email delivery processing. The extension creates and updates a `delivery` field in the document as it processes the email. The `delivery` field can be populated with the following fields:\n\n* **state:** One of `PENDING`, `PROCESSING`, `SUCCESS`, or `ERROR`.\n* **startTime:** Timestamp when email processing began.\n* **endTime:** Timestamp when email processing completed (that is, ended in either a `SUCCESS` or `ERROR` state).\n* **error:** If there was an email delivery error, an error message will be populated here.\n* **attempts:** Number of delivery attempts for this email.\n* **leaseExpireTime:** In case of a hang or timeout, the time at which a `PROCESSING` state should be considered an error.\n* **info:** After successful email delivery (to at least one address), this field will be populated with the following fields:\n  * **messageId:** The message ID of the delivered email.\n  * **accepted:** Array of email addresses to which the email was successfully delivered.\n  * **rejected:** Array of email addresses to which the email could not be delivered.\n  * **pending:** Array of email addresses that were temporarily rejected by SMTP.\n  * **response:** The last response from the SMTP server.\n\nAn email will typically go from `PENDING` to `PROCESSING` to either `SUCCESS` or `ERROR`. Once in the `SUCCESS` or `ERROR` state, additional changes to the document will not trigger the extension to send another email. To resend an email with document updates, you can change the `state` to `PENDING` or `RETRY`.\n\n#### Manual retries\n\nThere are instances in which email delivery fails in a recoverable fashion or the document can be manually corrected for proper delivery with minor modifications. While retries are not automatic, you can manually change the `state` in the `delivery` field to `RETRY` so that the extension attempts email delivery again (and increments the number of `attempts`).\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n\n[mail_collection]: https://console.firebase.google.com/project/_/database/firestore/data~2F${param:MAIL_COLLECTION}\n[admin_sdk]: https://firebase.google.com/docs/admin/setup\n[amp4email]: https://amp.dev/documentation/guides-and-tutorials/learn/email-spec/amp-email-format/\n[handlebars]: https://handlebarsjs.com/\n","readmeContent":"# firestore-send-email\n\n**VERSION**: 0.1.0\n\n**DESCRIPTION**: Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.\n\n\n\n**CONFIGURATION PARAMETERS:**\n\n* Deployment location: Where should the extension be deployed? For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).\n\n* SMTP connection URI: A URI representing an SMTP server that this extension can use to deliver email.\n\n* Email documents collection: What is the path to the collection that contains the documents used to build and send the emails?\n\n* Default FROM address: The email address to use as the sender's address (if it's not specified in the added email document).\n\n* Default REPLY-TO address: The email address to use as the reply-to address (if it's not specified in the added email document).\n\n* Users collection: A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection.\n\n* Templates collection: A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document.\n\n\n\n**CLOUD FUNCTIONS CREATED:**\n\n* processQueue (providers/cloud.firestore/eventTypes/document.write)\n\n\n\n**DETAILS**: Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\n\nThis extension uses other Firebase or Google Cloud Platform services which may have associated charges:\n- Cloud Firestore\n- Cloud Functions\n\nWhen you use Firebase Extensions, you're only charged for the underlying resources that you use. A paid-tier billing plan is only required if the extension uses a service that requires a paid-tier plan, for example calling to a Google Cloud Platform API or making outbound network requests to non-Google services. All Firebase services offer a free tier of usage. [Learn more about Firebase billing.](https://firebase.google.com/pricing)\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n\n\n\n**ACCESS REQUIRED**:\n\n\n\nThis extension will operate with the following project IAM roles:\n\n* datastore.user (Reason: Allows this extension to access Cloud Firestore to read and process added email documents.)\n","displayName":"Trigger Email","systemParams":[{"param":"firebaseextensions.v1beta.function/memory","label":"Function memory","type":"SELECT","description":"How much memory should be allocated to each function?","options":[{"value":"128","label":"128MB"},{"value":"256","label":"256MB"},{"value":"512","label":"512MB"},{"value":"1024","label":"1GB"},{"value":"2048","label":"2GB"},{"value":"4096","label":"4GB"},{"value":"8192","label":"8GB"}],"default":"256","advanced":true},{"param":"firebaseextensions.v1beta.function/timeoutSeconds","label":"Function timeout seconds","type":"STRING","description":"How long should functions run before timing out, in seconds (0-540)?","validationRegex":"^[1-9][0-9]{0,2}$","validationErrorMessage":"Function timeout should be an integer number of seconds, between 0 and 540","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnector","label":"VPC Connector","type":"STRING","description":"The VPC Network Connector that this cloud function can connect to. It can be either the fully-qualified URI, or the short name of the network connector resource. The format of this field is projects/*/locations/*/connectors/*.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/connectors/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnectorEgressSettings","label":"VPC Connector Egress settings","type":"SELECT","description":"Controls outgoing traffic when a VPC connector is configured","options":[{"value":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","label":"Unspecified"},{"value":"PRIVATE_RANGES_ONLY","label":"Private ranges only"},{"value":"ALL_TRAFFIC","label":"All traffic"}],"default":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","advanced":true},{"param":"firebaseextensions.v1beta.function/minInstances","label":"Minimum function instances","type":"STRING","description":"The minimum number of instances of each function to run at once (0-1000)","default":"0","validationRegex":"^[0-9]*$","validationErrorMessage":"Min instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/maxInstances","label":"Maximum function instances","type":"STRING","description":"The maximum number of instances of each function to run at once","default":"3000","validationRegex":"^[0-9]*$","validationErrorMessage":"Max instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/ingressSettings","label":"Function ingress settings","type":"SELECT","description":"Where should functions allow incoming traffic from?","options":[{"value":"ALLOW_ALL","label":"Allow all"},{"value":"ALLOW_INTERNAL_ONLY","label":"Allow internal only"},{"value":"ALLOW_INTERNAL_AND_GCLB","label":"Allow internal and GCLB"}],"advanced":true},{"param":"firebaseextensions.v1beta.function/labels","label":"Function labels","type":"STRING","description":"Do you wish to set any labels on this instance's Cloud Functions? If so, provide up to 55 labels in the format 'key1:value, key2:value'","validationRegex":"^([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63},\\s*)*([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63})$","advanced":true},{"param":"firebaseextensions.v1beta.function/kmsKeyName","label":"KMS key name","type":"STRING","description":"Do you want to use a Customer Managed Eencryption Key (CMEK) to encrypt this extension's functions? If you set this, you must also set a Docker repository encrypted by that key. See https://cloud.google.com/functions/docs/securing/cmek for more details.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/keyRings/([^/]+)/cryptoKeys/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/dockerRepository","label":"Docker repository","type":"STRING","description":"What Docker repository should be used to store function images? Default repository will be used if not set.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/repositories/([^/]+)$","advanced":true}]},"state":"PUBLISHED","createTime":"2019-09-18T16:45:14.006696166Z","id":"0.1.0-rc.2","listing":{"state":"UNLISTED"}},{"name":"publishers/firebase/extensions/firestore-send-email/versions/0.1.0-rc.3","ref":"firebase/firestore-send-email@0.1.0-rc.3","spec":{"specVersion":"v1beta","name":"firestore-send-email","version":"0.1.0","description":"Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.","roles":[{"role":"datastore.user","reason":"Allows this extension to access Cloud Firestore to read and process added email documents."}],"resources":[{"name":"processQueue","type":"firebaseextensions.v1beta.function","propertiesYaml":"eventTrigger:\n  eventType: providers/cloud.firestore/eventTypes/document.write\n  resource: projects/${PROJECT_ID}/databases/(default)/documents/${MAIL_COLLECTION}/{id}\nlocation: ${LOCATION}\nsourceDirectory: .\n","description":"Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.","deletionPolicy":"DELETE"}],"billingRequired":true,"author":{"authorName":"Firebase","url":"https://firebase.google.com"},"contributors":[{"authorName":"Michael Bleigh","url":"https://github.com/mbleigh"},{"authorName":"Elliot Hesp","email":"elliot@invertase.io","url":"https://github.com/ehesp"}],"license":"Apache-2.0","releaseNotesUrl":"https://github.com/firebase/extensions/commits/master","sourceUrl":"https://github.com/firebase/extensions/tree/master/firestore-send-email","params":[{"param":"LOCATION","label":"Deployment location","type":"SELECT","description":"Where should the extension be deployed? For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).","required":true,"options":[{"value":"us-central1","label":"Iowa (us-central1)"},{"value":"us-east1","label":"South Carolina (us-east1)"},{"value":"us-east4","label":"Northern Virginia (us-east4)"},{"value":"europe-west1","label":"Belgium (europe-west1)"},{"value":"europe-west2","label":"London (europe-west2)"},{"value":"asia-east2","label":"Hong Kong (asia-east2)"},{"value":"asia-northeast1","label":"Tokyo (asia-northeast1)"}],"default":"us-central1"},{"param":"SMTP_CONNECTION_URI","label":"SMTP connection URI","type":"STRING","description":"A URI representing an SMTP server that this extension can use to deliver email.","required":true,"example":"smtps://username:password@smtp.hostname.com:465","validationRegex":"^smtps?://[^:]+:[^:]+@.*$","validationErrorMessage":"Invalid SMTP connection URI. Must be in the form `smtp(s)://username:password@hostname:port`."},{"param":"MAIL_COLLECTION","label":"Email documents collection","type":"STRING","description":"What is the path to the collection that contains the documents used to build and send the emails?","required":true,"default":"mail","validationRegex":"^[^/]+(/[^/]+/[^/]+)*$","validationErrorMessage":"Must be a valid Cloud Firestore collection"},{"param":"DEFAULT_FROM","label":"Default FROM address","type":"STRING","description":"The email address to use as the sender's address (if it's not specified in the added email document).","required":true,"validationRegex":"^\\S+@\\S+\\.\\S+$","validationErrorMessage":"Must be a valid email address"},{"param":"DEFAULT_REPLY_TO","label":"Default REPLY-TO address","type":"STRING","description":"The email address to use as the reply-to address (if it's not specified in the added email document)."},{"param":"USERS_COLLECTION","label":"Users collection","type":"STRING","description":"A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection."},{"param":"TEMPLATES_COLLECTION","label":"Templates collection","type":"STRING","description":"A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document."}],"preinstallContent":"Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\n\nThis extension uses other Firebase or Google Cloud Platform services which may have associated charges:\n- Cloud Firestore\n- Cloud Functions\n\nWhen you use Firebase Extensions, you're only charged for the underlying resources that you use. A paid-tier billing plan is only required if the extension uses a service that requires a paid-tier plan, for example calling to a Google Cloud Platform API or making outbound network requests to non-Google services. All Firebase services offer a free tier of usage. [Learn more about Firebase billing.](https://firebase.google.com/pricing)\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n","postinstallContent":"### See it in action\n\nYou can test out this extension right away:\n\n1.  Go to your [Cloud Firestore dashboard](https://console.firebase.google.com/project/${param:PROJECT_ID}/database/firestore/data).\n\n1.  If it doesn't already exist, create the collection you specified during installation: `${param:MAIL_COLLECTION}`.\n\n1.  Add a document with a `to` field and a `message` field with the following content:\n\n    ```\n    to: ['someone@example.com'],\n    message: {\n      subject: 'Hello from Firebase!',\n      text: 'This is the plaintext section of the email body.',\n      html: 'This is the <code>HTML</code> section of the email body.',\n    }\n    ```\n\n1.  In a few seconds, you'll see a `delivery` field appear in the document. The field will update as the extension processes the email.\n\n**Note:** You can also use the [Firebase Admin SDK][admin_sdk] to add a document:\n```\nadmin.firestore().collection('${param:MAIL_COLLECTION}').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    text: 'This is the plaintext section of the email body.',\n    html: 'This is the <code>HTML</code> section of the email body.',\n  }\n}).then(() => console.log('Queued email for delivery!'));\n```\n\n### Using this extension\n\nAfter its installation, this extension monitors all document writes to the `${param:MAIL_COLLECTION}` collection. Email is delivered based on the contents of the document's fields. The top-level fields specify the email's sender and recipients. The `message` field contains the details of the email to deliver, including the email body.\n\n#### Sender and recipient fields\n\nThe top-level fields of the document supply the email sender and recipient information. Available fields are:\n\n* **from:** The sender's email address. If not specified in the document, uses the configured \"Default FROM address\" parameter.\n* **replyTo:** The reply-to email address. If not specified in the document, uses the configured \"Default REPLY-TO address\" parameter.\n* **to:** A single recipient email address or an array containing multiple recipient email addresses.\n* **toUids:** An array containing the recipient UIDs.\n* **cc:** A single recipient email address or an array containing multiple recipient email addresses.\n* **ccUids:** An array containing the CC recipient UIDs.\n* **bcc:** A single recipient email address or an array containing multiple recipient email addresses.\n* **bccUids:** An array containing the BCC recipient UIDs.\n\n**NOTE:** The `toUids`, `ccUids`, and `bccUids` options deliver emails based on user UIDs keyed to email addresses within a Cloud Firestore document. To use these recipient options, you need to specify a Cloud Firestore collection for the extension's \"Users collection\" parameter. The extension can then read the `email` field for each UID specified in the `toUids`, `ccUids`, and/or `bccUids` fields.\n\n#### Message field\n\nThe `message` field of the document contains raw delivery information for the email. This field should generally only be populated by trusted code running in your own servers or Cloud Functions (refer to the \"Security rules and sending email\" section below).\n\nAvailable properties for the `message` field are:\n\n* **messageId:** A message ID header for the email, if any.\n* **subject:** The subject of the email.\n* **text:** The plaintext content of the email.\n* **html:** The HTML content of the email.\n* **amp:** The [AMP4EMAIL][amp4email] content of the email.\n\n#### Using templates\n\nIf you specified a \"Templates collection\" parameter during configuration of the extension, you can create and manage [Handlebars][handlebars] templates for your emails. Each document for a template should have a memorable ID that you use as the *template name* in the document that's written to your `${param:MAIL_COLLECTION}` collection.\n\nThe template document can include any of the following fields:\n* **subject:** A template string for the subject of the email.\n* **text:** A template string for the plaintext content of the email.\n* **html:** A template string for the HTML content of the email.\n* **amp:** A template string for the [AMP4EMAIL][amp4email] content of the email.\n\nAn example template might have an ID of `following` and content like:\n\n```js\n{\n  subject: \"@{{username}} is now following you!\",\n  html: \"Just writing to let you know that <code>@{{username}}</code> ({{name}}) is now following you.\"\n}\n```\n\nTo deliver email using templates, when adding documents to your `${param:MAIL_COLLECTION}` collection, include a `template` field with `name` and `data` properties. For example, using our `following` template from above:\n\n```js\nadmin.firestore().collection('${param:MAIL_COLLECTION}').add({\n  toUids: ['abc123'],\n  template: {\n    name: 'following',\n    data: {\n      username: 'ada',\n      name: 'Ada Lovelace'\n    }\n  }\n})\n```\n\n#### Security rules and sending email\n\nThis extension can be used to trigger email delivery directly from client applications. However, you should carefully control client access to the `${param:MAIL_COLLECTION}` collection to avoid potential abuse (you don't want users able to send arbitrary emails from your company's address!).\n\nSecurity rules will vary from application to application, but you should always make sure that emails are sent only to intended recipients and free-form content is kept to a minimum. Templates can help here -- you can use security rules to verify that the data being populated to the template matches your expectations for what a user should be allowed to trigger.\n\n#### Email delivery processing\n\nWhen a document is added to the `${param:MAIL_COLLECTION}` collection, the extension picks it up for email delivery processing. The extension creates and updates a `delivery` field in the document as it processes the email. The `delivery` field can be populated with the following fields:\n\n* **state:** One of `PENDING`, `PROCESSING`, `SUCCESS`, or `ERROR`.\n* **startTime:** Timestamp when email processing began.\n* **endTime:** Timestamp when email processing completed (that is, ended in either a `SUCCESS` or `ERROR` state).\n* **error:** If there was an email delivery error, an error message will be populated here.\n* **attempts:** Number of delivery attempts for this email.\n* **leaseExpireTime:** In case of a hang or timeout, the time at which a `PROCESSING` state should be considered an error.\n* **info:** After successful email delivery (to at least one address), this field will be populated with the following fields:\n  * **messageId:** The message ID of the delivered email.\n  * **accepted:** Array of email addresses to which the email was successfully delivered.\n  * **rejected:** Array of email addresses to which the email could not be delivered.\n  * **pending:** Array of email addresses that were temporarily rejected by SMTP.\n  * **response:** The last response from the SMTP server.\n\nAn email will typically go from `PENDING` to `PROCESSING` to either `SUCCESS` or `ERROR`. Once in the `SUCCESS` or `ERROR` state, additional changes to the document will not trigger the extension to send another email. To resend an email with document updates, you can change the `state` to `PENDING` or `RETRY`.\n\n#### Manual retries\n\nThere are instances in which email delivery fails in a recoverable fashion or the document can be manually corrected for proper delivery with minor modifications. While retries are not automatic, you can manually change the `state` in the `delivery` field to `RETRY` so that the extension attempts email delivery again (and increments the number of `attempts`).\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n\n[mail_collection]: https://console.firebase.google.com/project/_/database/firestore/data~2F${param:MAIL_COLLECTION}\n[admin_sdk]: https://firebase.google.com/docs/admin/setup\n[amp4email]: https://amp.dev/documentation/guides-and-tutorials/learn/email-spec/amp-email-format/\n[handlebars]: https://handlebarsjs.com/\n","readmeContent":"# firestore-send-email\n\n**VERSION**: 0.1.0\n\n**DESCRIPTION**: Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.\n\n\n\n**CONFIGURATION PARAMETERS:**\n\n* Deployment location: Where should the extension be deployed? For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).\n\n* SMTP connection URI: A URI representing an SMTP server that this extension can use to deliver email.\n\n* Email documents collection: What is the path to the collection that contains the documents used to build and send the emails?\n\n* Default FROM address: The email address to use as the sender's address (if it's not specified in the added email document).\n\n* Default REPLY-TO address: The email address to use as the reply-to address (if it's not specified in the added email document).\n\n* Users collection: A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection.\n\n* Templates collection: A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document.\n\n\n\n**CLOUD FUNCTIONS CREATED:**\n\n* processQueue (providers/cloud.firestore/eventTypes/document.write)\n\n\n\n**DETAILS**: Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\n\nThis extension uses other Firebase or Google Cloud Platform services which may have associated charges:\n- Cloud Firestore\n- Cloud Functions\n\nWhen you use Firebase Extensions, you're only charged for the underlying resources that you use. A paid-tier billing plan is only required if the extension uses a service that requires a paid-tier plan, for example calling to a Google Cloud Platform API or making outbound network requests to non-Google services. All Firebase services offer a free tier of usage. [Learn more about Firebase billing.](https://firebase.google.com/pricing)\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n\n\n\n**ACCESS REQUIRED**:\n\n\n\nThis extension will operate with the following project IAM roles:\n\n* datastore.user (Reason: Allows this extension to access Cloud Firestore to read and process added email documents.)\n","displayName":"Trigger Email","systemParams":[{"param":"firebaseextensions.v1beta.function/memory","label":"Function memory","type":"SELECT","description":"How much memory should be allocated to each function?","options":[{"value":"128","label":"128MB"},{"value":"256","label":"256MB"},{"value":"512","label":"512MB"},{"value":"1024","label":"1GB"},{"value":"2048","label":"2GB"},{"value":"4096","label":"4GB"},{"value":"8192","label":"8GB"}],"default":"256","advanced":true},{"param":"firebaseextensions.v1beta.function/timeoutSeconds","label":"Function timeout seconds","type":"STRING","description":"How long should functions run before timing out, in seconds (0-540)?","validationRegex":"^[1-9][0-9]{0,2}$","validationErrorMessage":"Function timeout should be an integer number of seconds, between 0 and 540","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnector","label":"VPC Connector","type":"STRING","description":"The VPC Network Connector that this cloud function can connect to. It can be either the fully-qualified URI, or the short name of the network connector resource. The format of this field is projects/*/locations/*/connectors/*.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/connectors/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnectorEgressSettings","label":"VPC Connector Egress settings","type":"SELECT","description":"Controls outgoing traffic when a VPC connector is configured","options":[{"value":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","label":"Unspecified"},{"value":"PRIVATE_RANGES_ONLY","label":"Private ranges only"},{"value":"ALL_TRAFFIC","label":"All traffic"}],"default":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","advanced":true},{"param":"firebaseextensions.v1beta.function/minInstances","label":"Minimum function instances","type":"STRING","description":"The minimum number of instances of each function to run at once (0-1000)","default":"0","validationRegex":"^[0-9]*$","validationErrorMessage":"Min instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/maxInstances","label":"Maximum function instances","type":"STRING","description":"The maximum number of instances of each function to run at once","default":"3000","validationRegex":"^[0-9]*$","validationErrorMessage":"Max instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/ingressSettings","label":"Function ingress settings","type":"SELECT","description":"Where should functions allow incoming traffic from?","options":[{"value":"ALLOW_ALL","label":"Allow all"},{"value":"ALLOW_INTERNAL_ONLY","label":"Allow internal only"},{"value":"ALLOW_INTERNAL_AND_GCLB","label":"Allow internal and GCLB"}],"advanced":true},{"param":"firebaseextensions.v1beta.function/labels","label":"Function labels","type":"STRING","description":"Do you wish to set any labels on this instance's Cloud Functions? If so, provide up to 55 labels in the format 'key1:value, key2:value'","validationRegex":"^([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63},\\s*)*([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63})$","advanced":true},{"param":"firebaseextensions.v1beta.function/kmsKeyName","label":"KMS key name","type":"STRING","description":"Do you want to use a Customer Managed Eencryption Key (CMEK) to encrypt this extension's functions? If you set this, you must also set a Docker repository encrypted by that key. See https://cloud.google.com/functions/docs/securing/cmek for more details.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/keyRings/([^/]+)/cryptoKeys/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/dockerRepository","label":"Docker repository","type":"STRING","description":"What Docker repository should be used to store function images? Default repository will be used if not set.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/repositories/([^/]+)$","advanced":true}]},"state":"PUBLISHED","createTime":"2019-09-18T18:15:31.096159191Z","id":"0.1.0-rc.3","listing":{"state":"UNLISTED"}},{"name":"publishers/firebase/extensions/firestore-send-email/versions/0.1.1","ref":"firebase/firestore-send-email@0.1.1","spec":{"specVersion":"v1beta","name":"firestore-send-email","version":"0.1.1","description":"Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.","roles":[{"role":"datastore.user","reason":"Allows this extension to access Cloud Firestore to read and process added email documents."}],"resources":[{"name":"processQueue","type":"firebaseextensions.v1beta.function","propertiesYaml":"eventTrigger:\n  eventType: providers/cloud.firestore/eventTypes/document.write\n  resource: projects/${PROJECT_ID}/databases/(default)/documents/${MAIL_COLLECTION}/{id}\nlocation: ${LOCATION}\nsourceDirectory: .\n","description":"Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.","deletionPolicy":"DELETE"}],"billingRequired":true,"author":{"authorName":"Firebase","url":"https://firebase.google.com"},"contributors":[{"authorName":"Michael Bleigh","url":"https://github.com/mbleigh"},{"authorName":"Elliot Hesp","email":"elliot@invertase.io","url":"https://github.com/ehesp"}],"license":"Apache-2.0","releaseNotesUrl":"https://github.com/firebase/extensions/releases","sourceUrl":"https://github.com/firebase/extensions/tree/master/firestore-send-email","params":[{"param":"LOCATION","label":"Deployment location","type":"SELECT","description":"Where should the extension be deployed? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).","required":true,"options":[{"value":"us-central1","label":"Iowa (us-central1)"},{"value":"us-east1","label":"South Carolina (us-east1)"},{"value":"us-east4","label":"Northern Virginia (us-east4)"},{"value":"europe-west1","label":"Belgium (europe-west1)"},{"value":"europe-west2","label":"London (europe-west2)"},{"value":"asia-east2","label":"Hong Kong (asia-east2)"},{"value":"asia-northeast1","label":"Tokyo (asia-northeast1)"}],"default":"us-central1","immutable":true},{"param":"SMTP_CONNECTION_URI","label":"SMTP connection URI","type":"STRING","description":"A URI representing an SMTP server that this extension can use to deliver email.","required":true,"example":"smtps://username:password@smtp.hostname.com:465","validationRegex":"^smtps?://[^:]+:[^:]+@.*$","validationErrorMessage":"Invalid SMTP connection URI. Must be in the form `smtp(s)://username:password@hostname:port`."},{"param":"MAIL_COLLECTION","label":"Email documents collection","type":"STRING","description":"What is the path to the collection that contains the documents used to build and send the emails?","required":true,"default":"mail","validationRegex":"^[^/]+(/[^/]+/[^/]+)*$","validationErrorMessage":"Must be a valid Cloud Firestore collection"},{"param":"DEFAULT_FROM","label":"Default FROM address","type":"STRING","description":"The email address to use as the sender's address (if it's not specified in the added email document).","required":true,"validationRegex":"^\\S+@\\S+\\.\\S+$","validationErrorMessage":"Must be a valid email address"},{"param":"DEFAULT_REPLY_TO","label":"Default REPLY-TO address","type":"STRING","description":"The email address to use as the reply-to address (if it's not specified in the added email document)."},{"param":"USERS_COLLECTION","label":"Users collection","type":"STRING","description":"A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection."},{"param":"TEMPLATES_COLLECTION","label":"Templates collection","type":"STRING","description":"A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document."}],"preinstallContent":"Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\n\nThis extension uses other Firebase or Google Cloud Platform services which may have associated charges:\n\n- Cloud Firestore\n- Cloud Functions\n\nWhen you use Firebase Extensions, you're only charged for the underlying resources that you use. A paid-tier billing plan is only required if the extension uses a service that requires a paid-tier plan, for example calling to a Google Cloud Platform API or making outbound network requests to non-Google services. All Firebase services offer a free tier of usage. [Learn more about Firebase billing.](https://firebase.google.com/pricing)\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n","postinstallContent":"### See it in action\n\nYou can test out this extension right away:\n\n1.  Go to your [Cloud Firestore dashboard](https://console.firebase.google.com/project/${param:PROJECT_ID}/database/firestore/data).\n\n1.  If it doesn't already exist, create the collection you specified during installation: `${param:MAIL_COLLECTION}`.\n\n1.  Add a document with a `to` field and a `message` field with the following content:\n\n    ```\n    to: ['someone@example.com'],\n    message: {\n      subject: 'Hello from Firebase!',\n      text: 'This is the plaintext section of the email body.',\n      html: 'This is the <code>HTML</code> section of the email body.',\n    }\n    ```\n\n1.  In a few seconds, you'll see a `delivery` field appear in the document. The field will update as the extension processes the email.\n\n**Note:** You can also use the [Firebase Admin SDK][admin_sdk] to add a document:\n```\nadmin.firestore().collection('${param:MAIL_COLLECTION}').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    text: 'This is the plaintext section of the email body.',\n    html: 'This is the <code>HTML</code> section of the email body.',\n  }\n}).then(() => console.log('Queued email for delivery!'));\n```\n\n### Using this extension\n\nAfter its installation, this extension monitors all document writes to the `${param:MAIL_COLLECTION}` collection. Email is delivered based on the contents of the document's fields. The top-level fields specify the email's sender and recipients. The `message` field contains the details of the email to deliver, including the email body.\n\n#### Sender and recipient fields\n\nThe top-level fields of the document supply the email sender and recipient information. Available fields are:\n\n* **from:** The sender's email address. If not specified in the document, uses the configured \"Default FROM address\" parameter.\n* **replyTo:** The reply-to email address. If not specified in the document, uses the configured \"Default REPLY-TO address\" parameter.\n* **to:** A single recipient email address or an array containing multiple recipient email addresses.\n* **toUids:** An array containing the recipient UIDs.\n* **cc:** A single recipient email address or an array containing multiple recipient email addresses.\n* **ccUids:** An array containing the CC recipient UIDs.\n* **bcc:** A single recipient email address or an array containing multiple recipient email addresses.\n* **bccUids:** An array containing the BCC recipient UIDs.\n\n**NOTE:** The `toUids`, `ccUids`, and `bccUids` options deliver emails based on user UIDs keyed to email addresses within a Cloud Firestore document. To use these recipient options, you need to specify a Cloud Firestore collection for the extension's \"Users collection\" parameter. The extension can then read the `email` field for each UID specified in the `toUids`, `ccUids`, and/or `bccUids` fields.\n\n#### Message field\n\nThe `message` field of the document contains raw delivery information for the email. This field should generally only be populated by trusted code running in your own servers or Cloud Functions (refer to the \"Security rules and sending email\" section below).\n\nAvailable properties for the `message` field are:\n\n* **messageId:** A message ID header for the email, if any.\n* **subject:** The subject of the email.\n* **text:** The plaintext content of the email.\n* **html:** The HTML content of the email.\n* **amp:** The [AMP4EMAIL][amp4email] content of the email.\n\n#### Using templates\n\nIf you specified a \"Templates collection\" parameter during configuration of the extension, you can create and manage [Handlebars][handlebars] templates for your emails. Each document for a template should have a memorable ID that you use as the *template name* in the document that's written to your `${param:MAIL_COLLECTION}` collection.\n\nThe template document can include any of the following fields:\n\n* **subject:** A template string for the subject of the email.\n* **text:** A template string for the plaintext content of the email.\n* **html:** A template string for the HTML content of the email.\n* **amp:** A template string for the [AMP4EMAIL][amp4email] content of the email.\n\nAn example template might have an ID of `following` and content like:\n\n```js\n{\n  subject: \"@{{username}} is now following you!\",\n  html: \"Just writing to let you know that <code>@{{username}}</code> ({{name}}) is now following you.\"\n}\n```\n\nTo deliver email using templates, when adding documents to your `${param:MAIL_COLLECTION}` collection, include a `template` field with `name` and `data` properties. For example, using our `following` template from above:\n\n```js\nadmin.firestore().collection('${param:MAIL_COLLECTION}').add({\n  toUids: ['abc123'],\n  template: {\n    name: 'following',\n    data: {\n      username: 'ada',\n      name: 'Ada Lovelace'\n    }\n  }\n})\n```\n\n#### Security rules and sending email\n\nThis extension can be used to trigger email delivery directly from client applications. However, you should carefully control client access to the `${param:MAIL_COLLECTION}` collection to avoid potential abuse (you don't want users able to send arbitrary emails from your company's address!).\n\nSecurity rules will vary from application to application, but you should always make sure that emails are sent only to intended recipients and free-form content is kept to a minimum. Templates can help here -- you can use security rules to verify that the data being populated to the template matches your expectations for what a user should be allowed to trigger.\n\n#### Email delivery processing\n\nWhen a document is added to the `${param:MAIL_COLLECTION}` collection, the extension picks it up for email delivery processing. The extension creates and updates a `delivery` field in the document as it processes the email. The `delivery` field can be populated with the following fields:\n\n* **state:** One of `PENDING`, `PROCESSING`, `SUCCESS`, or `ERROR`.\n* **startTime:** Timestamp when email processing began.\n* **endTime:** Timestamp when email processing completed (that is, ended in either a `SUCCESS` or `ERROR` state).\n* **error:** If there was an email delivery error, an error message will be populated here.\n* **attempts:** Number of delivery attempts for this email.\n* **leaseExpireTime:** In case of a hang or timeout, the time at which a `PROCESSING` state should be considered an error.\n* **info:** After successful email delivery (to at least one address), this field will be populated with the following fields:\n  * **messageId:** The message ID of the delivered email.\n  * **accepted:** Array of email addresses to which the email was successfully delivered.\n  * **rejected:** Array of email addresses to which the email could not be delivered.\n  * **pending:** Array of email addresses that were temporarily rejected by SMTP.\n  * **response:** The last response from the SMTP server.\n\nAn email will typically go from `PENDING` to `PROCESSING` to either `SUCCESS` or `ERROR`. Once in the `SUCCESS` or `ERROR` state, additional changes to the document will not trigger the extension to send another email. To resend an email with document updates, you can change the `state` to `PENDING` or `RETRY`.\n\n#### Manual retries\n\nThere are instances in which email delivery fails in a recoverable fashion or the document can be manually corrected for proper delivery with minor modifications. While retries are not automatic, you can manually change the `state` in the `delivery` field to `RETRY` so that the extension attempts email delivery again (and increments the number of `attempts`).\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n\n[mail_collection]: https://console.firebase.google.com/project/_/database/firestore/data~2F${param:MAIL_COLLECTION}\n[admin_sdk]: https://firebase.google.com/docs/admin/setup\n[amp4email]: https://amp.dev/documentation/guides-and-tutorials/learn/email-spec/amp-email-format/\n[handlebars]: https://handlebarsjs.com/\n","readmeContent":"# Trigger Email\n\n**Description**: Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.\n\n\n\n**Details**: Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\n\nThis extension uses other Firebase or Google Cloud Platform services which may have associated charges:\n\n- Cloud Firestore\n- Cloud Functions\n\nWhen you use Firebase Extensions, you're only charged for the underlying resources that you use. A paid-tier billing plan is only required if the extension uses a service that requires a paid-tier plan, for example calling to a Google Cloud Platform API or making outbound network requests to non-Google services. All Firebase services offer a free tier of usage. [Learn more about Firebase billing.](https://firebase.google.com/pricing)\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n\n\n\n\n**Configuration Parameters:**\n\n* Deployment location: Where should the extension be deployed? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).\n\n* SMTP connection URI: A URI representing an SMTP server that this extension can use to deliver email.\n\n* Email documents collection: What is the path to the collection that contains the documents used to build and send the emails?\n\n* Default FROM address: The email address to use as the sender's address (if it's not specified in the added email document).\n\n* Default REPLY-TO address: The email address to use as the reply-to address (if it's not specified in the added email document).\n\n* Users collection: A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection.\n\n* Templates collection: A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document.\n\n\n\n**Cloud Functions:**\n\n* **processQueue:** Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.\n\n\n\n**Access Required**:\n\n\n\nThis extension will operate with the following project IAM roles:\n\n* datastore.user (Reason: Allows this extension to access Cloud Firestore to read and process added email documents.)\n","displayName":"Trigger Email","systemParams":[{"param":"firebaseextensions.v1beta.function/memory","label":"Function memory","type":"SELECT","description":"How much memory should be allocated to each function?","options":[{"value":"128","label":"128MB"},{"value":"256","label":"256MB"},{"value":"512","label":"512MB"},{"value":"1024","label":"1GB"},{"value":"2048","label":"2GB"},{"value":"4096","label":"4GB"},{"value":"8192","label":"8GB"}],"default":"256","advanced":true},{"param":"firebaseextensions.v1beta.function/timeoutSeconds","label":"Function timeout seconds","type":"STRING","description":"How long should functions run before timing out, in seconds (0-540)?","validationRegex":"^[1-9][0-9]{0,2}$","validationErrorMessage":"Function timeout should be an integer number of seconds, between 0 and 540","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnector","label":"VPC Connector","type":"STRING","description":"The VPC Network Connector that this cloud function can connect to. It can be either the fully-qualified URI, or the short name of the network connector resource. The format of this field is projects/*/locations/*/connectors/*.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/connectors/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnectorEgressSettings","label":"VPC Connector Egress settings","type":"SELECT","description":"Controls outgoing traffic when a VPC connector is configured","options":[{"value":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","label":"Unspecified"},{"value":"PRIVATE_RANGES_ONLY","label":"Private ranges only"},{"value":"ALL_TRAFFIC","label":"All traffic"}],"default":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","advanced":true},{"param":"firebaseextensions.v1beta.function/minInstances","label":"Minimum function instances","type":"STRING","description":"The minimum number of instances of each function to run at once (0-1000)","default":"0","validationRegex":"^[0-9]*$","validationErrorMessage":"Min instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/maxInstances","label":"Maximum function instances","type":"STRING","description":"The maximum number of instances of each function to run at once","default":"3000","validationRegex":"^[0-9]*$","validationErrorMessage":"Max instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/ingressSettings","label":"Function ingress settings","type":"SELECT","description":"Where should functions allow incoming traffic from?","options":[{"value":"ALLOW_ALL","label":"Allow all"},{"value":"ALLOW_INTERNAL_ONLY","label":"Allow internal only"},{"value":"ALLOW_INTERNAL_AND_GCLB","label":"Allow internal and GCLB"}],"advanced":true},{"param":"firebaseextensions.v1beta.function/labels","label":"Function labels","type":"STRING","description":"Do you wish to set any labels on this instance's Cloud Functions? If so, provide up to 55 labels in the format 'key1:value, key2:value'","validationRegex":"^([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63},\\s*)*([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63})$","advanced":true},{"param":"firebaseextensions.v1beta.function/kmsKeyName","label":"KMS key name","type":"STRING","description":"Do you want to use a Customer Managed Eencryption Key (CMEK) to encrypt this extension's functions? If you set this, you must also set a Docker repository encrypted by that key. See https://cloud.google.com/functions/docs/securing/cmek for more details.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/keyRings/([^/]+)/cryptoKeys/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/dockerRepository","label":"Docker repository","type":"STRING","description":"What Docker repository should be used to store function images? Default repository will be used if not set.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/repositories/([^/]+)$","advanced":true}]},"state":"DEPRECATED","hash":"1eb3754dd51643e642db8f8e534377db50fa2a42b90f11499f35b663917de3bd","createTime":"2019-11-21T19:24:32.193743613Z","id":"0.1.1","releaseNotes":"fixed - Fixed \"cold start\" errors experienced when the extension runs after a period of inactivity (issue #48).\n","listing":{"state":"APPROVED"},"metrics":{"activeInstallCount":"50"}},{"name":"publishers/firebase/extensions/firestore-send-email/versions/0.1.1-rc.1","ref":"firebase/firestore-send-email@0.1.1-rc.1","spec":{"specVersion":"v1beta","name":"firestore-send-email","version":"0.1.1","description":"Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.","roles":[{"role":"datastore.user","reason":"Allows this extension to access Cloud Firestore to read and process added email documents."}],"resources":[{"name":"processQueue","type":"firebaseextensions.v1beta.function","propertiesYaml":"eventTrigger:\n  eventType: providers/cloud.firestore/eventTypes/document.write\n  resource: projects/${PROJECT_ID}/databases/(default)/documents/${MAIL_COLLECTION}/{id}\nlocation: ${LOCATION}\nsourceDirectory: .\n","description":"Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.","deletionPolicy":"DELETE"}],"billingRequired":true,"author":{"authorName":"Firebase","url":"https://firebase.google.com"},"contributors":[{"authorName":"Michael Bleigh","url":"https://github.com/mbleigh"},{"authorName":"Elliot Hesp","email":"elliot@invertase.io","url":"https://github.com/ehesp"}],"license":"Apache-2.0","releaseNotesUrl":"https://github.com/firebase/extensions/releases","sourceUrl":"https://github.com/firebase/extensions/tree/master/firestore-send-email","params":[{"param":"LOCATION","label":"Deployment location","type":"SELECT","description":"Where should the extension be deployed? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).","required":true,"options":[{"value":"us-central1","label":"Iowa (us-central1)"},{"value":"us-east1","label":"South Carolina (us-east1)"},{"value":"us-east4","label":"Northern Virginia (us-east4)"},{"value":"europe-west1","label":"Belgium (europe-west1)"},{"value":"europe-west2","label":"London (europe-west2)"},{"value":"asia-east2","label":"Hong Kong (asia-east2)"},{"value":"asia-northeast1","label":"Tokyo (asia-northeast1)"}],"default":"us-central1"},{"param":"SMTP_CONNECTION_URI","label":"SMTP connection URI","type":"STRING","description":"A URI representing an SMTP server that this extension can use to deliver email.","required":true,"example":"smtps://username:password@smtp.hostname.com:465","validationRegex":"^smtps?://[^:]+:[^:]+@.*$","validationErrorMessage":"Invalid SMTP connection URI. Must be in the form `smtp(s)://username:password@hostname:port`."},{"param":"MAIL_COLLECTION","label":"Email documents collection","type":"STRING","description":"What is the path to the collection that contains the documents used to build and send the emails?","required":true,"default":"mail","validationRegex":"^[^/]+(/[^/]+/[^/]+)*$","validationErrorMessage":"Must be a valid Cloud Firestore collection"},{"param":"DEFAULT_FROM","label":"Default FROM address","type":"STRING","description":"The email address to use as the sender's address (if it's not specified in the added email document).","required":true,"validationRegex":"^\\S+@\\S+\\.\\S+$","validationErrorMessage":"Must be a valid email address"},{"param":"DEFAULT_REPLY_TO","label":"Default REPLY-TO address","type":"STRING","description":"The email address to use as the reply-to address (if it's not specified in the added email document)."},{"param":"USERS_COLLECTION","label":"Users collection","type":"STRING","description":"A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection."},{"param":"TEMPLATES_COLLECTION","label":"Templates collection","type":"STRING","description":"A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document."}],"preinstallContent":"Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\n\nThis extension uses other Firebase or Google Cloud Platform services which may have associated charges:\n\n- Cloud Firestore\n- Cloud Functions\n\nWhen you use Firebase Extensions, you're only charged for the underlying resources that you use. A paid-tier billing plan is only required if the extension uses a service that requires a paid-tier plan, for example calling to a Google Cloud Platform API or making outbound network requests to non-Google services. All Firebase services offer a free tier of usage. [Learn more about Firebase billing.](https://firebase.google.com/pricing)\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n","postinstallContent":"### See it in action\n\nYou can test out this extension right away:\n\n1.  Go to your [Cloud Firestore dashboard](https://console.firebase.google.com/project/${param:PROJECT_ID}/database/firestore/data).\n\n1.  If it doesn't already exist, create the collection you specified during installation: `${param:MAIL_COLLECTION}`.\n\n1.  Add a document with a `to` field and a `message` field with the following content:\n\n    ```\n    to: ['someone@example.com'],\n    message: {\n      subject: 'Hello from Firebase!',\n      text: 'This is the plaintext section of the email body.',\n      html: 'This is the <code>HTML</code> section of the email body.',\n    }\n    ```\n\n1.  In a few seconds, you'll see a `delivery` field appear in the document. The field will update as the extension processes the email.\n\n**Note:** You can also use the [Firebase Admin SDK][admin_sdk] to add a document:\n```\nadmin.firestore().collection('${param:MAIL_COLLECTION}').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    text: 'This is the plaintext section of the email body.',\n    html: 'This is the <code>HTML</code> section of the email body.',\n  }\n}).then(() => console.log('Queued email for delivery!'));\n```\n\n### Using this extension\n\nAfter its installation, this extension monitors all document writes to the `${param:MAIL_COLLECTION}` collection. Email is delivered based on the contents of the document's fields. The top-level fields specify the email's sender and recipients. The `message` field contains the details of the email to deliver, including the email body.\n\n#### Sender and recipient fields\n\nThe top-level fields of the document supply the email sender and recipient information. Available fields are:\n\n* **from:** The sender's email address. If not specified in the document, uses the configured \"Default FROM address\" parameter.\n* **replyTo:** The reply-to email address. If not specified in the document, uses the configured \"Default REPLY-TO address\" parameter.\n* **to:** A single recipient email address or an array containing multiple recipient email addresses.\n* **toUids:** An array containing the recipient UIDs.\n* **cc:** A single recipient email address or an array containing multiple recipient email addresses.\n* **ccUids:** An array containing the CC recipient UIDs.\n* **bcc:** A single recipient email address or an array containing multiple recipient email addresses.\n* **bccUids:** An array containing the BCC recipient UIDs.\n\n**NOTE:** The `toUids`, `ccUids`, and `bccUids` options deliver emails based on user UIDs keyed to email addresses within a Cloud Firestore document. To use these recipient options, you need to specify a Cloud Firestore collection for the extension's \"Users collection\" parameter. The extension can then read the `email` field for each UID specified in the `toUids`, `ccUids`, and/or `bccUids` fields.\n\n#### Message field\n\nThe `message` field of the document contains raw delivery information for the email. This field should generally only be populated by trusted code running in your own servers or Cloud Functions (refer to the \"Security rules and sending email\" section below).\n\nAvailable properties for the `message` field are:\n\n* **messageId:** A message ID header for the email, if any.\n* **subject:** The subject of the email.\n* **text:** The plaintext content of the email.\n* **html:** The HTML content of the email.\n* **amp:** The [AMP4EMAIL][amp4email] content of the email.\n\n#### Using templates\n\nIf you specified a \"Templates collection\" parameter during configuration of the extension, you can create and manage [Handlebars][handlebars] templates for your emails. Each document for a template should have a memorable ID that you use as the *template name* in the document that's written to your `${param:MAIL_COLLECTION}` collection.\n\nThe template document can include any of the following fields:\n\n* **subject:** A template string for the subject of the email.\n* **text:** A template string for the plaintext content of the email.\n* **html:** A template string for the HTML content of the email.\n* **amp:** A template string for the [AMP4EMAIL][amp4email] content of the email.\n\nAn example template might have an ID of `following` and content like:\n\n```js\n{\n  subject: \"@{{username}} is now following you!\",\n  html: \"Just writing to let you know that <code>@{{username}}</code> ({{name}}) is now following you.\"\n}\n```\n\nTo deliver email using templates, when adding documents to your `${param:MAIL_COLLECTION}` collection, include a `template` field with `name` and `data` properties. For example, using our `following` template from above:\n\n```js\nadmin.firestore().collection('${param:MAIL_COLLECTION}').add({\n  toUids: ['abc123'],\n  template: {\n    name: 'following',\n    data: {\n      username: 'ada',\n      name: 'Ada Lovelace'\n    }\n  }\n})\n```\n\n#### Security rules and sending email\n\nThis extension can be used to trigger email delivery directly from client applications. However, you should carefully control client access to the `${param:MAIL_COLLECTION}` collection to avoid potential abuse (you don't want users able to send arbitrary emails from your company's address!).\n\nSecurity rules will vary from application to application, but you should always make sure that emails are sent only to intended recipients and free-form content is kept to a minimum. Templates can help here -- you can use security rules to verify that the data being populated to the template matches your expectations for what a user should be allowed to trigger.\n\n#### Email delivery processing\n\nWhen a document is added to the `${param:MAIL_COLLECTION}` collection, the extension picks it up for email delivery processing. The extension creates and updates a `delivery` field in the document as it processes the email. The `delivery` field can be populated with the following fields:\n\n* **state:** One of `PENDING`, `PROCESSING`, `SUCCESS`, or `ERROR`.\n* **startTime:** Timestamp when email processing began.\n* **endTime:** Timestamp when email processing completed (that is, ended in either a `SUCCESS` or `ERROR` state).\n* **error:** If there was an email delivery error, an error message will be populated here.\n* **attempts:** Number of delivery attempts for this email.\n* **leaseExpireTime:** In case of a hang or timeout, the time at which a `PROCESSING` state should be considered an error.\n* **info:** After successful email delivery (to at least one address), this field will be populated with the following fields:\n  * **messageId:** The message ID of the delivered email.\n  * **accepted:** Array of email addresses to which the email was successfully delivered.\n  * **rejected:** Array of email addresses to which the email could not be delivered.\n  * **pending:** Array of email addresses that were temporarily rejected by SMTP.\n  * **response:** The last response from the SMTP server.\n\nAn email will typically go from `PENDING` to `PROCESSING` to either `SUCCESS` or `ERROR`. Once in the `SUCCESS` or `ERROR` state, additional changes to the document will not trigger the extension to send another email. To resend an email with document updates, you can change the `state` to `PENDING` or `RETRY`.\n\n#### Manual retries\n\nThere are instances in which email delivery fails in a recoverable fashion or the document can be manually corrected for proper delivery with minor modifications. While retries are not automatic, you can manually change the `state` in the `delivery` field to `RETRY` so that the extension attempts email delivery again (and increments the number of `attempts`).\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n\n[mail_collection]: https://console.firebase.google.com/project/_/database/firestore/data~2F${param:MAIL_COLLECTION}\n[admin_sdk]: https://firebase.google.com/docs/admin/setup\n[amp4email]: https://amp.dev/documentation/guides-and-tutorials/learn/email-spec/amp-email-format/\n[handlebars]: https://handlebarsjs.com/\n","readmeContent":"# Trigger Email\n\n**Description**: Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.\n\n\n\n**Details**: Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\n\nThis extension uses other Firebase or Google Cloud Platform services which may have associated charges:\n\n- Cloud Firestore\n- Cloud Functions\n\nWhen you use Firebase Extensions, you're only charged for the underlying resources that you use. A paid-tier billing plan is only required if the extension uses a service that requires a paid-tier plan, for example calling to a Google Cloud Platform API or making outbound network requests to non-Google services. All Firebase services offer a free tier of usage. [Learn more about Firebase billing.](https://firebase.google.com/pricing)\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n\n\n\n\n**Configuration Parameters:**\n\n* Deployment location: Where should the extension be deployed? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).\n\n* SMTP connection URI: A URI representing an SMTP server that this extension can use to deliver email.\n\n* Email documents collection: What is the path to the collection that contains the documents used to build and send the emails?\n\n* Default FROM address: The email address to use as the sender's address (if it's not specified in the added email document).\n\n* Default REPLY-TO address: The email address to use as the reply-to address (if it's not specified in the added email document).\n\n* Users collection: A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection.\n\n* Templates collection: A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document.\n\n\n\n**Cloud Functions:**\n\n* **processQueue:** Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.\n\n\n\n**Access Required**:\n\n\n\nThis extension will operate with the following project IAM roles:\n\n* datastore.user (Reason: Allows this extension to access Cloud Firestore to read and process added email documents.)\n","displayName":"Trigger Email","systemParams":[{"param":"firebaseextensions.v1beta.function/memory","label":"Function memory","type":"SELECT","description":"How much memory should be allocated to each function?","options":[{"value":"128","label":"128MB"},{"value":"256","label":"256MB"},{"value":"512","label":"512MB"},{"value":"1024","label":"1GB"},{"value":"2048","label":"2GB"},{"value":"4096","label":"4GB"},{"value":"8192","label":"8GB"}],"default":"256","advanced":true},{"param":"firebaseextensions.v1beta.function/timeoutSeconds","label":"Function timeout seconds","type":"STRING","description":"How long should functions run before timing out, in seconds (0-540)?","validationRegex":"^[1-9][0-9]{0,2}$","validationErrorMessage":"Function timeout should be an integer number of seconds, between 0 and 540","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnector","label":"VPC Connector","type":"STRING","description":"The VPC Network Connector that this cloud function can connect to. It can be either the fully-qualified URI, or the short name of the network connector resource. The format of this field is projects/*/locations/*/connectors/*.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/connectors/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnectorEgressSettings","label":"VPC Connector Egress settings","type":"SELECT","description":"Controls outgoing traffic when a VPC connector is configured","options":[{"value":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","label":"Unspecified"},{"value":"PRIVATE_RANGES_ONLY","label":"Private ranges only"},{"value":"ALL_TRAFFIC","label":"All traffic"}],"default":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","advanced":true},{"param":"firebaseextensions.v1beta.function/minInstances","label":"Minimum function instances","type":"STRING","description":"The minimum number of instances of each function to run at once (0-1000)","default":"0","validationRegex":"^[0-9]*$","validationErrorMessage":"Min instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/maxInstances","label":"Maximum function instances","type":"STRING","description":"The maximum number of instances of each function to run at once","default":"3000","validationRegex":"^[0-9]*$","validationErrorMessage":"Max instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/ingressSettings","label":"Function ingress settings","type":"SELECT","description":"Where should functions allow incoming traffic from?","options":[{"value":"ALLOW_ALL","label":"Allow all"},{"value":"ALLOW_INTERNAL_ONLY","label":"Allow internal only"},{"value":"ALLOW_INTERNAL_AND_GCLB","label":"Allow internal and GCLB"}],"advanced":true},{"param":"firebaseextensions.v1beta.function/labels","label":"Function labels","type":"STRING","description":"Do you wish to set any labels on this instance's Cloud Functions? If so, provide up to 55 labels in the format 'key1:value, key2:value'","validationRegex":"^([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63},\\s*)*([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63})$","advanced":true},{"param":"firebaseextensions.v1beta.function/kmsKeyName","label":"KMS key name","type":"STRING","description":"Do you want to use a Customer Managed Eencryption Key (CMEK) to encrypt this extension's functions? If you set this, you must also set a Docker repository encrypted by that key. See https://cloud.google.com/functions/docs/securing/cmek for more details.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/keyRings/([^/]+)/cryptoKeys/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/dockerRepository","label":"Docker repository","type":"STRING","description":"What Docker repository should be used to store function images? Default repository will be used if not set.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/repositories/([^/]+)$","advanced":true}]},"state":"PUBLISHED","createTime":"2019-11-07T18:27:34.223485438Z","id":"0.1.1-rc.1","listing":{"state":"UNLISTED"},"metrics":{"activeInstallCount":"40"}},{"name":"publishers/firebase/extensions/firestore-send-email/versions/0.1.10","ref":"firebase/firestore-send-email@0.1.10","spec":{"specVersion":"v1beta","name":"firestore-send-email","version":"0.1.10","description":"Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.","roles":[{"role":"datastore.user","reason":"Allows this extension to access Cloud Firestore to read and process added email documents."}],"resources":[{"name":"processQueue","type":"firebaseextensions.v1beta.function","propertiesYaml":"eventTrigger:\n  eventType: providers/cloud.firestore/eventTypes/document.write\n  resource: projects/${param:PROJECT_ID}/databases/(default)/documents/${param:MAIL_COLLECTION}/{id}\nlocation: ${param:LOCATION}\nruntime: nodejs14\n","description":"Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.","deletionPolicy":"DELETE"}],"billingRequired":true,"author":{"authorName":"Firebase","url":"https://firebase.google.com"},"contributors":[{"authorName":"Michael Bleigh","url":"https://github.com/mbleigh"},{"authorName":"Invertase","email":"oss@invertase.io","url":"https://github.com/invertase"}],"license":"Apache-2.0","releaseNotesUrl":"https://github.com/firebase/extensions/blob/master/firestore-send-email/CHANGELOG.md","sourceUrl":"https://github.com/firebase/extensions/tree/master/firestore-send-email","params":[{"param":"LOCATION","label":"Cloud Functions location","type":"SELECT","description":"Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).","required":true,"options":[{"value":"us-central1","label":"Iowa (us-central1)"},{"value":"us-east1","label":"South Carolina (us-east1)"},{"value":"us-east4","label":"Northern Virginia (us-east4)"},{"value":"europe-central2","label":"Warsaw (europe-central2)"},{"value":"us-west2","label":"Los Angeles (us-west2)"},{"value":"us-west3","label":"Salt Lake City (us-west3)"},{"value":"us-west4","label":"Las Vegas (us-west4)"},{"value":"europe-central2","label":"Warsaw (europe-central2)"},{"value":"europe-west1","label":"Belgium (europe-west1)"},{"value":"europe-west2","label":"London (europe-west2)"},{"value":"europe-west3","label":"Frankfurt (europe-west3)"},{"value":"europe-west6","label":"Zurich (europe-west6)"},{"value":"asia-east2","label":"Hong Kong (asia-east2)"},{"value":"asia-northeast1","label":"Tokyo (asia-northeast1)"},{"value":"asia-northeast2","label":"Osaka (asia-northeast2)"},{"value":"asia-northeast3","label":"Seoul (asia-northeast3)"},{"value":"asia-south1","label":"Mumbai (asia-south1)"},{"value":"asia-southeast2","label":"Jakarta (asia-southeast2)"},{"value":"northamerica-northeast1","label":"Montreal (northamerica-northeast1)"},{"value":"southamerica-east1","label":"Sao Paulo (southamerica-east1)"},{"value":"australia-southeast1","label":"Sydney (australia-southeast1)"}],"default":"us-central1","immutable":true},{"param":"SMTP_CONNECTION_URI","label":"SMTP connection URI","type":"STRING","description":"A URI representing an SMTP server this extension can use to deliver email. Note that port 25 is blocked by Google Cloud Platform, so we recommend using port 587 for SMTP connections. If you're using the SMTPS protocol, we recommend using port 465.","required":true,"example":"smtps://username:password@smtp.hostname.com:465","validationRegex":"^smtps?://[^:]+:[^:]+@.*$","validationErrorMessage":"Invalid SMTP connection URI. Must be in the form `smtp(s)://username:password@hostname:port`."},{"param":"MAIL_COLLECTION","label":"Email documents collection","type":"STRING","description":"What is the path to the collection that contains the documents used to build and send the emails?","required":true,"default":"mail","validationRegex":"^[^/]+(/[^/]+/[^/]+)*$","validationErrorMessage":"Must be a valid Cloud Firestore collection"},{"param":"DEFAULT_FROM","label":"Default FROM address","type":"STRING","description":"The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).","required":true,"example":"foobar@example.com","validationRegex":"^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$|^.*<(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})>$","validationErrorMessage":"Must be a valid email address or valid name plus email address"},{"param":"DEFAULT_REPLY_TO","label":"Default REPLY-TO address","type":"STRING","description":"The email address to use as the reply-to address (if it's not specified in the added email document)."},{"param":"USERS_COLLECTION","label":"Users collection","type":"STRING","description":"A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection."},{"param":"TEMPLATES_COLLECTION","label":"Templates collection","type":"STRING","description":"A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document."}],"preinstallContent":"Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- You will be charged a small amount (typically around $0.01/month) for the Firebase resources required by this extension (even if it is not used).\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s free tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n","postinstallContent":"### See it in action\n\nYou can test out this extension right away!\n\n1.  Go to your [Cloud Firestore dashboard](https://console.firebase.google.com/project/${param:PROJECT_ID}/firestore/data) in the Firebase console.\n\n1.  If it doesn't already exist, create the collection you specified during installation: `${param:MAIL_COLLECTION}`.\n\n1.  Add a document with a `to` field and a `message` field with the following content:\n\n    ```js\n    to: ['someone@example.com'],\n    message: {\n      subject: 'Hello from Firebase!',\n      text: 'This is the plaintext section of the email body.',\n      html: 'This is the <code>HTML</code> section of the email body.',\n    }\n    ```\n\n1.  In a few seconds, you'll see a `delivery` field appear in the document. The field will update as the extension processes the email.\n\n**Note:** You can also use the [Firebase Admin SDK][admin_sdk] to add a document:\n\n```js\nadmin\n  .firestore()\n  .collection(\"${param:MAIL_COLLECTION}\")\n  .add({\n    to: \"someone@example.com\",\n    message: {\n      subject: \"Hello from Firebase!\",\n      text: \"This is the plaintext section of the email body.\",\n      html: \"This is the <code>HTML</code> section of the email body.\",\n    },\n  })\n  .then(() => console.log(\"Queued email for delivery!\"));\n```\n\n### Using this extension\n\nAfter its installation, this extension monitors all document writes to the `${param:MAIL_COLLECTION}` collection. Email is delivered based on the contents of the document's fields. The top-level fields specify the email's sender and recipients. The `message` field contains the details of the email to deliver, including the email body.\n\n#### Sender and recipient fields\n\nThe top-level fields of the document supply the email sender and recipient information. Available fields are:\n\n- **from:** The sender's email address. If not specified in the document, uses the configured \"Default FROM address\" parameter.\n- **replyTo:** The reply-to email address. If not specified in the document, uses the configured \"Default REPLY-TO address\" parameter.\n- **to:** A single recipient email address or an array containing multiple recipient email addresses.\n- **toUids:** An array containing the recipient UIDs.\n- **cc:** A single recipient email address or an array containing multiple recipient email addresses.\n- **ccUids:** An array containing the CC recipient UIDs.\n- **bcc:** A single recipient email address or an array containing multiple recipient email addresses.\n- **bccUids:** An array containing the BCC recipient UIDs.\n- **headers:** An object of additional header fields (for example, `{\"X-Custom-Header\": \"value\", \"X-Second-Custom-Header\": \"value\"}`).\n\n**NOTE:** The `toUids`, `ccUids`, and `bccUids` options deliver emails based on user UIDs keyed to email addresses within a Cloud Firestore document. To use these recipient options, you need to specify a Cloud Firestore collection for the extension's \"Users collection\" parameter. The extension can then read the `email` field for each UID specified in the `toUids`, `ccUids`, and/or `bccUids` fields.\n\n#### Message field\n\nThe `message` field of the document contains raw delivery information for the email. This field should generally only be populated by trusted code running in your own servers or Cloud Functions (refer to the \"Security rules and sending email\" section below).\n\nAvailable properties for the `message` field are:\n\n- **messageId:** A message ID header for the email, if any.\n- **subject:** The subject of the email.\n- **text:** The plaintext content of the email.\n- **html:** The HTML content of the email.\n- **amp:** The [AMP4EMAIL][amp4email] content of the email.\n- **attachments:** An array containing attachment(s); [Nodemailer options](https://nodemailer.com/message/attachments/) supported: utf-8 string, custom content type, URL, encoded string, data URI, and pregenerated MIME node (be aware that your email has no access to the cloud server's file system).\n\n#### Using templates\n\nIf you specified a \"Templates collection\" parameter during configuration of the extension, you can create and manage [Handlebars][handlebars] templates for your emails. Each document for a template should have a memorable ID that you use as the _template name_ in the document that's written to your `${param:MAIL_COLLECTION}` collection.\n\nThe template document can include any of the following fields:\n\n- **subject:** A template string for the subject of the email.\n- **text:** A template string for the plaintext content of the email.\n- **html:** A template string for the HTML content of the email.\n- **amp:** A template string for the [AMP4EMAIL][amp4email] content of the email.\n- **attachments:** An array of attachments with template strings as values; [Nodemailer options](https://nodemailer.com/message/attachments/) supported: utf-8 string, custom content type, URL, encoded string, data URI, and pre-generated MIME node (be aware that your email has no access to the cloud server's file system).\n\nAn example template might have an ID of `following` and content like:\n\n```js\n{\n  subject: \"@{{username}} is now following you!\",\n  html: \"Just writing to let you know that <code>@{{username}}</code> ({{name}}) is now following you.\",\n  attachments: [\n    {\n     filename: \"{{username}}.jpg\",\n     path: \"{{imagePath}}\" \n    }\n  ]\n}\n```\n\nTo deliver email using templates, when adding documents to your `${param:MAIL_COLLECTION}` collection, include a `template` field with `name` and `data` properties. For example, using our `following` template from above:\n\n```js\nadmin\n  .firestore()\n  .collection(\"${param:MAIL_COLLECTION}\")\n  .add({\n    toUids: [\"abc123\"],\n    template: {\n      name: \"following\",\n      data: {\n        username: \"ada\",\n        name: \"Ada Lovelace\",\n        imagePath: \"https://path-to-file/image-name.jpg\"\n      },\n    },\n  });\n```\n\n#### Template Partials\n\nTemplates may be registered reusable [partials](https://handlebarsjs.com/guide/partials.html) by specifying `{partial: true}` in the document in the template collection. Each of the standard data fields (`subject`, `html`, `text`, and `amp`) will be defined as a partial used only in its own environment. For example, a partial called `footer` might have data like:\n\n```js\n{\n  partial: true,\n  html: \"<p>This mail was sent by ExampleApp, Inc. <a href='https://example.com/unsubscribe'>Unsubscribe</a></p>\",\n  text: \"This mail was sent by ExampleApp, Inc. Unsubscribe here: https://example.com/unsubscribe\"\n}\n```\n\nIn another template, the partial can be included by its name (document ID):\n\n```html\n<p>This is my main template content, but it will use a common footer.</p>\n\n{{> footer }}\n```\n\n#### Security rules and sending email\n\nThis extension can be used to trigger email delivery directly from client applications. However, you should carefully control client access to the `${param:MAIL_COLLECTION}` collection to avoid potential abuse (you don't want users able to send arbitrary emails from your company's address!).\n\nSecurity rules will vary from application to application, but you should always make sure that emails are sent only to intended recipients and free-form content is kept to a minimum. Templates can help here -- you can use security rules to verify that the data being populated to the template matches your expectations for what a user should be allowed to trigger.\n\n#### Email delivery processing\n\nWhen a document is added to the `${param:MAIL_COLLECTION}` collection, the extension picks it up for email delivery processing. The extension creates and updates a `delivery` field in the document as it processes the email. The `delivery` field can be populated with the following fields:\n\n- **state:** One of `PENDING`, `PROCESSING`, `SUCCESS`, or `ERROR`.\n- **startTime:** Timestamp when email processing began.\n- **endTime:** Timestamp when email processing completed (that is, ended in either a `SUCCESS` or `ERROR` state).\n- **error:** If there was an email delivery error, an error message will be populated here.\n- **attempts:** Number of delivery attempts for this email.\n- **leaseExpireTime:** In case of a hang or timeout, the time at which a `PROCESSING` state should be considered an error.\n- **info:** After successful email delivery (to at least one address), this field will be populated with the following fields:\n  - **messageId:** The message ID of the delivered email.\n  - **accepted:** Array of email addresses to which the email was successfully delivered.\n  - **rejected:** Array of email addresses to which the email could not be delivered.\n  - **pending:** Array of email addresses that were temporarily rejected by SMTP.\n  - **response:** The last response from the SMTP server.\n\nAn email will typically go from `PENDING` to `PROCESSING` to either `SUCCESS` or `ERROR`. Once in the `SUCCESS` or `ERROR` state, additional changes to the document will not trigger the extension to send another email. To resend an email with document updates, you can change the `state` to `PENDING` or `RETRY`.\n\n#### Manual retries\n\nThere are instances in which email delivery fails in a recoverable fashion or the document can be manually corrected for proper delivery with minor modifications. While retries are not automatic, you can manually change the `state` in the `delivery` field to `RETRY` so that the extension attempts email delivery again (and increments the number of `attempts`).\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n\n[mail_collection]: https://console.firebase.google.com/project/_/firestore/data~2F${param:MAIL_COLLECTION}\n[admin_sdk]: https://firebase.google.com/docs/admin/setup\n[amp4email]: https://amp.dev/documentation/guides-and-tutorials/learn/email-spec/amp-email-format/\n[handlebars]: https://handlebarsjs.com/\n","readmeContent":"# Trigger Email\n\n**Author**: Firebase (**[https://firebase.google.com](https://firebase.google.com)**)\n\n**Description**: Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.\n\n\n\n**Details**: Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- You will be charged a small amount (typically around $0.01/month) for the Firebase resources required by this extension (even if it is not used).\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s free tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n\n\n\n\n**Configuration Parameters:**\n\n* Cloud Functions location: Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).\n\n* SMTP connection URI: A URI representing an SMTP server this extension can use to deliver email. Note that port 25 is blocked by Google Cloud Platform, so we recommend using port 587 for SMTP connections. If you're using the SMTPS protocol, we recommend using port 465.\n\n* Email documents collection: What is the path to the collection that contains the documents used to build and send the emails?\n\n* Default FROM address: The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).\n\n* Default REPLY-TO address: The email address to use as the reply-to address (if it's not specified in the added email document).\n\n* Users collection: A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection.\n\n* Templates collection: A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document.\n\n\n\n**Cloud Functions:**\n\n* **processQueue:** Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.\n\n\n\n**Access Required**:\n\n\n\nThis extension will operate with the following project IAM roles:\n\n* datastore.user (Reason: Allows this extension to access Cloud Firestore to read and process added email documents.)\n","displayName":"Trigger Email","systemParams":[{"param":"firebaseextensions.v1beta.function/memory","label":"Function memory","type":"SELECT","description":"How much memory should be allocated to each function?","options":[{"value":"128","label":"128MB"},{"value":"256","label":"256MB"},{"value":"512","label":"512MB"},{"value":"1024","label":"1GB"},{"value":"2048","label":"2GB"},{"value":"4096","label":"4GB"},{"value":"8192","label":"8GB"}],"default":"256","advanced":true},{"param":"firebaseextensions.v1beta.function/timeoutSeconds","label":"Function timeout seconds","type":"STRING","description":"How long should functions run before timing out, in seconds (0-540)?","validationRegex":"^[1-9][0-9]{0,2}$","validationErrorMessage":"Function timeout should be an integer number of seconds, between 0 and 540","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnector","label":"VPC Connector","type":"STRING","description":"The VPC Network Connector that this cloud function can connect to. It can be either the fully-qualified URI, or the short name of the network connector resource. The format of this field is projects/*/locations/*/connectors/*.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/connectors/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnectorEgressSettings","label":"VPC Connector Egress settings","type":"SELECT","description":"Controls outgoing traffic when a VPC connector is configured","options":[{"value":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","label":"Unspecified"},{"value":"PRIVATE_RANGES_ONLY","label":"Private ranges only"},{"value":"ALL_TRAFFIC","label":"All traffic"}],"default":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","advanced":true},{"param":"firebaseextensions.v1beta.function/minInstances","label":"Minimum function instances","type":"STRING","description":"The minimum number of instances of each function to run at once (0-1000)","default":"0","validationRegex":"^[0-9]*$","validationErrorMessage":"Min instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/maxInstances","label":"Maximum function instances","type":"STRING","description":"The maximum number of instances of each function to run at once","default":"3000","validationRegex":"^[0-9]*$","validationErrorMessage":"Max instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/ingressSettings","label":"Function ingress settings","type":"SELECT","description":"Where should functions allow incoming traffic from?","options":[{"value":"ALLOW_ALL","label":"Allow all"},{"value":"ALLOW_INTERNAL_ONLY","label":"Allow internal only"},{"value":"ALLOW_INTERNAL_AND_GCLB","label":"Allow internal and GCLB"}],"advanced":true},{"param":"firebaseextensions.v1beta.function/labels","label":"Function labels","type":"STRING","description":"Do you wish to set any labels on this instance's Cloud Functions? If so, provide up to 55 labels in the format 'key1:value, key2:value'","validationRegex":"^([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63},\\s*)*([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63})$","advanced":true},{"param":"firebaseextensions.v1beta.function/kmsKeyName","label":"KMS key name","type":"STRING","description":"Do you want to use a Customer Managed Eencryption Key (CMEK) to encrypt this extension's functions? If you set this, you must also set a Docker repository encrypted by that key. See https://cloud.google.com/functions/docs/securing/cmek for more details.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/keyRings/([^/]+)/cryptoKeys/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/dockerRepository","label":"Docker repository","type":"STRING","description":"What Docker repository should be used to store function images? Default repository will be used if not set.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/repositories/([^/]+)$","advanced":true}]},"state":"PUBLISHED","hash":"68405629dc1ca741c39e2c7da50d5c89dd35984810e7d38648790221edf2d180","createTime":"2021-06-17T18:02:00.457428Z","id":"0.1.10","releaseNotes":"feature - added Warsaw (europe-central2) location (#677)\n\nfeature - updated Cloud Functions runtime to Node.js 14 (#660)\n","listing":{"state":"APPROVED"},"metrics":{"activeInstallCount":"800"}},{"name":"publishers/firebase/extensions/firestore-send-email/versions/0.1.11","ref":"firebase/firestore-send-email@0.1.11","spec":{"specVersion":"v1beta","name":"firestore-send-email","version":"0.1.11","description":"Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.","roles":[{"role":"datastore.user","reason":"Allows this extension to access Cloud Firestore to read and process added email documents."}],"resources":[{"name":"processQueue","type":"firebaseextensions.v1beta.function","propertiesYaml":"eventTrigger:\n  eventType: providers/cloud.firestore/eventTypes/document.write\n  resource: projects/${param:PROJECT_ID}/databases/(default)/documents/${param:MAIL_COLLECTION}/{id}\nlocation: ${param:LOCATION}\nruntime: nodejs14\n","description":"Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.","deletionPolicy":"DELETE"}],"billingRequired":true,"author":{"authorName":"Firebase","url":"https://firebase.google.com"},"contributors":[{"authorName":"Michael Bleigh","url":"https://github.com/mbleigh"},{"authorName":"Invertase","email":"oss@invertase.io","url":"https://github.com/invertase"}],"license":"Apache-2.0","releaseNotesUrl":"https://github.com/firebase/extensions/blob/master/firestore-send-email/CHANGELOG.md","sourceUrl":"https://github.com/firebase/extensions/tree/master/firestore-send-email","params":[{"param":"LOCATION","label":"Cloud Functions location","type":"SELECT","description":"Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).","required":true,"options":[{"value":"us-central1","label":"Iowa (us-central1)"},{"value":"us-east1","label":"South Carolina (us-east1)"},{"value":"us-east4","label":"Northern Virginia (us-east4)"},{"value":"us-west2","label":"Los Angeles (us-west2)"},{"value":"us-west3","label":"Salt Lake City (us-west3)"},{"value":"us-west4","label":"Las Vegas (us-west4)"},{"value":"europe-central2","label":"Warsaw (europe-central2)"},{"value":"europe-west1","label":"Belgium (europe-west1)"},{"value":"europe-west2","label":"London (europe-west2)"},{"value":"europe-west3","label":"Frankfurt (europe-west3)"},{"value":"europe-west6","label":"Zurich (europe-west6)"},{"value":"asia-east2","label":"Hong Kong (asia-east2)"},{"value":"asia-northeast1","label":"Tokyo (asia-northeast1)"},{"value":"asia-northeast2","label":"Osaka (asia-northeast2)"},{"value":"asia-northeast3","label":"Seoul (asia-northeast3)"},{"value":"asia-south1","label":"Mumbai (asia-south1)"},{"value":"asia-southeast2","label":"Jakarta (asia-southeast2)"},{"value":"northamerica-northeast1","label":"Montreal (northamerica-northeast1)"},{"value":"southamerica-east1","label":"Sao Paulo (southamerica-east1)"},{"value":"australia-southeast1","label":"Sydney (australia-southeast1)"}],"default":"us-central1","immutable":true},{"param":"SMTP_CONNECTION_URI","label":"SMTP connection URI","type":"STRING","description":"A URI representing an SMTP server this extension can use to deliver email. Note that port 25 is blocked by Google Cloud Platform, so we recommend using port 587 for SMTP connections. If you're using the SMTPS protocol, we recommend using port 465.","required":true,"example":"smtps://username:password@smtp.hostname.com:465","validationRegex":"^smtps?://[^:]+:[^:]+@.*$","validationErrorMessage":"Invalid SMTP connection URI. Must be in the form `smtp(s)://username:password@hostname:port`."},{"param":"MAIL_COLLECTION","label":"Email documents collection","type":"STRING","description":"What is the path to the collection that contains the documents used to build and send the emails?","required":true,"default":"mail","validationRegex":"^[^/]+(/[^/]+/[^/]+)*$","validationErrorMessage":"Must be a valid Cloud Firestore collection"},{"param":"DEFAULT_FROM","label":"Default FROM address","type":"STRING","description":"The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).","required":true,"example":"foobar@example.com","validationRegex":"^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$|^.*<(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})>$","validationErrorMessage":"Must be a valid email address or valid name plus email address"},{"param":"DEFAULT_REPLY_TO","label":"Default REPLY-TO address","type":"STRING","description":"The email address to use as the reply-to address (if it's not specified in the added email document)."},{"param":"USERS_COLLECTION","label":"Users collection","type":"STRING","description":"A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection."},{"param":"TEMPLATES_COLLECTION","label":"Templates collection","type":"STRING","description":"A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document."}],"preinstallContent":"Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- You will be charged a small amount (typically around $0.01/month) for the Firebase resources required by this extension (even if it is not used).\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s free tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n","postinstallContent":"### See it in action\n\nYou can test out this extension right away!\n\n1.  Go to your [Cloud Firestore dashboard](https://console.firebase.google.com/project/${param:PROJECT_ID}/firestore/data) in the Firebase console.\n\n1.  If it doesn't already exist, create the collection you specified during installation: `${param:MAIL_COLLECTION}`.\n\n1.  Add a document with a `to` field and a `message` field with the following content:\n\n    ```js\n    to: ['someone@example.com'],\n    message: {\n      subject: 'Hello from Firebase!',\n      text: 'This is the plaintext section of the email body.',\n      html: 'This is the <code>HTML</code> section of the email body.',\n    }\n    ```\n\n1.  In a few seconds, you'll see a `delivery` field appear in the document. The field will update as the extension processes the email.\n\n**Note:** You can also use the [Firebase Admin SDK][admin_sdk] to add a document:\n\n```js\nadmin\n  .firestore()\n  .collection(\"${param:MAIL_COLLECTION}\")\n  .add({\n    to: \"someone@example.com\",\n    message: {\n      subject: \"Hello from Firebase!\",\n      text: \"This is the plaintext section of the email body.\",\n      html: \"This is the <code>HTML</code> section of the email body.\",\n    },\n  })\n  .then(() => console.log(\"Queued email for delivery!\"));\n```\n\n### Using this extension\n\nAfter its installation, this extension monitors all document writes to the `${param:MAIL_COLLECTION}` collection. Email is delivered based on the contents of the document's fields. The top-level fields specify the email's sender and recipients. The `message` field contains the details of the email to deliver, including the email body.\n\n#### Sender and recipient fields\n\nThe top-level fields of the document supply the email sender and recipient information. Available fields are:\n\n- **from:** The sender's email address. If not specified in the document, uses the configured \"Default FROM address\" parameter.\n- **replyTo:** The reply-to email address. If not specified in the document, uses the configured \"Default REPLY-TO address\" parameter.\n- **to:** A single recipient email address or an array containing multiple recipient email addresses.\n- **toUids:** An array containing the recipient UIDs.\n- **cc:** A single recipient email address or an array containing multiple recipient email addresses.\n- **ccUids:** An array containing the CC recipient UIDs.\n- **bcc:** A single recipient email address or an array containing multiple recipient email addresses.\n- **bccUids:** An array containing the BCC recipient UIDs.\n- **headers:** An object of additional header fields (for example, `{\"X-Custom-Header\": \"value\", \"X-Second-Custom-Header\": \"value\"}`).\n\n**NOTE:** The `toUids`, `ccUids`, and `bccUids` options deliver emails based on user UIDs keyed to email addresses within a Cloud Firestore document. To use these recipient options, you need to specify a Cloud Firestore collection for the extension's \"Users collection\" parameter. The extension can then read the `email` field for each UID specified in the `toUids`, `ccUids`, and/or `bccUids` fields.\n\n#### Message field\n\nThe `message` field of the document contains raw delivery information for the email. This field should generally only be populated by trusted code running in your own servers or Cloud Functions (refer to the \"Security rules and sending email\" section below).\n\nAvailable properties for the `message` field are:\n\n- **messageId:** A message ID header for the email, if any.\n- **subject:** The subject of the email.\n- **text:** The plaintext content of the email.\n- **html:** The HTML content of the email.\n- **amp:** The [AMP4EMAIL][amp4email] content of the email.\n- **attachments:** An array containing attachment(s); [Nodemailer options](https://nodemailer.com/message/attachments/) supported: utf-8 string, custom content type, URL, encoded string, data URI, and pregenerated MIME node (be aware that your email has no access to the cloud server's file system).\n\n#### Using templates\n\nIf you specified a \"Templates collection\" parameter during configuration of the extension, you can create and manage [Handlebars][handlebars] templates for your emails. Each document for a template should have a memorable ID that you use as the _template name_ in the document that's written to your `${param:MAIL_COLLECTION}` collection.\n\nThe template document can include any of the following fields:\n\n- **subject:** A template string for the subject of the email.\n- **text:** A template string for the plaintext content of the email.\n- **html:** A template string for the HTML content of the email.\n- **amp:** A template string for the [AMP4EMAIL][amp4email] content of the email.\n- **attachments:** An array of attachments with template strings as values; [Nodemailer options](https://nodemailer.com/message/attachments/) supported: utf-8 string, custom content type, URL, encoded string, data URI, and pre-generated MIME node (be aware that your email has no access to the cloud server's file system).\n\nAn example template might have an ID of `following` and content like:\n\n```js\n{\n  subject: \"@{{username}} is now following you!\",\n  html: \"Just writing to let you know that <code>@{{username}}</code> ({{name}}) is now following you.\",\n  attachments: [\n    {\n     filename: \"{{username}}.jpg\",\n     path: \"{{imagePath}}\" \n    }\n  ]\n}\n```\n\nTo deliver email using templates, when adding documents to your `${param:MAIL_COLLECTION}` collection, include a `template` field with `name` and `data` properties. For example, using our `following` template from above:\n\n```js\nadmin\n  .firestore()\n  .collection(\"${param:MAIL_COLLECTION}\")\n  .add({\n    toUids: [\"abc123\"],\n    template: {\n      name: \"following\",\n      data: {\n        username: \"ada\",\n        name: \"Ada Lovelace\",\n        imagePath: \"https://path-to-file/image-name.jpg\"\n      },\n    },\n  });\n```\n\n#### Template Partials\n\nTemplates may be registered reusable [partials](https://handlebarsjs.com/guide/partials.html) by specifying `{partial: true}` in the document in the template collection. Each of the standard data fields (`subject`, `html`, `text`, and `amp`) will be defined as a partial used only in its own environment. For example, a partial called `footer` might have data like:\n\n```js\n{\n  partial: true,\n  html: \"<p>This mail was sent by ExampleApp, Inc. <a href='https://example.com/unsubscribe'>Unsubscribe</a></p>\",\n  text: \"This mail was sent by ExampleApp, Inc. Unsubscribe here: https://example.com/unsubscribe\"\n}\n```\n\nIn another template, the partial can be included by its name (document ID):\n\n```html\n<p>This is my main template content, but it will use a common footer.</p>\n\n{{> footer }}\n```\n\n#### Security rules and sending email\n\nThis extension can be used to trigger email delivery directly from client applications. However, you should carefully control client access to the `${param:MAIL_COLLECTION}` collection to avoid potential abuse (you don't want users able to send arbitrary emails from your company's address!).\n\nSecurity rules will vary from application to application, but you should always make sure that emails are sent only to intended recipients and free-form content is kept to a minimum. Templates can help here -- you can use security rules to verify that the data being populated to the template matches your expectations for what a user should be allowed to trigger.\n\n#### Email delivery processing\n\nWhen a document is added to the `${param:MAIL_COLLECTION}` collection, the extension picks it up for email delivery processing. The extension creates and updates a `delivery` field in the document as it processes the email. The `delivery` field can be populated with the following fields:\n\n- **state:** One of `PENDING`, `PROCESSING`, `SUCCESS`, or `ERROR`.\n- **startTime:** Timestamp when email processing began.\n- **endTime:** Timestamp when email processing completed (that is, ended in either a `SUCCESS` or `ERROR` state).\n- **error:** If there was an email delivery error, an error message will be populated here.\n- **attempts:** Number of delivery attempts for this email.\n- **leaseExpireTime:** In case of a hang or timeout, the time at which a `PROCESSING` state should be considered an error.\n- **info:** After successful email delivery (to at least one address), this field will be populated with the following fields:\n  - **messageId:** The message ID of the delivered email.\n  - **accepted:** Array of email addresses to which the email was successfully delivered.\n  - **rejected:** Array of email addresses to which the email could not be delivered.\n  - **pending:** Array of email addresses that were temporarily rejected by SMTP.\n  - **response:** The last response from the SMTP server.\n\nAn email will typically go from `PENDING` to `PROCESSING` to either `SUCCESS` or `ERROR`. Once in the `SUCCESS` or `ERROR` state, additional changes to the document will not trigger the extension to send another email. To resend an email with document updates, you can change the `state` to `PENDING` or `RETRY`.\n\n#### Manual retries\n\nThere are instances in which email delivery fails in a recoverable fashion or the document can be manually corrected for proper delivery with minor modifications. While retries are not automatic, you can manually change the `state` in the `delivery` field to `RETRY` so that the extension attempts email delivery again (and increments the number of `attempts`).\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n\n[mail_collection]: https://console.firebase.google.com/project/_/firestore/data~2F${param:MAIL_COLLECTION}\n[admin_sdk]: https://firebase.google.com/docs/admin/setup\n[amp4email]: https://amp.dev/documentation/guides-and-tutorials/learn/email-spec/amp-email-format/\n[handlebars]: https://handlebarsjs.com/\n","readmeContent":"# Trigger Email\n\n**Author**: Firebase (**[https://firebase.google.com](https://firebase.google.com)**)\n\n**Description**: Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.\n\n\n\n**Details**: Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- You will be charged a small amount (typically around $0.01/month) for the Firebase resources required by this extension (even if it is not used).\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s free tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n\n\n\n\n**Configuration Parameters:**\n\n* Cloud Functions location: Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).\n\n* SMTP connection URI: A URI representing an SMTP server this extension can use to deliver email. Note that port 25 is blocked by Google Cloud Platform, so we recommend using port 587 for SMTP connections. If you're using the SMTPS protocol, we recommend using port 465.\n\n* Email documents collection: What is the path to the collection that contains the documents used to build and send the emails?\n\n* Default FROM address: The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).\n\n* Default REPLY-TO address: The email address to use as the reply-to address (if it's not specified in the added email document).\n\n* Users collection: A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection.\n\n* Templates collection: A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document.\n\n\n\n**Cloud Functions:**\n\n* **processQueue:** Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.\n\n\n\n**Access Required**:\n\n\n\nThis extension will operate with the following project IAM roles:\n\n* datastore.user (Reason: Allows this extension to access Cloud Firestore to read and process added email documents.)\n","displayName":"Trigger Email","systemParams":[{"param":"firebaseextensions.v1beta.function/memory","label":"Function memory","type":"SELECT","description":"How much memory should be allocated to each function?","options":[{"value":"128","label":"128MB"},{"value":"256","label":"256MB"},{"value":"512","label":"512MB"},{"value":"1024","label":"1GB"},{"value":"2048","label":"2GB"},{"value":"4096","label":"4GB"},{"value":"8192","label":"8GB"}],"default":"256","advanced":true},{"param":"firebaseextensions.v1beta.function/timeoutSeconds","label":"Function timeout seconds","type":"STRING","description":"How long should functions run before timing out, in seconds (0-540)?","validationRegex":"^[1-9][0-9]{0,2}$","validationErrorMessage":"Function timeout should be an integer number of seconds, between 0 and 540","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnector","label":"VPC Connector","type":"STRING","description":"The VPC Network Connector that this cloud function can connect to. It can be either the fully-qualified URI, or the short name of the network connector resource. The format of this field is projects/*/locations/*/connectors/*.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/connectors/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnectorEgressSettings","label":"VPC Connector Egress settings","type":"SELECT","description":"Controls outgoing traffic when a VPC connector is configured","options":[{"value":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","label":"Unspecified"},{"value":"PRIVATE_RANGES_ONLY","label":"Private ranges only"},{"value":"ALL_TRAFFIC","label":"All traffic"}],"default":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","advanced":true},{"param":"firebaseextensions.v1beta.function/minInstances","label":"Minimum function instances","type":"STRING","description":"The minimum number of instances of each function to run at once (0-1000)","default":"0","validationRegex":"^[0-9]*$","validationErrorMessage":"Min instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/maxInstances","label":"Maximum function instances","type":"STRING","description":"The maximum number of instances of each function to run at once","default":"3000","validationRegex":"^[0-9]*$","validationErrorMessage":"Max instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/ingressSettings","label":"Function ingress settings","type":"SELECT","description":"Where should functions allow incoming traffic from?","options":[{"value":"ALLOW_ALL","label":"Allow all"},{"value":"ALLOW_INTERNAL_ONLY","label":"Allow internal only"},{"value":"ALLOW_INTERNAL_AND_GCLB","label":"Allow internal and GCLB"}],"advanced":true},{"param":"firebaseextensions.v1beta.function/labels","label":"Function labels","type":"STRING","description":"Do you wish to set any labels on this instance's Cloud Functions? If so, provide up to 55 labels in the format 'key1:value, key2:value'","validationRegex":"^([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63},\\s*)*([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63})$","advanced":true},{"param":"firebaseextensions.v1beta.function/kmsKeyName","label":"KMS key name","type":"STRING","description":"Do you want to use a Customer Managed Eencryption Key (CMEK) to encrypt this extension's functions? If you set this, you must also set a Docker repository encrypted by that key. See https://cloud.google.com/functions/docs/securing/cmek for more details.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/keyRings/([^/]+)/cryptoKeys/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/dockerRepository","label":"Docker repository","type":"STRING","description":"What Docker repository should be used to store function images? Default repository will be used if not set.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/repositories/([^/]+)$","advanced":true}]},"state":"PUBLISHED","hash":"b27d9abdce9a45b2c9c60f66c26e3e160b9177abdd35810855ae0639dcef9831","createTime":"2021-08-19T22:57:43.668508Z","id":"0.1.11","releaseNotes":"fixed - added fallback for finding email templates\n\nfixed - removed duplicate Warsaw location\n","listing":{"state":"APPROVED"},"metrics":{"activeInstallCount":"800"}},{"name":"publishers/firebase/extensions/firestore-send-email/versions/0.1.12","ref":"firebase/firestore-send-email@0.1.12","spec":{"specVersion":"v1beta","name":"firestore-send-email","version":"0.1.12","description":"Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.","roles":[{"role":"datastore.user","reason":"Allows this extension to access Cloud Firestore to read and process added email documents."}],"resources":[{"name":"processQueue","type":"firebaseextensions.v1beta.function","propertiesYaml":"eventTrigger:\n  eventType: providers/cloud.firestore/eventTypes/document.write\n  resource: projects/${param:PROJECT_ID}/databases/(default)/documents/${param:MAIL_COLLECTION}/{id}\nlocation: ${param:LOCATION}\nruntime: nodejs14\n","description":"Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.","deletionPolicy":"DELETE"}],"billingRequired":true,"author":{"authorName":"Firebase","url":"https://firebase.google.com"},"contributors":[{"authorName":"Michael Bleigh","url":"https://github.com/mbleigh"},{"authorName":"Invertase","email":"oss@invertase.io","url":"https://github.com/invertase"}],"license":"Apache-2.0","releaseNotesUrl":"https://github.com/firebase/extensions/blob/master/firestore-send-email/CHANGELOG.md","sourceUrl":"https://github.com/firebase/extensions/tree/master/firestore-send-email","params":[{"param":"LOCATION","label":"Cloud Functions location","type":"SELECT","description":"Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).","required":true,"options":[{"value":"us-central1","label":"Iowa (us-central1)"},{"value":"us-east1","label":"South Carolina (us-east1)"},{"value":"us-east4","label":"Northern Virginia (us-east4)"},{"value":"us-west2","label":"Los Angeles (us-west2)"},{"value":"us-west3","label":"Salt Lake City (us-west3)"},{"value":"us-west4","label":"Las Vegas (us-west4)"},{"value":"europe-central2","label":"Warsaw (europe-central2)"},{"value":"europe-west1","label":"Belgium (europe-west1)"},{"value":"europe-west2","label":"London (europe-west2)"},{"value":"europe-west3","label":"Frankfurt (europe-west3)"},{"value":"europe-west6","label":"Zurich (europe-west6)"},{"value":"asia-east1","label":"Taiwan (asia-east1)"},{"value":"asia-east2","label":"Hong Kong (asia-east2)"},{"value":"asia-northeast1","label":"Tokyo (asia-northeast1)"},{"value":"asia-northeast2","label":"Osaka (asia-northeast2)"},{"value":"asia-northeast3","label":"Seoul (asia-northeast3)"},{"value":"asia-south1","label":"Mumbai (asia-south1)"},{"value":"asia-southeast1","label":"Singapore (asia-southeast1)"},{"value":"asia-southeast2","label":"Jakarta (asia-southeast2)"},{"value":"northamerica-northeast1","label":"Montreal (northamerica-northeast1)"},{"value":"southamerica-east1","label":"Sao Paulo (southamerica-east1)"},{"value":"australia-southeast1","label":"Sydney (australia-southeast1)"}],"default":"us-central1","immutable":true},{"param":"SMTP_CONNECTION_URI","label":"SMTP connection URI","type":"STRING","description":"A URI representing an SMTP server this extension can use to deliver email. Note that port 25 is blocked by Google Cloud Platform, so we recommend using port 587 for SMTP connections. If you're using the SMTPS protocol, we recommend using port 465.","required":true,"example":"smtps://username:password@smtp.hostname.com:465","validationRegex":"^smtps?://[^:]+:[^:]+@.*$","validationErrorMessage":"Invalid SMTP connection URI. Must be in the form `smtp(s)://username:password@hostname:port`."},{"param":"MAIL_COLLECTION","label":"Email documents collection","type":"STRING","description":"What is the path to the collection that contains the documents used to build and send the emails?","required":true,"default":"mail","validationRegex":"^[^/]+(/[^/]+/[^/]+)*$","validationErrorMessage":"Must be a valid Cloud Firestore collection"},{"param":"DEFAULT_FROM","label":"Default FROM address","type":"STRING","description":"The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).","required":true,"example":"foobar@example.com","validationRegex":"^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$|^.*<(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})>$","validationErrorMessage":"Must be a valid email address or valid name plus email address"},{"param":"DEFAULT_REPLY_TO","label":"Default REPLY-TO address","type":"STRING","description":"The email address to use as the reply-to address (if it's not specified in the added email document)."},{"param":"USERS_COLLECTION","label":"Users collection","type":"STRING","description":"A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection."},{"param":"TEMPLATES_COLLECTION","label":"Templates collection","type":"STRING","description":"A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document."}],"preinstallContent":"Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- You will be charged a small amount (typically around $0.01/month) for the Firebase resources required by this extension (even if it is not used).\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s free tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n","postinstallContent":"### See it in action\n\nYou can test out this extension right away!\n\n1.  Go to your [Cloud Firestore dashboard](https://console.firebase.google.com/project/${param:PROJECT_ID}/firestore/data) in the Firebase console.\n\n1.  If it doesn't already exist, create the collection you specified during installation: `${param:MAIL_COLLECTION}`.\n\n1.  Add a document with a `to` field and a `message` field with the following content:\n\n    ```js\n    to: ['someone@example.com'],\n    message: {\n      subject: 'Hello from Firebase!',\n      text: 'This is the plaintext section of the email body.',\n      html: 'This is the <code>HTML</code> section of the email body.',\n    }\n    ```\n\n1.  In a few seconds, you'll see a `delivery` field appear in the document. The field will update as the extension processes the email.\n\n**Note:** You can also use the [Firebase Admin SDK][admin_sdk] to add a document:\n\n```js\nadmin\n  .firestore()\n  .collection(\"${param:MAIL_COLLECTION}\")\n  .add({\n    to: \"someone@example.com\",\n    message: {\n      subject: \"Hello from Firebase!\",\n      text: \"This is the plaintext section of the email body.\",\n      html: \"This is the <code>HTML</code> section of the email body.\",\n    },\n  })\n  .then(() => console.log(\"Queued email for delivery!\"));\n```\n\n### Using this extension\n\nAfter its installation, this extension monitors all document writes to the `${param:MAIL_COLLECTION}` collection. Email is delivered based on the contents of the document's fields. The top-level fields specify the email's sender and recipients. The `message` field contains the details of the email to deliver, including the email body.\n\n#### Sender and recipient fields\n\nThe top-level fields of the document supply the email sender and recipient information. Available fields are:\n\n- **from:** The sender's email address. If not specified in the document, uses the configured \"Default FROM address\" parameter.\n- **replyTo:** The reply-to email address. If not specified in the document, uses the configured \"Default REPLY-TO address\" parameter.\n- **to:** A single recipient email address or an array containing multiple recipient email addresses.\n- **toUids:** An array containing the recipient UIDs.\n- **cc:** A single recipient email address or an array containing multiple recipient email addresses.\n- **ccUids:** An array containing the CC recipient UIDs.\n- **bcc:** A single recipient email address or an array containing multiple recipient email addresses.\n- **bccUids:** An array containing the BCC recipient UIDs.\n- **headers:** An object of additional header fields (for example, `{\"X-Custom-Header\": \"value\", \"X-Second-Custom-Header\": \"value\"}`).\n\n**NOTE:** The `toUids`, `ccUids`, and `bccUids` options deliver emails based on user UIDs keyed to email addresses within a Cloud Firestore document. To use these recipient options, you need to specify a Cloud Firestore collection for the extension's \"Users collection\" parameter. The extension can then read the `email` field for each UID specified in the `toUids`, `ccUids`, and/or `bccUids` fields.\n\n#### Message field\n\nThe `message` field of the document contains raw delivery information for the email. This field should generally only be populated by trusted code running in your own servers or Cloud Functions (refer to the \"Security rules and sending email\" section below).\n\nAvailable properties for the `message` field are:\n\n- **messageId:** A message ID header for the email, if any.\n- **subject:** The subject of the email.\n- **text:** The plaintext content of the email.\n- **html:** The HTML content of the email.\n- **amp:** The [AMP4EMAIL][amp4email] content of the email.\n- **attachments:** An array containing attachment(s); [Nodemailer options](https://nodemailer.com/message/attachments/) supported: utf-8 string, custom content type, URL, encoded string, data URI, and pregenerated MIME node (be aware that your email has no access to the cloud server's file system).\n\n#### Using templates\n\nIf you specified a \"Templates collection\" parameter during configuration of the extension, you can create and manage [Handlebars][handlebars] templates for your emails. Each document for a template should have a memorable ID that you use as the _template name_ in the document that's written to your `${param:MAIL_COLLECTION}` collection.\n\nThe template document can include any of the following fields:\n\n- **subject:** A template string for the subject of the email.\n- **text:** A template string for the plaintext content of the email.\n- **html:** A template string for the HTML content of the email.\n- **amp:** A template string for the [AMP4EMAIL][amp4email] content of the email.\n- **attachments:** An array of attachments with template strings as values; [Nodemailer options](https://nodemailer.com/message/attachments/) supported: utf-8 string, custom content type, URL, encoded string, data URI, and pre-generated MIME node (be aware that your email has no access to the cloud server's file system).\n\nAn example template might have an ID of `following` and content like:\n\n```js\n{\n  subject: \"@{{username}} is now following you!\",\n  html: \"Just writing to let you know that <code>@{{username}}</code> ({{name}}) is now following you.\",\n  attachments: [\n    {\n     filename: \"{{username}}.jpg\",\n     path: \"{{imagePath}}\" \n    }\n  ]\n}\n```\n\nTo deliver email using templates, when adding documents to your `${param:MAIL_COLLECTION}` collection, include a `template` field with `name` and `data` properties. For example, using our `following` template from above:\n\n```js\nadmin\n  .firestore()\n  .collection(\"${param:MAIL_COLLECTION}\")\n  .add({\n    toUids: [\"abc123\"],\n    template: {\n      name: \"following\",\n      data: {\n        username: \"ada\",\n        name: \"Ada Lovelace\",\n        imagePath: \"https://path-to-file/image-name.jpg\"\n      },\n    },\n  });\n```\n\n#### Template Partials\n\nTemplates may be registered reusable [partials](https://handlebarsjs.com/guide/partials.html) by specifying `{partial: true}` in the document in the template collection. Each of the standard data fields (`subject`, `html`, `text`, and `amp`) will be defined as a partial used only in its own environment. For example, a partial called `footer` might have data like:\n\n```js\n{\n  partial: true,\n  html: \"<p>This mail was sent by ExampleApp, Inc. <a href='https://example.com/unsubscribe'>Unsubscribe</a></p>\",\n  text: \"This mail was sent by ExampleApp, Inc. Unsubscribe here: https://example.com/unsubscribe\"\n}\n```\n\nIn another template, the partial can be included by its name (document ID):\n\n```html\n<p>This is my main template content, but it will use a common footer.</p>\n\n{{> footer }}\n```\n\n#### Security rules and sending email\n\nThis extension can be used to trigger email delivery directly from client applications. However, you should carefully control client access to the `${param:MAIL_COLLECTION}` collection to avoid potential abuse (you don't want users able to send arbitrary emails from your company's address!).\n\nSecurity rules will vary from application to application, but you should always make sure that emails are sent only to intended recipients and free-form content is kept to a minimum. Templates can help here -- you can use security rules to verify that the data being populated to the template matches your expectations for what a user should be allowed to trigger.\n\n#### Email delivery processing\n\nWhen a document is added to the `${param:MAIL_COLLECTION}` collection, the extension picks it up for email delivery processing. The extension creates and updates a `delivery` field in the document as it processes the email. The `delivery` field can be populated with the following fields:\n\n- **state:** One of `PENDING`, `PROCESSING`, `SUCCESS`, or `ERROR`.\n- **startTime:** Timestamp when email processing began.\n- **endTime:** Timestamp when email processing completed (that is, ended in either a `SUCCESS` or `ERROR` state).\n- **error:** If there was an email delivery error, an error message will be populated here.\n- **attempts:** Number of delivery attempts for this email.\n- **leaseExpireTime:** In case of a hang or timeout, the time at which a `PROCESSING` state should be considered an error.\n- **info:** After successful email delivery (to at least one address), this field will be populated with the following fields:\n  - **messageId:** The message ID of the delivered email.\n  - **accepted:** Array of email addresses to which the email was successfully delivered.\n  - **rejected:** Array of email addresses to which the email could not be delivered.\n  - **pending:** Array of email addresses that were temporarily rejected by SMTP.\n  - **response:** The last response from the SMTP server.\n\nAn email will typically go from `PENDING` to `PROCESSING` to either `SUCCESS` or `ERROR`. Once in the `SUCCESS` or `ERROR` state, additional changes to the document will not trigger the extension to send another email. To resend an email with document updates, you can change the `state` to `PENDING` or `RETRY`.\n\n#### Manual retries\n\nThere are instances in which email delivery fails in a recoverable fashion or the document can be manually corrected for proper delivery with minor modifications. While retries are not automatic, you can manually change the `state` in the `delivery` field to `RETRY` so that the extension attempts email delivery again (and increments the number of `attempts`).\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n\n[mail_collection]: https://console.firebase.google.com/project/_/firestore/data~2F${param:MAIL_COLLECTION}\n[admin_sdk]: https://firebase.google.com/docs/admin/setup\n[amp4email]: https://amp.dev/documentation/guides-and-tutorials/learn/email-spec/amp-email-format/\n[handlebars]: https://handlebarsjs.com/\n","readmeContent":"# Trigger Email\n\n**Author**: Firebase (**[https://firebase.google.com](https://firebase.google.com)**)\n\n**Description**: Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.\n\n\n\n**Details**: Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- You will be charged a small amount (typically around $0.01/month) for the Firebase resources required by this extension (even if it is not used).\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s free tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n\n\n\n\n**Configuration Parameters:**\n\n* Cloud Functions location: Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).\n\n* SMTP connection URI: A URI representing an SMTP server this extension can use to deliver email. Note that port 25 is blocked by Google Cloud Platform, so we recommend using port 587 for SMTP connections. If you're using the SMTPS protocol, we recommend using port 465.\n\n* Email documents collection: What is the path to the collection that contains the documents used to build and send the emails?\n\n* Default FROM address: The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).\n\n* Default REPLY-TO address: The email address to use as the reply-to address (if it's not specified in the added email document).\n\n* Users collection: A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection.\n\n* Templates collection: A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document.\n\n\n\n**Cloud Functions:**\n\n* **processQueue:** Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.\n\n\n\n**Access Required**:\n\n\n\nThis extension will operate with the following project IAM roles:\n\n* datastore.user (Reason: Allows this extension to access Cloud Firestore to read and process added email documents.)\n","displayName":"Trigger Email","systemParams":[{"param":"firebaseextensions.v1beta.function/memory","label":"Function memory","type":"SELECT","description":"How much memory should be allocated to each function?","options":[{"value":"128","label":"128MB"},{"value":"256","label":"256MB"},{"value":"512","label":"512MB"},{"value":"1024","label":"1GB"},{"value":"2048","label":"2GB"},{"value":"4096","label":"4GB"},{"value":"8192","label":"8GB"}],"default":"256","advanced":true},{"param":"firebaseextensions.v1beta.function/timeoutSeconds","label":"Function timeout seconds","type":"STRING","description":"How long should functions run before timing out, in seconds (0-540)?","validationRegex":"^[1-9][0-9]{0,2}$","validationErrorMessage":"Function timeout should be an integer number of seconds, between 0 and 540","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnector","label":"VPC Connector","type":"STRING","description":"The VPC Network Connector that this cloud function can connect to. It can be either the fully-qualified URI, or the short name of the network connector resource. The format of this field is projects/*/locations/*/connectors/*.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/connectors/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnectorEgressSettings","label":"VPC Connector Egress settings","type":"SELECT","description":"Controls outgoing traffic when a VPC connector is configured","options":[{"value":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","label":"Unspecified"},{"value":"PRIVATE_RANGES_ONLY","label":"Private ranges only"},{"value":"ALL_TRAFFIC","label":"All traffic"}],"default":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","advanced":true},{"param":"firebaseextensions.v1beta.function/minInstances","label":"Minimum function instances","type":"STRING","description":"The minimum number of instances of each function to run at once (0-1000)","default":"0","validationRegex":"^[0-9]*$","validationErrorMessage":"Min instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/maxInstances","label":"Maximum function instances","type":"STRING","description":"The maximum number of instances of each function to run at once","default":"3000","validationRegex":"^[0-9]*$","validationErrorMessage":"Max instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/ingressSettings","label":"Function ingress settings","type":"SELECT","description":"Where should functions allow incoming traffic from?","options":[{"value":"ALLOW_ALL","label":"Allow all"},{"value":"ALLOW_INTERNAL_ONLY","label":"Allow internal only"},{"value":"ALLOW_INTERNAL_AND_GCLB","label":"Allow internal and GCLB"}],"advanced":true},{"param":"firebaseextensions.v1beta.function/labels","label":"Function labels","type":"STRING","description":"Do you wish to set any labels on this instance's Cloud Functions? If so, provide up to 55 labels in the format 'key1:value, key2:value'","validationRegex":"^([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63},\\s*)*([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63})$","advanced":true},{"param":"firebaseextensions.v1beta.function/kmsKeyName","label":"KMS key name","type":"STRING","description":"Do you want to use a Customer Managed Eencryption Key (CMEK) to encrypt this extension's functions? If you set this, you must also set a Docker repository encrypted by that key. See https://cloud.google.com/functions/docs/securing/cmek for more details.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/keyRings/([^/]+)/cryptoKeys/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/dockerRepository","label":"Docker repository","type":"STRING","description":"What Docker repository should be used to store function images? Default repository will be used if not set.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/repositories/([^/]+)$","advanced":true}]},"state":"PUBLISHED","hash":"0c6040b6620388fd855a03275ca6e06706746e1f306890688e7f5b306a25b8f1","createTime":"2021-10-20T18:20:06.841274Z","id":"0.1.12","releaseNotes":"fixed - moved lease expired error message to delivery document (#726)\n\nfeature - add Taiwan and Singapore Cloud Function locations (#729)\n\nfixed - empty template attachments fall back to message attachments (#719)\n","listing":{"state":"APPROVED"},"metrics":{"activeInstallCount":"700"}},{"name":"publishers/firebase/extensions/firestore-send-email/versions/0.1.13","ref":"firebase/firestore-send-email@0.1.13","spec":{"specVersion":"v1beta","name":"firestore-send-email","version":"0.1.13","description":"Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.","roles":[{"role":"datastore.user","reason":"Allows this extension to access Cloud Firestore to read and process added email documents."}],"resources":[{"name":"processQueue","type":"firebaseextensions.v1beta.function","propertiesYaml":"eventTrigger:\n  eventType: providers/cloud.firestore/eventTypes/document.write\n  resource: projects/${param:PROJECT_ID}/databases/(default)/documents/${param:MAIL_COLLECTION}/{id}\nlocation: ${param:LOCATION}\nruntime: nodejs14\n","description":"Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.","deletionPolicy":"DELETE"}],"billingRequired":true,"author":{"authorName":"Firebase","url":"https://firebase.google.com"},"contributors":[{"authorName":"Michael Bleigh","url":"https://github.com/mbleigh"},{"authorName":"Invertase","email":"oss@invertase.io","url":"https://github.com/invertase"}],"license":"Apache-2.0","releaseNotesUrl":"https://github.com/firebase/extensions/blob/master/firestore-send-email/CHANGELOG.md","sourceUrl":"https://github.com/firebase/extensions/tree/master/firestore-send-email","params":[{"param":"LOCATION","label":"Cloud Functions location","type":"SELECT","description":"Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).","required":true,"options":[{"value":"us-central1","label":"Iowa (us-central1)"},{"value":"us-east1","label":"South Carolina (us-east1)"},{"value":"us-east4","label":"Northern Virginia (us-east4)"},{"value":"us-west2","label":"Los Angeles (us-west2)"},{"value":"us-west3","label":"Salt Lake City (us-west3)"},{"value":"us-west4","label":"Las Vegas (us-west4)"},{"value":"europe-central2","label":"Warsaw (europe-central2)"},{"value":"europe-west1","label":"Belgium (europe-west1)"},{"value":"europe-west2","label":"London (europe-west2)"},{"value":"europe-west3","label":"Frankfurt (europe-west3)"},{"value":"europe-west6","label":"Zurich (europe-west6)"},{"value":"asia-east1","label":"Taiwan (asia-east1)"},{"value":"asia-east2","label":"Hong Kong (asia-east2)"},{"value":"asia-northeast1","label":"Tokyo (asia-northeast1)"},{"value":"asia-northeast2","label":"Osaka (asia-northeast2)"},{"value":"asia-northeast3","label":"Seoul (asia-northeast3)"},{"value":"asia-south1","label":"Mumbai (asia-south1)"},{"value":"asia-southeast1","label":"Singapore (asia-southeast1)"},{"value":"asia-southeast2","label":"Jakarta (asia-southeast2)"},{"value":"northamerica-northeast1","label":"Montreal (northamerica-northeast1)"},{"value":"southamerica-east1","label":"Sao Paulo (southamerica-east1)"},{"value":"australia-southeast1","label":"Sydney (australia-southeast1)"}],"default":"us-central1","immutable":true},{"param":"SMTP_CONNECTION_URI","label":"SMTP connection URI","type":"STRING","description":"A URI representing an SMTP server this extension can use to deliver email. Note that port 25 is blocked by Google Cloud Platform, so we recommend using port 587 for SMTP connections. If you're using the SMTPS protocol, we recommend using port 465.","required":true,"example":"smtps://username:password@smtp.hostname.com:465","validationRegex":"^smtps?://[^:]+:[^:]+@.*$","validationErrorMessage":"Invalid SMTP connection URI. Must be in the form `smtp(s)://username:password@hostname:port`."},{"param":"MAIL_COLLECTION","label":"Email documents collection","type":"STRING","description":"What is the path to the collection that contains the documents used to build and send the emails?","required":true,"default":"mail","validationRegex":"^[^/]+(/[^/]+/[^/]+)*$","validationErrorMessage":"Must be a valid Cloud Firestore collection"},{"param":"DEFAULT_FROM","label":"Default FROM address","type":"STRING","description":"The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).","required":true,"example":"foobar@example.com","validationRegex":"^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$|^.*<(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})>$","validationErrorMessage":"Must be a valid email address or valid name plus email address"},{"param":"DEFAULT_REPLY_TO","label":"Default REPLY-TO address","type":"STRING","description":"The email address to use as the reply-to address (if it's not specified in the added email document)."},{"param":"USERS_COLLECTION","label":"Users collection","type":"STRING","description":"A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection."},{"param":"TEMPLATES_COLLECTION","label":"Templates collection","type":"STRING","description":"A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document."}],"preinstallContent":"Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- You will be charged a small amount (typically around $0.01/month) for the Firebase resources required by this extension (even if it is not used).\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s free tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n","postinstallContent":"### See it in action\n\nYou can test out this extension right away!\n\n1.  Go to your [Cloud Firestore dashboard](https://console.firebase.google.com/project/${param:PROJECT_ID}/firestore/data) in the Firebase console.\n\n1.  If it doesn't already exist, create the collection you specified during installation: `${param:MAIL_COLLECTION}`.\n\n1.  Add a document with a `to` field and a `message` field with the following content:\n\n    ```js\n    to: ['someone@example.com'],\n    message: {\n      subject: 'Hello from Firebase!',\n      text: 'This is the plaintext section of the email body.',\n      html: 'This is the <code>HTML</code> section of the email body.',\n    }\n    ```\n\n1.  In a few seconds, you'll see a `delivery` field appear in the document. The field will update as the extension processes the email.\n\n**Note:** You can also use the [Firebase Admin SDK][admin_sdk] to add a document:\n\n```js\nadmin\n  .firestore()\n  .collection(\"${param:MAIL_COLLECTION}\")\n  .add({\n    to: \"someone@example.com\",\n    message: {\n      subject: \"Hello from Firebase!\",\n      text: \"This is the plaintext section of the email body.\",\n      html: \"This is the <code>HTML</code> section of the email body.\",\n    },\n  })\n  .then(() => console.log(\"Queued email for delivery!\"));\n```\n\n### Using this extension\n\nSee the [official documentation](https://firebase.google.com/docs/extensions/official/firestore-send-email) for information on using this extension, including advanced use cases such as using Handlebars templates and managing email delivery status.\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n\n[mail_collection]: https://console.firebase.google.com/project/_/firestore/data~2F${param:MAIL_COLLECTION}\n[admin_sdk]: https://firebase.google.com/docs/admin/setup\n[amp4email]: https://amp.dev/documentation/guides-and-tutorials/learn/email-spec/amp-email-format/\n[handlebars]: https://handlebarsjs.com/\n","readmeContent":"# Trigger Email\n\n**Author**: Firebase (**[https://firebase.google.com](https://firebase.google.com)**)\n\n**Description**: Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.\n\n\n\n**Details**: Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- You will be charged a small amount (typically around $0.01/month) for the Firebase resources required by this extension (even if it is not used).\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s free tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n\n\n\n\n**Configuration Parameters:**\n\n* Cloud Functions location: Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).\n\n* SMTP connection URI: A URI representing an SMTP server this extension can use to deliver email. Note that port 25 is blocked by Google Cloud Platform, so we recommend using port 587 for SMTP connections. If you're using the SMTPS protocol, we recommend using port 465.\n\n* Email documents collection: What is the path to the collection that contains the documents used to build and send the emails?\n\n* Default FROM address: The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).\n\n* Default REPLY-TO address: The email address to use as the reply-to address (if it's not specified in the added email document).\n\n* Users collection: A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection.\n\n* Templates collection: A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document.\n\n\n\n**Cloud Functions:**\n\n* **processQueue:** Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.\n\n\n\n**Access Required**:\n\n\n\nThis extension will operate with the following project IAM roles:\n\n* datastore.user (Reason: Allows this extension to access Cloud Firestore to read and process added email documents.)\n","displayName":"Trigger Email","systemParams":[{"param":"firebaseextensions.v1beta.function/memory","label":"Function memory","type":"SELECT","description":"How much memory should be allocated to each function?","options":[{"value":"128","label":"128MB"},{"value":"256","label":"256MB"},{"value":"512","label":"512MB"},{"value":"1024","label":"1GB"},{"value":"2048","label":"2GB"},{"value":"4096","label":"4GB"},{"value":"8192","label":"8GB"}],"default":"256","advanced":true},{"param":"firebaseextensions.v1beta.function/timeoutSeconds","label":"Function timeout seconds","type":"STRING","description":"How long should functions run before timing out, in seconds (0-540)?","validationRegex":"^[1-9][0-9]{0,2}$","validationErrorMessage":"Function timeout should be an integer number of seconds, between 0 and 540","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnector","label":"VPC Connector","type":"STRING","description":"The VPC Network Connector that this cloud function can connect to. It can be either the fully-qualified URI, or the short name of the network connector resource. The format of this field is projects/*/locations/*/connectors/*.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/connectors/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnectorEgressSettings","label":"VPC Connector Egress settings","type":"SELECT","description":"Controls outgoing traffic when a VPC connector is configured","options":[{"value":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","label":"Unspecified"},{"value":"PRIVATE_RANGES_ONLY","label":"Private ranges only"},{"value":"ALL_TRAFFIC","label":"All traffic"}],"default":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","advanced":true},{"param":"firebaseextensions.v1beta.function/minInstances","label":"Minimum function instances","type":"STRING","description":"The minimum number of instances of each function to run at once (0-1000)","default":"0","validationRegex":"^[0-9]*$","validationErrorMessage":"Min instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/maxInstances","label":"Maximum function instances","type":"STRING","description":"The maximum number of instances of each function to run at once","default":"3000","validationRegex":"^[0-9]*$","validationErrorMessage":"Max instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/ingressSettings","label":"Function ingress settings","type":"SELECT","description":"Where should functions allow incoming traffic from?","options":[{"value":"ALLOW_ALL","label":"Allow all"},{"value":"ALLOW_INTERNAL_ONLY","label":"Allow internal only"},{"value":"ALLOW_INTERNAL_AND_GCLB","label":"Allow internal and GCLB"}],"advanced":true},{"param":"firebaseextensions.v1beta.function/labels","label":"Function labels","type":"STRING","description":"Do you wish to set any labels on this instance's Cloud Functions? If so, provide up to 55 labels in the format 'key1:value, key2:value'","validationRegex":"^([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63},\\s*)*([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63})$","advanced":true},{"param":"firebaseextensions.v1beta.function/kmsKeyName","label":"KMS key name","type":"STRING","description":"Do you want to use a Customer Managed Eencryption Key (CMEK) to encrypt this extension's functions? If you set this, you must also set a Docker repository encrypted by that key. See https://cloud.google.com/functions/docs/securing/cmek for more details.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/keyRings/([^/]+)/cryptoKeys/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/dockerRepository","label":"Docker repository","type":"STRING","description":"What Docker repository should be used to store function images? Default repository will be used if not set.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/repositories/([^/]+)$","advanced":true}]},"state":"PUBLISHED","hash":"4286ee730224ce486fc4b9bb00630d94096baa44f3f5abb1b136c2546d22ed2b","createTime":"2021-12-13T21:58:41.288845Z","id":"0.1.13","releaseNotes":"docs - updated POSTINSTALL docs to link to Firebase documentation\n","listing":{"state":"APPROVED"},"metrics":{"activeInstallCount":"1200"}},{"name":"publishers/firebase/extensions/firestore-send-email/versions/0.1.15","ref":"firebase/firestore-send-email@0.1.15","spec":{"specVersion":"v1beta","name":"firestore-send-email","version":"0.1.15","description":"Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.","roles":[{"role":"datastore.user","reason":"Allows this extension to access Cloud Firestore to read and process added email documents."}],"resources":[{"name":"processQueue","type":"firebaseextensions.v1beta.function","propertiesYaml":"eventTrigger:\n  eventType: providers/cloud.firestore/eventTypes/document.write\n  resource: projects/${param:PROJECT_ID}/databases/(default)/documents/${param:MAIL_COLLECTION}/{id}\nlocation: ${param:LOCATION}\nruntime: nodejs14\n","description":"Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.","deletionPolicy":"DELETE"}],"billingRequired":true,"author":{"authorName":"Firebase","url":"https://firebase.google.com"},"contributors":[{"authorName":"Michael Bleigh","url":"https://github.com/mbleigh"},{"authorName":"Invertase","email":"oss@invertase.io","url":"https://github.com/invertase"}],"license":"Apache-2.0","releaseNotesUrl":"https://github.com/firebase/extensions/blob/master/firestore-send-email/CHANGELOG.md","sourceUrl":"https://github.com/firebase/extensions/tree/master/firestore-send-email","params":[{"param":"LOCATION","label":"Cloud Functions location","type":"SELECT","description":"Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).","required":true,"options":[{"value":"us-central1","label":"Iowa (us-central1)"},{"value":"us-east1","label":"South Carolina (us-east1)"},{"value":"us-east4","label":"Northern Virginia (us-east4)"},{"value":"us-west2","label":"Los Angeles (us-west2)"},{"value":"us-west3","label":"Salt Lake City (us-west3)"},{"value":"us-west4","label":"Las Vegas (us-west4)"},{"value":"europe-central2","label":"Warsaw (europe-central2)"},{"value":"europe-west1","label":"Belgium (europe-west1)"},{"value":"europe-west2","label":"London (europe-west2)"},{"value":"europe-west3","label":"Frankfurt (europe-west3)"},{"value":"europe-west6","label":"Zurich (europe-west6)"},{"value":"asia-east1","label":"Taiwan (asia-east1)"},{"value":"asia-east2","label":"Hong Kong (asia-east2)"},{"value":"asia-northeast1","label":"Tokyo (asia-northeast1)"},{"value":"asia-northeast2","label":"Osaka (asia-northeast2)"},{"value":"asia-northeast3","label":"Seoul (asia-northeast3)"},{"value":"asia-south1","label":"Mumbai (asia-south1)"},{"value":"asia-southeast1","label":"Singapore (asia-southeast1)"},{"value":"asia-southeast2","label":"Jakarta (asia-southeast2)"},{"value":"northamerica-northeast1","label":"Montreal (northamerica-northeast1)"},{"value":"southamerica-east1","label":"Sao Paulo (southamerica-east1)"},{"value":"australia-southeast1","label":"Sydney (australia-southeast1)"}],"default":"us-central1","immutable":true},{"param":"SMTP_CONNECTION_URI","label":"SMTP connection URI","type":"STRING","description":"A URI representing an SMTP server this extension can use to deliver email. Note that port 25 is blocked by Google Cloud Platform, so we recommend using port 587 for SMTP connections. If you're using the SMTPS protocol, we recommend using port 465. In order to keep passwords secure, it is recommended to omit the password from the connection string while using the `SMTP Password` field for entering secrets and passwords. Passwords and secrets should now be included in `SMTP password` field.\nSecure format:\n `smtps://username@gmail.com@smtp.gmail.com:465` (username only)\n `smtps://smtp.gmail.com:465` (No username and password)\nBackwards Compatible (less secure):\n `smtps://username@gmail.com:password@smtp.gmail.com:465`. (username and password)","required":true,"example":"smtps://username@smtp.hostname.com:465","validationRegex":"^smtps?://[^:]+@.*$","validationErrorMessage":"Invalid SMTP connection URI. Must be in the form `smtp(s)://username:password@hostname:port` or `smtp(s)://username@hostname:port`."},{"param":"SMTP_PASSWORD","label":"SMTP password","type":"SECRET","description":"User password for the SMTP server"},{"param":"MAIL_COLLECTION","label":"Email documents collection","type":"STRING","description":"What is the path to the collection that contains the documents used to build and send the emails?","required":true,"default":"mail","validationRegex":"^[^/]+(/[^/]+/[^/]+)*$","validationErrorMessage":"Must be a valid Cloud Firestore collection"},{"param":"DEFAULT_FROM","label":"Default FROM address","type":"STRING","description":"The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).","required":true,"example":"foobar@example.com","validationRegex":"^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$|^.*<(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})>$","validationErrorMessage":"Must be a valid email address or valid name plus email address"},{"param":"DEFAULT_REPLY_TO","label":"Default REPLY-TO address","type":"STRING","description":"The email address to use as the reply-to address (if it's not specified in the added email document)."},{"param":"USERS_COLLECTION","label":"Users collection","type":"STRING","description":"A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection."},{"param":"TEMPLATES_COLLECTION","label":"Templates collection","type":"STRING","description":"A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document."}],"preinstallContent":"Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- You will be charged a small amount (typically around $0.01/month) for the Firebase resources required by this extension (even if it is not used).\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s free tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n","postinstallContent":"### See it in action\n\nYou can test out this extension right away!\n\n1.  Go to your [Cloud Firestore dashboard](https://console.firebase.google.com/project/${param:PROJECT_ID}/firestore/data) in the Firebase console.\n\n1.  If it doesn't already exist, create the collection you specified during installation: `${param:MAIL_COLLECTION}`.\n\n1.  Add a document with a `to` field and a `message` field with the following content:\n\n    ```js\n    to: ['someone@example.com'],\n    message: {\n      subject: 'Hello from Firebase!',\n      text: 'This is the plaintext section of the email body.',\n      html: 'This is the <code>HTML</code> section of the email body.',\n    }\n    ```\n\n1.  In a few seconds, you'll see a `delivery` field appear in the document. The field will update as the extension processes the email.\n\n**Note:** You can also use the [Firebase Admin SDK][admin_sdk] to add a document:\n\n```js\nadmin\n  .firestore()\n  .collection(\"${param:MAIL_COLLECTION}\")\n  .add({\n    to: \"someone@example.com\",\n    message: {\n      subject: \"Hello from Firebase!\",\n      text: \"This is the plaintext section of the email body.\",\n      html: \"This is the <code>HTML</code> section of the email body.\",\n    },\n  })\n  .then(() => console.log(\"Queued email for delivery!\"));\n```\n\n### Using this extension\n\nSee the [official documentation](https://firebase.google.com/docs/extensions/official/firestore-send-email) for information on using this extension, including advanced use cases such as using Handlebars templates and managing email delivery status.\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n\n[mail_collection]: https://console.firebase.google.com/project/_/firestore/data~2F${param:MAIL_COLLECTION}\n[admin_sdk]: https://firebase.google.com/docs/admin/setup\n[amp4email]: https://amp.dev/documentation/guides-and-tutorials/learn/email-spec/amp-email-format/\n[handlebars]: https://handlebarsjs.com/\n","readmeContent":"# Trigger Email\n\n**Author**: Firebase (**[https://firebase.google.com](https://firebase.google.com)**)\n\n**Description**: Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.\n\n\n\n**Details**: Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nOr in Firestore the following fields can be added:\n\n| Field       | Type        | Example                                                                                 |\n| ----------- | ----------- | --------------------------------------------------------------------------------------- |\n| `to`        | String      | `\"someone@example.com\"`                                                                 |\n| `message`   | Map         | `{ subject: \"Hello from Firebase!\", html: \"This is an <code>HTML</code> email body.\" }` |\n\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- You will be charged a small amount (typically around $0.01/month) for the Firebase resources required by this extension (even if it is not used).\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s free tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n\n\n\n\n**Configuration Parameters:**\n\n* Cloud Functions location: Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).\n\n* SMTP connection URI: A URI representing an SMTP server this extension can use to deliver email. Note that port 25 is blocked by Google Cloud Platform, so we recommend using port 587 for SMTP connections. If you're using the SMTPS protocol, we recommend using port 465. In order to keep passwords secure, it is recommended to omit the password from the connection string while using the `SMTP Password` field for entering secrets and passwords. Passwords and secrets should now be included in `SMTP password` field.\nSecure format:\n `smtps://username@gmail.com@smtp.gmail.com:465` (username only)\n `smtps://smtp.gmail.com:465` (No username and password)\nBackwards Compatible (less secure):\n `smtps://username@gmail.com:password@smtp.gmail.com:465`. (username and password)\n\n* SMTP password: User password for the SMTP server\n\n* Email documents collection: What is the path to the collection that contains the documents used to build and send the emails?\n\n* Default FROM address: The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).\n\n* Default REPLY-TO address: The email address to use as the reply-to address (if it's not specified in the added email document).\n\n* Users collection: A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection.\n\n* Templates collection: A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document.\n\n\n\n**Cloud Functions:**\n\n* **processQueue:** Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.\n\n\n\n**Access Required**:\n\n\n\nThis extension will operate with the following project IAM roles:\n\n* datastore.user (Reason: Allows this extension to access Cloud Firestore to read and process added email documents.)\n","displayName":"Trigger Email","systemParams":[{"param":"firebaseextensions.v1beta.function/memory","label":"Function memory","type":"SELECT","description":"How much memory should be allocated to each function?","options":[{"value":"128","label":"128MB"},{"value":"256","label":"256MB"},{"value":"512","label":"512MB"},{"value":"1024","label":"1GB"},{"value":"2048","label":"2GB"},{"value":"4096","label":"4GB"},{"value":"8192","label":"8GB"}],"default":"256","advanced":true},{"param":"firebaseextensions.v1beta.function/timeoutSeconds","label":"Function timeout seconds","type":"STRING","description":"How long should functions run before timing out, in seconds (0-540)?","validationRegex":"^[1-9][0-9]{0,2}$","validationErrorMessage":"Function timeout should be an integer number of seconds, between 0 and 540","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnector","label":"VPC Connector","type":"STRING","description":"The VPC Network Connector that this cloud function can connect to. It can be either the fully-qualified URI, or the short name of the network connector resource. The format of this field is projects/*/locations/*/connectors/*.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/connectors/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnectorEgressSettings","label":"VPC Connector Egress settings","type":"SELECT","description":"Controls outgoing traffic when a VPC connector is configured","options":[{"value":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","label":"Unspecified"},{"value":"PRIVATE_RANGES_ONLY","label":"Private ranges only"},{"value":"ALL_TRAFFIC","label":"All traffic"}],"default":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","advanced":true},{"param":"firebaseextensions.v1beta.function/minInstances","label":"Minimum function instances","type":"STRING","description":"The minimum number of instances of each function to run at once (0-1000)","default":"0","validationRegex":"^[0-9]*$","validationErrorMessage":"Min instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/maxInstances","label":"Maximum function instances","type":"STRING","description":"The maximum number of instances of each function to run at once","default":"3000","validationRegex":"^[0-9]*$","validationErrorMessage":"Max instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/ingressSettings","label":"Function ingress settings","type":"SELECT","description":"Where should functions allow incoming traffic from?","options":[{"value":"ALLOW_ALL","label":"Allow all"},{"value":"ALLOW_INTERNAL_ONLY","label":"Allow internal only"},{"value":"ALLOW_INTERNAL_AND_GCLB","label":"Allow internal and GCLB"}],"advanced":true},{"param":"firebaseextensions.v1beta.function/labels","label":"Function labels","type":"STRING","description":"Do you wish to set any labels on this instance's Cloud Functions? If so, provide up to 55 labels in the format 'key1:value, key2:value'","validationRegex":"^([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63},\\s*)*([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63})$","advanced":true},{"param":"firebaseextensions.v1beta.function/kmsKeyName","label":"KMS key name","type":"STRING","description":"Do you want to use a Customer Managed Eencryption Key (CMEK) to encrypt this extension's functions? If you set this, you must also set a Docker repository encrypted by that key. See https://cloud.google.com/functions/docs/securing/cmek for more details.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/keyRings/([^/]+)/cryptoKeys/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/dockerRepository","label":"Docker repository","type":"STRING","description":"What Docker repository should be used to store function images? Default repository will be used if not set.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/repositories/([^/]+)$","advanced":true}]},"state":"PUBLISHED","hash":"4617c9f7d1f4b721694fc4c3169c63e1fae3a8ce9c0d0bf38a5e663b5940616f","createTime":"2022-03-07T16:49:47.579531Z","id":"0.1.15","releaseNotes":"fixed - generate correct `package-lock.json` files after `lerna bootstrap` (#779)\n\nfixed - added local smtp server for running tests (#794)\n\nfixed - add SMTP secret password (#840)\n\nfixed - added logging for invalid email messages, documentation updated with firestore example (#710)\n\nfixed - update validate workflow to use node14\n","listing":{"state":"APPROVED"},"metrics":{"activeInstallCount":"300"}},{"name":"publishers/firebase/extensions/firestore-send-email/versions/0.1.15-rc.1","ref":"firebase/firestore-send-email@0.1.15-rc.1","spec":{"specVersion":"v1beta","name":"firestore-send-email","version":"0.1.15-rc.1","description":"Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.","roles":[{"role":"datastore.user","reason":"Allows this extension to access Cloud Firestore to read and process added email documents."}],"resources":[{"name":"processQueue","type":"firebaseextensions.v1beta.function","propertiesYaml":"eventTrigger:\n  eventType: providers/cloud.firestore/eventTypes/document.write\n  resource: projects/${param:PROJECT_ID}/databases/(default)/documents/${param:MAIL_COLLECTION}/{id}\nlocation: ${param:LOCATION}\nruntime: nodejs14\n","description":"Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.","deletionPolicy":"DELETE"}],"billingRequired":true,"author":{"authorName":"Firebase","url":"https://firebase.google.com"},"contributors":[{"authorName":"Michael Bleigh","url":"https://github.com/mbleigh"},{"authorName":"Invertase","email":"oss@invertase.io","url":"https://github.com/invertase"}],"license":"Apache-2.0","releaseNotesUrl":"https://github.com/firebase/extensions/blob/master/firestore-send-email/CHANGELOG.md","sourceUrl":"https://github.com/firebase/extensions/tree/master/firestore-send-email","params":[{"param":"LOCATION","label":"Cloud Functions location","type":"SELECT","description":"Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).","required":true,"options":[{"value":"us-central1","label":"Iowa (us-central1)"},{"value":"us-east1","label":"South Carolina (us-east1)"},{"value":"us-east4","label":"Northern Virginia (us-east4)"},{"value":"us-west2","label":"Los Angeles (us-west2)"},{"value":"us-west3","label":"Salt Lake City (us-west3)"},{"value":"us-west4","label":"Las Vegas (us-west4)"},{"value":"europe-central2","label":"Warsaw (europe-central2)"},{"value":"europe-west1","label":"Belgium (europe-west1)"},{"value":"europe-west2","label":"London (europe-west2)"},{"value":"europe-west3","label":"Frankfurt (europe-west3)"},{"value":"europe-west6","label":"Zurich (europe-west6)"},{"value":"asia-east1","label":"Taiwan (asia-east1)"},{"value":"asia-east2","label":"Hong Kong (asia-east2)"},{"value":"asia-northeast1","label":"Tokyo (asia-northeast1)"},{"value":"asia-northeast2","label":"Osaka (asia-northeast2)"},{"value":"asia-northeast3","label":"Seoul (asia-northeast3)"},{"value":"asia-south1","label":"Mumbai (asia-south1)"},{"value":"asia-southeast1","label":"Singapore (asia-southeast1)"},{"value":"asia-southeast2","label":"Jakarta (asia-southeast2)"},{"value":"northamerica-northeast1","label":"Montreal (northamerica-northeast1)"},{"value":"southamerica-east1","label":"Sao Paulo (southamerica-east1)"},{"value":"australia-southeast1","label":"Sydney (australia-southeast1)"}],"default":"us-central1","immutable":true},{"param":"SMTP_CONNECTION_URI","label":"SMTP connection URI","type":"STRING","description":"A URI representing an SMTP server this extension can use to deliver email. Note that port 25 is blocked by Google Cloud Platform, so we recommend using port 587 for SMTP connections. If you're using the SMTPS protocol, we recommend using port 465. In order to keep passwords secure, it is recommended to omit the password from the connection string while using the `SMTP Password` field for entering secrets and passwords. Passwords and secrets should now be included in `SMTP password` field.\nSecure format:\n `smtps://username@gmail.com@smtp.gmail.com:465` (username only)\n `smtps://smtp.gmail.com:465` (No username and password)\nBackwards Compatible (less secure):\n `smtps://username@gmail.com:password@smtp.gmail.com:465`. (username and password)","required":true,"example":"smtps://username@smtp.hostname.com:465","validationRegex":"^smtps?://[^:]+@.*$","validationErrorMessage":"Invalid SMTP connection URI. Must be in the form `smtp(s)://username:password@hostname:port` or `smtp(s)://username@hostname:port`."},{"param":"SMTP_PASSWORD","label":"SMTP password","type":"SECRET","description":"User password for the SMTP server"},{"param":"MAIL_COLLECTION","label":"Email documents collection","type":"STRING","description":"What is the path to the collection that contains the documents used to build and send the emails?","required":true,"default":"mail","validationRegex":"^[^/]+(/[^/]+/[^/]+)*$","validationErrorMessage":"Must be a valid Cloud Firestore collection"},{"param":"DEFAULT_FROM","label":"Default FROM address","type":"STRING","description":"The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).","required":true,"example":"foobar@example.com","validationRegex":"^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$|^.*<(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})>$","validationErrorMessage":"Must be a valid email address or valid name plus email address"},{"param":"DEFAULT_REPLY_TO","label":"Default REPLY-TO address","type":"STRING","description":"The email address to use as the reply-to address (if it's not specified in the added email document)."},{"param":"USERS_COLLECTION","label":"Users collection","type":"STRING","description":"A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection."},{"param":"TEMPLATES_COLLECTION","label":"Templates collection","type":"STRING","description":"A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document."}],"preinstallContent":"Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- You will be charged a small amount (typically around $0.01/month) for the Firebase resources required by this extension (even if it is not used).\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s free tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n","postinstallContent":"### See it in action\n\nYou can test out this extension right away!\n\n1.  Go to your [Cloud Firestore dashboard](https://console.firebase.google.com/project/${param:PROJECT_ID}/firestore/data) in the Firebase console.\n\n1.  If it doesn't already exist, create the collection you specified during installation: `${param:MAIL_COLLECTION}`.\n\n1.  Add a document with a `to` field and a `message` field with the following content:\n\n    ```js\n    to: ['someone@example.com'],\n    message: {\n      subject: 'Hello from Firebase!',\n      text: 'This is the plaintext section of the email body.',\n      html: 'This is the <code>HTML</code> section of the email body.',\n    }\n    ```\n\n1.  In a few seconds, you'll see a `delivery` field appear in the document. The field will update as the extension processes the email.\n\n**Note:** You can also use the [Firebase Admin SDK][admin_sdk] to add a document:\n\n```js\nadmin\n  .firestore()\n  .collection(\"${param:MAIL_COLLECTION}\")\n  .add({\n    to: \"someone@example.com\",\n    message: {\n      subject: \"Hello from Firebase!\",\n      text: \"This is the plaintext section of the email body.\",\n      html: \"This is the <code>HTML</code> section of the email body.\",\n    },\n  })\n  .then(() => console.log(\"Queued email for delivery!\"));\n```\n\n### Using this extension\n\nSee the [official documentation](https://firebase.google.com/docs/extensions/official/firestore-send-email) for information on using this extension, including advanced use cases such as using Handlebars templates and managing email delivery status.\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n\n[mail_collection]: https://console.firebase.google.com/project/_/firestore/data~2F${param:MAIL_COLLECTION}\n[admin_sdk]: https://firebase.google.com/docs/admin/setup\n[amp4email]: https://amp.dev/documentation/guides-and-tutorials/learn/email-spec/amp-email-format/\n[handlebars]: https://handlebarsjs.com/\n","readmeContent":"# Trigger Email\n\n**Author**: Firebase (**[https://firebase.google.com](https://firebase.google.com)**)\n\n**Description**: Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.\n\n\n\n**Details**: Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nOr in Firestore the following fields can be added:\n\n| Field       | Type        | Example                                                                                 |\n| ----------- | ----------- | --------------------------------------------------------------------------------------- |\n| `to`        | String      | `\"someone@example.com\"`                                                                 |\n| `message`   | Map         | `{ subject: \"Hello from Firebase!\", html: \"This is an <code>HTML</code> email body.\" }` |\n\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- You will be charged a small amount (typically around $0.01/month) for the Firebase resources required by this extension (even if it is not used).\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s free tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n\n\n\n\n**Configuration Parameters:**\n\n* Cloud Functions location: Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).\n\n* SMTP connection URI: A URI representing an SMTP server this extension can use to deliver email. Note that port 25 is blocked by Google Cloud Platform, so we recommend using port 587 for SMTP connections. If you're using the SMTPS protocol, we recommend using port 465. In order to keep passwords secure, it is recommended to omit the password from the connection string while using the `SMTP Password` field for entering secrets and passwords. Passwords and secrets should now be included in `SMTP password` field.\nSecure format:\n `smtps://username@gmail.com@smtp.gmail.com:465` (username only)\n `smtps://smtp.gmail.com:465` (No username and password)\nBackwards Compatible (less secure):\n `smtps://username@gmail.com:password@smtp.gmail.com:465`. (username and password)\n\n* SMTP password: User password for the SMTP server\n\n* Email documents collection: What is the path to the collection that contains the documents used to build and send the emails?\n\n* Default FROM address: The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).\n\n* Default REPLY-TO address: The email address to use as the reply-to address (if it's not specified in the added email document).\n\n* Users collection: A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection.\n\n* Templates collection: A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document.\n\n\n\n**Cloud Functions:**\n\n* **processQueue:** Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.\n\n\n\n**Access Required**:\n\n\n\nThis extension will operate with the following project IAM roles:\n\n* datastore.user (Reason: Allows this extension to access Cloud Firestore to read and process added email documents.)\n","displayName":"Trigger Email","systemParams":[{"param":"firebaseextensions.v1beta.function/memory","label":"Function memory","type":"SELECT","description":"How much memory should be allocated to each function?","options":[{"value":"128","label":"128MB"},{"value":"256","label":"256MB"},{"value":"512","label":"512MB"},{"value":"1024","label":"1GB"},{"value":"2048","label":"2GB"},{"value":"4096","label":"4GB"},{"value":"8192","label":"8GB"}],"default":"256","advanced":true},{"param":"firebaseextensions.v1beta.function/timeoutSeconds","label":"Function timeout seconds","type":"STRING","description":"How long should functions run before timing out, in seconds (0-540)?","validationRegex":"^[1-9][0-9]{0,2}$","validationErrorMessage":"Function timeout should be an integer number of seconds, between 0 and 540","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnector","label":"VPC Connector","type":"STRING","description":"The VPC Network Connector that this cloud function can connect to. It can be either the fully-qualified URI, or the short name of the network connector resource. The format of this field is projects/*/locations/*/connectors/*.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/connectors/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnectorEgressSettings","label":"VPC Connector Egress settings","type":"SELECT","description":"Controls outgoing traffic when a VPC connector is configured","options":[{"value":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","label":"Unspecified"},{"value":"PRIVATE_RANGES_ONLY","label":"Private ranges only"},{"value":"ALL_TRAFFIC","label":"All traffic"}],"default":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","advanced":true},{"param":"firebaseextensions.v1beta.function/minInstances","label":"Minimum function instances","type":"STRING","description":"The minimum number of instances of each function to run at once (0-1000)","default":"0","validationRegex":"^[0-9]*$","validationErrorMessage":"Min instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/maxInstances","label":"Maximum function instances","type":"STRING","description":"The maximum number of instances of each function to run at once","default":"3000","validationRegex":"^[0-9]*$","validationErrorMessage":"Max instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/ingressSettings","label":"Function ingress settings","type":"SELECT","description":"Where should functions allow incoming traffic from?","options":[{"value":"ALLOW_ALL","label":"Allow all"},{"value":"ALLOW_INTERNAL_ONLY","label":"Allow internal only"},{"value":"ALLOW_INTERNAL_AND_GCLB","label":"Allow internal and GCLB"}],"advanced":true},{"param":"firebaseextensions.v1beta.function/labels","label":"Function labels","type":"STRING","description":"Do you wish to set any labels on this instance's Cloud Functions? If so, provide up to 55 labels in the format 'key1:value, key2:value'","validationRegex":"^([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63},\\s*)*([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63})$","advanced":true},{"param":"firebaseextensions.v1beta.function/kmsKeyName","label":"KMS key name","type":"STRING","description":"Do you want to use a Customer Managed Eencryption Key (CMEK) to encrypt this extension's functions? If you set this, you must also set a Docker repository encrypted by that key. See https://cloud.google.com/functions/docs/securing/cmek for more details.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/keyRings/([^/]+)/cryptoKeys/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/dockerRepository","label":"Docker repository","type":"STRING","description":"What Docker repository should be used to store function images? Default repository will be used if not set.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/repositories/([^/]+)$","advanced":true}]},"state":"PUBLISHED","hash":"16b855e9b2340dc2e0a8bcb61fa39bd3643523e42c967a021c1a4e18b544d65d","createTime":"2022-03-02T21:27:16.830356Z","id":"0.1.15-rc.1","listing":{"state":"UNLISTED"}},{"name":"publishers/firebase/extensions/firestore-send-email/versions/0.1.16","ref":"firebase/firestore-send-email@0.1.16","spec":{"specVersion":"v1beta","name":"firestore-send-email","version":"0.1.16","description":"Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.","roles":[{"role":"datastore.user","reason":"Allows this extension to access Cloud Firestore to read and process added email documents."}],"resources":[{"name":"processQueue","type":"firebaseextensions.v1beta.function","propertiesYaml":"eventTrigger:\n  eventType: providers/cloud.firestore/eventTypes/document.write\n  resource: projects/${param:PROJECT_ID}/databases/(default)/documents/${param:MAIL_COLLECTION}/{id}\nlocation: ${param:LOCATION}\nruntime: nodejs14\n","description":"Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.","deletionPolicy":"DELETE"}],"billingRequired":true,"author":{"authorName":"Firebase","url":"https://firebase.google.com"},"contributors":[{"authorName":"Michael Bleigh","url":"https://github.com/mbleigh"},{"authorName":"Invertase","email":"oss@invertase.io","url":"https://github.com/invertase"}],"license":"Apache-2.0","releaseNotesUrl":"https://github.com/firebase/extensions/blob/master/firestore-send-email/CHANGELOG.md","sourceUrl":"https://github.com/firebase/extensions/tree/master/firestore-send-email","params":[{"param":"LOCATION","label":"Cloud Functions location","type":"SELECT","description":"Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).","required":true,"options":[{"value":"us-central1","label":"Iowa (us-central1)"},{"value":"us-east1","label":"South Carolina (us-east1)"},{"value":"us-east4","label":"Northern Virginia (us-east4)"},{"value":"us-west2","label":"Los Angeles (us-west2)"},{"value":"us-west3","label":"Salt Lake City (us-west3)"},{"value":"us-west4","label":"Las Vegas (us-west4)"},{"value":"europe-central2","label":"Warsaw (europe-central2)"},{"value":"europe-west1","label":"Belgium (europe-west1)"},{"value":"europe-west2","label":"London (europe-west2)"},{"value":"europe-west3","label":"Frankfurt (europe-west3)"},{"value":"europe-west6","label":"Zurich (europe-west6)"},{"value":"asia-east1","label":"Taiwan (asia-east1)"},{"value":"asia-east2","label":"Hong Kong (asia-east2)"},{"value":"asia-northeast1","label":"Tokyo (asia-northeast1)"},{"value":"asia-northeast2","label":"Osaka (asia-northeast2)"},{"value":"asia-northeast3","label":"Seoul (asia-northeast3)"},{"value":"asia-south1","label":"Mumbai (asia-south1)"},{"value":"asia-southeast1","label":"Singapore (asia-southeast1)"},{"value":"asia-southeast2","label":"Jakarta (asia-southeast2)"},{"value":"northamerica-northeast1","label":"Montreal (northamerica-northeast1)"},{"value":"southamerica-east1","label":"Sao Paulo (southamerica-east1)"},{"value":"australia-southeast1","label":"Sydney (australia-southeast1)"}],"default":"us-central1","immutable":true},{"param":"SMTP_CONNECTION_URI","label":"SMTP connection URI","type":"STRING","description":"A URI representing an SMTP server this extension can use to deliver email. Note that port 25 is blocked by Google Cloud Platform, so we recommend using port 587 for SMTP connections. If you're using the SMTPS protocol, we recommend using port 465. In order to keep passwords secure, it is recommended to omit the password from the connection string while using the `SMTP Password` field for entering secrets and passwords. Passwords and secrets should now be included in `SMTP password` field.\nSecure format:\n `smtps://username@gmail.com@smtp.gmail.com:465` (username only)\n `smtps://smtp.gmail.com:465` (No username and password)\nBackwards Compatible (less secure):\n `smtps://username@gmail.com:password@smtp.gmail.com:465`. (username and password)","required":true,"example":"smtps://username@smtp.hostname.com:465","validationRegex":"^(smtp[s]*://.*?:[0-9]+$)","validationErrorMessage":"Invalid SMTP connection URI. Must be in the form `smtp(s)://username:password@hostname:port` or `smtp(s)://username@hostname:port`."},{"param":"SMTP_PASSWORD","label":"SMTP password","type":"SECRET","description":"User password for the SMTP server"},{"param":"MAIL_COLLECTION","label":"Email documents collection","type":"STRING","description":"What is the path to the collection that contains the documents used to build and send the emails?","required":true,"default":"mail","validationRegex":"^[^/]+(/[^/]+/[^/]+)*$","validationErrorMessage":"Must be a valid Cloud Firestore collection"},{"param":"DEFAULT_FROM","label":"Default FROM address","type":"STRING","description":"The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).","required":true,"example":"foobar@example.com","validationRegex":"^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$|^.*<(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})>$","validationErrorMessage":"Must be a valid email address or valid name plus email address"},{"param":"DEFAULT_REPLY_TO","label":"Default REPLY-TO address","type":"STRING","description":"The email address to use as the reply-to address (if it's not specified in the added email document)."},{"param":"USERS_COLLECTION","label":"Users collection","type":"STRING","description":"A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection."},{"param":"TEMPLATES_COLLECTION","label":"Templates collection","type":"STRING","description":"A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document."}],"preinstallContent":"Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- You will be charged a small amount (typically around $0.01/month) for the Firebase resources required by this extension (even if it is not used).\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s free tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n","postinstallContent":"### See it in action\n\nYou can test out this extension right away!\n\n1.  Go to your [Cloud Firestore dashboard](https://console.firebase.google.com/project/${param:PROJECT_ID}/firestore/data) in the Firebase console.\n\n1.  If it doesn't already exist, create the collection you specified during installation: `${param:MAIL_COLLECTION}`.\n\n1.  Add a document with a `to` field and a `message` field with the following content:\n\n    ```js\n    to: ['someone@example.com'],\n    message: {\n      subject: 'Hello from Firebase!',\n      text: 'This is the plaintext section of the email body.',\n      html: 'This is the <code>HTML</code> section of the email body.',\n    }\n    ```\n\n1.  In a few seconds, you'll see a `delivery` field appear in the document. The field will update as the extension processes the email.\n\n**Note:** You can also use the [Firebase Admin SDK][admin_sdk] to add a document:\n\n```js\nadmin\n  .firestore()\n  .collection(\"${param:MAIL_COLLECTION}\")\n  .add({\n    to: \"someone@example.com\",\n    message: {\n      subject: \"Hello from Firebase!\",\n      text: \"This is the plaintext section of the email body.\",\n      html: \"This is the <code>HTML</code> section of the email body.\",\n    },\n  })\n  .then(() => console.log(\"Queued email for delivery!\"));\n```\n\n### Using this extension\n\nSee the [official documentation](https://firebase.google.com/docs/extensions/official/firestore-send-email) for information on using this extension, including advanced use cases such as using Handlebars templates and managing email delivery status.\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n\n[mail_collection]: https://console.firebase.google.com/project/_/firestore/data~2F${param:MAIL_COLLECTION}\n[admin_sdk]: https://firebase.google.com/docs/admin/setup\n[amp4email]: https://amp.dev/documentation/guides-and-tutorials/learn/email-spec/amp-email-format/\n[handlebars]: https://handlebarsjs.com/\n","readmeContent":"# Trigger Email\n\n**Author**: Firebase (**[https://firebase.google.com](https://firebase.google.com)**)\n\n**Description**: Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.\n\n\n\n**Details**: Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- You will be charged a small amount (typically around $0.01/month) for the Firebase resources required by this extension (even if it is not used).\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s free tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n\n\n\n\n**Configuration Parameters:**\n\n* Cloud Functions location: Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).\n\n* SMTP connection URI: A URI representing an SMTP server this extension can use to deliver email. Note that port 25 is blocked by Google Cloud Platform, so we recommend using port 587 for SMTP connections. If you're using the SMTPS protocol, we recommend using port 465. In order to keep passwords secure, it is recommended to omit the password from the connection string while using the `SMTP Password` field for entering secrets and passwords. Passwords and secrets should now be included in `SMTP password` field.\nSecure format:\n `smtps://username@gmail.com@smtp.gmail.com:465` (username only)\n `smtps://smtp.gmail.com:465` (No username and password)\nBackwards Compatible (less secure):\n `smtps://username@gmail.com:password@smtp.gmail.com:465`. (username and password)\n\n* SMTP password: User password for the SMTP server\n\n* Email documents collection: What is the path to the collection that contains the documents used to build and send the emails?\n\n* Default FROM address: The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).\n\n* Default REPLY-TO address: The email address to use as the reply-to address (if it's not specified in the added email document).\n\n* Users collection: A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection.\n\n* Templates collection: A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document.\n\n\n\n**Cloud Functions:**\n\n* **processQueue:** Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.\n\n\n\n**Access Required**:\n\n\n\nThis extension will operate with the following project IAM roles:\n\n* datastore.user (Reason: Allows this extension to access Cloud Firestore to read and process added email documents.)\n","displayName":"Trigger Email","systemParams":[{"param":"firebaseextensions.v1beta.function/memory","label":"Function memory","type":"SELECT","description":"How much memory should be allocated to each function?","options":[{"value":"128","label":"128MB"},{"value":"256","label":"256MB"},{"value":"512","label":"512MB"},{"value":"1024","label":"1GB"},{"value":"2048","label":"2GB"},{"value":"4096","label":"4GB"},{"value":"8192","label":"8GB"}],"default":"256","advanced":true},{"param":"firebaseextensions.v1beta.function/timeoutSeconds","label":"Function timeout seconds","type":"STRING","description":"How long should functions run before timing out, in seconds (0-540)?","validationRegex":"^[1-9][0-9]{0,2}$","validationErrorMessage":"Function timeout should be an integer number of seconds, between 0 and 540","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnector","label":"VPC Connector","type":"STRING","description":"The VPC Network Connector that this cloud function can connect to. It can be either the fully-qualified URI, or the short name of the network connector resource. The format of this field is projects/*/locations/*/connectors/*.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/connectors/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnectorEgressSettings","label":"VPC Connector Egress settings","type":"SELECT","description":"Controls outgoing traffic when a VPC connector is configured","options":[{"value":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","label":"Unspecified"},{"value":"PRIVATE_RANGES_ONLY","label":"Private ranges only"},{"value":"ALL_TRAFFIC","label":"All traffic"}],"default":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","advanced":true},{"param":"firebaseextensions.v1beta.function/minInstances","label":"Minimum function instances","type":"STRING","description":"The minimum number of instances of each function to run at once (0-1000)","default":"0","validationRegex":"^[0-9]*$","validationErrorMessage":"Min instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/maxInstances","label":"Maximum function instances","type":"STRING","description":"The maximum number of instances of each function to run at once","default":"3000","validationRegex":"^[0-9]*$","validationErrorMessage":"Max instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/ingressSettings","label":"Function ingress settings","type":"SELECT","description":"Where should functions allow incoming traffic from?","options":[{"value":"ALLOW_ALL","label":"Allow all"},{"value":"ALLOW_INTERNAL_ONLY","label":"Allow internal only"},{"value":"ALLOW_INTERNAL_AND_GCLB","label":"Allow internal and GCLB"}],"advanced":true},{"param":"firebaseextensions.v1beta.function/labels","label":"Function labels","type":"STRING","description":"Do you wish to set any labels on this instance's Cloud Functions? If so, provide up to 55 labels in the format 'key1:value, key2:value'","validationRegex":"^([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63},\\s*)*([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63})$","advanced":true},{"param":"firebaseextensions.v1beta.function/kmsKeyName","label":"KMS key name","type":"STRING","description":"Do you want to use a Customer Managed Eencryption Key (CMEK) to encrypt this extension's functions? If you set this, you must also set a Docker repository encrypted by that key. See https://cloud.google.com/functions/docs/securing/cmek for more details.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/keyRings/([^/]+)/cryptoKeys/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/dockerRepository","label":"Docker repository","type":"STRING","description":"What Docker repository should be used to store function images? Default repository will be used if not set.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/repositories/([^/]+)$","advanced":true}]},"state":"PUBLISHED","hash":"78240b08f8eb5f577b6987b5949275445929e3e53c20193f46f8681c0005a17b","createTime":"2022-03-30T14:27:46.830709Z","id":"0.1.16","releaseNotes":"fixed - updated the extensions regular expression validation to contain additional smtp formats (#909)\n","listing":{"state":"APPROVED"},"metrics":{"activeInstallCount":"500"}},{"name":"publishers/firebase/extensions/firestore-send-email/versions/0.1.17","ref":"firebase/firestore-send-email@0.1.17","spec":{"specVersion":"v1beta","name":"firestore-send-email","version":"0.1.17","description":"Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.","roles":[{"role":"datastore.user","reason":"Allows this extension to access Cloud Firestore to read and process added email documents."}],"resources":[{"name":"processQueue","type":"firebaseextensions.v1beta.function","propertiesYaml":"eventTrigger:\n  eventType: providers/cloud.firestore/eventTypes/document.write\n  resource: projects/${param:PROJECT_ID}/databases/(default)/documents/${param:MAIL_COLLECTION}/{id}\nlocation: ${param:LOCATION}\nruntime: nodejs14\n","description":"Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.","deletionPolicy":"DELETE"}],"billingRequired":true,"author":{"authorName":"Firebase","url":"https://firebase.google.com"},"contributors":[{"authorName":"Michael Bleigh","url":"https://github.com/mbleigh"},{"authorName":"Invertase","email":"oss@invertase.io","url":"https://github.com/invertase"}],"license":"Apache-2.0","releaseNotesUrl":"https://github.com/firebase/extensions/blob/master/firestore-send-email/CHANGELOG.md","sourceUrl":"https://github.com/firebase/extensions/tree/master/firestore-send-email","params":[{"param":"LOCATION","label":"Cloud Functions location","type":"SELECT","description":"Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).","required":true,"options":[{"value":"us-central1","label":"Iowa (us-central1)"},{"value":"us-east1","label":"South Carolina (us-east1)"},{"value":"us-east4","label":"Northern Virginia (us-east4)"},{"value":"us-west2","label":"Los Angeles (us-west2)"},{"value":"us-west3","label":"Salt Lake City (us-west3)"},{"value":"us-west4","label":"Las Vegas (us-west4)"},{"value":"europe-central2","label":"Warsaw (europe-central2)"},{"value":"europe-west1","label":"Belgium (europe-west1)"},{"value":"europe-west2","label":"London (europe-west2)"},{"value":"europe-west3","label":"Frankfurt (europe-west3)"},{"value":"europe-west6","label":"Zurich (europe-west6)"},{"value":"asia-east1","label":"Taiwan (asia-east1)"},{"value":"asia-east2","label":"Hong Kong (asia-east2)"},{"value":"asia-northeast1","label":"Tokyo (asia-northeast1)"},{"value":"asia-northeast2","label":"Osaka (asia-northeast2)"},{"value":"asia-northeast3","label":"Seoul (asia-northeast3)"},{"value":"asia-south1","label":"Mumbai (asia-south1)"},{"value":"asia-southeast1","label":"Singapore (asia-southeast1)"},{"value":"asia-southeast2","label":"Jakarta (asia-southeast2)"},{"value":"northamerica-northeast1","label":"Montreal (northamerica-northeast1)"},{"value":"southamerica-east1","label":"Sao Paulo (southamerica-east1)"},{"value":"australia-southeast1","label":"Sydney (australia-southeast1)"}],"default":"us-central1","immutable":true},{"param":"SMTP_CONNECTION_URI","label":"SMTP connection URI","type":"STRING","description":"A URI representing an SMTP server this extension can use to deliver email. Note that port 25 is blocked by Google Cloud Platform, so we recommend using port 587 for SMTP connections. If you're using the SMTPS protocol, we recommend using port 465. In order to keep passwords secure, it is recommended to omit the password from the connection string while using the `SMTP Password` field for entering secrets and passwords. Passwords and secrets should now be included in `SMTP password` field.\nSecure format:\n `smtps://username@gmail.com@smtp.gmail.com:465` (username only)\n `smtps://smtp.gmail.com:465` (No username and password)\nBackwards Compatible (less secure):\n `smtps://username@gmail.com:password@smtp.gmail.com:465`. (username and password)","required":true,"example":"smtps://username@smtp.hostname.com:465","validationRegex":"^(smtp[s]*://.*?:[0-9]+.*$)","validationErrorMessage":"Invalid SMTP connection URI. Must be in the form `smtp(s)://username:password@hostname:port` or `smtp(s)://username@hostname:port`."},{"param":"SMTP_PASSWORD","label":"SMTP password","type":"SECRET","description":"User password for the SMTP server"},{"param":"MAIL_COLLECTION","label":"Email documents collection","type":"STRING","description":"What is the path to the collection that contains the documents used to build and send the emails?","required":true,"default":"mail","validationRegex":"^[^/]+(/[^/]+/[^/]+)*$","validationErrorMessage":"Must be a valid Cloud Firestore collection"},{"param":"DEFAULT_FROM","label":"Default FROM address","type":"STRING","description":"The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).","required":true,"example":"foobar@example.com","validationRegex":"^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$|^.*<(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})>$","validationErrorMessage":"Must be a valid email address or valid name plus email address"},{"param":"DEFAULT_REPLY_TO","label":"Default REPLY-TO address","type":"STRING","description":"The email address to use as the reply-to address (if it's not specified in the added email document)."},{"param":"USERS_COLLECTION","label":"Users collection","type":"STRING","description":"A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection."},{"param":"TEMPLATES_COLLECTION","label":"Templates collection","type":"STRING","description":"A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document."}],"preinstallContent":"Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- You will be charged a small amount (typically around $0.01/month) for the Firebase resources required by this extension (even if it is not used).\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s no-cost tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n","postinstallContent":"### See it in action\n\nYou can test out this extension right away!\n\n1.  Go to your [Cloud Firestore dashboard](https://console.firebase.google.com/project/${param:PROJECT_ID}/firestore/data) in the Firebase console.\n\n1.  If it doesn't already exist, create the collection you specified during installation: `${param:MAIL_COLLECTION}`.\n\n1.  Add a document with a `to` field and a `message` field with the following content:\n\n    ```js\n    to: ['someone@example.com'],\n    message: {\n      subject: 'Hello from Firebase!',\n      text: 'This is the plaintext section of the email body.',\n      html: 'This is the <code>HTML</code> section of the email body.',\n    }\n    ```\n\n1.  In a few seconds, you'll see a `delivery` field appear in the document. The field will update as the extension processes the email.\n\n**Note:** You can also use the [Firebase Admin SDK][admin_sdk] to add a document:\n\n```js\nadmin\n  .firestore()\n  .collection(\"${param:MAIL_COLLECTION}\")\n  .add({\n    to: \"someone@example.com\",\n    message: {\n      subject: \"Hello from Firebase!\",\n      text: \"This is the plaintext section of the email body.\",\n      html: \"This is the <code>HTML</code> section of the email body.\",\n    },\n  })\n  .then(() => console.log(\"Queued email for delivery!\"));\n```\n\n### Using this extension\n\nSee the [official documentation](https://firebase.google.com/docs/extensions/official/firestore-send-email) for information on using this extension, including advanced use cases such as using Handlebars templates and managing email delivery status.\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n\n[mail_collection]: https://console.firebase.google.com/project/_/firestore/data~2F${param:MAIL_COLLECTION}\n[admin_sdk]: https://firebase.google.com/docs/admin/setup\n[amp4email]: https://amp.dev/documentation/guides-and-tutorials/learn/email-spec/amp-email-format/\n[handlebars]: https://handlebarsjs.com/\n","readmeContent":"# Trigger Email\n\n**Author**: Firebase (**[https://firebase.google.com](https://firebase.google.com)**)\n\n**Description**: Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.\n\n\n\n**Details**: Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- You will be charged a small amount (typically around $0.01/month) for the Firebase resources required by this extension (even if it is not used).\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s no-cost tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n\n\n\n\n**Configuration Parameters:**\n\n* Cloud Functions location: Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).\n\n* SMTP connection URI: A URI representing an SMTP server this extension can use to deliver email. Note that port 25 is blocked by Google Cloud Platform, so we recommend using port 587 for SMTP connections. If you're using the SMTPS protocol, we recommend using port 465. In order to keep passwords secure, it is recommended to omit the password from the connection string while using the `SMTP Password` field for entering secrets and passwords. Passwords and secrets should now be included in `SMTP password` field.\nSecure format:\n `smtps://username@gmail.com@smtp.gmail.com:465` (username only)\n `smtps://smtp.gmail.com:465` (No username and password)\nBackwards Compatible (less secure):\n `smtps://username@gmail.com:password@smtp.gmail.com:465`. (username and password)\n\n* SMTP password: User password for the SMTP server\n\n* Email documents collection: What is the path to the collection that contains the documents used to build and send the emails?\n\n* Default FROM address: The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).\n\n* Default REPLY-TO address: The email address to use as the reply-to address (if it's not specified in the added email document).\n\n* Users collection: A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection.\n\n* Templates collection: A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document.\n\n\n\n**Cloud Functions:**\n\n* **processQueue:** Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.\n\n\n\n**Access Required**:\n\n\n\nThis extension will operate with the following project IAM roles:\n\n* datastore.user (Reason: Allows this extension to access Cloud Firestore to read and process added email documents.)\n","displayName":"Trigger Email","systemParams":[{"param":"firebaseextensions.v1beta.function/memory","label":"Function memory","type":"SELECT","description":"How much memory should be allocated to each function?","options":[{"value":"128","label":"128MB"},{"value":"256","label":"256MB"},{"value":"512","label":"512MB"},{"value":"1024","label":"1GB"},{"value":"2048","label":"2GB"},{"value":"4096","label":"4GB"},{"value":"8192","label":"8GB"}],"default":"256","advanced":true},{"param":"firebaseextensions.v1beta.function/timeoutSeconds","label":"Function timeout seconds","type":"STRING","description":"How long should functions run before timing out, in seconds (0-540)?","validationRegex":"^[1-9][0-9]{0,2}$","validationErrorMessage":"Function timeout should be an integer number of seconds, between 0 and 540","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnector","label":"VPC Connector","type":"STRING","description":"The VPC Network Connector that this cloud function can connect to. It can be either the fully-qualified URI, or the short name of the network connector resource. The format of this field is projects/*/locations/*/connectors/*.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/connectors/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnectorEgressSettings","label":"VPC Connector Egress settings","type":"SELECT","description":"Controls outgoing traffic when a VPC connector is configured","options":[{"value":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","label":"Unspecified"},{"value":"PRIVATE_RANGES_ONLY","label":"Private ranges only"},{"value":"ALL_TRAFFIC","label":"All traffic"}],"default":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","advanced":true},{"param":"firebaseextensions.v1beta.function/minInstances","label":"Minimum function instances","type":"STRING","description":"The minimum number of instances of each function to run at once (0-1000)","default":"0","validationRegex":"^[0-9]*$","validationErrorMessage":"Min instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/maxInstances","label":"Maximum function instances","type":"STRING","description":"The maximum number of instances of each function to run at once","default":"3000","validationRegex":"^[0-9]*$","validationErrorMessage":"Max instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/ingressSettings","label":"Function ingress settings","type":"SELECT","description":"Where should functions allow incoming traffic from?","options":[{"value":"ALLOW_ALL","label":"Allow all"},{"value":"ALLOW_INTERNAL_ONLY","label":"Allow internal only"},{"value":"ALLOW_INTERNAL_AND_GCLB","label":"Allow internal and GCLB"}],"advanced":true},{"param":"firebaseextensions.v1beta.function/labels","label":"Function labels","type":"STRING","description":"Do you wish to set any labels on this instance's Cloud Functions? If so, provide up to 55 labels in the format 'key1:value, key2:value'","validationRegex":"^([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63},\\s*)*([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63})$","advanced":true},{"param":"firebaseextensions.v1beta.function/kmsKeyName","label":"KMS key name","type":"STRING","description":"Do you want to use a Customer Managed Eencryption Key (CMEK) to encrypt this extension's functions? If you set this, you must also set a Docker repository encrypted by that key. See https://cloud.google.com/functions/docs/securing/cmek for more details.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/keyRings/([^/]+)/cryptoKeys/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/dockerRepository","label":"Docker repository","type":"STRING","description":"What Docker repository should be used to store function images? Default repository will be used if not set.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/repositories/([^/]+)$","advanced":true}]},"state":"PUBLISHED","hash":"9ec24ebc82e7f47df0a038d5f7db91394652d0cff3f0f882e9e197b18ff25877","createTime":"2022-05-10T17:02:00.301078Z","id":"0.1.17","releaseNotes":"fixed - update SMTP connection URI validation regex (#942)\n\nfixed - hide password from showing up in logs (#943)\n","listing":{"state":"APPROVED"},"metrics":{"activeInstallCount":"700"}},{"name":"publishers/firebase/extensions/firestore-send-email/versions/0.1.18","ref":"firebase/firestore-send-email@0.1.18","spec":{"specVersion":"v1beta","name":"firestore-send-email","version":"0.1.18","description":"Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.","roles":[{"role":"datastore.user","reason":"Allows this extension to access Cloud Firestore to read and process added email documents."}],"resources":[{"name":"processQueue","type":"firebaseextensions.v1beta.function","propertiesYaml":"eventTrigger:\n  eventType: providers/cloud.firestore/eventTypes/document.write\n  resource: projects/${param:PROJECT_ID}/databases/(default)/documents/${param:MAIL_COLLECTION}/{id}\nlocation: ${param:LOCATION}\nruntime: nodejs14\n","description":"Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.","deletionPolicy":"DELETE"}],"billingRequired":true,"author":{"authorName":"Firebase","url":"https://firebase.google.com"},"contributors":[{"authorName":"Michael Bleigh","url":"https://github.com/mbleigh"},{"authorName":"Invertase","email":"oss@invertase.io","url":"https://github.com/invertase"}],"license":"Apache-2.0","releaseNotesUrl":"https://github.com/firebase/extensions/blob/master/firestore-send-email/CHANGELOG.md","sourceUrl":"https://github.com/firebase/extensions/tree/master/firestore-send-email","params":[{"param":"LOCATION","label":"Cloud Functions location","type":"SELECT","description":"Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).","required":true,"options":[{"value":"us-central1","label":"Iowa (us-central1)"},{"value":"us-east1","label":"South Carolina (us-east1)"},{"value":"us-east4","label":"Northern Virginia (us-east4)"},{"value":"us-west2","label":"Los Angeles (us-west2)"},{"value":"us-west3","label":"Salt Lake City (us-west3)"},{"value":"us-west4","label":"Las Vegas (us-west4)"},{"value":"europe-central2","label":"Warsaw (europe-central2)"},{"value":"europe-west1","label":"Belgium (europe-west1)"},{"value":"europe-west2","label":"London (europe-west2)"},{"value":"europe-west3","label":"Frankfurt (europe-west3)"},{"value":"europe-west6","label":"Zurich (europe-west6)"},{"value":"asia-east1","label":"Taiwan (asia-east1)"},{"value":"asia-east2","label":"Hong Kong (asia-east2)"},{"value":"asia-northeast1","label":"Tokyo (asia-northeast1)"},{"value":"asia-northeast2","label":"Osaka (asia-northeast2)"},{"value":"asia-northeast3","label":"Seoul (asia-northeast3)"},{"value":"asia-south1","label":"Mumbai (asia-south1)"},{"value":"asia-southeast1","label":"Singapore (asia-southeast1)"},{"value":"asia-southeast2","label":"Jakarta (asia-southeast2)"},{"value":"northamerica-northeast1","label":"Montreal (northamerica-northeast1)"},{"value":"southamerica-east1","label":"Sao Paulo (southamerica-east1)"},{"value":"australia-southeast1","label":"Sydney (australia-southeast1)"}],"default":"us-central1","immutable":true},{"param":"SMTP_CONNECTION_URI","label":"SMTP connection URI","type":"STRING","description":"A URI representing an SMTP server this extension can use to deliver email. Note that port 25 is blocked by Google Cloud Platform, so we recommend using port 587 for SMTP connections. If you're using the SMTPS protocol, we recommend using port 465. In order to keep passwords secure, it is recommended to omit the password from the connection string while using the `SMTP Password` field for entering secrets and passwords. Passwords and secrets should now be included in `SMTP password` field.\nSecure format:\n `smtps://username@gmail.com@smtp.gmail.com:465` (username only)\n `smtps://smtp.gmail.com:465` (No username and password)\nBackwards Compatible (less secure):\n `smtps://username@gmail.com:password@smtp.gmail.com:465`. (username and password)","required":true,"example":"smtps://username@smtp.hostname.com:465","validationRegex":"^(smtp[s]*://.*?:[0-9]+.*$)","validationErrorMessage":"Invalid SMTP connection URI. Must be in the form `smtp(s)://username:password@hostname:port` or `smtp(s)://username@hostname:port`."},{"param":"SMTP_PASSWORD","label":"SMTP password","type":"SECRET","description":"User password for the SMTP server"},{"param":"MAIL_COLLECTION","label":"Email documents collection","type":"STRING","description":"What is the path to the collection that contains the documents used to build and send the emails?","required":true,"default":"mail","validationRegex":"^[^/]+(/[^/]+/[^/]+)*$","validationErrorMessage":"Must be a valid Cloud Firestore collection"},{"param":"DEFAULT_FROM","label":"Default FROM address","type":"STRING","description":"The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).","required":true,"example":"foobar@example.com","validationRegex":"^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$|^.*<(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})>$","validationErrorMessage":"Must be a valid email address or valid name plus email address"},{"param":"DEFAULT_REPLY_TO","label":"Default REPLY-TO address","type":"STRING","description":"The email address to use as the reply-to address (if it's not specified in the added email document)."},{"param":"USERS_COLLECTION","label":"Users collection","type":"STRING","description":"A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection."},{"param":"TEMPLATES_COLLECTION","label":"Templates collection","type":"STRING","description":"A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document."}],"preinstallContent":"Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- You will be charged a small amount (typically around $0.01/month) for the Firebase resources required by this extension (even if it is not used).\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s no-cost tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n","postinstallContent":"### See it in action\n\nYou can test out this extension right away!\n\n1.  Go to your [Cloud Firestore dashboard](https://console.firebase.google.com/project/${param:PROJECT_ID}/firestore/data) in the Firebase console.\n\n1.  If it doesn't already exist, create the collection you specified during installation: `${param:MAIL_COLLECTION}`.\n\n1.  Add a document with a `to` field and a `message` field with the following content:\n\n    ```js\n    to: ['someone@example.com'],\n    message: {\n      subject: 'Hello from Firebase!',\n      text: 'This is the plaintext section of the email body.',\n      html: 'This is the <code>HTML</code> section of the email body.',\n    }\n    ```\n\n1.  In a few seconds, you'll see a `delivery` field appear in the document. The field will update as the extension processes the email.\n\n**Note:** You can also use the [Firebase Admin SDK][admin_sdk] to add a document:\n\n```js\nadmin\n  .firestore()\n  .collection(\"${param:MAIL_COLLECTION}\")\n  .add({\n    to: \"someone@example.com\",\n    message: {\n      subject: \"Hello from Firebase!\",\n      text: \"This is the plaintext section of the email body.\",\n      html: \"This is the <code>HTML</code> section of the email body.\",\n    },\n  })\n  .then(() => console.log(\"Queued email for delivery!\"));\n```\n\n### Using this extension\n\nSee the [official documentation](https://firebase.google.com/docs/extensions/official/firestore-send-email) for information on using this extension, including advanced use cases such as using Handlebars templates and managing email delivery status.\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n\n[mail_collection]: https://console.firebase.google.com/project/_/firestore/data~2F${param:MAIL_COLLECTION}\n[admin_sdk]: https://firebase.google.com/docs/admin/setup\n[amp4email]: https://amp.dev/documentation/guides-and-tutorials/learn/email-spec/amp-email-format/\n[handlebars]: https://handlebarsjs.com/\n","readmeContent":"# Trigger Email\n\n**Author**: Firebase (**[https://firebase.google.com](https://firebase.google.com)**)\n\n**Description**: Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.\n\n\n\n**Details**: Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  from: 'somebodyelse@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\n**Custom senders**\n\nThe `from` field is an optional parameter. If you specify a value for this field, ensure the receiving SMTP server accepts custom senders in this field. Typically, a provider will use the email address provided by the configured account if the provider doesn't allow custom senders.\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- You will be charged a small amount (typically around $0.01/month) for the Firebase resources required by this extension (even if it is not used).\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s no-cost tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n\n\n\n\n**Configuration Parameters:**\n\n* Cloud Functions location: Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).\n\n* SMTP connection URI: A URI representing an SMTP server this extension can use to deliver email. Note that port 25 is blocked by Google Cloud Platform, so we recommend using port 587 for SMTP connections. If you're using the SMTPS protocol, we recommend using port 465. In order to keep passwords secure, it is recommended to omit the password from the connection string while using the `SMTP Password` field for entering secrets and passwords. Passwords and secrets should now be included in `SMTP password` field.\nSecure format:\n `smtps://username@gmail.com@smtp.gmail.com:465` (username only)\n `smtps://smtp.gmail.com:465` (No username and password)\nBackwards Compatible (less secure):\n `smtps://username@gmail.com:password@smtp.gmail.com:465`. (username and password)\n\n* SMTP password: User password for the SMTP server\n\n* Email documents collection: What is the path to the collection that contains the documents used to build and send the emails?\n\n* Default FROM address: The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).\n\n* Default REPLY-TO address: The email address to use as the reply-to address (if it's not specified in the added email document).\n\n* Users collection: A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection.\n\n* Templates collection: A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document.\n\n\n\n**Cloud Functions:**\n\n* **processQueue:** Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.\n\n\n\n**Access Required**:\n\n\n\nThis extension will operate with the following project IAM roles:\n\n* datastore.user (Reason: Allows this extension to access Cloud Firestore to read and process added email documents.)\n","displayName":"Trigger Email","systemParams":[{"param":"firebaseextensions.v1beta.function/memory","label":"Function memory","type":"SELECT","description":"How much memory should be allocated to each function?","options":[{"value":"128","label":"128MB"},{"value":"256","label":"256MB"},{"value":"512","label":"512MB"},{"value":"1024","label":"1GB"},{"value":"2048","label":"2GB"},{"value":"4096","label":"4GB"},{"value":"8192","label":"8GB"}],"default":"256","advanced":true},{"param":"firebaseextensions.v1beta.function/timeoutSeconds","label":"Function timeout seconds","type":"STRING","description":"How long should functions run before timing out, in seconds (0-540)?","validationRegex":"^[1-9][0-9]{0,2}$","validationErrorMessage":"Function timeout should be an integer number of seconds, between 0 and 540","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnector","label":"VPC Connector","type":"STRING","description":"The VPC Network Connector that this cloud function can connect to. It can be either the fully-qualified URI, or the short name of the network connector resource. The format of this field is projects/*/locations/*/connectors/*.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/connectors/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnectorEgressSettings","label":"VPC Connector Egress settings","type":"SELECT","description":"Controls outgoing traffic when a VPC connector is configured","options":[{"value":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","label":"Unspecified"},{"value":"PRIVATE_RANGES_ONLY","label":"Private ranges only"},{"value":"ALL_TRAFFIC","label":"All traffic"}],"default":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","advanced":true},{"param":"firebaseextensions.v1beta.function/minInstances","label":"Minimum function instances","type":"STRING","description":"The minimum number of instances of each function to run at once (0-1000)","default":"0","validationRegex":"^[0-9]*$","validationErrorMessage":"Min instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/maxInstances","label":"Maximum function instances","type":"STRING","description":"The maximum number of instances of each function to run at once","default":"3000","validationRegex":"^[0-9]*$","validationErrorMessage":"Max instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/ingressSettings","label":"Function ingress settings","type":"SELECT","description":"Where should functions allow incoming traffic from?","options":[{"value":"ALLOW_ALL","label":"Allow all"},{"value":"ALLOW_INTERNAL_ONLY","label":"Allow internal only"},{"value":"ALLOW_INTERNAL_AND_GCLB","label":"Allow internal and GCLB"}],"advanced":true},{"param":"firebaseextensions.v1beta.function/labels","label":"Function labels","type":"STRING","description":"Do you wish to set any labels on this instance's Cloud Functions? If so, provide up to 55 labels in the format 'key1:value, key2:value'","validationRegex":"^([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63},\\s*)*([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63})$","advanced":true},{"param":"firebaseextensions.v1beta.function/kmsKeyName","label":"KMS key name","type":"STRING","description":"Do you want to use a Customer Managed Eencryption Key (CMEK) to encrypt this extension's functions? If you set this, you must also set a Docker repository encrypted by that key. See https://cloud.google.com/functions/docs/securing/cmek for more details.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/keyRings/([^/]+)/cryptoKeys/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/dockerRepository","label":"Docker repository","type":"STRING","description":"What Docker repository should be used to store function images? Default repository will be used if not set.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/repositories/([^/]+)$","advanced":true}]},"state":"PUBLISHED","hash":"e2e26f128addba20caa7424f2415c42448f4e9221de4597f1588d16b06c66b65","createTime":"2022-06-22T18:04:26.985835Z","id":"0.1.18","releaseNotes":"fixed - added encoding for connection string passwords (#985)\n\nfixed - move log statement outside of forEach loop (#950)\n\nfeature - upgrade to the latest emulator updates (#995)\n\nfixed - further updated the extensions regular expression validation to contain additional smtp formats (#909)\n\nfixed - generate correct `package-lock.json` files after `lerna bootstrap` (#779)\n\nfixed - added local smtp server for running tests (#794)\n\nfixed - add SMTP secret password (#840)\n\nfixed - added logging for invalid email messages, documentation updated with firestore example (#710)\n\nfixed - update validate workflow to use node14\n","listing":{"state":"APPROVED"}},{"name":"publishers/firebase/extensions/firestore-send-email/versions/0.1.19","ref":"firebase/firestore-send-email@0.1.19","spec":{"specVersion":"v1beta","name":"firestore-send-email","version":"0.1.19","description":"Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.","roles":[{"role":"datastore.user","reason":"Allows this extension to access Cloud Firestore to read and process added email documents."}],"resources":[{"name":"processQueue","type":"firebaseextensions.v1beta.function","propertiesYaml":"eventTrigger:\n  eventType: providers/cloud.firestore/eventTypes/document.write\n  resource: projects/${param:PROJECT_ID}/databases/(default)/documents/${param:MAIL_COLLECTION}/{id}\nlocation: ${param:LOCATION}\nruntime: nodejs14\n","description":"Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.","deletionPolicy":"DELETE"}],"billingRequired":true,"author":{"authorName":"Firebase","url":"https://firebase.google.com"},"contributors":[{"authorName":"Michael Bleigh","url":"https://github.com/mbleigh"},{"authorName":"Invertase","email":"oss@invertase.io","url":"https://github.com/invertase"}],"license":"Apache-2.0","releaseNotesUrl":"https://github.com/firebase/extensions/blob/master/firestore-send-email/CHANGELOG.md","sourceUrl":"https://github.com/firebase/extensions/tree/master/firestore-send-email","params":[{"param":"LOCATION","label":"Cloud Functions location","type":"SELECT","description":"Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).","required":true,"options":[{"value":"us-central1","label":"Iowa (us-central1)"},{"value":"us-east1","label":"South Carolina (us-east1)"},{"value":"us-east4","label":"Northern Virginia (us-east4)"},{"value":"us-west2","label":"Los Angeles (us-west2)"},{"value":"us-west3","label":"Salt Lake City (us-west3)"},{"value":"us-west4","label":"Las Vegas (us-west4)"},{"value":"europe-central2","label":"Warsaw (europe-central2)"},{"value":"europe-west1","label":"Belgium (europe-west1)"},{"value":"europe-west2","label":"London (europe-west2)"},{"value":"europe-west3","label":"Frankfurt (europe-west3)"},{"value":"europe-west6","label":"Zurich (europe-west6)"},{"value":"asia-east1","label":"Taiwan (asia-east1)"},{"value":"asia-east2","label":"Hong Kong (asia-east2)"},{"value":"asia-northeast1","label":"Tokyo (asia-northeast1)"},{"value":"asia-northeast2","label":"Osaka (asia-northeast2)"},{"value":"asia-northeast3","label":"Seoul (asia-northeast3)"},{"value":"asia-south1","label":"Mumbai (asia-south1)"},{"value":"asia-southeast1","label":"Singapore (asia-southeast1)"},{"value":"asia-southeast2","label":"Jakarta (asia-southeast2)"},{"value":"northamerica-northeast1","label":"Montreal (northamerica-northeast1)"},{"value":"southamerica-east1","label":"Sao Paulo (southamerica-east1)"},{"value":"australia-southeast1","label":"Sydney (australia-southeast1)"}],"default":"us-central1","immutable":true},{"param":"SMTP_CONNECTION_URI","label":"SMTP connection URI","type":"STRING","description":"A URI representing an SMTP server this extension can use to deliver email. Note that port 25 is blocked by Google Cloud Platform, so we recommend using port 587 for SMTP connections. If you're using the SMTPS protocol, we recommend using port 465. In order to keep passwords secure, it is recommended to omit the password from the connection string while using the `SMTP Password` field for entering secrets and passwords. Passwords and secrets should now be included in `SMTP password` field.\nSecure format:\n `smtps://username@gmail.com@smtp.gmail.com:465` (username only)\n `smtps://smtp.gmail.com:465` (No username and password)\nBackwards Compatible (less secure):\n `smtps://username@gmail.com:password@smtp.gmail.com:465`. (username and password)","required":true,"example":"smtps://username@smtp.hostname.com:465","validationRegex":"^(smtp[s]*://.*?:[0-9]+.*$)","validationErrorMessage":"Invalid SMTP connection URI. Must be in the form `smtp(s)://username:password@hostname:port` or `smtp(s)://username@hostname:port`."},{"param":"SMTP_PASSWORD","label":"SMTP password","type":"SECRET","description":"User password for the SMTP server"},{"param":"MAIL_COLLECTION","label":"Email documents collection","type":"STRING","description":"What is the path to the collection that contains the documents used to build and send the emails?","required":true,"default":"mail","validationRegex":"^[^/]+(/[^/]+/[^/]+)*$","validationErrorMessage":"Must be a valid Cloud Firestore collection"},{"param":"DEFAULT_FROM","label":"Default FROM address","type":"STRING","description":"The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).","required":true,"example":"foobar@example.com","validationRegex":"^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$|^.*<(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})>$","validationErrorMessage":"Must be a valid email address or valid name plus email address"},{"param":"DEFAULT_REPLY_TO","label":"Default REPLY-TO address","type":"STRING","description":"The email address to use as the reply-to address (if it's not specified in the added email document)."},{"param":"USERS_COLLECTION","label":"Users collection","type":"STRING","description":"A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection."},{"param":"TEMPLATES_COLLECTION","label":"Templates collection","type":"STRING","description":"A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document."}],"preinstallContent":"Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- You will be charged a small amount (typically around $0.01/month) for the Firebase resources required by this extension (even if it is not used).\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s no-cost tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n","postinstallContent":"### See it in action\n\nYou can test out this extension right away!\n\n1.  Go to your [Cloud Firestore dashboard](https://console.firebase.google.com/project/${param:PROJECT_ID}/firestore/data) in the Firebase console.\n\n1.  If it doesn't already exist, create the collection you specified during installation: `${param:MAIL_COLLECTION}`.\n\n1.  Add a document with a `to` field and a `message` field with the following content:\n\n    ```js\n    to: ['someone@example.com'],\n    message: {\n      subject: 'Hello from Firebase!',\n      text: 'This is the plaintext section of the email body.',\n      html: 'This is the <code>HTML</code> section of the email body.',\n    }\n    ```\n\n1.  In a few seconds, you'll see a `delivery` field appear in the document. The field will update as the extension processes the email.\n\n**Note:** You can also use the [Firebase Admin SDK][admin_sdk] to add a document:\n\n```js\nadmin\n  .firestore()\n  .collection(\"${param:MAIL_COLLECTION}\")\n  .add({\n    to: \"someone@example.com\",\n    message: {\n      subject: \"Hello from Firebase!\",\n      text: \"This is the plaintext section of the email body.\",\n      html: \"This is the <code>HTML</code> section of the email body.\",\n    },\n  })\n  .then(() => console.log(\"Queued email for delivery!\"));\n```\n\n### Using this extension\n\nSee the [official documentation](https://firebase.google.com/docs/extensions/official/firestore-send-email) for information on using this extension, including advanced use cases such as using Handlebars templates and managing email delivery status.\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n\n[mail_collection]: https://console.firebase.google.com/project/_/firestore/data~2F${param:MAIL_COLLECTION}\n[admin_sdk]: https://firebase.google.com/docs/admin/setup\n[amp4email]: https://amp.dev/documentation/guides-and-tutorials/learn/email-spec/amp-email-format/\n[handlebars]: https://handlebarsjs.com/\n","readmeContent":"# Trigger Email\n\n**Author**: Firebase (**[https://firebase.google.com](https://firebase.google.com)**)\n\n**Description**: Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.\n\n\n\n**Details**: Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  from: 'somebodyelse@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\n**Custom senders**\n\nThe `from` field is an optional parameter. If you specify a value for this field, ensure the receiving SMTP server accepts custom senders in this field. Typically, a provider will use the email address provided by the configured account if the provider doesn't allow custom senders.\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- You will be charged a small amount (typically around $0.01/month) for the Firebase resources required by this extension (even if it is not used).\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s no-cost tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n\n\n\n\n**Configuration Parameters:**\n\n* Cloud Functions location: Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).\n\n* SMTP connection URI: A URI representing an SMTP server this extension can use to deliver email. Note that port 25 is blocked by Google Cloud Platform, so we recommend using port 587 for SMTP connections. If you're using the SMTPS protocol, we recommend using port 465. In order to keep passwords secure, it is recommended to omit the password from the connection string while using the `SMTP Password` field for entering secrets and passwords. Passwords and secrets should now be included in `SMTP password` field.\nSecure format:\n `smtps://username@gmail.com@smtp.gmail.com:465` (username only)\n `smtps://smtp.gmail.com:465` (No username and password)\nBackwards Compatible (less secure):\n `smtps://username@gmail.com:password@smtp.gmail.com:465`. (username and password)\n\n* SMTP password: User password for the SMTP server\n\n* Email documents collection: What is the path to the collection that contains the documents used to build and send the emails?\n\n* Default FROM address: The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).\n\n* Default REPLY-TO address: The email address to use as the reply-to address (if it's not specified in the added email document).\n\n* Users collection: A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection.\n\n* Templates collection: A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document.\n\n\n\n**Cloud Functions:**\n\n* **processQueue:** Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.\n\n\n\n**Access Required**:\n\n\n\nThis extension will operate with the following project IAM roles:\n\n* datastore.user (Reason: Allows this extension to access Cloud Firestore to read and process added email documents.)\n","displayName":"Trigger Email","systemParams":[{"param":"firebaseextensions.v1beta.function/memory","label":"Function memory","type":"SELECT","description":"How much memory should be allocated to each function?","options":[{"value":"128","label":"128MB"},{"value":"256","label":"256MB"},{"value":"512","label":"512MB"},{"value":"1024","label":"1GB"},{"value":"2048","label":"2GB"},{"value":"4096","label":"4GB"},{"value":"8192","label":"8GB"}],"default":"256","advanced":true},{"param":"firebaseextensions.v1beta.function/timeoutSeconds","label":"Function timeout seconds","type":"STRING","description":"How long should functions run before timing out, in seconds (0-540)?","validationRegex":"^[1-9][0-9]{0,2}$","validationErrorMessage":"Function timeout should be an integer number of seconds, between 0 and 540","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnector","label":"VPC Connector","type":"STRING","description":"The VPC Network Connector that this cloud function can connect to. It can be either the fully-qualified URI, or the short name of the network connector resource. The format of this field is projects/*/locations/*/connectors/*.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/connectors/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnectorEgressSettings","label":"VPC Connector Egress settings","type":"SELECT","description":"Controls outgoing traffic when a VPC connector is configured","options":[{"value":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","label":"Unspecified"},{"value":"PRIVATE_RANGES_ONLY","label":"Private ranges only"},{"value":"ALL_TRAFFIC","label":"All traffic"}],"default":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","advanced":true},{"param":"firebaseextensions.v1beta.function/minInstances","label":"Minimum function instances","type":"STRING","description":"The minimum number of instances of each function to run at once (0-1000)","default":"0","validationRegex":"^[0-9]*$","validationErrorMessage":"Min instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/maxInstances","label":"Maximum function instances","type":"STRING","description":"The maximum number of instances of each function to run at once","default":"3000","validationRegex":"^[0-9]*$","validationErrorMessage":"Max instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/ingressSettings","label":"Function ingress settings","type":"SELECT","description":"Where should functions allow incoming traffic from?","options":[{"value":"ALLOW_ALL","label":"Allow all"},{"value":"ALLOW_INTERNAL_ONLY","label":"Allow internal only"},{"value":"ALLOW_INTERNAL_AND_GCLB","label":"Allow internal and GCLB"}],"advanced":true},{"param":"firebaseextensions.v1beta.function/labels","label":"Function labels","type":"STRING","description":"Do you wish to set any labels on this instance's Cloud Functions? If so, provide up to 55 labels in the format 'key1:value, key2:value'","validationRegex":"^([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63},\\s*)*([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63})$","advanced":true},{"param":"firebaseextensions.v1beta.function/kmsKeyName","label":"KMS key name","type":"STRING","description":"Do you want to use a Customer Managed Eencryption Key (CMEK) to encrypt this extension's functions? If you set this, you must also set a Docker repository encrypted by that key. See https://cloud.google.com/functions/docs/securing/cmek for more details.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/keyRings/([^/]+)/cryptoKeys/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/dockerRepository","label":"Docker repository","type":"STRING","description":"What Docker repository should be used to store function images? Default repository will be used if not set.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/repositories/([^/]+)$","advanced":true}]},"state":"PUBLISHED","hash":"702b73f5be4618b7984605a41aad854002f6e1352f4dce2935f638e1e51c32b4","createTime":"2022-06-22T20:58:04.946830Z","id":"0.1.19","releaseNotes":"fixed - generate new lib folder\n","listing":{"state":"APPROVED"},"metrics":{"activeInstallCount":"2500"}},{"name":"publishers/firebase/extensions/firestore-send-email/versions/0.1.2","ref":"firebase/firestore-send-email@0.1.2","spec":{"specVersion":"v1beta","name":"firestore-send-email","version":"0.1.2","description":"Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.","roles":[{"role":"datastore.user","reason":"Allows this extension to access Cloud Firestore to read and process added email documents."}],"resources":[{"name":"processQueue","type":"firebaseextensions.v1beta.function","propertiesYaml":"eventTrigger:\n  eventType: providers/cloud.firestore/eventTypes/document.write\n  resource: projects/${PROJECT_ID}/databases/(default)/documents/${MAIL_COLLECTION}/{id}\nlocation: ${LOCATION}\nsourceDirectory: .\n","description":"Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.","deletionPolicy":"DELETE"}],"billingRequired":true,"author":{"authorName":"Firebase","url":"https://firebase.google.com"},"contributors":[{"authorName":"Michael Bleigh","url":"https://github.com/mbleigh"},{"authorName":"Elliot Hesp","email":"elliot@invertase.io","url":"https://github.com/ehesp"}],"license":"Apache-2.0","releaseNotesUrl":"https://github.com/firebase/extensions/blob/master/firestore-send-email/CHANGELOG.md","sourceUrl":"https://github.com/firebase/extensions/tree/master/firestore-send-email","params":[{"param":"LOCATION","label":"Cloud Functions location","type":"SELECT","description":"Where do you want to deploy the functions created for this extension?  You usually want a location close to your database. For help selecting a  location, refer to the [location selection  guide](https://firebase.google.com/docs/functions/locations).","required":true,"options":[{"value":"us-central1","label":"Iowa (us-central1)"},{"value":"us-east1","label":"South Carolina (us-east1)"},{"value":"us-east4","label":"Northern Virginia (us-east4)"},{"value":"europe-west1","label":"Belgium (europe-west1)"},{"value":"europe-west2","label":"London (europe-west2)"},{"value":"asia-east2","label":"Hong Kong (asia-east2)"},{"value":"asia-northeast1","label":"Tokyo (asia-northeast1)"}],"default":"us-central1","immutable":true},{"param":"SMTP_CONNECTION_URI","label":"SMTP connection URI","type":"STRING","description":"A URI representing an SMTP server that this extension can use to deliver email.","required":true,"example":"smtps://username:password@smtp.hostname.com:465","validationRegex":"^smtps?://[^:]+:[^:]+@.*$","validationErrorMessage":"Invalid SMTP connection URI. Must be in the form `smtp(s)://username:password@hostname:port`."},{"param":"MAIL_COLLECTION","label":"Email documents collection","type":"STRING","description":"What is the path to the collection that contains the documents used to build and send the emails?","required":true,"default":"mail","validationRegex":"^[^/]+(/[^/]+/[^/]+)*$","validationErrorMessage":"Must be a valid Cloud Firestore collection"},{"param":"DEFAULT_FROM","label":"Default FROM address","type":"STRING","description":"The email address to use as the sender's address (if it's not specified in the added email document).","required":true,"validationRegex":"^\\S+@\\S+\\.\\S+$","validationErrorMessage":"Must be a valid email address"},{"param":"DEFAULT_REPLY_TO","label":"Default REPLY-TO address","type":"STRING","description":"The email address to use as the reply-to address (if it's not specified in the added email document)."},{"param":"USERS_COLLECTION","label":"Users collection","type":"STRING","description":"A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection."},{"param":"TEMPLATES_COLLECTION","label":"Templates collection","type":"STRING","description":"A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document."}],"preinstallContent":"Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\n\nThis extension uses other Firebase or Google Cloud Platform services which may have associated charges:\n\n- Cloud Firestore\n- Cloud Functions\n\nWhen you use Firebase Extensions, you're only charged for the underlying resources that you use. A paid-tier billing plan is only required if the extension uses a service that requires a paid-tier plan, for example calling to a Google Cloud Platform API or making outbound network requests to non-Google services. All Firebase services offer a free tier of usage. [Learn more about Firebase billing.](https://firebase.google.com/pricing)\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n","postinstallContent":"### See it in action\n\nYou can test out this extension right away:\n\n1.  Go to your [Cloud Firestore dashboard](https://console.firebase.google.com/project/${param:PROJECT_ID}/database/firestore/data).\n\n1.  If it doesn't already exist, create the collection you specified during installation: `${param:MAIL_COLLECTION}`.\n\n1.  Add a document with a `to` field and a `message` field with the following content:\n\n    ```js\n    to: ['someone@example.com'],\n    message: {\n      subject: 'Hello from Firebase!',\n      text: 'This is the plaintext section of the email body.',\n      html: 'This is the <code>HTML</code> section of the email body.',\n    }\n    ```\n\n1.  In a few seconds, you'll see a `delivery` field appear in the document. The field will update as the extension processes the email.\n\n**Note:** You can also use the [Firebase Admin SDK][admin_sdk] to add a document:\n```js\nadmin.firestore().collection('${param:MAIL_COLLECTION}').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    text: 'This is the plaintext section of the email body.',\n    html: 'This is the <code>HTML</code> section of the email body.',\n  }\n}).then(() => console.log('Queued email for delivery!'));\n```\n\n### Using this extension\n\nAfter its installation, this extension monitors all document writes to the `${param:MAIL_COLLECTION}` collection. Email is delivered based on the contents of the document's fields. The top-level fields specify the email's sender and recipients. The `message` field contains the details of the email to deliver, including the email body.\n\n#### Sender and recipient fields\n\nThe top-level fields of the document supply the email sender and recipient information. Available fields are:\n\n* **from:** The sender's email address. If not specified in the document, uses the configured \"Default FROM address\" parameter.\n* **replyTo:** The reply-to email address. If not specified in the document, uses the configured \"Default REPLY-TO address\" parameter.\n* **to:** A single recipient email address or an array containing multiple recipient email addresses.\n* **toUids:** An array containing the recipient UIDs.\n* **cc:** A single recipient email address or an array containing multiple recipient email addresses.\n* **ccUids:** An array containing the CC recipient UIDs.\n* **bcc:** A single recipient email address or an array containing multiple recipient email addresses.\n* **bccUids:** An array containing the BCC recipient UIDs.\n* **headers:** An object of additional header fields (for example, `{\"X-Custom-Header\": \"value\", \"X-Second-Custom-Header\": \"value\"}`).\n\n**NOTE:** The `toUids`, `ccUids`, and `bccUids` options deliver emails based on user UIDs keyed to email addresses within a Cloud Firestore document. To use these recipient options, you need to specify a Cloud Firestore collection for the extension's \"Users collection\" parameter. The extension can then read the `email` field for each UID specified in the `toUids`, `ccUids`, and/or `bccUids` fields.\n\n#### Message field\n\nThe `message` field of the document contains raw delivery information for the email. This field should generally only be populated by trusted code running in your own servers or Cloud Functions (refer to the \"Security rules and sending email\" section below).\n\nAvailable properties for the `message` field are:\n\n* **messageId:** A message ID header for the email, if any.\n* **subject:** The subject of the email.\n* **text:** The plaintext content of the email.\n* **html:** The HTML content of the email.\n* **amp:** The [AMP4EMAIL][amp4email] content of the email.\n* **attachments:** An array containing attachment(s); [Nodemailer options](https://nodemailer.com/message/attachments/) supported: utf-8 string, custom content type, URL, encoded string, data URI, and pregenerated MIME node (be aware that your email has no access to the cloud server's file system).\n\n#### Using templates\n\nIf you specified a \"Templates collection\" parameter during configuration of the extension, you can create and manage [Handlebars][handlebars] templates for your emails. Each document for a template should have a memorable ID that you use as the *template name* in the document that's written to your `${param:MAIL_COLLECTION}` collection.\n\nThe template document can include any of the following fields:\n\n* **subject:** A template string for the subject of the email.\n* **text:** A template string for the plaintext content of the email.\n* **html:** A template string for the HTML content of the email.\n* **amp:** A template string for the [AMP4EMAIL][amp4email] content of the email.\n\nAn example template might have an ID of `following` and content like:\n\n```js\n{\n  subject: \"@{{username}} is now following you!\",\n  html: \"Just writing to let you know that <code>@{{username}}</code> ({{name}}) is now following you.\"\n}\n```\n\nTo deliver email using templates, when adding documents to your `${param:MAIL_COLLECTION}` collection, include a `template` field with `name` and `data` properties. For example, using our `following` template from above:\n\n```js\nadmin.firestore().collection('${param:MAIL_COLLECTION}').add({\n  toUids: ['abc123'],\n  template: {\n    name: 'following',\n    data: {\n      username: 'ada',\n      name: 'Ada Lovelace'\n    }\n  }\n})\n```\n\n#### Security rules and sending email\n\nThis extension can be used to trigger email delivery directly from client applications. However, you should carefully control client access to the `${param:MAIL_COLLECTION}` collection to avoid potential abuse (you don't want users able to send arbitrary emails from your company's address!).\n\nSecurity rules will vary from application to application, but you should always make sure that emails are sent only to intended recipients and free-form content is kept to a minimum. Templates can help here -- you can use security rules to verify that the data being populated to the template matches your expectations for what a user should be allowed to trigger.\n\n#### Email delivery processing\n\nWhen a document is added to the `${param:MAIL_COLLECTION}` collection, the extension picks it up for email delivery processing. The extension creates and updates a `delivery` field in the document as it processes the email. The `delivery` field can be populated with the following fields:\n\n* **state:** One of `PENDING`, `PROCESSING`, `SUCCESS`, or `ERROR`.\n* **startTime:** Timestamp when email processing began.\n* **endTime:** Timestamp when email processing completed (that is, ended in either a `SUCCESS` or `ERROR` state).\n* **error:** If there was an email delivery error, an error message will be populated here.\n* **attempts:** Number of delivery attempts for this email.\n* **leaseExpireTime:** In case of a hang or timeout, the time at which a `PROCESSING` state should be considered an error.\n* **info:** After successful email delivery (to at least one address), this field will be populated with the following fields:\n  * **messageId:** The message ID of the delivered email.\n  * **accepted:** Array of email addresses to which the email was successfully delivered.\n  * **rejected:** Array of email addresses to which the email could not be delivered.\n  * **pending:** Array of email addresses that were temporarily rejected by SMTP.\n  * **response:** The last response from the SMTP server.\n\nAn email will typically go from `PENDING` to `PROCESSING` to either `SUCCESS` or `ERROR`. Once in the `SUCCESS` or `ERROR` state, additional changes to the document will not trigger the extension to send another email. To resend an email with document updates, you can change the `state` to `PENDING` or `RETRY`.\n\n#### Manual retries\n\nThere are instances in which email delivery fails in a recoverable fashion or the document can be manually corrected for proper delivery with minor modifications. While retries are not automatic, you can manually change the `state` in the `delivery` field to `RETRY` so that the extension attempts email delivery again (and increments the number of `attempts`).\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n\n[mail_collection]: https://console.firebase.google.com/project/_/database/firestore/data~2F${param:MAIL_COLLECTION}\n[admin_sdk]: https://firebase.google.com/docs/admin/setup\n[amp4email]: https://amp.dev/documentation/guides-and-tutorials/learn/email-spec/amp-email-format/\n[handlebars]: https://handlebarsjs.com/\n","readmeContent":"# Trigger Email\n\n**Description**: Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.\n\n\n\n**Details**: Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\n\nThis extension uses other Firebase or Google Cloud Platform services which may have associated charges:\n\n- Cloud Firestore\n- Cloud Functions\n\nWhen you use Firebase Extensions, you're only charged for the underlying resources that you use. A paid-tier billing plan is only required if the extension uses a service that requires a paid-tier plan, for example calling to a Google Cloud Platform API or making outbound network requests to non-Google services. All Firebase services offer a free tier of usage. [Learn more about Firebase billing.](https://firebase.google.com/pricing)\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n\n\n\n\n**Configuration Parameters:**\n\n* Cloud Functions location: Where do you want to deploy the functions created for this extension?  You usually want a location close to your database. For help selecting a  location, refer to the [location selection  guide](https://firebase.google.com/docs/functions/locations).\n\n* SMTP connection URI: A URI representing an SMTP server that this extension can use to deliver email.\n\n* Email documents collection: What is the path to the collection that contains the documents used to build and send the emails?\n\n* Default FROM address: The email address to use as the sender's address (if it's not specified in the added email document).\n\n* Default REPLY-TO address: The email address to use as the reply-to address (if it's not specified in the added email document).\n\n* Users collection: A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection.\n\n* Templates collection: A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document.\n\n\n\n**Cloud Functions:**\n\n* **processQueue:** Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.\n\n\n\n**Access Required**:\n\n\n\nThis extension will operate with the following project IAM roles:\n\n* datastore.user (Reason: Allows this extension to access Cloud Firestore to read and process added email documents.)\n","displayName":"Trigger Email","systemParams":[{"param":"firebaseextensions.v1beta.function/memory","label":"Function memory","type":"SELECT","description":"How much memory should be allocated to each function?","options":[{"value":"128","label":"128MB"},{"value":"256","label":"256MB"},{"value":"512","label":"512MB"},{"value":"1024","label":"1GB"},{"value":"2048","label":"2GB"},{"value":"4096","label":"4GB"},{"value":"8192","label":"8GB"}],"default":"256","advanced":true},{"param":"firebaseextensions.v1beta.function/timeoutSeconds","label":"Function timeout seconds","type":"STRING","description":"How long should functions run before timing out, in seconds (0-540)?","validationRegex":"^[1-9][0-9]{0,2}$","validationErrorMessage":"Function timeout should be an integer number of seconds, between 0 and 540","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnector","label":"VPC Connector","type":"STRING","description":"The VPC Network Connector that this cloud function can connect to. It can be either the fully-qualified URI, or the short name of the network connector resource. The format of this field is projects/*/locations/*/connectors/*.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/connectors/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnectorEgressSettings","label":"VPC Connector Egress settings","type":"SELECT","description":"Controls outgoing traffic when a VPC connector is configured","options":[{"value":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","label":"Unspecified"},{"value":"PRIVATE_RANGES_ONLY","label":"Private ranges only"},{"value":"ALL_TRAFFIC","label":"All traffic"}],"default":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","advanced":true},{"param":"firebaseextensions.v1beta.function/minInstances","label":"Minimum function instances","type":"STRING","description":"The minimum number of instances of each function to run at once (0-1000)","default":"0","validationRegex":"^[0-9]*$","validationErrorMessage":"Min instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/maxInstances","label":"Maximum function instances","type":"STRING","description":"The maximum number of instances of each function to run at once","default":"3000","validationRegex":"^[0-9]*$","validationErrorMessage":"Max instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/ingressSettings","label":"Function ingress settings","type":"SELECT","description":"Where should functions allow incoming traffic from?","options":[{"value":"ALLOW_ALL","label":"Allow all"},{"value":"ALLOW_INTERNAL_ONLY","label":"Allow internal only"},{"value":"ALLOW_INTERNAL_AND_GCLB","label":"Allow internal and GCLB"}],"advanced":true},{"param":"firebaseextensions.v1beta.function/labels","label":"Function labels","type":"STRING","description":"Do you wish to set any labels on this instance's Cloud Functions? If so, provide up to 55 labels in the format 'key1:value, key2:value'","validationRegex":"^([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63},\\s*)*([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63})$","advanced":true},{"param":"firebaseextensions.v1beta.function/kmsKeyName","label":"KMS key name","type":"STRING","description":"Do you want to use a Customer Managed Eencryption Key (CMEK) to encrypt this extension's functions? If you set this, you must also set a Docker repository encrypted by that key. See https://cloud.google.com/functions/docs/securing/cmek for more details.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/keyRings/([^/]+)/cryptoKeys/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/dockerRepository","label":"Docker repository","type":"STRING","description":"What Docker repository should be used to store function images? Default repository will be used if not set.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/repositories/([^/]+)$","advanced":true}]},"state":"DEPRECATED","hash":"06e035c41c42446b38a8429ebed064088862c2e5ea0e183e5af01bd6cef1e9c8","createTime":"2020-01-30T20:57:51.806095073Z","id":"0.1.2","releaseNotes":"feature - Support custom email headers. The extension reads from the `headers` field in the Cloud Firestore document (detailed instructions provided in the [POSTINSTALL file](https://github.com/firebase/extensions/blob/master/firestore-send-email/POSTINSTALL.md#using-this-extension). (issue #77)\n","listing":{"state":"APPROVED"},"metrics":{"activeInstallCount":"30"}},{"name":"publishers/firebase/extensions/firestore-send-email/versions/0.1.2-rc.1","ref":"firebase/firestore-send-email@0.1.2-rc.1","spec":{"specVersion":"v1beta","name":"firestore-send-email","version":"0.1.2","description":"Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.","roles":[{"role":"datastore.user","reason":"Allows this extension to access Cloud Firestore to read and process added email documents."}],"resources":[{"name":"processQueue","type":"firebaseextensions.v1beta.function","propertiesYaml":"eventTrigger:\n  eventType: providers/cloud.firestore/eventTypes/document.write\n  resource: projects/${PROJECT_ID}/databases/(default)/documents/${MAIL_COLLECTION}/{id}\nlocation: ${LOCATION}\nsourceDirectory: .\n","description":"Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.","deletionPolicy":"DELETE"}],"billingRequired":true,"author":{"authorName":"Firebase","url":"https://firebase.google.com"},"contributors":[{"authorName":"Michael Bleigh","url":"https://github.com/mbleigh"},{"authorName":"Elliot Hesp","email":"elliot@invertase.io","url":"https://github.com/ehesp"}],"license":"Apache-2.0","releaseNotesUrl":"https://github.com/firebase/extensions/releases","sourceUrl":"https://github.com/firebase/extensions/tree/master/firestore-send-email","params":[{"param":"LOCATION","label":"Deployment location","type":"SELECT","description":"Where should the extension be deployed? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).","required":true,"options":[{"value":"us-central1","label":"Iowa (us-central1)"},{"value":"us-east1","label":"South Carolina (us-east1)"},{"value":"us-east4","label":"Northern Virginia (us-east4)"},{"value":"europe-west1","label":"Belgium (europe-west1)"},{"value":"europe-west2","label":"London (europe-west2)"},{"value":"asia-east2","label":"Hong Kong (asia-east2)"},{"value":"asia-northeast1","label":"Tokyo (asia-northeast1)"}],"default":"us-central1","immutable":true},{"param":"SMTP_CONNECTION_URI","label":"SMTP connection URI","type":"STRING","description":"A URI representing an SMTP server that this extension can use to deliver email.","required":true,"example":"smtps://username:password@smtp.hostname.com:465","validationRegex":"^smtps?://[^:]+:[^:]+@.*$","validationErrorMessage":"Invalid SMTP connection URI. Must be in the form `smtp(s)://username:password@hostname:port`."},{"param":"MAIL_COLLECTION","label":"Email documents collection","type":"STRING","description":"What is the path to the collection that contains the documents used to build and send the emails?","required":true,"default":"mail","validationRegex":"^[^/]+(/[^/]+/[^/]+)*$","validationErrorMessage":"Must be a valid Cloud Firestore collection"},{"param":"DEFAULT_FROM","label":"Default FROM address","type":"STRING","description":"The email address to use as the sender's address (if it's not specified in the added email document).","required":true,"validationRegex":"^\\S+@\\S+\\.\\S+$","validationErrorMessage":"Must be a valid email address"},{"param":"DEFAULT_REPLY_TO","label":"Default REPLY-TO address","type":"STRING","description":"The email address to use as the reply-to address (if it's not specified in the added email document)."},{"param":"USERS_COLLECTION","label":"Users collection","type":"STRING","description":"A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection."},{"param":"TEMPLATES_COLLECTION","label":"Templates collection","type":"STRING","description":"A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document."}],"preinstallContent":"Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\n\nThis extension uses other Firebase or Google Cloud Platform services which may have associated charges:\n\n- Cloud Firestore\n- Cloud Functions\n\nWhen you use Firebase Extensions, you're only charged for the underlying resources that you use. A paid-tier billing plan is only required if the extension uses a service that requires a paid-tier plan, for example calling to a Google Cloud Platform API or making outbound network requests to non-Google services. All Firebase services offer a free tier of usage. [Learn more about Firebase billing.](https://firebase.google.com/pricing)\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n","postinstallContent":"### See it in action\n\nYou can test out this extension right away:\n\n1.  Go to your [Cloud Firestore dashboard](https://console.firebase.google.com/project/${param:PROJECT_ID}/database/firestore/data).\n\n1.  If it doesn't already exist, create the collection you specified during installation: `${param:MAIL_COLLECTION}`.\n\n1.  Add a document with a `to` field and a `message` field with the following content:\n\n    ```\n    to: ['someone@example.com'],\n    message: {\n      subject: 'Hello from Firebase!',\n      text: 'This is the plaintext section of the email body.',\n      html: 'This is the <code>HTML</code> section of the email body.',\n    }\n    ```\n\n1.  In a few seconds, you'll see a `delivery` field appear in the document. The field will update as the extension processes the email.\n\n**Note:** You can also use the [Firebase Admin SDK][admin_sdk] to add a document:\n```\nadmin.firestore().collection('${param:MAIL_COLLECTION}').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    text: 'This is the plaintext section of the email body.',\n    html: 'This is the <code>HTML</code> section of the email body.',\n  }\n}).then(() => console.log('Queued email for delivery!'));\n```\n\n### Using this extension\n\nAfter its installation, this extension monitors all document writes to the `${param:MAIL_COLLECTION}` collection. Email is delivered based on the contents of the document's fields. The top-level fields specify the email's sender and recipients. The `message` field contains the details of the email to deliver, including the email body.\n\n#### Sender and recipient fields\n\nThe top-level fields of the document supply the email sender and recipient information. Available fields are:\n\n* **from:** The sender's email address. If not specified in the document, uses the configured \"Default FROM address\" parameter.\n* **replyTo:** The reply-to email address. If not specified in the document, uses the configured \"Default REPLY-TO address\" parameter.\n* **to:** A single recipient email address or an array containing multiple recipient email addresses.\n* **toUids:** An array containing the recipient UIDs.\n* **cc:** A single recipient email address or an array containing multiple recipient email addresses.\n* **ccUids:** An array containing the CC recipient UIDs.\n* **bcc:** A single recipient email address or an array containing multiple recipient email addresses.\n* **bccUids:** An array containing the BCC recipient UIDs.\n* **headers:** An object of additional header fields (for example, `{\"X-Custom-Header\": \"value\", \"X-Second-Custom-Header\": \"value\"}`).\n\n**NOTE:** The `toUids`, `ccUids`, and `bccUids` options deliver emails based on user UIDs keyed to email addresses within a Cloud Firestore document. To use these recipient options, you need to specify a Cloud Firestore collection for the extension's \"Users collection\" parameter. The extension can then read the `email` field for each UID specified in the `toUids`, `ccUids`, and/or `bccUids` fields.\n\n#### Message field\n\nThe `message` field of the document contains raw delivery information for the email. This field should generally only be populated by trusted code running in your own servers or Cloud Functions (refer to the \"Security rules and sending email\" section below).\n\nAvailable properties for the `message` field are:\n\n* **messageId:** A message ID header for the email, if any.\n* **subject:** The subject of the email.\n* **text:** The plaintext content of the email.\n* **html:** The HTML content of the email.\n* **amp:** The [AMP4EMAIL][amp4email] content of the email.\n\n#### Using templates\n\nIf you specified a \"Templates collection\" parameter during configuration of the extension, you can create and manage [Handlebars][handlebars] templates for your emails. Each document for a template should have a memorable ID that you use as the *template name* in the document that's written to your `${param:MAIL_COLLECTION}` collection.\n\nThe template document can include any of the following fields:\n\n* **subject:** A template string for the subject of the email.\n* **text:** A template string for the plaintext content of the email.\n* **html:** A template string for the HTML content of the email.\n* **amp:** A template string for the [AMP4EMAIL][amp4email] content of the email.\n\nAn example template might have an ID of `following` and content like:\n\n```js\n{\n  subject: \"@{{username}} is now following you!\",\n  html: \"Just writing to let you know that <code>@{{username}}</code> ({{name}}) is now following you.\"\n}\n```\n\nTo deliver email using templates, when adding documents to your `${param:MAIL_COLLECTION}` collection, include a `template` field with `name` and `data` properties. For example, using our `following` template from above:\n\n```js\nadmin.firestore().collection('${param:MAIL_COLLECTION}').add({\n  toUids: ['abc123'],\n  template: {\n    name: 'following',\n    data: {\n      username: 'ada',\n      name: 'Ada Lovelace'\n    }\n  }\n})\n```\n\n#### Security rules and sending email\n\nThis extension can be used to trigger email delivery directly from client applications. However, you should carefully control client access to the `${param:MAIL_COLLECTION}` collection to avoid potential abuse (you don't want users able to send arbitrary emails from your company's address!).\n\nSecurity rules will vary from application to application, but you should always make sure that emails are sent only to intended recipients and free-form content is kept to a minimum. Templates can help here -- you can use security rules to verify that the data being populated to the template matches your expectations for what a user should be allowed to trigger.\n\n#### Email delivery processing\n\nWhen a document is added to the `${param:MAIL_COLLECTION}` collection, the extension picks it up for email delivery processing. The extension creates and updates a `delivery` field in the document as it processes the email. The `delivery` field can be populated with the following fields:\n\n* **state:** One of `PENDING`, `PROCESSING`, `SUCCESS`, or `ERROR`.\n* **startTime:** Timestamp when email processing began.\n* **endTime:** Timestamp when email processing completed (that is, ended in either a `SUCCESS` or `ERROR` state).\n* **error:** If there was an email delivery error, an error message will be populated here.\n* **attempts:** Number of delivery attempts for this email.\n* **leaseExpireTime:** In case of a hang or timeout, the time at which a `PROCESSING` state should be considered an error.\n* **info:** After successful email delivery (to at least one address), this field will be populated with the following fields:\n  * **messageId:** The message ID of the delivered email.\n  * **accepted:** Array of email addresses to which the email was successfully delivered.\n  * **rejected:** Array of email addresses to which the email could not be delivered.\n  * **pending:** Array of email addresses that were temporarily rejected by SMTP.\n  * **response:** The last response from the SMTP server.\n\nAn email will typically go from `PENDING` to `PROCESSING` to either `SUCCESS` or `ERROR`. Once in the `SUCCESS` or `ERROR` state, additional changes to the document will not trigger the extension to send another email. To resend an email with document updates, you can change the `state` to `PENDING` or `RETRY`.\n\n#### Manual retries\n\nThere are instances in which email delivery fails in a recoverable fashion or the document can be manually corrected for proper delivery with minor modifications. While retries are not automatic, you can manually change the `state` in the `delivery` field to `RETRY` so that the extension attempts email delivery again (and increments the number of `attempts`).\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n\n[mail_collection]: https://console.firebase.google.com/project/_/database/firestore/data~2F${param:MAIL_COLLECTION}\n[admin_sdk]: https://firebase.google.com/docs/admin/setup\n[amp4email]: https://amp.dev/documentation/guides-and-tutorials/learn/email-spec/amp-email-format/\n[handlebars]: https://handlebarsjs.com/\n","readmeContent":"# Trigger Email\n\n**Description**: Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.\n\n\n\n**Details**: Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\n\nThis extension uses other Firebase or Google Cloud Platform services which may have associated charges:\n\n- Cloud Firestore\n- Cloud Functions\n\nWhen you use Firebase Extensions, you're only charged for the underlying resources that you use. A paid-tier billing plan is only required if the extension uses a service that requires a paid-tier plan, for example calling to a Google Cloud Platform API or making outbound network requests to non-Google services. All Firebase services offer a free tier of usage. [Learn more about Firebase billing.](https://firebase.google.com/pricing)\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n\n\n\n\n**Configuration Parameters:**\n\n* Deployment location: Where should the extension be deployed? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).\n\n* SMTP connection URI: A URI representing an SMTP server that this extension can use to deliver email.\n\n* Email documents collection: What is the path to the collection that contains the documents used to build and send the emails?\n\n* Default FROM address: The email address to use as the sender's address (if it's not specified in the added email document).\n\n* Default REPLY-TO address: The email address to use as the reply-to address (if it's not specified in the added email document).\n\n* Users collection: A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection.\n\n* Templates collection: A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document.\n\n\n\n**Cloud Functions:**\n\n* **processQueue:** Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.\n\n\n\n**Access Required**:\n\n\n\nThis extension will operate with the following project IAM roles:\n\n* datastore.user (Reason: Allows this extension to access Cloud Firestore to read and process added email documents.)\n","displayName":"Trigger Email","systemParams":[{"param":"firebaseextensions.v1beta.function/memory","label":"Function memory","type":"SELECT","description":"How much memory should be allocated to each function?","options":[{"value":"128","label":"128MB"},{"value":"256","label":"256MB"},{"value":"512","label":"512MB"},{"value":"1024","label":"1GB"},{"value":"2048","label":"2GB"},{"value":"4096","label":"4GB"},{"value":"8192","label":"8GB"}],"default":"256","advanced":true},{"param":"firebaseextensions.v1beta.function/timeoutSeconds","label":"Function timeout seconds","type":"STRING","description":"How long should functions run before timing out, in seconds (0-540)?","validationRegex":"^[1-9][0-9]{0,2}$","validationErrorMessage":"Function timeout should be an integer number of seconds, between 0 and 540","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnector","label":"VPC Connector","type":"STRING","description":"The VPC Network Connector that this cloud function can connect to. It can be either the fully-qualified URI, or the short name of the network connector resource. The format of this field is projects/*/locations/*/connectors/*.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/connectors/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnectorEgressSettings","label":"VPC Connector Egress settings","type":"SELECT","description":"Controls outgoing traffic when a VPC connector is configured","options":[{"value":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","label":"Unspecified"},{"value":"PRIVATE_RANGES_ONLY","label":"Private ranges only"},{"value":"ALL_TRAFFIC","label":"All traffic"}],"default":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","advanced":true},{"param":"firebaseextensions.v1beta.function/minInstances","label":"Minimum function instances","type":"STRING","description":"The minimum number of instances of each function to run at once (0-1000)","default":"0","validationRegex":"^[0-9]*$","validationErrorMessage":"Min instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/maxInstances","label":"Maximum function instances","type":"STRING","description":"The maximum number of instances of each function to run at once","default":"3000","validationRegex":"^[0-9]*$","validationErrorMessage":"Max instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/ingressSettings","label":"Function ingress settings","type":"SELECT","description":"Where should functions allow incoming traffic from?","options":[{"value":"ALLOW_ALL","label":"Allow all"},{"value":"ALLOW_INTERNAL_ONLY","label":"Allow internal only"},{"value":"ALLOW_INTERNAL_AND_GCLB","label":"Allow internal and GCLB"}],"advanced":true},{"param":"firebaseextensions.v1beta.function/labels","label":"Function labels","type":"STRING","description":"Do you wish to set any labels on this instance's Cloud Functions? If so, provide up to 55 labels in the format 'key1:value, key2:value'","validationRegex":"^([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63},\\s*)*([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63})$","advanced":true},{"param":"firebaseextensions.v1beta.function/kmsKeyName","label":"KMS key name","type":"STRING","description":"Do you want to use a Customer Managed Eencryption Key (CMEK) to encrypt this extension's functions? If you set this, you must also set a Docker repository encrypted by that key. See https://cloud.google.com/functions/docs/securing/cmek for more details.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/keyRings/([^/]+)/cryptoKeys/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/dockerRepository","label":"Docker repository","type":"STRING","description":"What Docker repository should be used to store function images? Default repository will be used if not set.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/repositories/([^/]+)$","advanced":true}]},"state":"PUBLISHED","createTime":"2019-12-12T18:16:15.688974612Z","id":"0.1.2-rc.1","listing":{"state":"UNLISTED"},"metrics":{"activeInstallCount":"80"}},{"name":"publishers/firebase/extensions/firestore-send-email/versions/0.1.2-rc.2","ref":"firebase/firestore-send-email@0.1.2-rc.2","spec":{"specVersion":"v1beta","name":"firestore-send-email","version":"0.1.2","description":"Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.","roles":[{"role":"datastore.user","reason":"Allows this extension to access Cloud Firestore to read and process added email documents."}],"resources":[{"name":"processQueue","type":"firebaseextensions.v1beta.function","propertiesYaml":"eventTrigger:\n  eventType: providers/cloud.firestore/eventTypes/document.write\n  resource: projects/${PROJECT_ID}/databases/(default)/documents/${MAIL_COLLECTION}/{id}\nlocation: ${LOCATION}\nsourceDirectory: .\n","description":"Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.","deletionPolicy":"DELETE"}],"billingRequired":true,"author":{"authorName":"Firebase","url":"https://firebase.google.com"},"contributors":[{"authorName":"Michael Bleigh","url":"https://github.com/mbleigh"},{"authorName":"Elliot Hesp","email":"elliot@invertase.io","url":"https://github.com/ehesp"}],"license":"Apache-2.0","releaseNotesUrl":"https://github.com/firebase/extensions/blob/master/firestore-send-email/CHANGELOG.md","sourceUrl":"https://github.com/firebase/extensions/tree/master/firestore-send-email","params":[{"param":"LOCATION","label":"Deployment location","type":"SELECT","description":"Where should the extension be deployed? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).","required":true,"options":[{"value":"us-central1","label":"Iowa (us-central1)"},{"value":"us-east1","label":"South Carolina (us-east1)"},{"value":"us-east4","label":"Northern Virginia (us-east4)"},{"value":"europe-west1","label":"Belgium (europe-west1)"},{"value":"europe-west2","label":"London (europe-west2)"},{"value":"asia-east2","label":"Hong Kong (asia-east2)"},{"value":"asia-northeast1","label":"Tokyo (asia-northeast1)"}],"default":"us-central1","immutable":true},{"param":"SMTP_CONNECTION_URI","label":"SMTP connection URI","type":"STRING","description":"A URI representing an SMTP server that this extension can use to deliver email.","required":true,"example":"smtps://username:password@smtp.hostname.com:465","validationRegex":"^smtps?://[^:]+:[^:]+@.*$","validationErrorMessage":"Invalid SMTP connection URI. Must be in the form `smtp(s)://username:password@hostname:port`."},{"param":"MAIL_COLLECTION","label":"Email documents collection","type":"STRING","description":"What is the path to the collection that contains the documents used to build and send the emails?","required":true,"default":"mail","validationRegex":"^[^/]+(/[^/]+/[^/]+)*$","validationErrorMessage":"Must be a valid Cloud Firestore collection"},{"param":"DEFAULT_FROM","label":"Default FROM address","type":"STRING","description":"The email address to use as the sender's address (if it's not specified in the added email document).","required":true,"validationRegex":"^\\S+@\\S+\\.\\S+$","validationErrorMessage":"Must be a valid email address"},{"param":"DEFAULT_REPLY_TO","label":"Default REPLY-TO address","type":"STRING","description":"The email address to use as the reply-to address (if it's not specified in the added email document)."},{"param":"USERS_COLLECTION","label":"Users collection","type":"STRING","description":"A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection."},{"param":"TEMPLATES_COLLECTION","label":"Templates collection","type":"STRING","description":"A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document."}],"preinstallContent":"Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\n\nThis extension uses other Firebase or Google Cloud Platform services which may have associated charges:\n\n- Cloud Firestore\n- Cloud Functions\n\nWhen you use Firebase Extensions, you're only charged for the underlying resources that you use. A paid-tier billing plan is only required if the extension uses a service that requires a paid-tier plan, for example calling to a Google Cloud Platform API or making outbound network requests to non-Google services. All Firebase services offer a free tier of usage. [Learn more about Firebase billing.](https://firebase.google.com/pricing)\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n","postinstallContent":"### See it in action\n\nYou can test out this extension right away:\n\n1.  Go to your [Cloud Firestore dashboard](https://console.firebase.google.com/project/${param:PROJECT_ID}/database/firestore/data).\n\n1.  If it doesn't already exist, create the collection you specified during installation: `${param:MAIL_COLLECTION}`.\n\n1.  Add a document with a `to` field and a `message` field with the following content:\n\n    ```\n    to: ['someone@example.com'],\n    message: {\n      subject: 'Hello from Firebase!',\n      text: 'This is the plaintext section of the email body.',\n      html: 'This is the <code>HTML</code> section of the email body.',\n    }\n    ```\n\n1.  In a few seconds, you'll see a `delivery` field appear in the document. The field will update as the extension processes the email.\n\n**Note:** You can also use the [Firebase Admin SDK][admin_sdk] to add a document:\n```\nadmin.firestore().collection('${param:MAIL_COLLECTION}').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    text: 'This is the plaintext section of the email body.',\n    html: 'This is the <code>HTML</code> section of the email body.',\n  }\n}).then(() => console.log('Queued email for delivery!'));\n```\n\n### Using this extension\n\nAfter its installation, this extension monitors all document writes to the `${param:MAIL_COLLECTION}` collection. Email is delivered based on the contents of the document's fields. The top-level fields specify the email's sender and recipients. The `message` field contains the details of the email to deliver, including the email body.\n\n#### Sender and recipient fields\n\nThe top-level fields of the document supply the email sender and recipient information. Available fields are:\n\n* **from:** The sender's email address. If not specified in the document, uses the configured \"Default FROM address\" parameter.\n* **replyTo:** The reply-to email address. If not specified in the document, uses the configured \"Default REPLY-TO address\" parameter.\n* **to:** A single recipient email address or an array containing multiple recipient email addresses.\n* **toUids:** An array containing the recipient UIDs.\n* **cc:** A single recipient email address or an array containing multiple recipient email addresses.\n* **ccUids:** An array containing the CC recipient UIDs.\n* **bcc:** A single recipient email address or an array containing multiple recipient email addresses.\n* **bccUids:** An array containing the BCC recipient UIDs.\n* **headers:** An object of additional header fields (for example, `{\"X-Custom-Header\": \"value\", \"X-Second-Custom-Header\": \"value\"}`).\n\n**NOTE:** The `toUids`, `ccUids`, and `bccUids` options deliver emails based on user UIDs keyed to email addresses within a Cloud Firestore document. To use these recipient options, you need to specify a Cloud Firestore collection for the extension's \"Users collection\" parameter. The extension can then read the `email` field for each UID specified in the `toUids`, `ccUids`, and/or `bccUids` fields.\n\n#### Message field\n\nThe `message` field of the document contains raw delivery information for the email. This field should generally only be populated by trusted code running in your own servers or Cloud Functions (refer to the \"Security rules and sending email\" section below).\n\nAvailable properties for the `message` field are:\n\n* **messageId:** A message ID header for the email, if any.\n* **subject:** The subject of the email.\n* **text:** The plaintext content of the email.\n* **html:** The HTML content of the email.\n* **amp:** The [AMP4EMAIL][amp4email] content of the email.\n\n#### Using templates\n\nIf you specified a \"Templates collection\" parameter during configuration of the extension, you can create and manage [Handlebars][handlebars] templates for your emails. Each document for a template should have a memorable ID that you use as the *template name* in the document that's written to your `${param:MAIL_COLLECTION}` collection.\n\nThe template document can include any of the following fields:\n\n* **subject:** A template string for the subject of the email.\n* **text:** A template string for the plaintext content of the email.\n* **html:** A template string for the HTML content of the email.\n* **amp:** A template string for the [AMP4EMAIL][amp4email] content of the email.\n\nAn example template might have an ID of `following` and content like:\n\n```js\n{\n  subject: \"@{{username}} is now following you!\",\n  html: \"Just writing to let you know that <code>@{{username}}</code> ({{name}}) is now following you.\"\n}\n```\n\nTo deliver email using templates, when adding documents to your `${param:MAIL_COLLECTION}` collection, include a `template` field with `name` and `data` properties. For example, using our `following` template from above:\n\n```js\nadmin.firestore().collection('${param:MAIL_COLLECTION}').add({\n  toUids: ['abc123'],\n  template: {\n    name: 'following',\n    data: {\n      username: 'ada',\n      name: 'Ada Lovelace'\n    }\n  }\n})\n```\n\n#### Security rules and sending email\n\nThis extension can be used to trigger email delivery directly from client applications. However, you should carefully control client access to the `${param:MAIL_COLLECTION}` collection to avoid potential abuse (you don't want users able to send arbitrary emails from your company's address!).\n\nSecurity rules will vary from application to application, but you should always make sure that emails are sent only to intended recipients and free-form content is kept to a minimum. Templates can help here -- you can use security rules to verify that the data being populated to the template matches your expectations for what a user should be allowed to trigger.\n\n#### Email delivery processing\n\nWhen a document is added to the `${param:MAIL_COLLECTION}` collection, the extension picks it up for email delivery processing. The extension creates and updates a `delivery` field in the document as it processes the email. The `delivery` field can be populated with the following fields:\n\n* **state:** One of `PENDING`, `PROCESSING`, `SUCCESS`, or `ERROR`.\n* **startTime:** Timestamp when email processing began.\n* **endTime:** Timestamp when email processing completed (that is, ended in either a `SUCCESS` or `ERROR` state).\n* **error:** If there was an email delivery error, an error message will be populated here.\n* **attempts:** Number of delivery attempts for this email.\n* **leaseExpireTime:** In case of a hang or timeout, the time at which a `PROCESSING` state should be considered an error.\n* **info:** After successful email delivery (to at least one address), this field will be populated with the following fields:\n  * **messageId:** The message ID of the delivered email.\n  * **accepted:** Array of email addresses to which the email was successfully delivered.\n  * **rejected:** Array of email addresses to which the email could not be delivered.\n  * **pending:** Array of email addresses that were temporarily rejected by SMTP.\n  * **response:** The last response from the SMTP server.\n\nAn email will typically go from `PENDING` to `PROCESSING` to either `SUCCESS` or `ERROR`. Once in the `SUCCESS` or `ERROR` state, additional changes to the document will not trigger the extension to send another email. To resend an email with document updates, you can change the `state` to `PENDING` or `RETRY`.\n\n#### Manual retries\n\nThere are instances in which email delivery fails in a recoverable fashion or the document can be manually corrected for proper delivery with minor modifications. While retries are not automatic, you can manually change the `state` in the `delivery` field to `RETRY` so that the extension attempts email delivery again (and increments the number of `attempts`).\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n\n[mail_collection]: https://console.firebase.google.com/project/_/database/firestore/data~2F${param:MAIL_COLLECTION}\n[admin_sdk]: https://firebase.google.com/docs/admin/setup\n[amp4email]: https://amp.dev/documentation/guides-and-tutorials/learn/email-spec/amp-email-format/\n[handlebars]: https://handlebarsjs.com/\n","readmeContent":"# Trigger Email\n\n**Description**: Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.\n\n\n\n**Details**: Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\n\nThis extension uses other Firebase or Google Cloud Platform services which may have associated charges:\n\n- Cloud Firestore\n- Cloud Functions\n\nWhen you use Firebase Extensions, you're only charged for the underlying resources that you use. A paid-tier billing plan is only required if the extension uses a service that requires a paid-tier plan, for example calling to a Google Cloud Platform API or making outbound network requests to non-Google services. All Firebase services offer a free tier of usage. [Learn more about Firebase billing.](https://firebase.google.com/pricing)\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n\n\n\n\n**Configuration Parameters:**\n\n* Deployment location: Where should the extension be deployed? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).\n\n* SMTP connection URI: A URI representing an SMTP server that this extension can use to deliver email.\n\n* Email documents collection: What is the path to the collection that contains the documents used to build and send the emails?\n\n* Default FROM address: The email address to use as the sender's address (if it's not specified in the added email document).\n\n* Default REPLY-TO address: The email address to use as the reply-to address (if it's not specified in the added email document).\n\n* Users collection: A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection.\n\n* Templates collection: A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document.\n\n\n\n**Cloud Functions:**\n\n* **processQueue:** Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.\n\n\n\n**Access Required**:\n\n\n\nThis extension will operate with the following project IAM roles:\n\n* datastore.user (Reason: Allows this extension to access Cloud Firestore to read and process added email documents.)\n","displayName":"Trigger Email","systemParams":[{"param":"firebaseextensions.v1beta.function/memory","label":"Function memory","type":"SELECT","description":"How much memory should be allocated to each function?","options":[{"value":"128","label":"128MB"},{"value":"256","label":"256MB"},{"value":"512","label":"512MB"},{"value":"1024","label":"1GB"},{"value":"2048","label":"2GB"},{"value":"4096","label":"4GB"},{"value":"8192","label":"8GB"}],"default":"256","advanced":true},{"param":"firebaseextensions.v1beta.function/timeoutSeconds","label":"Function timeout seconds","type":"STRING","description":"How long should functions run before timing out, in seconds (0-540)?","validationRegex":"^[1-9][0-9]{0,2}$","validationErrorMessage":"Function timeout should be an integer number of seconds, between 0 and 540","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnector","label":"VPC Connector","type":"STRING","description":"The VPC Network Connector that this cloud function can connect to. It can be either the fully-qualified URI, or the short name of the network connector resource. The format of this field is projects/*/locations/*/connectors/*.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/connectors/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnectorEgressSettings","label":"VPC Connector Egress settings","type":"SELECT","description":"Controls outgoing traffic when a VPC connector is configured","options":[{"value":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","label":"Unspecified"},{"value":"PRIVATE_RANGES_ONLY","label":"Private ranges only"},{"value":"ALL_TRAFFIC","label":"All traffic"}],"default":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","advanced":true},{"param":"firebaseextensions.v1beta.function/minInstances","label":"Minimum function instances","type":"STRING","description":"The minimum number of instances of each function to run at once (0-1000)","default":"0","validationRegex":"^[0-9]*$","validationErrorMessage":"Min instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/maxInstances","label":"Maximum function instances","type":"STRING","description":"The maximum number of instances of each function to run at once","default":"3000","validationRegex":"^[0-9]*$","validationErrorMessage":"Max instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/ingressSettings","label":"Function ingress settings","type":"SELECT","description":"Where should functions allow incoming traffic from?","options":[{"value":"ALLOW_ALL","label":"Allow all"},{"value":"ALLOW_INTERNAL_ONLY","label":"Allow internal only"},{"value":"ALLOW_INTERNAL_AND_GCLB","label":"Allow internal and GCLB"}],"advanced":true},{"param":"firebaseextensions.v1beta.function/labels","label":"Function labels","type":"STRING","description":"Do you wish to set any labels on this instance's Cloud Functions? If so, provide up to 55 labels in the format 'key1:value, key2:value'","validationRegex":"^([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63},\\s*)*([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63})$","advanced":true},{"param":"firebaseextensions.v1beta.function/kmsKeyName","label":"KMS key name","type":"STRING","description":"Do you want to use a Customer Managed Eencryption Key (CMEK) to encrypt this extension's functions? If you set this, you must also set a Docker repository encrypted by that key. See https://cloud.google.com/functions/docs/securing/cmek for more details.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/keyRings/([^/]+)/cryptoKeys/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/dockerRepository","label":"Docker repository","type":"STRING","description":"What Docker repository should be used to store function images? Default repository will be used if not set.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/repositories/([^/]+)$","advanced":true}]},"state":"PUBLISHED","createTime":"2020-01-09T18:10:49.932546246Z","id":"0.1.2-rc.2","listing":{"state":"UNLISTED"},"metrics":{"activeInstallCount":"30"}},{"name":"publishers/firebase/extensions/firestore-send-email/versions/0.1.2-rc.3","ref":"firebase/firestore-send-email@0.1.2-rc.3","spec":{"specVersion":"v1beta","name":"firestore-send-email","version":"0.1.2","description":"Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.","roles":[{"role":"datastore.user","reason":"Allows this extension to access Cloud Firestore to read and process added email documents."}],"resources":[{"name":"processQueue","type":"firebaseextensions.v1beta.function","propertiesYaml":"eventTrigger:\n  eventType: providers/cloud.firestore/eventTypes/document.write\n  resource: projects/${PROJECT_ID}/databases/(default)/documents/${MAIL_COLLECTION}/{id}\nlocation: ${LOCATION}\nsourceDirectory: .\n","description":"Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.","deletionPolicy":"DELETE"}],"billingRequired":true,"author":{"authorName":"Firebase","url":"https://firebase.google.com"},"contributors":[{"authorName":"Michael Bleigh","url":"https://github.com/mbleigh"},{"authorName":"Elliot Hesp","email":"elliot@invertase.io","url":"https://github.com/ehesp"}],"license":"Apache-2.0","releaseNotesUrl":"https://github.com/firebase/extensions/blob/master/firestore-send-email/CHANGELOG.md","sourceUrl":"https://github.com/firebase/extensions/tree/master/firestore-send-email","params":[{"param":"LOCATION","label":"Cloud Functions location","type":"SELECT","description":"Where do you want to deploy the functions created for this extension?  You usually want a location close to your database. For help selecting a  location, refer to the [location selection  guide](https://firebase.google.com/docs/functions/locations).","required":true,"options":[{"value":"us-central1","label":"Iowa (us-central1)"},{"value":"us-east1","label":"South Carolina (us-east1)"},{"value":"us-east4","label":"Northern Virginia (us-east4)"},{"value":"europe-west1","label":"Belgium (europe-west1)"},{"value":"europe-west2","label":"London (europe-west2)"},{"value":"asia-east2","label":"Hong Kong (asia-east2)"},{"value":"asia-northeast1","label":"Tokyo (asia-northeast1)"}],"default":"us-central1","immutable":true},{"param":"SMTP_CONNECTION_URI","label":"SMTP connection URI","type":"STRING","description":"A URI representing an SMTP server that this extension can use to deliver email.","required":true,"example":"smtps://username:password@smtp.hostname.com:465","validationRegex":"^smtps?://[^:]+:[^:]+@.*$","validationErrorMessage":"Invalid SMTP connection URI. Must be in the form `smtp(s)://username:password@hostname:port`."},{"param":"MAIL_COLLECTION","label":"Email documents collection","type":"STRING","description":"What is the path to the collection that contains the documents used to build and send the emails?","required":true,"default":"mail","validationRegex":"^[^/]+(/[^/]+/[^/]+)*$","validationErrorMessage":"Must be a valid Cloud Firestore collection"},{"param":"DEFAULT_FROM","label":"Default FROM address","type":"STRING","description":"The email address to use as the sender's address (if it's not specified in the added email document).","required":true,"validationRegex":"^\\S+@\\S+\\.\\S+$","validationErrorMessage":"Must be a valid email address"},{"param":"DEFAULT_REPLY_TO","label":"Default REPLY-TO address","type":"STRING","description":"The email address to use as the reply-to address (if it's not specified in the added email document)."},{"param":"USERS_COLLECTION","label":"Users collection","type":"STRING","description":"A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection."},{"param":"TEMPLATES_COLLECTION","label":"Templates collection","type":"STRING","description":"A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document."}],"preinstallContent":"Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\n\nThis extension uses other Firebase or Google Cloud Platform services which may have associated charges:\n\n- Cloud Firestore\n- Cloud Functions\n\nWhen you use Firebase Extensions, you're only charged for the underlying resources that you use. A paid-tier billing plan is only required if the extension uses a service that requires a paid-tier plan, for example calling to a Google Cloud Platform API or making outbound network requests to non-Google services. All Firebase services offer a free tier of usage. [Learn more about Firebase billing.](https://firebase.google.com/pricing)\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n","postinstallContent":"### See it in action\n\nYou can test out this extension right away:\n\n1.  Go to your [Cloud Firestore dashboard](https://console.firebase.google.com/project/${param:PROJECT_ID}/database/firestore/data).\n\n1.  If it doesn't already exist, create the collection you specified during installation: `${param:MAIL_COLLECTION}`.\n\n1.  Add a document with a `to` field and a `message` field with the following content:\n\n    ```\n    to: ['someone@example.com'],\n    message: {\n      subject: 'Hello from Firebase!',\n      text: 'This is the plaintext section of the email body.',\n      html: 'This is the <code>HTML</code> section of the email body.',\n    }\n    ```\n\n1.  In a few seconds, you'll see a `delivery` field appear in the document. The field will update as the extension processes the email.\n\n**Note:** You can also use the [Firebase Admin SDK][admin_sdk] to add a document:\n```\nadmin.firestore().collection('${param:MAIL_COLLECTION}').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    text: 'This is the plaintext section of the email body.',\n    html: 'This is the <code>HTML</code> section of the email body.',\n  }\n}).then(() => console.log('Queued email for delivery!'));\n```\n\n### Using this extension\n\nAfter its installation, this extension monitors all document writes to the `${param:MAIL_COLLECTION}` collection. Email is delivered based on the contents of the document's fields. The top-level fields specify the email's sender and recipients. The `message` field contains the details of the email to deliver, including the email body.\n\n#### Sender and recipient fields\n\nThe top-level fields of the document supply the email sender and recipient information. Available fields are:\n\n* **from:** The sender's email address. If not specified in the document, uses the configured \"Default FROM address\" parameter.\n* **replyTo:** The reply-to email address. If not specified in the document, uses the configured \"Default REPLY-TO address\" parameter.\n* **to:** A single recipient email address or an array containing multiple recipient email addresses.\n* **toUids:** An array containing the recipient UIDs.\n* **cc:** A single recipient email address or an array containing multiple recipient email addresses.\n* **ccUids:** An array containing the CC recipient UIDs.\n* **bcc:** A single recipient email address or an array containing multiple recipient email addresses.\n* **bccUids:** An array containing the BCC recipient UIDs.\n* **headers:** An object of additional header fields (for example, `{\"X-Custom-Header\": \"value\", \"X-Second-Custom-Header\": \"value\"}`).\n\n**NOTE:** The `toUids`, `ccUids`, and `bccUids` options deliver emails based on user UIDs keyed to email addresses within a Cloud Firestore document. To use these recipient options, you need to specify a Cloud Firestore collection for the extension's \"Users collection\" parameter. The extension can then read the `email` field for each UID specified in the `toUids`, `ccUids`, and/or `bccUids` fields.\n\n#### Message field\n\nThe `message` field of the document contains raw delivery information for the email. This field should generally only be populated by trusted code running in your own servers or Cloud Functions (refer to the \"Security rules and sending email\" section below).\n\nAvailable properties for the `message` field are:\n\n* **messageId:** A message ID header for the email, if any.\n* **subject:** The subject of the email.\n* **text:** The plaintext content of the email.\n* **html:** The HTML content of the email.\n* **amp:** The [AMP4EMAIL][amp4email] content of the email.\n\n#### Using templates\n\nIf you specified a \"Templates collection\" parameter during configuration of the extension, you can create and manage [Handlebars][handlebars] templates for your emails. Each document for a template should have a memorable ID that you use as the *template name* in the document that's written to your `${param:MAIL_COLLECTION}` collection.\n\nThe template document can include any of the following fields:\n\n* **subject:** A template string for the subject of the email.\n* **text:** A template string for the plaintext content of the email.\n* **html:** A template string for the HTML content of the email.\n* **amp:** A template string for the [AMP4EMAIL][amp4email] content of the email.\n\nAn example template might have an ID of `following` and content like:\n\n```js\n{\n  subject: \"@{{username}} is now following you!\",\n  html: \"Just writing to let you know that <code>@{{username}}</code> ({{name}}) is now following you.\"\n}\n```\n\nTo deliver email using templates, when adding documents to your `${param:MAIL_COLLECTION}` collection, include a `template` field with `name` and `data` properties. For example, using our `following` template from above:\n\n```js\nadmin.firestore().collection('${param:MAIL_COLLECTION}').add({\n  toUids: ['abc123'],\n  template: {\n    name: 'following',\n    data: {\n      username: 'ada',\n      name: 'Ada Lovelace'\n    }\n  }\n})\n```\n\n#### Security rules and sending email\n\nThis extension can be used to trigger email delivery directly from client applications. However, you should carefully control client access to the `${param:MAIL_COLLECTION}` collection to avoid potential abuse (you don't want users able to send arbitrary emails from your company's address!).\n\nSecurity rules will vary from application to application, but you should always make sure that emails are sent only to intended recipients and free-form content is kept to a minimum. Templates can help here -- you can use security rules to verify that the data being populated to the template matches your expectations for what a user should be allowed to trigger.\n\n#### Email delivery processing\n\nWhen a document is added to the `${param:MAIL_COLLECTION}` collection, the extension picks it up for email delivery processing. The extension creates and updates a `delivery` field in the document as it processes the email. The `delivery` field can be populated with the following fields:\n\n* **state:** One of `PENDING`, `PROCESSING`, `SUCCESS`, or `ERROR`.\n* **startTime:** Timestamp when email processing began.\n* **endTime:** Timestamp when email processing completed (that is, ended in either a `SUCCESS` or `ERROR` state).\n* **error:** If there was an email delivery error, an error message will be populated here.\n* **attempts:** Number of delivery attempts for this email.\n* **leaseExpireTime:** In case of a hang or timeout, the time at which a `PROCESSING` state should be considered an error.\n* **info:** After successful email delivery (to at least one address), this field will be populated with the following fields:\n  * **messageId:** The message ID of the delivered email.\n  * **accepted:** Array of email addresses to which the email was successfully delivered.\n  * **rejected:** Array of email addresses to which the email could not be delivered.\n  * **pending:** Array of email addresses that were temporarily rejected by SMTP.\n  * **response:** The last response from the SMTP server.\n\nAn email will typically go from `PENDING` to `PROCESSING` to either `SUCCESS` or `ERROR`. Once in the `SUCCESS` or `ERROR` state, additional changes to the document will not trigger the extension to send another email. To resend an email with document updates, you can change the `state` to `PENDING` or `RETRY`.\n\n#### Manual retries\n\nThere are instances in which email delivery fails in a recoverable fashion or the document can be manually corrected for proper delivery with minor modifications. While retries are not automatic, you can manually change the `state` in the `delivery` field to `RETRY` so that the extension attempts email delivery again (and increments the number of `attempts`).\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n\n[mail_collection]: https://console.firebase.google.com/project/_/database/firestore/data~2F${param:MAIL_COLLECTION}\n[admin_sdk]: https://firebase.google.com/docs/admin/setup\n[amp4email]: https://amp.dev/documentation/guides-and-tutorials/learn/email-spec/amp-email-format/\n[handlebars]: https://handlebarsjs.com/\n","readmeContent":"# Trigger Email\n\n**Description**: Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.\n\n\n\n**Details**: Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\n\nThis extension uses other Firebase or Google Cloud Platform services which may have associated charges:\n\n- Cloud Firestore\n- Cloud Functions\n\nWhen you use Firebase Extensions, you're only charged for the underlying resources that you use. A paid-tier billing plan is only required if the extension uses a service that requires a paid-tier plan, for example calling to a Google Cloud Platform API or making outbound network requests to non-Google services. All Firebase services offer a free tier of usage. [Learn more about Firebase billing.](https://firebase.google.com/pricing)\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n\n\n\n\n**Configuration Parameters:**\n\n* Cloud Functions location: Where do you want to deploy the functions created for this extension?  You usually want a location close to your database. For help selecting a  location, refer to the [location selection  guide](https://firebase.google.com/docs/functions/locations).\n\n* SMTP connection URI: A URI representing an SMTP server that this extension can use to deliver email.\n\n* Email documents collection: What is the path to the collection that contains the documents used to build and send the emails?\n\n* Default FROM address: The email address to use as the sender's address (if it's not specified in the added email document).\n\n* Default REPLY-TO address: The email address to use as the reply-to address (if it's not specified in the added email document).\n\n* Users collection: A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection.\n\n* Templates collection: A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document.\n\n\n\n**Cloud Functions:**\n\n* **processQueue:** Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.\n\n\n\n**Access Required**:\n\n\n\nThis extension will operate with the following project IAM roles:\n\n* datastore.user (Reason: Allows this extension to access Cloud Firestore to read and process added email documents.)\n","displayName":"Trigger Email","systemParams":[{"param":"firebaseextensions.v1beta.function/memory","label":"Function memory","type":"SELECT","description":"How much memory should be allocated to each function?","options":[{"value":"128","label":"128MB"},{"value":"256","label":"256MB"},{"value":"512","label":"512MB"},{"value":"1024","label":"1GB"},{"value":"2048","label":"2GB"},{"value":"4096","label":"4GB"},{"value":"8192","label":"8GB"}],"default":"256","advanced":true},{"param":"firebaseextensions.v1beta.function/timeoutSeconds","label":"Function timeout seconds","type":"STRING","description":"How long should functions run before timing out, in seconds (0-540)?","validationRegex":"^[1-9][0-9]{0,2}$","validationErrorMessage":"Function timeout should be an integer number of seconds, between 0 and 540","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnector","label":"VPC Connector","type":"STRING","description":"The VPC Network Connector that this cloud function can connect to. It can be either the fully-qualified URI, or the short name of the network connector resource. The format of this field is projects/*/locations/*/connectors/*.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/connectors/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnectorEgressSettings","label":"VPC Connector Egress settings","type":"SELECT","description":"Controls outgoing traffic when a VPC connector is configured","options":[{"value":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","label":"Unspecified"},{"value":"PRIVATE_RANGES_ONLY","label":"Private ranges only"},{"value":"ALL_TRAFFIC","label":"All traffic"}],"default":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","advanced":true},{"param":"firebaseextensions.v1beta.function/minInstances","label":"Minimum function instances","type":"STRING","description":"The minimum number of instances of each function to run at once (0-1000)","default":"0","validationRegex":"^[0-9]*$","validationErrorMessage":"Min instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/maxInstances","label":"Maximum function instances","type":"STRING","description":"The maximum number of instances of each function to run at once","default":"3000","validationRegex":"^[0-9]*$","validationErrorMessage":"Max instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/ingressSettings","label":"Function ingress settings","type":"SELECT","description":"Where should functions allow incoming traffic from?","options":[{"value":"ALLOW_ALL","label":"Allow all"},{"value":"ALLOW_INTERNAL_ONLY","label":"Allow internal only"},{"value":"ALLOW_INTERNAL_AND_GCLB","label":"Allow internal and GCLB"}],"advanced":true},{"param":"firebaseextensions.v1beta.function/labels","label":"Function labels","type":"STRING","description":"Do you wish to set any labels on this instance's Cloud Functions? If so, provide up to 55 labels in the format 'key1:value, key2:value'","validationRegex":"^([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63},\\s*)*([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63})$","advanced":true},{"param":"firebaseextensions.v1beta.function/kmsKeyName","label":"KMS key name","type":"STRING","description":"Do you want to use a Customer Managed Eencryption Key (CMEK) to encrypt this extension's functions? If you set this, you must also set a Docker repository encrypted by that key. See https://cloud.google.com/functions/docs/securing/cmek for more details.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/keyRings/([^/]+)/cryptoKeys/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/dockerRepository","label":"Docker repository","type":"STRING","description":"What Docker repository should be used to store function images? Default repository will be used if not set.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/repositories/([^/]+)$","advanced":true}]},"state":"PUBLISHED","createTime":"2020-01-16T18:19:34.402104924Z","id":"0.1.2-rc.3","listing":{"state":"UNLISTED"},"metrics":{"activeInstallCount":"40"}},{"name":"publishers/firebase/extensions/firestore-send-email/versions/0.1.20","ref":"firebase/firestore-send-email@0.1.20","spec":{"specVersion":"v1beta","name":"firestore-send-email","version":"0.1.20","description":"Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.","roles":[{"role":"datastore.user","reason":"Allows this extension to access Cloud Firestore to read and process added email documents."}],"resources":[{"name":"processQueue","type":"firebaseextensions.v1beta.function","propertiesYaml":"eventTrigger:\n  eventType: providers/cloud.firestore/eventTypes/document.write\n  resource: projects/${param:PROJECT_ID}/databases/(default)/documents/${param:MAIL_COLLECTION}/{id}\nlocation: ${param:LOCATION}\nruntime: nodejs14\n","description":"Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.","deletionPolicy":"DELETE"}],"billingRequired":true,"author":{"authorName":"Firebase","url":"https://firebase.google.com"},"contributors":[{"authorName":"Michael Bleigh","url":"https://github.com/mbleigh"},{"authorName":"Invertase","email":"oss@invertase.io","url":"https://github.com/invertase"}],"license":"Apache-2.0","releaseNotesUrl":"https://github.com/firebase/extensions/blob/master/firestore-send-email/CHANGELOG.md","sourceUrl":"https://github.com/firebase/extensions/tree/master/firestore-send-email","params":[{"param":"LOCATION","label":"Cloud Functions location","type":"SELECT","description":"Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).","required":true,"options":[{"value":"us-central1","label":"Iowa (us-central1)"},{"value":"us-east1","label":"South Carolina (us-east1)"},{"value":"us-east4","label":"Northern Virginia (us-east4)"},{"value":"us-west2","label":"Los Angeles (us-west2)"},{"value":"us-west3","label":"Salt Lake City (us-west3)"},{"value":"us-west4","label":"Las Vegas (us-west4)"},{"value":"europe-central2","label":"Warsaw (europe-central2)"},{"value":"europe-west1","label":"Belgium (europe-west1)"},{"value":"europe-west2","label":"London (europe-west2)"},{"value":"europe-west3","label":"Frankfurt (europe-west3)"},{"value":"europe-west6","label":"Zurich (europe-west6)"},{"value":"asia-east1","label":"Taiwan (asia-east1)"},{"value":"asia-east2","label":"Hong Kong (asia-east2)"},{"value":"asia-northeast1","label":"Tokyo (asia-northeast1)"},{"value":"asia-northeast2","label":"Osaka (asia-northeast2)"},{"value":"asia-northeast3","label":"Seoul (asia-northeast3)"},{"value":"asia-south1","label":"Mumbai (asia-south1)"},{"value":"asia-southeast1","label":"Singapore (asia-southeast1)"},{"value":"asia-southeast2","label":"Jakarta (asia-southeast2)"},{"value":"northamerica-northeast1","label":"Montreal (northamerica-northeast1)"},{"value":"southamerica-east1","label":"Sao Paulo (southamerica-east1)"},{"value":"australia-southeast1","label":"Sydney (australia-southeast1)"}],"default":"us-central1","immutable":true},{"param":"SMTP_CONNECTION_URI","label":"SMTP connection URI","type":"STRING","description":"A URI representing an SMTP server this extension can use to deliver email. Note that port 25 is blocked by Google Cloud Platform, so we recommend using port 587 for SMTP connections. If you're using the SMTPS protocol, we recommend using port 465. In order to keep passwords secure, it is recommended to omit the password from the connection string while using the `SMTP Password` field for entering secrets and passwords. Passwords and secrets should now be included in `SMTP password` field.\nSecure format:\n `smtps://username@gmail.com@smtp.gmail.com:465` (username only)\n `smtps://smtp.gmail.com:465` (No username and password)\nBackwards Compatible (less secure):\n `smtps://username@gmail.com:password@smtp.gmail.com:465`. (username and password)","required":true,"example":"smtps://username@smtp.hostname.com:465","validationRegex":"^(smtp[s]*://.*?:[0-9]+.*$)","validationErrorMessage":"Invalid SMTP connection URI. Must be in the form `smtp(s)://username:password@hostname:port` or `smtp(s)://username@hostname:port`."},{"param":"SMTP_PASSWORD","label":"SMTP password","type":"SECRET","description":"User password for the SMTP server"},{"param":"MAIL_COLLECTION","label":"Email documents collection","type":"STRING","description":"What is the path to the collection that contains the documents used to build and send the emails?","required":true,"default":"mail","validationRegex":"^[^/]+(/[^/]+/[^/]+)*$","validationErrorMessage":"Must be a valid Cloud Firestore collection"},{"param":"DEFAULT_FROM","label":"Default FROM address","type":"STRING","description":"The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).","required":true,"example":"foobar@example.com","validationRegex":"^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$|^.*<(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})>$","validationErrorMessage":"Must be a valid email address or valid name plus email address"},{"param":"DEFAULT_REPLY_TO","label":"Default REPLY-TO address","type":"STRING","description":"The email address to use as the reply-to address (if it's not specified in the added email document)."},{"param":"USERS_COLLECTION","label":"Users collection","type":"STRING","description":"A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection."},{"param":"TEMPLATES_COLLECTION","label":"Templates collection","type":"STRING","description":"A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document."}],"preinstallContent":"Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Setup Google App Passwords\n\n**Google** no longer allows **Gmail** users to use their own passwords to authorize third-party apps and services. Instead, you have to use the [Sign in with App Passwords](https://support.google.com/accounts/answer/185833) service to generate a special password for each app you want to authorize. To do so:\n\n1.  Go to your [Google Account](https://myaccount.google.com/).\n2.  Select **Security**.\n3.  Under \"Signing in to Google,\" select **App Passwords**. You may need to sign in. If you don’t have this option, it might be because:\n    1.  2-Step Verification is not set up for your account.\n    2.  2-Step Verification is only set up for security keys.\n    3.  Your account is through work, school, or other organization.\n    4.  You turned on Advanced Protection.\n4.  At the bottom, choose **Select app** and choose **Other** option and then write the name of the app password (e.g. `Firebase Trigger Email Extension`) and click **Generate**.\n5.  Follow the instructions to enter the App Password. The App Password is the 16-character code in the yellow bar on your device.\n6.  Tap **Done**.\n\nNow you can use your Google username with the generated password to authorize the extension.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- You will be charged a small amount (typically around $0.01/month) for the Firebase resources required by this extension (even if it is not used).\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s no-cost tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n","postinstallContent":"### See it in action\n\nYou can test out this extension right away!\n\n1.  Go to your [Cloud Firestore dashboard](https://console.firebase.google.com/project/${param:PROJECT_ID}/firestore/data) in the Firebase console.\n\n1.  If it doesn't already exist, create the collection you specified during installation: `${param:MAIL_COLLECTION}`.\n\n1.  Add a document with a `to` field and a `message` field with the following content:\n\n    ```js\n    to: ['someone@example.com'],\n    message: {\n      subject: 'Hello from Firebase!',\n      text: 'This is the plaintext section of the email body.',\n      html: 'This is the <code>HTML</code> section of the email body.',\n    }\n    ```\n\n1.  In a few seconds, you'll see a `delivery` field appear in the document. The field will update as the extension processes the email.\n\n**Note:** You can also use the [Firebase Admin SDK][admin_sdk] to add a document:\n\n```js\nadmin\n  .firestore()\n  .collection(\"${param:MAIL_COLLECTION}\")\n  .add({\n    to: \"someone@example.com\",\n    message: {\n      subject: \"Hello from Firebase!\",\n      text: \"This is the plaintext section of the email body.\",\n      html: \"This is the <code>HTML</code> section of the email body.\",\n    },\n  })\n  .then(() => console.log(\"Queued email for delivery!\"));\n```\n\n### Using this extension\n\nSee the [official documentation](https://firebase.google.com/docs/extensions/official/firestore-send-email) for information on using this extension, including advanced use cases such as using Handlebars templates and managing email delivery status.\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n\n[mail_collection]: https://console.firebase.google.com/project/_/firestore/data~2F${param:MAIL_COLLECTION}\n[admin_sdk]: https://firebase.google.com/docs/admin/setup\n[amp4email]: https://amp.dev/documentation/guides-and-tutorials/learn/email-spec/amp-email-format/\n[handlebars]: https://handlebarsjs.com/\n","readmeContent":"# Trigger Email\n\n**Author**: Firebase (**[https://firebase.google.com](https://firebase.google.com)**)\n\n**Description**: Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.\n\n\n\n**Details**: Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Setup Google App Passwords\n\n**Google** no longer allows **Gmail** users to use their own passwords to authorize third-party apps and services. Instead, you have to use the [Sign in with App Passwords](https://support.google.com/accounts/answer/185833) service to generate a special password for each app you want to authorize. To do so:\n\n1.  Go to your [Google Account](https://myaccount.google.com/).\n2.  Select **Security**.\n3.  Under \"Signing in to Google,\" select **App Passwords**. You may need to sign in. If you don’t have this option, it might be because:\n    1.  2-Step Verification is not set up for your account.\n    2.  2-Step Verification is only set up for security keys.\n    3.  Your account is through work, school, or other organization.\n    4.  You turned on Advanced Protection.\n4.  At the bottom, choose **Select app** and choose **Other** option and then write the name of the app password (e.g. `Firebase Trigger Email Extension`) and click **Generate**.\n5.  Follow the instructions to enter the App Password. The App Password is the 16-character code in the yellow bar on your device.\n6.  Tap **Done**.\n\nNow you can use your Google username with the generated password to authorize the extension.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- You will be charged a small amount (typically around $0.01/month) for the Firebase resources required by this extension (even if it is not used).\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s no-cost tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n\n\n\n\n**Configuration Parameters:**\n\n* Cloud Functions location: Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).\n\n* SMTP connection URI: A URI representing an SMTP server this extension can use to deliver email. Note that port 25 is blocked by Google Cloud Platform, so we recommend using port 587 for SMTP connections. If you're using the SMTPS protocol, we recommend using port 465. In order to keep passwords secure, it is recommended to omit the password from the connection string while using the `SMTP Password` field for entering secrets and passwords. Passwords and secrets should now be included in `SMTP password` field.\nSecure format:\n `smtps://username@gmail.com@smtp.gmail.com:465` (username only)\n `smtps://smtp.gmail.com:465` (No username and password)\nBackwards Compatible (less secure):\n `smtps://username@gmail.com:password@smtp.gmail.com:465`. (username and password)\n\n* SMTP password: User password for the SMTP server\n\n* Email documents collection: What is the path to the collection that contains the documents used to build and send the emails?\n\n* Default FROM address: The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).\n\n* Default REPLY-TO address: The email address to use as the reply-to address (if it's not specified in the added email document).\n\n* Users collection: A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection.\n\n* Templates collection: A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document.\n\n\n\n**Cloud Functions:**\n\n* **processQueue:** Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.\n\n\n\n**Access Required**:\n\n\n\nThis extension will operate with the following project IAM roles:\n\n* datastore.user (Reason: Allows this extension to access Cloud Firestore to read and process added email documents.)\n","displayName":"Trigger Email","systemParams":[{"param":"firebaseextensions.v1beta.function/memory","label":"Function memory","type":"SELECT","description":"How much memory should be allocated to each function?","options":[{"value":"128","label":"128MB"},{"value":"256","label":"256MB"},{"value":"512","label":"512MB"},{"value":"1024","label":"1GB"},{"value":"2048","label":"2GB"},{"value":"4096","label":"4GB"},{"value":"8192","label":"8GB"}],"default":"256","advanced":true},{"param":"firebaseextensions.v1beta.function/timeoutSeconds","label":"Function timeout seconds","type":"STRING","description":"How long should functions run before timing out, in seconds (0-540)?","validationRegex":"^[1-9][0-9]{0,2}$","validationErrorMessage":"Function timeout should be an integer number of seconds, between 0 and 540","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnector","label":"VPC Connector","type":"STRING","description":"The VPC Network Connector that this cloud function can connect to. It can be either the fully-qualified URI, or the short name of the network connector resource. The format of this field is projects/*/locations/*/connectors/*.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/connectors/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnectorEgressSettings","label":"VPC Connector Egress settings","type":"SELECT","description":"Controls outgoing traffic when a VPC connector is configured","options":[{"value":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","label":"Unspecified"},{"value":"PRIVATE_RANGES_ONLY","label":"Private ranges only"},{"value":"ALL_TRAFFIC","label":"All traffic"}],"default":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","advanced":true},{"param":"firebaseextensions.v1beta.function/minInstances","label":"Minimum function instances","type":"STRING","description":"The minimum number of instances of each function to run at once (0-1000)","default":"0","validationRegex":"^[0-9]*$","validationErrorMessage":"Min instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/maxInstances","label":"Maximum function instances","type":"STRING","description":"The maximum number of instances of each function to run at once","default":"3000","validationRegex":"^[0-9]*$","validationErrorMessage":"Max instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/ingressSettings","label":"Function ingress settings","type":"SELECT","description":"Where should functions allow incoming traffic from?","options":[{"value":"ALLOW_ALL","label":"Allow all"},{"value":"ALLOW_INTERNAL_ONLY","label":"Allow internal only"},{"value":"ALLOW_INTERNAL_AND_GCLB","label":"Allow internal and GCLB"}],"advanced":true},{"param":"firebaseextensions.v1beta.function/labels","label":"Function labels","type":"STRING","description":"Do you wish to set any labels on this instance's Cloud Functions? If so, provide up to 55 labels in the format 'key1:value, key2:value'","validationRegex":"^([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63},\\s*)*([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63})$","advanced":true},{"param":"firebaseextensions.v1beta.function/kmsKeyName","label":"KMS key name","type":"STRING","description":"Do you want to use a Customer Managed Eencryption Key (CMEK) to encrypt this extension's functions? If you set this, you must also set a Docker repository encrypted by that key. See https://cloud.google.com/functions/docs/securing/cmek for more details.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/keyRings/([^/]+)/cryptoKeys/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/dockerRepository","label":"Docker repository","type":"STRING","description":"What Docker repository should be used to store function images? Default repository will be used if not set.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/repositories/([^/]+)$","advanced":true}]},"state":"PUBLISHED","hash":"133f6c8a9f07121f984be7eea6159966961b099b6438a4a78bf5e97431208b93","createTime":"2022-11-21T18:51:43.489477Z","id":"0.1.20","releaseNotes":"docs - add google app passwords guide\n","listing":{"state":"APPROVED"},"metrics":{"activeInstallCount":"700"}},{"name":"publishers/firebase/extensions/firestore-send-email/versions/0.1.20-rc.0","ref":"firebase/firestore-send-email@0.1.20-rc.0","spec":{"specVersion":"v1beta","name":"firestore-send-email","version":"0.1.20-rc.0","description":"Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.","roles":[{"role":"datastore.user","reason":"Allows this extension to access Cloud Firestore to read and process added email documents."}],"resources":[{"name":"processQueue","type":"firebaseextensions.v1beta.function","propertiesYaml":"eventTrigger:\n  eventType: providers/cloud.firestore/eventTypes/document.write\n  resource: projects/${param:PROJECT_ID}/databases/(default)/documents/${param:MAIL_COLLECTION}/{id}\nlocation: ${param:LOCATION}\nruntime: nodejs14\n","description":"Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.","deletionPolicy":"DELETE"}],"billingRequired":true,"author":{"authorName":"Firebase","url":"https://firebase.google.com"},"contributors":[{"authorName":"Michael Bleigh","url":"https://github.com/mbleigh"},{"authorName":"Invertase","email":"oss@invertase.io","url":"https://github.com/invertase"}],"license":"Apache-2.0","releaseNotesUrl":"https://github.com/firebase/extensions/blob/master/firestore-send-email/CHANGELOG.md","sourceUrl":"https://github.com/firebase/extensions/tree/master/firestore-send-email","params":[{"param":"LOCATION","label":"Cloud Functions location","type":"SELECT","description":"Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).","required":true,"options":[{"value":"us-central1","label":"Iowa (us-central1)"},{"value":"us-east1","label":"South Carolina (us-east1)"},{"value":"us-east4","label":"Northern Virginia (us-east4)"},{"value":"us-west2","label":"Los Angeles (us-west2)"},{"value":"us-west3","label":"Salt Lake City (us-west3)"},{"value":"us-west4","label":"Las Vegas (us-west4)"},{"value":"europe-central2","label":"Warsaw (europe-central2)"},{"value":"europe-west1","label":"Belgium (europe-west1)"},{"value":"europe-west2","label":"London (europe-west2)"},{"value":"europe-west3","label":"Frankfurt (europe-west3)"},{"value":"europe-west6","label":"Zurich (europe-west6)"},{"value":"asia-east1","label":"Taiwan (asia-east1)"},{"value":"asia-east2","label":"Hong Kong (asia-east2)"},{"value":"asia-northeast1","label":"Tokyo (asia-northeast1)"},{"value":"asia-northeast2","label":"Osaka (asia-northeast2)"},{"value":"asia-northeast3","label":"Seoul (asia-northeast3)"},{"value":"asia-south1","label":"Mumbai (asia-south1)"},{"value":"asia-southeast1","label":"Singapore (asia-southeast1)"},{"value":"asia-southeast2","label":"Jakarta (asia-southeast2)"},{"value":"northamerica-northeast1","label":"Montreal (northamerica-northeast1)"},{"value":"southamerica-east1","label":"Sao Paulo (southamerica-east1)"},{"value":"australia-southeast1","label":"Sydney (australia-southeast1)"}],"default":"us-central1","immutable":true},{"param":"SMTP_CONNECTION_URI","label":"SMTP connection URI","type":"STRING","description":"A URI representing an SMTP server this extension can use to deliver email. Note that port 25 is blocked by Google Cloud Platform, so we recommend using port 587 for SMTP connections. If you're using the SMTPS protocol, we recommend using port 465. In order to keep passwords secure, it is recommended to omit the password from the connection string while using the `SMTP Password` field for entering secrets and passwords. Passwords and secrets should now be included in `SMTP password` field.\nSecure format:\n `smtps://username@gmail.com@smtp.gmail.com:465` (username only)\n `smtps://smtp.gmail.com:465` (No username and password)\nBackwards Compatible (less secure):\n `smtps://username@gmail.com:password@smtp.gmail.com:465`. (username and password)","required":true,"example":"smtps://username@smtp.hostname.com:465","validationRegex":"^(smtp[s]*://.*?:[0-9]+.*$)","validationErrorMessage":"Invalid SMTP connection URI. Must be in the form `smtp(s)://username:password@hostname:port` or `smtp(s)://username@hostname:port`."},{"param":"SMTP_PASSWORD","label":"SMTP password","type":"SECRET","description":"User password for the SMTP server"},{"param":"MAIL_COLLECTION","label":"Email documents collection","type":"STRING","description":"What is the path to the collection that contains the documents used to build and send the emails?","required":true,"default":"mail","validationRegex":"^[^/]+(/[^/]+/[^/]+)*$","validationErrorMessage":"Must be a valid Cloud Firestore collection"},{"param":"DEFAULT_FROM","label":"Default FROM address","type":"STRING","description":"The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).","required":true,"example":"foobar@example.com","validationRegex":"^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$|^.*<(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})>$","validationErrorMessage":"Must be a valid email address or valid name plus email address"},{"param":"DEFAULT_REPLY_TO","label":"Default REPLY-TO address","type":"STRING","description":"The email address to use as the reply-to address (if it's not specified in the added email document)."},{"param":"USERS_COLLECTION","label":"Users collection","type":"STRING","description":"A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection."},{"param":"TEMPLATES_COLLECTION","label":"Templates collection","type":"STRING","description":"A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document."}],"preinstallContent":"Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Setup Google App Passwords\n\n**Google** no longer allows **Gmail** users to use their own passwords to authorize third-party apps and services. Instead, you have to use the [Sign in with App Passwords](https://support.google.com/accounts/answer/185833) service to generate a special password for each app you want to authorize. To do so:\n\n1.  Go to your [Google Account](https://myaccount.google.com/).\n2.  Select **Security**.\n3.  Under \"Signing in to Google,\" select **App Passwords**. You may need to sign in. If you don’t have this option, it might be because:\n    1.  2-Step Verification is not set up for your account.\n    2.  2-Step Verification is only set up for security keys.\n    3.  Your account is through work, school, or other organization.\n    4.  You turned on Advanced Protection.\n4.  At the bottom, choose **Select app** and choose **Other** option and then write the name of the app password (e.g. `Firebase Trigger Email Extension`) and click **Generate**.\n5.  Follow the instructions to enter the App Password. The App Password is the 16-character code in the yellow bar on your device.\n6.  Tap **Done**.\n\nNow you can use your Google username with the generated password to authorize the extension.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- You will be charged a small amount (typically around $0.01/month) for the Firebase resources required by this extension (even if it is not used).\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s no-cost tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n","postinstallContent":"### See it in action\n\nYou can test out this extension right away!\n\n1.  Go to your [Cloud Firestore dashboard](https://console.firebase.google.com/project/${param:PROJECT_ID}/firestore/data) in the Firebase console.\n\n1.  If it doesn't already exist, create the collection you specified during installation: `${param:MAIL_COLLECTION}`.\n\n1.  Add a document with a `to` field and a `message` field with the following content:\n\n    ```js\n    to: ['someone@example.com'],\n    message: {\n      subject: 'Hello from Firebase!',\n      text: 'This is the plaintext section of the email body.',\n      html: 'This is the <code>HTML</code> section of the email body.',\n    }\n    ```\n\n1.  In a few seconds, you'll see a `delivery` field appear in the document. The field will update as the extension processes the email.\n\n**Note:** You can also use the [Firebase Admin SDK][admin_sdk] to add a document:\n\n```js\nadmin\n  .firestore()\n  .collection(\"${param:MAIL_COLLECTION}\")\n  .add({\n    to: \"someone@example.com\",\n    message: {\n      subject: \"Hello from Firebase!\",\n      text: \"This is the plaintext section of the email body.\",\n      html: \"This is the <code>HTML</code> section of the email body.\",\n    },\n  })\n  .then(() => console.log(\"Queued email for delivery!\"));\n```\n\n### Using this extension\n\nSee the [official documentation](https://firebase.google.com/docs/extensions/official/firestore-send-email) for information on using this extension, including advanced use cases such as using Handlebars templates and managing email delivery status.\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n\n[mail_collection]: https://console.firebase.google.com/project/_/firestore/data~2F${param:MAIL_COLLECTION}\n[admin_sdk]: https://firebase.google.com/docs/admin/setup\n[amp4email]: https://amp.dev/documentation/guides-and-tutorials/learn/email-spec/amp-email-format/\n[handlebars]: https://handlebarsjs.com/\n","readmeContent":"# Trigger Email\n\n**Author**: Firebase (**[https://firebase.google.com](https://firebase.google.com)**)\n\n**Description**: Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.\n\n\n\n**Details**: Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Setup Google App Passwords\n\n**Google** no longer allows **Gmail** users to use their own passwords to authorize third-party apps and services. Instead, you have to use the [Sign in with App Passwords](https://support.google.com/accounts/answer/185833) service to generate a special password for each app you want to authorize. To do so:\n\n1.  Go to your [Google Account](https://myaccount.google.com/).\n2.  Select **Security**.\n3.  Under \"Signing in to Google,\" select **App Passwords**. You may need to sign in. If you don’t have this option, it might be because:\n    1.  2-Step Verification is not set up for your account.\n    2.  2-Step Verification is only set up for security keys.\n    3.  Your account is through work, school, or other organization.\n    4.  You turned on Advanced Protection.\n4.  At the bottom, choose **Select app** and choose **Other** option and then write the name of the app password (e.g. `Firebase Trigger Email Extension`) and click **Generate**.\n5.  Follow the instructions to enter the App Password. The App Password is the 16-character code in the yellow bar on your device.\n6.  Tap **Done**.\n\nNow you can use your Google username with the generated password to authorize the extension.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- You will be charged a small amount (typically around $0.01/month) for the Firebase resources required by this extension (even if it is not used).\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s no-cost tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n\n\n\n\n**Configuration Parameters:**\n\n* Cloud Functions location: Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).\n\n* SMTP connection URI: A URI representing an SMTP server this extension can use to deliver email. Note that port 25 is blocked by Google Cloud Platform, so we recommend using port 587 for SMTP connections. If you're using the SMTPS protocol, we recommend using port 465. In order to keep passwords secure, it is recommended to omit the password from the connection string while using the `SMTP Password` field for entering secrets and passwords. Passwords and secrets should now be included in `SMTP password` field.\nSecure format:\n `smtps://username@gmail.com@smtp.gmail.com:465` (username only)\n `smtps://smtp.gmail.com:465` (No username and password)\nBackwards Compatible (less secure):\n `smtps://username@gmail.com:password@smtp.gmail.com:465`. (username and password)\n\n* SMTP password: User password for the SMTP server\n\n* Email documents collection: What is the path to the collection that contains the documents used to build and send the emails?\n\n* Default FROM address: The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).\n\n* Default REPLY-TO address: The email address to use as the reply-to address (if it's not specified in the added email document).\n\n* Users collection: A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection.\n\n* Templates collection: A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document.\n\n\n\n**Cloud Functions:**\n\n* **processQueue:** Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.\n\n\n\n**Access Required**:\n\n\n\nThis extension will operate with the following project IAM roles:\n\n* datastore.user (Reason: Allows this extension to access Cloud Firestore to read and process added email documents.)\n","displayName":"Trigger Email","systemParams":[{"param":"firebaseextensions.v1beta.function/memory","label":"Function memory","type":"SELECT","description":"How much memory should be allocated to each function?","options":[{"value":"128","label":"128MB"},{"value":"256","label":"256MB"},{"value":"512","label":"512MB"},{"value":"1024","label":"1GB"},{"value":"2048","label":"2GB"},{"value":"4096","label":"4GB"},{"value":"8192","label":"8GB"}],"default":"256","advanced":true},{"param":"firebaseextensions.v1beta.function/timeoutSeconds","label":"Function timeout seconds","type":"STRING","description":"How long should functions run before timing out, in seconds (0-540)?","validationRegex":"^[1-9][0-9]{0,2}$","validationErrorMessage":"Function timeout should be an integer number of seconds, between 0 and 540","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnector","label":"VPC Connector","type":"STRING","description":"The VPC Network Connector that this cloud function can connect to. It can be either the fully-qualified URI, or the short name of the network connector resource. The format of this field is projects/*/locations/*/connectors/*.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/connectors/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnectorEgressSettings","label":"VPC Connector Egress settings","type":"SELECT","description":"Controls outgoing traffic when a VPC connector is configured","options":[{"value":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","label":"Unspecified"},{"value":"PRIVATE_RANGES_ONLY","label":"Private ranges only"},{"value":"ALL_TRAFFIC","label":"All traffic"}],"default":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","advanced":true},{"param":"firebaseextensions.v1beta.function/minInstances","label":"Minimum function instances","type":"STRING","description":"The minimum number of instances of each function to run at once (0-1000)","default":"0","validationRegex":"^[0-9]*$","validationErrorMessage":"Min instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/maxInstances","label":"Maximum function instances","type":"STRING","description":"The maximum number of instances of each function to run at once","default":"3000","validationRegex":"^[0-9]*$","validationErrorMessage":"Max instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/ingressSettings","label":"Function ingress settings","type":"SELECT","description":"Where should functions allow incoming traffic from?","options":[{"value":"ALLOW_ALL","label":"Allow all"},{"value":"ALLOW_INTERNAL_ONLY","label":"Allow internal only"},{"value":"ALLOW_INTERNAL_AND_GCLB","label":"Allow internal and GCLB"}],"advanced":true},{"param":"firebaseextensions.v1beta.function/labels","label":"Function labels","type":"STRING","description":"Do you wish to set any labels on this instance's Cloud Functions? If so, provide up to 55 labels in the format 'key1:value, key2:value'","validationRegex":"^([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63},\\s*)*([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63})$","advanced":true},{"param":"firebaseextensions.v1beta.function/kmsKeyName","label":"KMS key name","type":"STRING","description":"Do you want to use a Customer Managed Eencryption Key (CMEK) to encrypt this extension's functions? If you set this, you must also set a Docker repository encrypted by that key. See https://cloud.google.com/functions/docs/securing/cmek for more details.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/keyRings/([^/]+)/cryptoKeys/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/dockerRepository","label":"Docker repository","type":"STRING","description":"What Docker repository should be used to store function images? Default repository will be used if not set.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/repositories/([^/]+)$","advanced":true}]},"state":"PUBLISHED","hash":"1c036aceacafcefe7ff8db0bb89b053e3baa2eaef9f3e8637587274e77e9857a","createTime":"2022-11-16T09:50:37.647933Z","id":"0.1.20-rc.0","listing":{"state":"UNLISTED"}},{"name":"publishers/firebase/extensions/firestore-send-email/versions/0.1.20-rc.1","ref":"firebase/firestore-send-email@0.1.20-rc.1","spec":{"specVersion":"v1beta","name":"firestore-send-email","version":"0.1.20-rc.1","description":"Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.","roles":[{"role":"datastore.user","reason":"Allows this extension to access Cloud Firestore to read and process added email documents."}],"resources":[{"name":"processQueue","type":"firebaseextensions.v1beta.function","propertiesYaml":"eventTrigger:\n  eventType: providers/cloud.firestore/eventTypes/document.write\n  resource: projects/${param:PROJECT_ID}/databases/(default)/documents/${param:MAIL_COLLECTION}/{id}\nlocation: ${param:LOCATION}\nruntime: nodejs14\n","description":"Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.","deletionPolicy":"DELETE"}],"billingRequired":true,"author":{"authorName":"Firebase","url":"https://firebase.google.com"},"contributors":[{"authorName":"Michael Bleigh","url":"https://github.com/mbleigh"},{"authorName":"Invertase","email":"oss@invertase.io","url":"https://github.com/invertase"}],"license":"Apache-2.0","releaseNotesUrl":"https://github.com/firebase/extensions/blob/master/firestore-send-email/CHANGELOG.md","sourceUrl":"https://github.com/firebase/extensions/tree/master/firestore-send-email","params":[{"param":"LOCATION","label":"Cloud Functions location","type":"SELECT","description":"Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).","required":true,"options":[{"value":"us-central1","label":"Iowa (us-central1)"},{"value":"us-east1","label":"South Carolina (us-east1)"},{"value":"us-east4","label":"Northern Virginia (us-east4)"},{"value":"us-west2","label":"Los Angeles (us-west2)"},{"value":"us-west3","label":"Salt Lake City (us-west3)"},{"value":"us-west4","label":"Las Vegas (us-west4)"},{"value":"europe-central2","label":"Warsaw (europe-central2)"},{"value":"europe-west1","label":"Belgium (europe-west1)"},{"value":"europe-west2","label":"London (europe-west2)"},{"value":"europe-west3","label":"Frankfurt (europe-west3)"},{"value":"europe-west6","label":"Zurich (europe-west6)"},{"value":"asia-east1","label":"Taiwan (asia-east1)"},{"value":"asia-east2","label":"Hong Kong (asia-east2)"},{"value":"asia-northeast1","label":"Tokyo (asia-northeast1)"},{"value":"asia-northeast2","label":"Osaka (asia-northeast2)"},{"value":"asia-northeast3","label":"Seoul (asia-northeast3)"},{"value":"asia-south1","label":"Mumbai (asia-south1)"},{"value":"asia-southeast1","label":"Singapore (asia-southeast1)"},{"value":"asia-southeast2","label":"Jakarta (asia-southeast2)"},{"value":"northamerica-northeast1","label":"Montreal (northamerica-northeast1)"},{"value":"southamerica-east1","label":"Sao Paulo (southamerica-east1)"},{"value":"australia-southeast1","label":"Sydney (australia-southeast1)"}],"default":"us-central1","immutable":true},{"param":"SMTP_CONNECTION_URI","label":"SMTP connection URI","type":"STRING","description":"A URI representing an SMTP server this extension can use to deliver email. Note that port 25 is blocked by Google Cloud Platform, so we recommend using port 587 for SMTP connections. If you're using the SMTPS protocol, we recommend using port 465. In order to keep passwords secure, it is recommended to omit the password from the connection string while using the `SMTP Password` field for entering secrets and passwords. Passwords and secrets should now be included in `SMTP password` field.\nSecure format:\n `smtps://username@gmail.com@smtp.gmail.com:465` (username only)\n `smtps://smtp.gmail.com:465` (No username and password)\nBackwards Compatible (less secure):\n `smtps://username@gmail.com:password@smtp.gmail.com:465`. (username and password)","required":true,"example":"smtps://username@smtp.hostname.com:465","validationRegex":"^(smtp[s]*://.*?:[0-9]+.*$)","validationErrorMessage":"Invalid SMTP connection URI. Must be in the form `smtp(s)://username:password@hostname:port` or `smtp(s)://username@hostname:port`."},{"param":"SMTP_PASSWORD","label":"SMTP password","type":"SECRET","description":"User password for the SMTP server"},{"param":"MAIL_COLLECTION","label":"Email documents collection","type":"STRING","description":"What is the path to the collection that contains the documents used to build and send the emails?","required":true,"default":"mail","validationRegex":"^[^/]+(/[^/]+/[^/]+)*$","validationErrorMessage":"Must be a valid Cloud Firestore collection"},{"param":"DEFAULT_FROM","label":"Default FROM address","type":"STRING","description":"The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).","required":true,"example":"foobar@example.com","validationRegex":"^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$|^.*<(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})>$","validationErrorMessage":"Must be a valid email address or valid name plus email address"},{"param":"DEFAULT_REPLY_TO","label":"Default REPLY-TO address","type":"STRING","description":"The email address to use as the reply-to address (if it's not specified in the added email document)."},{"param":"USERS_COLLECTION","label":"Users collection","type":"STRING","description":"A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection."},{"param":"TEMPLATES_COLLECTION","label":"Templates collection","type":"STRING","description":"A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document."}],"preinstallContent":"Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Setup Google App Passwords\n\n**Google** no longer allows **Gmail** users to use their own passwords to authorize third-party apps and services. Instead, you have to use the [Sign in with App Passwords](https://support.google.com/accounts/answer/185833) service to generate a special password for each app you want to authorize. To do so:\n\n1.  Go to your [Google Account](https://myaccount.google.com/).\n2.  Select **Security**.\n3.  Under \"Signing in to Google,\" select **App Passwords**. You may need to sign in. If you don’t have this option, it might be because:\n    1.  2-Step Verification is not set up for your account.\n    2.  2-Step Verification is only set up for security keys.\n    3.  Your account is through work, school, or other organization.\n    4.  You turned on Advanced Protection.\n4.  At the bottom, choose **Select app** and choose **Other** option and then write the name of the app password (e.g. `Firebase Trigger Email Extension`) and click **Generate**.\n5.  Follow the instructions to enter the App Password. The App Password is the 16-character code in the yellow bar on your device.\n6.  Tap **Done**.\n\nNow you can use your Google username with the generated password to authorize the extension.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- You will be charged a small amount (typically around $0.01/month) for the Firebase resources required by this extension (even if it is not used).\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s no-cost tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n","postinstallContent":"### See it in action\n\nYou can test out this extension right away!\n\n1.  Go to your [Cloud Firestore dashboard](https://console.firebase.google.com/project/${param:PROJECT_ID}/firestore/data) in the Firebase console.\n\n1.  If it doesn't already exist, create the collection you specified during installation: `${param:MAIL_COLLECTION}`.\n\n1.  Add a document with a `to` field and a `message` field with the following content:\n\n    ```js\n    to: ['someone@example.com'],\n    message: {\n      subject: 'Hello from Firebase!',\n      text: 'This is the plaintext section of the email body.',\n      html: 'This is the <code>HTML</code> section of the email body.',\n    }\n    ```\n\n1.  In a few seconds, you'll see a `delivery` field appear in the document. The field will update as the extension processes the email.\n\n**Note:** You can also use the [Firebase Admin SDK][admin_sdk] to add a document:\n\n```js\nadmin\n  .firestore()\n  .collection(\"${param:MAIL_COLLECTION}\")\n  .add({\n    to: \"someone@example.com\",\n    message: {\n      subject: \"Hello from Firebase!\",\n      text: \"This is the plaintext section of the email body.\",\n      html: \"This is the <code>HTML</code> section of the email body.\",\n    },\n  })\n  .then(() => console.log(\"Queued email for delivery!\"));\n```\n\n### Using this extension\n\nSee the [official documentation](https://firebase.google.com/docs/extensions/official/firestore-send-email) for information on using this extension, including advanced use cases such as using Handlebars templates and managing email delivery status.\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n\n[mail_collection]: https://console.firebase.google.com/project/_/firestore/data~2F${param:MAIL_COLLECTION}\n[admin_sdk]: https://firebase.google.com/docs/admin/setup\n[amp4email]: https://amp.dev/documentation/guides-and-tutorials/learn/email-spec/amp-email-format/\n[handlebars]: https://handlebarsjs.com/\n","readmeContent":"# Trigger Email\n\n**Author**: Firebase (**[https://firebase.google.com](https://firebase.google.com)**)\n\n**Description**: Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.\n\n\n\n**Details**: Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Setup Google App Passwords\n\n**Google** no longer allows **Gmail** users to use their own passwords to authorize third-party apps and services. Instead, you have to use the [Sign in with App Passwords](https://support.google.com/accounts/answer/185833) service to generate a special password for each app you want to authorize. To do so:\n\n1.  Go to your [Google Account](https://myaccount.google.com/).\n2.  Select **Security**.\n3.  Under \"Signing in to Google,\" select **App Passwords**. You may need to sign in. If you don’t have this option, it might be because:\n    1.  2-Step Verification is not set up for your account.\n    2.  2-Step Verification is only set up for security keys.\n    3.  Your account is through work, school, or other organization.\n    4.  You turned on Advanced Protection.\n4.  At the bottom, choose **Select app** and choose **Other** option and then write the name of the app password (e.g. `Firebase Trigger Email Extension`) and click **Generate**.\n5.  Follow the instructions to enter the App Password. The App Password is the 16-character code in the yellow bar on your device.\n6.  Tap **Done**.\n\nNow you can use your Google username with the generated password to authorize the extension.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- You will be charged a small amount (typically around $0.01/month) for the Firebase resources required by this extension (even if it is not used).\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s no-cost tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n\n\n\n\n**Configuration Parameters:**\n\n* Cloud Functions location: Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).\n\n* SMTP connection URI: A URI representing an SMTP server this extension can use to deliver email. Note that port 25 is blocked by Google Cloud Platform, so we recommend using port 587 for SMTP connections. If you're using the SMTPS protocol, we recommend using port 465. In order to keep passwords secure, it is recommended to omit the password from the connection string while using the `SMTP Password` field for entering secrets and passwords. Passwords and secrets should now be included in `SMTP password` field.\nSecure format:\n `smtps://username@gmail.com@smtp.gmail.com:465` (username only)\n `smtps://smtp.gmail.com:465` (No username and password)\nBackwards Compatible (less secure):\n `smtps://username@gmail.com:password@smtp.gmail.com:465`. (username and password)\n\n* SMTP password: User password for the SMTP server\n\n* Email documents collection: What is the path to the collection that contains the documents used to build and send the emails?\n\n* Default FROM address: The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).\n\n* Default REPLY-TO address: The email address to use as the reply-to address (if it's not specified in the added email document).\n\n* Users collection: A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection.\n\n* Templates collection: A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document.\n\n\n\n**Cloud Functions:**\n\n* **processQueue:** Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.\n\n\n\n**Access Required**:\n\n\n\nThis extension will operate with the following project IAM roles:\n\n* datastore.user (Reason: Allows this extension to access Cloud Firestore to read and process added email documents.)\n","displayName":"Trigger Email","systemParams":[{"param":"firebaseextensions.v1beta.function/memory","label":"Function memory","type":"SELECT","description":"How much memory should be allocated to each function?","options":[{"value":"128","label":"128MB"},{"value":"256","label":"256MB"},{"value":"512","label":"512MB"},{"value":"1024","label":"1GB"},{"value":"2048","label":"2GB"},{"value":"4096","label":"4GB"},{"value":"8192","label":"8GB"}],"default":"256","advanced":true},{"param":"firebaseextensions.v1beta.function/timeoutSeconds","label":"Function timeout seconds","type":"STRING","description":"How long should functions run before timing out, in seconds (0-540)?","validationRegex":"^[1-9][0-9]{0,2}$","validationErrorMessage":"Function timeout should be an integer number of seconds, between 0 and 540","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnector","label":"VPC Connector","type":"STRING","description":"The VPC Network Connector that this cloud function can connect to. It can be either the fully-qualified URI, or the short name of the network connector resource. The format of this field is projects/*/locations/*/connectors/*.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/connectors/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnectorEgressSettings","label":"VPC Connector Egress settings","type":"SELECT","description":"Controls outgoing traffic when a VPC connector is configured","options":[{"value":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","label":"Unspecified"},{"value":"PRIVATE_RANGES_ONLY","label":"Private ranges only"},{"value":"ALL_TRAFFIC","label":"All traffic"}],"default":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","advanced":true},{"param":"firebaseextensions.v1beta.function/minInstances","label":"Minimum function instances","type":"STRING","description":"The minimum number of instances of each function to run at once (0-1000)","default":"0","validationRegex":"^[0-9]*$","validationErrorMessage":"Min instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/maxInstances","label":"Maximum function instances","type":"STRING","description":"The maximum number of instances of each function to run at once","default":"3000","validationRegex":"^[0-9]*$","validationErrorMessage":"Max instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/ingressSettings","label":"Function ingress settings","type":"SELECT","description":"Where should functions allow incoming traffic from?","options":[{"value":"ALLOW_ALL","label":"Allow all"},{"value":"ALLOW_INTERNAL_ONLY","label":"Allow internal only"},{"value":"ALLOW_INTERNAL_AND_GCLB","label":"Allow internal and GCLB"}],"advanced":true},{"param":"firebaseextensions.v1beta.function/labels","label":"Function labels","type":"STRING","description":"Do you wish to set any labels on this instance's Cloud Functions? If so, provide up to 55 labels in the format 'key1:value, key2:value'","validationRegex":"^([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63},\\s*)*([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63})$","advanced":true},{"param":"firebaseextensions.v1beta.function/kmsKeyName","label":"KMS key name","type":"STRING","description":"Do you want to use a Customer Managed Eencryption Key (CMEK) to encrypt this extension's functions? If you set this, you must also set a Docker repository encrypted by that key. See https://cloud.google.com/functions/docs/securing/cmek for more details.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/keyRings/([^/]+)/cryptoKeys/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/dockerRepository","label":"Docker repository","type":"STRING","description":"What Docker repository should be used to store function images? Default repository will be used if not set.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/repositories/([^/]+)$","advanced":true}]},"state":"PUBLISHED","hash":"6a4060edf3b15a1f679c35ce742daea6051a5613bc7aa3c181ca57825336024f","createTime":"2022-11-16T13:55:43.992112Z","id":"0.1.20-rc.1","listing":{"state":"UNLISTED"}},{"name":"publishers/firebase/extensions/firestore-send-email/versions/0.1.21","ref":"firebase/firestore-send-email@0.1.21","spec":{"specVersion":"v1beta","name":"firestore-send-email","version":"0.1.21","description":"Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.","roles":[{"role":"datastore.user","reason":"Allows this extension to access Cloud Firestore to read and process added email documents."}],"resources":[{"name":"processQueue","type":"firebaseextensions.v1beta.function","propertiesYaml":"eventTrigger:\n  eventType: providers/cloud.firestore/eventTypes/document.write\n  resource: projects/${param:PROJECT_ID}/databases/(default)/documents/${param:MAIL_COLLECTION}/{id}\nlocation: ${param:LOCATION}\nruntime: nodejs14\n","description":"Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.","deletionPolicy":"DELETE"}],"billingRequired":true,"author":{"authorName":"Firebase","url":"https://firebase.google.com"},"contributors":[{"authorName":"Michael Bleigh","url":"https://github.com/mbleigh"},{"authorName":"Invertase","email":"oss@invertase.io","url":"https://github.com/invertase"}],"license":"Apache-2.0","releaseNotesUrl":"https://github.com/firebase/extensions/blob/master/firestore-send-email/CHANGELOG.md","sourceUrl":"https://github.com/firebase/extensions/tree/master/firestore-send-email","params":[{"param":"LOCATION","label":"Cloud Functions location","type":"SELECT","description":"Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).","required":true,"options":[{"value":"us-central1","label":"Iowa (us-central1)"},{"value":"us-east1","label":"South Carolina (us-east1)"},{"value":"us-east4","label":"Northern Virginia (us-east4)"},{"value":"us-west2","label":"Los Angeles (us-west2)"},{"value":"us-west3","label":"Salt Lake City (us-west3)"},{"value":"us-west4","label":"Las Vegas (us-west4)"},{"value":"europe-central2","label":"Warsaw (europe-central2)"},{"value":"europe-west1","label":"Belgium (europe-west1)"},{"value":"europe-west2","label":"London (europe-west2)"},{"value":"europe-west3","label":"Frankfurt (europe-west3)"},{"value":"europe-west6","label":"Zurich (europe-west6)"},{"value":"asia-east1","label":"Taiwan (asia-east1)"},{"value":"asia-east2","label":"Hong Kong (asia-east2)"},{"value":"asia-northeast1","label":"Tokyo (asia-northeast1)"},{"value":"asia-northeast2","label":"Osaka (asia-northeast2)"},{"value":"asia-northeast3","label":"Seoul (asia-northeast3)"},{"value":"asia-south1","label":"Mumbai (asia-south1)"},{"value":"asia-southeast1","label":"Singapore (asia-southeast1)"},{"value":"asia-southeast2","label":"Jakarta (asia-southeast2)"},{"value":"northamerica-northeast1","label":"Montreal (northamerica-northeast1)"},{"value":"southamerica-east1","label":"Sao Paulo (southamerica-east1)"},{"value":"australia-southeast1","label":"Sydney (australia-southeast1)"}],"default":"us-central1","immutable":true},{"param":"SMTP_CONNECTION_URI","label":"SMTP connection URI","type":"STRING","description":"A URI representing an SMTP server this extension can use to deliver email. Note that port 25 is blocked by Google Cloud Platform, so we recommend using port 587 for SMTP connections. If you're using the SMTPS protocol, we recommend using port 465. In order to keep passwords secure, it is recommended to omit the password from the connection string while using the `SMTP Password` field for entering secrets and passwords. Passwords and secrets should now be included in `SMTP password` field.\nSecure format:\n `smtps://username@gmail.com@smtp.gmail.com:465` (username only)\n `smtps://smtp.gmail.com:465` (No username and password)\nBackwards Compatible (less secure):\n `smtps://username@gmail.com:password@smtp.gmail.com:465`. (username and password)","required":true,"example":"smtps://username@smtp.hostname.com:465","validationRegex":"^(smtp[s]*://.*?:[0-9]+.*$)","validationErrorMessage":"Invalid SMTP connection URI. Must be in the form `smtp(s)://username:password@hostname:port` or `smtp(s)://username@hostname:port`."},{"param":"SMTP_PASSWORD","label":"SMTP password","type":"SECRET","description":"User password for the SMTP server"},{"param":"MAIL_COLLECTION","label":"Email documents collection","type":"STRING","description":"What is the path to the collection that contains the documents used to build and send the emails?","required":true,"default":"mail","validationRegex":"^[^/]+(/[^/]+/[^/]+)*$","validationErrorMessage":"Must be a valid Cloud Firestore collection"},{"param":"DEFAULT_FROM","label":"Default FROM address","type":"STRING","description":"The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).","required":true,"example":"foobar@example.com","validationRegex":"^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$|^.*<(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})>$","validationErrorMessage":"Must be a valid email address or valid name plus email address"},{"param":"DEFAULT_REPLY_TO","label":"Default REPLY-TO address","type":"STRING","description":"The email address to use as the reply-to address (if it's not specified in the added email document)."},{"param":"USERS_COLLECTION","label":"Users collection","type":"STRING","description":"A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection."},{"param":"TEMPLATES_COLLECTION","label":"Templates collection","type":"STRING","description":"A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document."}],"preinstallContent":"Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Setup Google App Passwords\n\n**Google** no longer allows **Gmail** users to use their own passwords to authorize third-party apps and services. Instead, you have to use the [Sign in with App Passwords](https://support.google.com/accounts/answer/185833) service to generate a special password for each app you want to authorize. To do so:\n\n1.  Go to your [Google Account](https://myaccount.google.com/).\n2.  Select **Security**.\n3.  Under \"Signing in to Google,\" select **App Passwords**. You may need to sign in. If you don’t have this option, it might be because:\n    1.  2-Step Verification is not set up for your account.\n    2.  2-Step Verification is only set up for security keys.\n    3.  Your account is through work, school, or other organization.\n    4.  You turned on Advanced Protection.\n4.  At the bottom, choose **Select app** and choose **Other** option and then write the name of the app password (e.g. `Firebase Trigger Email Extension`) and click **Generate**.\n5.  Follow the instructions to enter the App Password. The App Password is the 16-character code in the yellow bar on your device.\n6.  Tap **Done**.\n\nNow you can use your Google username with the generated password to authorize the extension.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- You will be charged a small amount (typically around $0.01/month) for the Firebase resources required by this extension (even if it is not used).\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s no-cost tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n\n#### Further reading & resources\n\nYou can find more information about this extension in the following articles:\n\n- [Sending Emails Using Firestore And Firebase Extensions](https://invertase.link/Y6Nu)","postinstallContent":"### See it in action\n\nYou can test out this extension right away!\n\n1.  Go to your [Cloud Firestore dashboard](https://console.firebase.google.com/project/${param:PROJECT_ID}/firestore/data) in the Firebase console.\n\n1.  If it doesn't already exist, create the collection you specified during installation: `${param:MAIL_COLLECTION}`.\n\n1.  Add a document with a `to` field and a `message` field with the following content:\n\n    ```js\n    to: ['someone@example.com'],\n    message: {\n      subject: 'Hello from Firebase!',\n      text: 'This is the plaintext section of the email body.',\n      html: 'This is the <code>HTML</code> section of the email body.',\n    }\n    ```\n\n1.  In a few seconds, you'll see a `delivery` field appear in the document. The field will update as the extension processes the email.\n\n**Note:** You can also use the [Firebase Admin SDK][admin_sdk] to add a document:\n\n```js\nadmin\n  .firestore()\n  .collection(\"${param:MAIL_COLLECTION}\")\n  .add({\n    to: \"someone@example.com\",\n    message: {\n      subject: \"Hello from Firebase!\",\n      text: \"This is the plaintext section of the email body.\",\n      html: \"This is the <code>HTML</code> section of the email body.\",\n    },\n  })\n  .then(() => console.log(\"Queued email for delivery!\"));\n```\n\n### Using this extension\n\nSee the [official documentation](https://firebase.google.com/docs/extensions/official/firestore-send-email) for information on using this extension, including advanced use cases such as using Handlebars templates and managing email delivery status.\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n\n[mail_collection]: https://console.firebase.google.com/project/_/firestore/data~2F${param:MAIL_COLLECTION}\n[admin_sdk]: https://firebase.google.com/docs/admin/setup\n[amp4email]: https://amp.dev/documentation/guides-and-tutorials/learn/email-spec/amp-email-format/\n[handlebars]: https://handlebarsjs.com/\n\n### Further reading & resources\n\nYou can find more information about this extension in the following articles:\n\n- [Sending Emails Using Firestore And Firebase Extensions](https://invertase.link/Y6Nu)","readmeContent":"# Trigger Email\n\n**Author**: Firebase (**[https://firebase.google.com](https://firebase.google.com)**)\n\n**Description**: Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.\n\n\n\n**Details**: Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Setup Google App Passwords\n\n**Google** no longer allows **Gmail** users to use their own passwords to authorize third-party apps and services. Instead, you have to use the [Sign in with App Passwords](https://support.google.com/accounts/answer/185833) service to generate a special password for each app you want to authorize. To do so:\n\n1.  Go to your [Google Account](https://myaccount.google.com/).\n2.  Select **Security**.\n3.  Under \"Signing in to Google,\" select **App Passwords**. You may need to sign in. If you don’t have this option, it might be because:\n    1.  2-Step Verification is not set up for your account.\n    2.  2-Step Verification is only set up for security keys.\n    3.  Your account is through work, school, or other organization.\n    4.  You turned on Advanced Protection.\n4.  At the bottom, choose **Select app** and choose **Other** option and then write the name of the app password (e.g. `Firebase Trigger Email Extension`) and click **Generate**.\n5.  Follow the instructions to enter the App Password. The App Password is the 16-character code in the yellow bar on your device.\n6.  Tap **Done**.\n\nNow you can use your Google username with the generated password to authorize the extension.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- You will be charged a small amount (typically around $0.01/month) for the Firebase resources required by this extension (even if it is not used).\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s no-cost tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n\n#### Further reading & resources\n\nYou can find more information about this extension in the following articles:\n\n- [Sending Emails Using Firestore And Firebase Extensions](https://invertase.link/Y6Nu)\n\n\n\n**Configuration Parameters:**\n\n* Cloud Functions location: Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).\n\n* SMTP connection URI: A URI representing an SMTP server this extension can use to deliver email. Note that port 25 is blocked by Google Cloud Platform, so we recommend using port 587 for SMTP connections. If you're using the SMTPS protocol, we recommend using port 465. In order to keep passwords secure, it is recommended to omit the password from the connection string while using the `SMTP Password` field for entering secrets and passwords. Passwords and secrets should now be included in `SMTP password` field.\nSecure format:\n `smtps://username@gmail.com@smtp.gmail.com:465` (username only)\n `smtps://smtp.gmail.com:465` (No username and password)\nBackwards Compatible (less secure):\n `smtps://username@gmail.com:password@smtp.gmail.com:465`. (username and password)\n\n* SMTP password: User password for the SMTP server\n\n* Email documents collection: What is the path to the collection that contains the documents used to build and send the emails?\n\n* Default FROM address: The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).\n\n* Default REPLY-TO address: The email address to use as the reply-to address (if it's not specified in the added email document).\n\n* Users collection: A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection.\n\n* Templates collection: A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document.\n\n\n\n**Cloud Functions:**\n\n* **processQueue:** Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.\n\n\n\n**Access Required**:\n\n\n\nThis extension will operate with the following project IAM roles:\n\n* datastore.user (Reason: Allows this extension to access Cloud Firestore to read and process added email documents.)\n","displayName":"Trigger Email","events":[{"type":"firebase.extensions.firestore-send-email.v1.onStart","description":"Occurs when the extension starts execution."},{"type":"firebase.extensions.firestore-send-email.v1.onProcessing","description":"Occurs when the extension attempts to process an email."},{"type":"firebase.extensions.firestore-send-email.v1.onRetry","description":"Occurs when the extension attempts to resend an email."},{"type":"firebase.extensions.firestore-send-email.v1.onPending","description":"Occurs when an email has a pending status."},{"type":"firebase.extensions.firestore-send-email.v1.onSuccess","description":"Occurs when the extension successfully sends an email."},{"type":"firebase.extensions.firestore-send-email.v1.onComplete","description":"Occurs when the extension completes execution."},{"type":"firebase.extensions.firestore-send-email.v1.onError","description":"Occurs when the extension fails to complete execution."}],"systemParams":[{"param":"firebaseextensions.v1beta.function/memory","label":"Function memory","type":"SELECT","description":"How much memory should be allocated to each function?","options":[{"value":"128","label":"128MB"},{"value":"256","label":"256MB"},{"value":"512","label":"512MB"},{"value":"1024","label":"1GB"},{"value":"2048","label":"2GB"},{"value":"4096","label":"4GB"},{"value":"8192","label":"8GB"}],"default":"256","advanced":true},{"param":"firebaseextensions.v1beta.function/timeoutSeconds","label":"Function timeout seconds","type":"STRING","description":"How long should functions run before timing out, in seconds (0-540)?","validationRegex":"^[1-9][0-9]{0,2}$","validationErrorMessage":"Function timeout should be an integer number of seconds, between 0 and 540","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnector","label":"VPC Connector","type":"STRING","description":"The VPC Network Connector that this cloud function can connect to. It can be either the fully-qualified URI, or the short name of the network connector resource. The format of this field is projects/*/locations/*/connectors/*.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/connectors/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnectorEgressSettings","label":"VPC Connector Egress settings","type":"SELECT","description":"Controls outgoing traffic when a VPC connector is configured","options":[{"value":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","label":"Unspecified"},{"value":"PRIVATE_RANGES_ONLY","label":"Private ranges only"},{"value":"ALL_TRAFFIC","label":"All traffic"}],"default":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","advanced":true},{"param":"firebaseextensions.v1beta.function/minInstances","label":"Minimum function instances","type":"STRING","description":"The minimum number of instances of each function to run at once (0-1000)","default":"0","validationRegex":"^[0-9]*$","validationErrorMessage":"Min instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/maxInstances","label":"Maximum function instances","type":"STRING","description":"The maximum number of instances of each function to run at once","default":"3000","validationRegex":"^[0-9]*$","validationErrorMessage":"Max instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/ingressSettings","label":"Function ingress settings","type":"SELECT","description":"Where should functions allow incoming traffic from?","options":[{"value":"ALLOW_ALL","label":"Allow all"},{"value":"ALLOW_INTERNAL_ONLY","label":"Allow internal only"},{"value":"ALLOW_INTERNAL_AND_GCLB","label":"Allow internal and GCLB"}],"advanced":true},{"param":"firebaseextensions.v1beta.function/labels","label":"Function labels","type":"STRING","description":"Do you wish to set any labels on this instance's Cloud Functions? If so, provide up to 55 labels in the format 'key1:value, key2:value'","validationRegex":"^([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63},\\s*)*([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63})$","advanced":true},{"param":"firebaseextensions.v1beta.function/kmsKeyName","label":"KMS key name","type":"STRING","description":"Do you want to use a Customer Managed Eencryption Key (CMEK) to encrypt this extension's functions? If you set this, you must also set a Docker repository encrypted by that key. See https://cloud.google.com/functions/docs/securing/cmek for more details.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/keyRings/([^/]+)/cryptoKeys/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/dockerRepository","label":"Docker repository","type":"STRING","description":"What Docker repository should be used to store function images? Default repository will be used if not set.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/repositories/([^/]+)$","advanced":true}]},"state":"PUBLISHED","hash":"c1607d34062d8571abc434f17334396905408390ea8afcc27e4b0e1207966572","createTime":"2023-01-06T09:15:43.012310Z","id":"0.1.21","releaseNotes":"feature - add lifecycle events\n","listing":{"state":"APPROVED"},"metrics":{"activeInstallCount":"600"}},{"name":"publishers/firebase/extensions/firestore-send-email/versions/0.1.21-rc.0","ref":"firebase/firestore-send-email@0.1.21-rc.0","spec":{"specVersion":"v1beta","name":"firestore-send-email","version":"0.1.21-rc.0","description":"Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.","roles":[{"role":"datastore.user","reason":"Allows this extension to access Cloud Firestore to read and process added email documents."}],"resources":[{"name":"processQueue","type":"firebaseextensions.v1beta.function","propertiesYaml":"eventTrigger:\n  eventType: providers/cloud.firestore/eventTypes/document.write\n  resource: projects/${param:PROJECT_ID}/databases/(default)/documents/${param:MAIL_COLLECTION}/{id}\nlocation: ${param:LOCATION}\nruntime: nodejs14\n","description":"Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.","deletionPolicy":"DELETE"}],"billingRequired":true,"author":{"authorName":"Firebase","url":"https://firebase.google.com"},"contributors":[{"authorName":"Michael Bleigh","url":"https://github.com/mbleigh"},{"authorName":"Invertase","email":"oss@invertase.io","url":"https://github.com/invertase"}],"license":"Apache-2.0","releaseNotesUrl":"https://github.com/firebase/extensions/blob/master/firestore-send-email/CHANGELOG.md","sourceUrl":"https://github.com/firebase/extensions/tree/master/firestore-send-email","params":[{"param":"LOCATION","label":"Cloud Functions location","type":"SELECT","description":"Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).","required":true,"options":[{"value":"us-central1","label":"Iowa (us-central1)"},{"value":"us-east1","label":"South Carolina (us-east1)"},{"value":"us-east4","label":"Northern Virginia (us-east4)"},{"value":"us-west2","label":"Los Angeles (us-west2)"},{"value":"us-west3","label":"Salt Lake City (us-west3)"},{"value":"us-west4","label":"Las Vegas (us-west4)"},{"value":"europe-central2","label":"Warsaw (europe-central2)"},{"value":"europe-west1","label":"Belgium (europe-west1)"},{"value":"europe-west2","label":"London (europe-west2)"},{"value":"europe-west3","label":"Frankfurt (europe-west3)"},{"value":"europe-west6","label":"Zurich (europe-west6)"},{"value":"asia-east1","label":"Taiwan (asia-east1)"},{"value":"asia-east2","label":"Hong Kong (asia-east2)"},{"value":"asia-northeast1","label":"Tokyo (asia-northeast1)"},{"value":"asia-northeast2","label":"Osaka (asia-northeast2)"},{"value":"asia-northeast3","label":"Seoul (asia-northeast3)"},{"value":"asia-south1","label":"Mumbai (asia-south1)"},{"value":"asia-southeast1","label":"Singapore (asia-southeast1)"},{"value":"asia-southeast2","label":"Jakarta (asia-southeast2)"},{"value":"northamerica-northeast1","label":"Montreal (northamerica-northeast1)"},{"value":"southamerica-east1","label":"Sao Paulo (southamerica-east1)"},{"value":"australia-southeast1","label":"Sydney (australia-southeast1)"}],"default":"us-central1","immutable":true},{"param":"SMTP_CONNECTION_URI","label":"SMTP connection URI","type":"STRING","description":"A URI representing an SMTP server this extension can use to deliver email. Note that port 25 is blocked by Google Cloud Platform, so we recommend using port 587 for SMTP connections. If you're using the SMTPS protocol, we recommend using port 465. In order to keep passwords secure, it is recommended to omit the password from the connection string while using the `SMTP Password` field for entering secrets and passwords. Passwords and secrets should now be included in `SMTP password` field.\nSecure format:\n `smtps://username@gmail.com@smtp.gmail.com:465` (username only)\n `smtps://smtp.gmail.com:465` (No username and password)\nBackwards Compatible (less secure):\n `smtps://username@gmail.com:password@smtp.gmail.com:465`. (username and password)","required":true,"example":"smtps://username@smtp.hostname.com:465","validationRegex":"^(smtp[s]*://.*?:[0-9]+.*$)","validationErrorMessage":"Invalid SMTP connection URI. Must be in the form `smtp(s)://username:password@hostname:port` or `smtp(s)://username@hostname:port`."},{"param":"SMTP_PASSWORD","label":"SMTP password","type":"SECRET","description":"User password for the SMTP server"},{"param":"MAIL_COLLECTION","label":"Email documents collection","type":"STRING","description":"What is the path to the collection that contains the documents used to build and send the emails?","required":true,"default":"mail","validationRegex":"^[^/]+(/[^/]+/[^/]+)*$","validationErrorMessage":"Must be a valid Cloud Firestore collection"},{"param":"DEFAULT_FROM","label":"Default FROM address","type":"STRING","description":"The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).","required":true,"example":"foobar@example.com","validationRegex":"^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$|^.*<(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})>$","validationErrorMessage":"Must be a valid email address or valid name plus email address"},{"param":"DEFAULT_REPLY_TO","label":"Default REPLY-TO address","type":"STRING","description":"The email address to use as the reply-to address (if it's not specified in the added email document)."},{"param":"USERS_COLLECTION","label":"Users collection","type":"STRING","description":"A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection."},{"param":"TEMPLATES_COLLECTION","label":"Templates collection","type":"STRING","description":"A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document."}],"preinstallContent":"Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Setup Google App Passwords\n\n**Google** no longer allows **Gmail** users to use their own passwords to authorize third-party apps and services. Instead, you have to use the [Sign in with App Passwords](https://support.google.com/accounts/answer/185833) service to generate a special password for each app you want to authorize. To do so:\n\n1.  Go to your [Google Account](https://myaccount.google.com/).\n2.  Select **Security**.\n3.  Under \"Signing in to Google,\" select **App Passwords**. You may need to sign in. If you don’t have this option, it might be because:\n    1.  2-Step Verification is not set up for your account.\n    2.  2-Step Verification is only set up for security keys.\n    3.  Your account is through work, school, or other organization.\n    4.  You turned on Advanced Protection.\n4.  At the bottom, choose **Select app** and choose **Other** option and then write the name of the app password (e.g. `Firebase Trigger Email Extension`) and click **Generate**.\n5.  Follow the instructions to enter the App Password. The App Password is the 16-character code in the yellow bar on your device.\n6.  Tap **Done**.\n\nNow you can use your Google username with the generated password to authorize the extension.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- You will be charged a small amount (typically around $0.01/month) for the Firebase resources required by this extension (even if it is not used).\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s no-cost tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n\n#### Further reading & resources\n\nYou can find more information about this extension in the following articles:\n\n- [Sending Emails Using Firestore And Firebase Extensions](https://invertase.link/Y6Nu)","postinstallContent":"### See it in action\n\nYou can test out this extension right away!\n\n1.  Go to your [Cloud Firestore dashboard](https://console.firebase.google.com/project/${param:PROJECT_ID}/firestore/data) in the Firebase console.\n\n1.  If it doesn't already exist, create the collection you specified during installation: `${param:MAIL_COLLECTION}`.\n\n1.  Add a document with a `to` field and a `message` field with the following content:\n\n    ```js\n    to: ['someone@example.com'],\n    message: {\n      subject: 'Hello from Firebase!',\n      text: 'This is the plaintext section of the email body.',\n      html: 'This is the <code>HTML</code> section of the email body.',\n    }\n    ```\n\n1.  In a few seconds, you'll see a `delivery` field appear in the document. The field will update as the extension processes the email.\n\n**Note:** You can also use the [Firebase Admin SDK][admin_sdk] to add a document:\n\n```js\nadmin\n  .firestore()\n  .collection(\"${param:MAIL_COLLECTION}\")\n  .add({\n    to: \"someone@example.com\",\n    message: {\n      subject: \"Hello from Firebase!\",\n      text: \"This is the plaintext section of the email body.\",\n      html: \"This is the <code>HTML</code> section of the email body.\",\n    },\n  })\n  .then(() => console.log(\"Queued email for delivery!\"));\n```\n\n### Using this extension\n\nSee the [official documentation](https://firebase.google.com/docs/extensions/official/firestore-send-email) for information on using this extension, including advanced use cases such as using Handlebars templates and managing email delivery status.\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n\n[mail_collection]: https://console.firebase.google.com/project/_/firestore/data~2F${param:MAIL_COLLECTION}\n[admin_sdk]: https://firebase.google.com/docs/admin/setup\n[amp4email]: https://amp.dev/documentation/guides-and-tutorials/learn/email-spec/amp-email-format/\n[handlebars]: https://handlebarsjs.com/\n\n### Further reading & resources\n\nYou can find more information about this extension in the following articles:\n\n- [Sending Emails Using Firestore And Firebase Extensions](https://invertase.link/Y6Nu)","readmeContent":"# Trigger Email\n\n**Author**: Firebase (**[https://firebase.google.com](https://firebase.google.com)**)\n\n**Description**: Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.\n\n\n\n**Details**: Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Setup Google App Passwords\n\n**Google** no longer allows **Gmail** users to use their own passwords to authorize third-party apps and services. Instead, you have to use the [Sign in with App Passwords](https://support.google.com/accounts/answer/185833) service to generate a special password for each app you want to authorize. To do so:\n\n1.  Go to your [Google Account](https://myaccount.google.com/).\n2.  Select **Security**.\n3.  Under \"Signing in to Google,\" select **App Passwords**. You may need to sign in. If you don’t have this option, it might be because:\n    1.  2-Step Verification is not set up for your account.\n    2.  2-Step Verification is only set up for security keys.\n    3.  Your account is through work, school, or other organization.\n    4.  You turned on Advanced Protection.\n4.  At the bottom, choose **Select app** and choose **Other** option and then write the name of the app password (e.g. `Firebase Trigger Email Extension`) and click **Generate**.\n5.  Follow the instructions to enter the App Password. The App Password is the 16-character code in the yellow bar on your device.\n6.  Tap **Done**.\n\nNow you can use your Google username with the generated password to authorize the extension.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- You will be charged a small amount (typically around $0.01/month) for the Firebase resources required by this extension (even if it is not used).\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s no-cost tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n\n#### Further reading & resources\n\nYou can find more information about this extension in the following articles:\n\n- [Sending Emails Using Firestore And Firebase Extensions](https://invertase.link/Y6Nu)\n\n\n\n**Configuration Parameters:**\n\n* Cloud Functions location: Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).\n\n* SMTP connection URI: A URI representing an SMTP server this extension can use to deliver email. Note that port 25 is blocked by Google Cloud Platform, so we recommend using port 587 for SMTP connections. If you're using the SMTPS protocol, we recommend using port 465. In order to keep passwords secure, it is recommended to omit the password from the connection string while using the `SMTP Password` field for entering secrets and passwords. Passwords and secrets should now be included in `SMTP password` field.\nSecure format:\n `smtps://username@gmail.com@smtp.gmail.com:465` (username only)\n `smtps://smtp.gmail.com:465` (No username and password)\nBackwards Compatible (less secure):\n `smtps://username@gmail.com:password@smtp.gmail.com:465`. (username and password)\n\n* SMTP password: User password for the SMTP server\n\n* Email documents collection: What is the path to the collection that contains the documents used to build and send the emails?\n\n* Default FROM address: The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).\n\n* Default REPLY-TO address: The email address to use as the reply-to address (if it's not specified in the added email document).\n\n* Users collection: A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection.\n\n* Templates collection: A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document.\n\n\n\n**Cloud Functions:**\n\n* **processQueue:** Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.\n\n\n\n**Access Required**:\n\n\n\nThis extension will operate with the following project IAM roles:\n\n* datastore.user (Reason: Allows this extension to access Cloud Firestore to read and process added email documents.)\n","displayName":"Trigger Email","events":[{"type":"firebase.extensions.firestore-send-email.v1.onStart","description":"Occurs when the extension starts execution."},{"type":"firebase.extensions.firestore-send-email.v1.onProcessing","description":"Occurs when the extension attempts to process an email."},{"type":"firebase.extensions.firestore-send-email.v1.onRetry","description":"Occurs when the extension attempts to resend an email."},{"type":"firebase.extensions.firestore-send-email.v1.onPending","description":"Occurs when an email has a pending status."},{"type":"firebase.extensions.firestore-send-email.v1.onSuccess","description":"Occurs when the extension successfully sends an email."},{"type":"firebase.extensions.firestore-send-email.v1.onComplete","description":"Occurs when the extension completes execution."},{"type":"firebase.extensions.firestore-send-email.v1.onError","description":"Occurs when the extension fails to complete execution."}],"systemParams":[{"param":"firebaseextensions.v1beta.function/memory","label":"Function memory","type":"SELECT","description":"How much memory should be allocated to each function?","options":[{"value":"128","label":"128MB"},{"value":"256","label":"256MB"},{"value":"512","label":"512MB"},{"value":"1024","label":"1GB"},{"value":"2048","label":"2GB"},{"value":"4096","label":"4GB"},{"value":"8192","label":"8GB"}],"default":"256","advanced":true},{"param":"firebaseextensions.v1beta.function/timeoutSeconds","label":"Function timeout seconds","type":"STRING","description":"How long should functions run before timing out, in seconds (0-540)?","validationRegex":"^[1-9][0-9]{0,2}$","validationErrorMessage":"Function timeout should be an integer number of seconds, between 0 and 540","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnector","label":"VPC Connector","type":"STRING","description":"The VPC Network Connector that this cloud function can connect to. It can be either the fully-qualified URI, or the short name of the network connector resource. The format of this field is projects/*/locations/*/connectors/*.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/connectors/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnectorEgressSettings","label":"VPC Connector Egress settings","type":"SELECT","description":"Controls outgoing traffic when a VPC connector is configured","options":[{"value":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","label":"Unspecified"},{"value":"PRIVATE_RANGES_ONLY","label":"Private ranges only"},{"value":"ALL_TRAFFIC","label":"All traffic"}],"default":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","advanced":true},{"param":"firebaseextensions.v1beta.function/minInstances","label":"Minimum function instances","type":"STRING","description":"The minimum number of instances of each function to run at once (0-1000)","default":"0","validationRegex":"^[0-9]*$","validationErrorMessage":"Min instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/maxInstances","label":"Maximum function instances","type":"STRING","description":"The maximum number of instances of each function to run at once","default":"3000","validationRegex":"^[0-9]*$","validationErrorMessage":"Max instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/ingressSettings","label":"Function ingress settings","type":"SELECT","description":"Where should functions allow incoming traffic from?","options":[{"value":"ALLOW_ALL","label":"Allow all"},{"value":"ALLOW_INTERNAL_ONLY","label":"Allow internal only"},{"value":"ALLOW_INTERNAL_AND_GCLB","label":"Allow internal and GCLB"}],"advanced":true},{"param":"firebaseextensions.v1beta.function/labels","label":"Function labels","type":"STRING","description":"Do you wish to set any labels on this instance's Cloud Functions? If so, provide up to 55 labels in the format 'key1:value, key2:value'","validationRegex":"^([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63},\\s*)*([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63})$","advanced":true},{"param":"firebaseextensions.v1beta.function/kmsKeyName","label":"KMS key name","type":"STRING","description":"Do you want to use a Customer Managed Eencryption Key (CMEK) to encrypt this extension's functions? If you set this, you must also set a Docker repository encrypted by that key. See https://cloud.google.com/functions/docs/securing/cmek for more details.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/keyRings/([^/]+)/cryptoKeys/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/dockerRepository","label":"Docker repository","type":"STRING","description":"What Docker repository should be used to store function images? Default repository will be used if not set.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/repositories/([^/]+)$","advanced":true}]},"state":"PUBLISHED","hash":"1c28dc93f3b3289cf5e449c30c0dc0466dbef18ea6cab5f9c875e422d376e03d","createTime":"2023-01-05T17:17:26.113987Z","id":"0.1.21-rc.0","listing":{"state":"UNLISTED"}},{"name":"publishers/firebase/extensions/firestore-send-email/versions/0.1.22","ref":"firebase/firestore-send-email@0.1.22","spec":{"specVersion":"v1beta","name":"firestore-send-email","version":"0.1.22","description":"Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.","roles":[{"role":"datastore.user","reason":"Allows this extension to access Cloud Firestore to read and process added email documents."}],"resources":[{"name":"processQueue","type":"firebaseextensions.v1beta.function","propertiesYaml":"eventTrigger:\n  eventType: providers/cloud.firestore/eventTypes/document.write\n  resource: projects/${param:PROJECT_ID}/databases/(default)/documents/${param:MAIL_COLLECTION}/{id}\nlocation: ${param:LOCATION}\nruntime: nodejs14\n","description":"Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.","deletionPolicy":"DELETE"}],"billingRequired":true,"author":{"authorName":"Firebase","url":"https://firebase.google.com"},"contributors":[{"authorName":"Michael Bleigh","url":"https://github.com/mbleigh"},{"authorName":"Invertase","email":"oss@invertase.io","url":"https://github.com/invertase"}],"license":"Apache-2.0","releaseNotesUrl":"https://github.com/firebase/extensions/blob/master/firestore-send-email/CHANGELOG.md","sourceUrl":"https://github.com/firebase/extensions/tree/master/firestore-send-email","params":[{"param":"LOCATION","label":"Cloud Functions location","type":"SELECT","description":"Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).","required":true,"options":[{"value":"us-central1","label":"Iowa (us-central1)"},{"value":"us-east1","label":"South Carolina (us-east1)"},{"value":"us-east4","label":"Northern Virginia (us-east4)"},{"value":"us-west2","label":"Los Angeles (us-west2)"},{"value":"us-west3","label":"Salt Lake City (us-west3)"},{"value":"us-west4","label":"Las Vegas (us-west4)"},{"value":"europe-central2","label":"Warsaw (europe-central2)"},{"value":"europe-west1","label":"Belgium (europe-west1)"},{"value":"europe-west2","label":"London (europe-west2)"},{"value":"europe-west3","label":"Frankfurt (europe-west3)"},{"value":"europe-west6","label":"Zurich (europe-west6)"},{"value":"asia-east1","label":"Taiwan (asia-east1)"},{"value":"asia-east2","label":"Hong Kong (asia-east2)"},{"value":"asia-northeast1","label":"Tokyo (asia-northeast1)"},{"value":"asia-northeast2","label":"Osaka (asia-northeast2)"},{"value":"asia-northeast3","label":"Seoul (asia-northeast3)"},{"value":"asia-south1","label":"Mumbai (asia-south1)"},{"value":"asia-southeast1","label":"Singapore (asia-southeast1)"},{"value":"asia-southeast2","label":"Jakarta (asia-southeast2)"},{"value":"northamerica-northeast1","label":"Montreal (northamerica-northeast1)"},{"value":"southamerica-east1","label":"Sao Paulo (southamerica-east1)"},{"value":"australia-southeast1","label":"Sydney (australia-southeast1)"}],"default":"us-central1","immutable":true},{"param":"SMTP_CONNECTION_URI","label":"SMTP connection URI","type":"STRING","description":"A URI representing an SMTP server this extension can use to deliver email. Note that port 25 is blocked by Google Cloud Platform, so we recommend using port 587 for SMTP connections. If you're using the SMTPS protocol, we recommend using port 465. In order to keep passwords secure, it is recommended to omit the password from the connection string while using the `SMTP Password` field for entering secrets and passwords. Passwords and secrets should now be included in `SMTP password` field.\nSecure format:\n `smtps://username@gmail.com@smtp.gmail.com:465` (username only)\n `smtps://smtp.gmail.com:465` (No username and password)\nBackwards Compatible (less secure):\n `smtps://username@gmail.com:password@smtp.gmail.com:465`. (username and password)","required":true,"example":"smtps://username@smtp.hostname.com:465","validationRegex":"^(smtp[s]*://.*?:[0-9]+.*$)","validationErrorMessage":"Invalid SMTP connection URI. Must be in the form `smtp(s)://username:password@hostname:port` or `smtp(s)://username@hostname:port`."},{"param":"SMTP_PASSWORD","label":"SMTP password","type":"SECRET","description":"User password for the SMTP server"},{"param":"MAIL_COLLECTION","label":"Email documents collection","type":"STRING","description":"What is the path to the collection that contains the documents used to build and send the emails?","required":true,"default":"mail","validationRegex":"^[^/]+(/[^/]+/[^/]+)*$","validationErrorMessage":"Must be a valid Cloud Firestore collection"},{"param":"DEFAULT_FROM","label":"Default FROM address","type":"STRING","description":"The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).","required":true,"example":"foobar@example.com","validationRegex":"^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$|^.*<(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})>$","validationErrorMessage":"Must be a valid email address or valid name plus email address"},{"param":"DEFAULT_REPLY_TO","label":"Default REPLY-TO address","type":"STRING","description":"The email address to use as the reply-to address (if it's not specified in the added email document)."},{"param":"USERS_COLLECTION","label":"Users collection","type":"STRING","description":"A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection."},{"param":"TEMPLATES_COLLECTION","label":"Templates collection","type":"STRING","description":"A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document."},{"param":"TTL_EXPIRE_TYPE","label":"Firestore TTL type","type":"SELECT","description":"Do you want the firestore records to be marked with an expireAt field for a TTL policy? If \"Never\" is selected then no expireAt field will be added. Otherwise you may specify the unit of time specified by the TTL_EXPIRE_VALUE parameter. Defaults to \"Never\".","required":true,"options":[{"value":"never","label":"Never"},{"value":"hour","label":"Hour"},{"value":"day","label":"Day"},{"value":"week","label":"Week"},{"value":"month","label":"Month"},{"value":"year","label":"Year"}],"default":"never"},{"param":"TTL_EXPIRE_VALUE","label":"Firestore TTL value","type":"STRING","description":"In the units specified by TTL_EXPIRE_TYPE, how long do you want records to be ineligible for deletion by a TTL policy? This parameter requires the Firestore TTL type parameter to be set to a value other than `Never`. For example, if `Firestore TTL type` is set to `Day` then setting this parameter to `1` will specify a TTL of 1 day.","required":true,"default":"1","validationRegex":"^[1-9][0-9]*$","validationErrorMessage":"The value must be an integer value greater than zero."}],"preinstallContent":"Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Setup Google App Passwords\n\n**Google** no longer allows **Gmail** users to use their own passwords to authorize third-party apps and services. Instead, you have to use the [Sign in with App Passwords](https://support.google.com/accounts/answer/185833) service to generate a special password for each app you want to authorize. To do so:\n\n1.  Go to your [Google Account](https://myaccount.google.com/).\n2.  Select **Security**.\n3.  Under \"Signing in to Google,\" select **App Passwords**. You may need to sign in. If you don’t have this option, it might be because:\n    1.  2-Step Verification is not set up for your account.\n    2.  2-Step Verification is only set up for security keys.\n    3.  Your account is through work, school, or other organization.\n    4.  You turned on Advanced Protection.\n4.  At the bottom, choose **Select app** and choose **Other** option and then write the name of the app password (e.g. `Firebase Trigger Email Extension`) and click **Generate**.\n5.  Follow the instructions to enter the App Password. The App Password is the 16-character code in the yellow bar on your device.\n6.  Tap **Done**.\n\nNow you can use your Google username with the generated password to authorize the extension.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s no-cost tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n\n#### Further reading & resources\n\nYou can find more information about this extension in the following articles:\n\n- [Sending Emails Using Firestore And Firebase Extensions](https://invertase.link/Y6Nu)","postinstallContent":"### See it in action\n\nYou can test out this extension right away!\n\n1.  Go to your [Cloud Firestore dashboard](https://console.firebase.google.com/project/${param:PROJECT_ID}/firestore/data) in the Firebase console.\n\n1.  If it doesn't already exist, create the collection you specified during installation: `${param:MAIL_COLLECTION}`.\n\n1.  Add a document with a `to` field and a `message` field with the following content:\n\n    ```js\n    to: ['someone@example.com'],\n    message: {\n      subject: 'Hello from Firebase!',\n      text: 'This is the plaintext section of the email body.',\n      html: 'This is the <code>HTML</code> section of the email body.',\n    }\n    ```\n\n1.  In a few seconds, you'll see a `delivery` field appear in the document. The field will update as the extension processes the email.\n\n**Note:** You can also use the [Firebase Admin SDK][admin_sdk] to add a document:\n\n```js\nadmin\n  .firestore()\n  .collection(\"${param:MAIL_COLLECTION}\")\n  .add({\n    to: \"someone@example.com\",\n    message: {\n      subject: \"Hello from Firebase!\",\n      text: \"This is the plaintext section of the email body.\",\n      html: \"This is the <code>HTML</code> section of the email body.\",\n    },\n  })\n  .then(() => console.log(\"Queued email for delivery!\"));\n```\n\n### Using this extension\n\nSee the [official documentation](https://firebase.google.com/docs/extensions/official/firestore-send-email) for information on using this extension, including advanced use cases such as using Handlebars templates and managing email delivery status.\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n\n[mail_collection]: https://console.firebase.google.com/project/_/firestore/data~2F${param:MAIL_COLLECTION}\n[admin_sdk]: https://firebase.google.com/docs/admin/setup\n[amp4email]: https://amp.dev/documentation/guides-and-tutorials/learn/email-spec/amp-email-format/\n[handlebars]: https://handlebarsjs.com/\n\n### Further reading & resources\n\nYou can find more information about this extension in the following articles:\n\n- [Sending Emails Using Firestore And Firebase Extensions](https://invertase.link/Y6Nu)","readmeContent":"# Trigger Email\n\n**Author**: Firebase (**[https://firebase.google.com](https://firebase.google.com)**)\n\n**Description**: Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.\n\n\n\n**Details**: Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Setup Google App Passwords\n\n**Google** no longer allows **Gmail** users to use their own passwords to authorize third-party apps and services. Instead, you have to use the [Sign in with App Passwords](https://support.google.com/accounts/answer/185833) service to generate a special password for each app you want to authorize. To do so:\n\n1.  Go to your [Google Account](https://myaccount.google.com/).\n2.  Select **Security**.\n3.  Under \"Signing in to Google,\" select **App Passwords**. You may need to sign in. If you don’t have this option, it might be because:\n    1.  2-Step Verification is not set up for your account.\n    2.  2-Step Verification is only set up for security keys.\n    3.  Your account is through work, school, or other organization.\n    4.  You turned on Advanced Protection.\n4.  At the bottom, choose **Select app** and choose **Other** option and then write the name of the app password (e.g. `Firebase Trigger Email Extension`) and click **Generate**.\n5.  Follow the instructions to enter the App Password. The App Password is the 16-character code in the yellow bar on your device.\n6.  Tap **Done**.\n\nNow you can use your Google username with the generated password to authorize the extension.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s no-cost tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n\n#### Further reading & resources\n\nYou can find more information about this extension in the following articles:\n\n- [Sending Emails Using Firestore And Firebase Extensions](https://invertase.link/Y6Nu)\n\n\n\n**Configuration Parameters:**\n\n* Cloud Functions location: Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).\n\n* SMTP connection URI: A URI representing an SMTP server this extension can use to deliver email. Note that port 25 is blocked by Google Cloud Platform, so we recommend using port 587 for SMTP connections. If you're using the SMTPS protocol, we recommend using port 465. In order to keep passwords secure, it is recommended to omit the password from the connection string while using the `SMTP Password` field for entering secrets and passwords. Passwords and secrets should now be included in `SMTP password` field.\nSecure format:\n `smtps://username@gmail.com@smtp.gmail.com:465` (username only)\n `smtps://smtp.gmail.com:465` (No username and password)\nBackwards Compatible (less secure):\n `smtps://username@gmail.com:password@smtp.gmail.com:465`. (username and password)\n\n* SMTP password: User password for the SMTP server\n\n* Email documents collection: What is the path to the collection that contains the documents used to build and send the emails?\n\n* Default FROM address: The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).\n\n* Default REPLY-TO address: The email address to use as the reply-to address (if it's not specified in the added email document).\n\n* Users collection: A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection.\n\n* Templates collection: A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document.\n\n* Firestore TTL type: Do you want the firestore records to be marked with an expireAt field for a TTL policy? If \"Never\" is selected then no expireAt field will be added. Otherwise you may specify the unit of time specified by the TTL_EXPIRE_VALUE parameter. Defaults to \"Never\".\n\n* Firestore TTL value: In the units specified by TTL_EXPIRE_TYPE, how long do you want records to be ineligible for deletion by a TTL policy? This parameter requires the Firestore TTL type parameter to be set to a value other than `Never`. For example, if `Firestore TTL type` is set to `Day` then setting this parameter to `1` will specify a TTL of 1 day.\n\n\n\n**Cloud Functions:**\n\n* **processQueue:** Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.\n\n\n\n**Access Required**:\n\n\n\nThis extension will operate with the following project IAM roles:\n\n* datastore.user (Reason: Allows this extension to access Cloud Firestore to read and process added email documents.)\n","displayName":"Trigger Email","events":[{"type":"firebase.extensions.firestore-send-email.v1.onStart","description":"Occurs when the extension starts execution."},{"type":"firebase.extensions.firestore-send-email.v1.onProcessing","description":"Occurs when the extension attempts to process an email."},{"type":"firebase.extensions.firestore-send-email.v1.onRetry","description":"Occurs when the extension attempts to resend an email."},{"type":"firebase.extensions.firestore-send-email.v1.onPending","description":"Occurs when an email has a pending status."},{"type":"firebase.extensions.firestore-send-email.v1.onSuccess","description":"Occurs when the extension successfully sends an email."},{"type":"firebase.extensions.firestore-send-email.v1.onComplete","description":"Occurs when the extension completes execution."},{"type":"firebase.extensions.firestore-send-email.v1.onError","description":"Occurs when the extension fails to complete execution."}],"systemParams":[{"param":"firebaseextensions.v1beta.function/memory","label":"Function memory","type":"SELECT","description":"How much memory should be allocated to each function?","options":[{"value":"128","label":"128MB"},{"value":"256","label":"256MB"},{"value":"512","label":"512MB"},{"value":"1024","label":"1GB"},{"value":"2048","label":"2GB"},{"value":"4096","label":"4GB"},{"value":"8192","label":"8GB"}],"default":"256","advanced":true},{"param":"firebaseextensions.v1beta.function/timeoutSeconds","label":"Function timeout seconds","type":"STRING","description":"How long should functions run before timing out, in seconds (0-540)?","validationRegex":"^[1-9][0-9]{0,2}$","validationErrorMessage":"Function timeout should be an integer number of seconds, between 0 and 540","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnector","label":"VPC Connector","type":"STRING","description":"The VPC Network Connector that this cloud function can connect to. It can be either the fully-qualified URI, or the short name of the network connector resource. The format of this field is projects/*/locations/*/connectors/*.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/connectors/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnectorEgressSettings","label":"VPC Connector Egress settings","type":"SELECT","description":"Controls outgoing traffic when a VPC connector is configured","options":[{"value":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","label":"Unspecified"},{"value":"PRIVATE_RANGES_ONLY","label":"Private ranges only"},{"value":"ALL_TRAFFIC","label":"All traffic"}],"default":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","advanced":true},{"param":"firebaseextensions.v1beta.function/minInstances","label":"Minimum function instances","type":"STRING","description":"The minimum number of instances of each function to run at once (0-1000)","default":"0","validationRegex":"^[0-9]*$","validationErrorMessage":"Min instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/maxInstances","label":"Maximum function instances","type":"STRING","description":"The maximum number of instances of each function to run at once","default":"3000","validationRegex":"^[0-9]*$","validationErrorMessage":"Max instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/ingressSettings","label":"Function ingress settings","type":"SELECT","description":"Where should functions allow incoming traffic from?","options":[{"value":"ALLOW_ALL","label":"Allow all"},{"value":"ALLOW_INTERNAL_ONLY","label":"Allow internal only"},{"value":"ALLOW_INTERNAL_AND_GCLB","label":"Allow internal and GCLB"}],"advanced":true},{"param":"firebaseextensions.v1beta.function/labels","label":"Function labels","type":"STRING","description":"Do you wish to set any labels on this instance's Cloud Functions? If so, provide up to 55 labels in the format 'key1:value, key2:value'","validationRegex":"^([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63},\\s*)*([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63})$","advanced":true},{"param":"firebaseextensions.v1beta.function/kmsKeyName","label":"KMS key name","type":"STRING","description":"Do you want to use a Customer Managed Eencryption Key (CMEK) to encrypt this extension's functions? If you set this, you must also set a Docker repository encrypted by that key. See https://cloud.google.com/functions/docs/securing/cmek for more details.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/keyRings/([^/]+)/cryptoKeys/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/dockerRepository","label":"Docker repository","type":"STRING","description":"What Docker repository should be used to store function images? Default repository will be used if not set.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/repositories/([^/]+)$","advanced":true}]},"state":"PUBLISHED","hash":"7badb9bae5ecff0689c4ec1fc308836f9ce8a3296ad379bfe1bd64998058c8fe","createTime":"2023-02-08T12:01:27.117137Z","id":"0.1.22","releaseNotes":"fixed - fix typo in extension\n\nfeature - upgrade extensions to the latest firebase-admin sdk\n\nfeature - improve TTL params\n\nfeature - add TTL support\n\nfixed - read and write delivery status from inside a single transaction\n","listing":{"state":"APPROVED"},"metrics":{"activeInstallCount":"100"}},{"name":"publishers/firebase/extensions/firestore-send-email/versions/0.1.22-rc.0","ref":"firebase/firestore-send-email@0.1.22-rc.0","spec":{"specVersion":"v1beta","name":"firestore-send-email","version":"0.1.22-rc.0","description":"Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.","roles":[{"role":"datastore.user","reason":"Allows this extension to access Cloud Firestore to read and process added email documents."}],"resources":[{"name":"processQueue","type":"firebaseextensions.v1beta.function","propertiesYaml":"eventTrigger:\n  eventType: providers/cloud.firestore/eventTypes/document.write\n  resource: projects/${param:PROJECT_ID}/databases/(default)/documents/${param:MAIL_COLLECTION}/{id}\nlocation: ${param:LOCATION}\nruntime: nodejs14\n","description":"Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.","deletionPolicy":"DELETE"}],"billingRequired":true,"author":{"authorName":"Firebase","url":"https://firebase.google.com"},"contributors":[{"authorName":"Michael Bleigh","url":"https://github.com/mbleigh"},{"authorName":"Invertase","email":"oss@invertase.io","url":"https://github.com/invertase"}],"license":"Apache-2.0","releaseNotesUrl":"https://github.com/firebase/extensions/blob/master/firestore-send-email/CHANGELOG.md","sourceUrl":"https://github.com/firebase/extensions/tree/master/firestore-send-email","params":[{"param":"LOCATION","label":"Cloud Functions location","type":"SELECT","description":"Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).","required":true,"options":[{"value":"us-central1","label":"Iowa (us-central1)"},{"value":"us-east1","label":"South Carolina (us-east1)"},{"value":"us-east4","label":"Northern Virginia (us-east4)"},{"value":"us-west2","label":"Los Angeles (us-west2)"},{"value":"us-west3","label":"Salt Lake City (us-west3)"},{"value":"us-west4","label":"Las Vegas (us-west4)"},{"value":"europe-central2","label":"Warsaw (europe-central2)"},{"value":"europe-west1","label":"Belgium (europe-west1)"},{"value":"europe-west2","label":"London (europe-west2)"},{"value":"europe-west3","label":"Frankfurt (europe-west3)"},{"value":"europe-west6","label":"Zurich (europe-west6)"},{"value":"asia-east1","label":"Taiwan (asia-east1)"},{"value":"asia-east2","label":"Hong Kong (asia-east2)"},{"value":"asia-northeast1","label":"Tokyo (asia-northeast1)"},{"value":"asia-northeast2","label":"Osaka (asia-northeast2)"},{"value":"asia-northeast3","label":"Seoul (asia-northeast3)"},{"value":"asia-south1","label":"Mumbai (asia-south1)"},{"value":"asia-southeast1","label":"Singapore (asia-southeast1)"},{"value":"asia-southeast2","label":"Jakarta (asia-southeast2)"},{"value":"northamerica-northeast1","label":"Montreal (northamerica-northeast1)"},{"value":"southamerica-east1","label":"Sao Paulo (southamerica-east1)"},{"value":"australia-southeast1","label":"Sydney (australia-southeast1)"}],"default":"us-central1","immutable":true},{"param":"SMTP_CONNECTION_URI","label":"SMTP connection URI","type":"STRING","description":"A URI representing an SMTP server this extension can use to deliver email. Note that port 25 is blocked by Google Cloud Platform, so we recommend using port 587 for SMTP connections. If you're using the SMTPS protocol, we recommend using port 465. In order to keep passwords secure, it is recommended to omit the password from the connection string while using the `SMTP Password` field for entering secrets and passwords. Passwords and secrets should now be included in `SMTP password` field.\nSecure format:\n `smtps://username@gmail.com@smtp.gmail.com:465` (username only)\n `smtps://smtp.gmail.com:465` (No username and password)\nBackwards Compatible (less secure):\n `smtps://username@gmail.com:password@smtp.gmail.com:465`. (username and password)","required":true,"example":"smtps://username@smtp.hostname.com:465","validationRegex":"^(smtp[s]*://.*?:[0-9]+.*$)","validationErrorMessage":"Invalid SMTP connection URI. Must be in the form `smtp(s)://username:password@hostname:port` or `smtp(s)://username@hostname:port`."},{"param":"SMTP_PASSWORD","label":"SMTP password","type":"SECRET","description":"User password for the SMTP server"},{"param":"MAIL_COLLECTION","label":"Email documents collection","type":"STRING","description":"What is the path to the collection that contains the documents used to build and send the emails?","required":true,"default":"mail","validationRegex":"^[^/]+(/[^/]+/[^/]+)*$","validationErrorMessage":"Must be a valid Cloud Firestore collection"},{"param":"DEFAULT_FROM","label":"Default FROM address","type":"STRING","description":"The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).","required":true,"example":"foobar@example.com","validationRegex":"^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$|^.*<(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})>$","validationErrorMessage":"Must be a valid email address or valid name plus email address"},{"param":"DEFAULT_REPLY_TO","label":"Default REPLY-TO address","type":"STRING","description":"The email address to use as the reply-to address (if it's not specified in the added email document)."},{"param":"USERS_COLLECTION","label":"Users collection","type":"STRING","description":"A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection."},{"param":"TEMPLATES_COLLECTION","label":"Templates collection","type":"STRING","description":"A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document."},{"param":"TTL_EXPIRE_TYPE","label":"Firestore TTL type","type":"SELECT","description":"Do you want the firestore records to be marked with an expireAt field for a TTL policy? If \"Never\" is selected then no expireAt field will be added. Otherwise you may specify the unit of time specified by the TTL_EXPIRE_VALUE parameter. Defaults to \"Never\".","required":true,"options":[{"value":"never","label":"Never"},{"value":"hour","label":"Hour"},{"value":"day","label":"Day"},{"value":"week","label":"Week"},{"value":"month","label":"Month"},{"value":"year","label":"Year"}],"default":"never"},{"param":"TTL_EXPIRE_VALUE","label":"Firestore TTL value","type":"STRING","description":"In the units specified by TTL_EXPIRE_TYPE, how long do you want records to be ineligible for deletion by a TTL policy? This parameter requires the Firestore TTL type parameter to be set to a value other than `Never`. For example, if `Firestore TTL type` is set to `Day` then setting this parameter to `1` will specify a TTL of 1 day.","required":true,"default":"1","validationRegex":"^[1-9][0-9]*$","validationErrorMessage":"The value must be an integer value greater than zero."}],"preinstallContent":"Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Setup Google App Passwords\n\n**Google** no longer allows **Gmail** users to use their own passwords to authorize third-party apps and services. Instead, you have to use the [Sign in with App Passwords](https://support.google.com/accounts/answer/185833) service to generate a special password for each app you want to authorize. To do so:\n\n1.  Go to your [Google Account](https://myaccount.google.com/).\n2.  Select **Security**.\n3.  Under \"Signing in to Google,\" select **App Passwords**. You may need to sign in. If you don’t have this option, it might be because:\n    1.  2-Step Verification is not set up for your account.\n    2.  2-Step Verification is only set up for security keys.\n    3.  Your account is through work, school, or other organization.\n    4.  You turned on Advanced Protection.\n4.  At the bottom, choose **Select app** and choose **Other** option and then write the name of the app password (e.g. `Firebase Trigger Email Extension`) and click **Generate**.\n5.  Follow the instructions to enter the App Password. The App Password is the 16-character code in the yellow bar on your device.\n6.  Tap **Done**.\n\nNow you can use your Google username with the generated password to authorize the extension.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s no-cost tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n\n#### Further reading & resources\n\nYou can find more information about this extension in the following articles:\n\n- [Sending Emails Using Firestore And Firebase Extensions](https://invertase.link/Y6Nu)","postinstallContent":"### See it in action\n\nYou can test out this extension right away!\n\n1.  Go to your [Cloud Firestore dashboard](https://console.firebase.google.com/project/${param:PROJECT_ID}/firestore/data) in the Firebase console.\n\n1.  If it doesn't already exist, create the collection you specified during installation: `${param:MAIL_COLLECTION}`.\n\n1.  Add a document with a `to` field and a `message` field with the following content:\n\n    ```js\n    to: ['someone@example.com'],\n    message: {\n      subject: 'Hello from Firebase!',\n      text: 'This is the plaintext section of the email body.',\n      html: 'This is the <code>HTML</code> section of the email body.',\n    }\n    ```\n\n1.  In a few seconds, you'll see a `delivery` field appear in the document. The field will update as the extension processes the email.\n\n**Note:** You can also use the [Firebase Admin SDK][admin_sdk] to add a document:\n\n```js\nadmin\n  .firestore()\n  .collection(\"${param:MAIL_COLLECTION}\")\n  .add({\n    to: \"someone@example.com\",\n    message: {\n      subject: \"Hello from Firebase!\",\n      text: \"This is the plaintext section of the email body.\",\n      html: \"This is the <code>HTML</code> section of the email body.\",\n    },\n  })\n  .then(() => console.log(\"Queued email for delivery!\"));\n```\n\n### Using this extension\n\nSee the [official documentation](https://firebase.google.com/docs/extensions/official/firestore-send-email) for information on using this extension, including advanced use cases such as using Handlebars templates and managing email delivery status.\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n\n[mail_collection]: https://console.firebase.google.com/project/_/firestore/data~2F${param:MAIL_COLLECTION}\n[admin_sdk]: https://firebase.google.com/docs/admin/setup\n[amp4email]: https://amp.dev/documentation/guides-and-tutorials/learn/email-spec/amp-email-format/\n[handlebars]: https://handlebarsjs.com/\n\n### Further reading & resources\n\nYou can find more information about this extension in the following articles:\n\n- [Sending Emails Using Firestore And Firebase Extensions](https://invertase.link/Y6Nu)","readmeContent":"# Trigger Email\n\n**Author**: Firebase (**[https://firebase.google.com](https://firebase.google.com)**)\n\n**Description**: Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.\n\n\n\n**Details**: Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Setup Google App Passwords\n\n**Google** no longer allows **Gmail** users to use their own passwords to authorize third-party apps and services. Instead, you have to use the [Sign in with App Passwords](https://support.google.com/accounts/answer/185833) service to generate a special password for each app you want to authorize. To do so:\n\n1.  Go to your [Google Account](https://myaccount.google.com/).\n2.  Select **Security**.\n3.  Under \"Signing in to Google,\" select **App Passwords**. You may need to sign in. If you don’t have this option, it might be because:\n    1.  2-Step Verification is not set up for your account.\n    2.  2-Step Verification is only set up for security keys.\n    3.  Your account is through work, school, or other organization.\n    4.  You turned on Advanced Protection.\n4.  At the bottom, choose **Select app** and choose **Other** option and then write the name of the app password (e.g. `Firebase Trigger Email Extension`) and click **Generate**.\n5.  Follow the instructions to enter the App Password. The App Password is the 16-character code in the yellow bar on your device.\n6.  Tap **Done**.\n\nNow you can use your Google username with the generated password to authorize the extension.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s no-cost tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n\n#### Further reading & resources\n\nYou can find more information about this extension in the following articles:\n\n- [Sending Emails Using Firestore And Firebase Extensions](https://invertase.link/Y6Nu)\n\n\n\n**Configuration Parameters:**\n\n* Cloud Functions location: Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).\n\n* SMTP connection URI: A URI representing an SMTP server this extension can use to deliver email. Note that port 25 is blocked by Google Cloud Platform, so we recommend using port 587 for SMTP connections. If you're using the SMTPS protocol, we recommend using port 465. In order to keep passwords secure, it is recommended to omit the password from the connection string while using the `SMTP Password` field for entering secrets and passwords. Passwords and secrets should now be included in `SMTP password` field.\nSecure format:\n `smtps://username@gmail.com@smtp.gmail.com:465` (username only)\n `smtps://smtp.gmail.com:465` (No username and password)\nBackwards Compatible (less secure):\n `smtps://username@gmail.com:password@smtp.gmail.com:465`. (username and password)\n\n* SMTP password: User password for the SMTP server\n\n* Email documents collection: What is the path to the collection that contains the documents used to build and send the emails?\n\n* Default FROM address: The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).\n\n* Default REPLY-TO address: The email address to use as the reply-to address (if it's not specified in the added email document).\n\n* Users collection: A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection.\n\n* Templates collection: A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document.\n\n* Firestore TTL type: Do you want the firestore records to be marked with an expireAt field for a TTL policy? If \"Never\" is selected then no expireAt field will be added. Otherwise you may specify the unit of time specified by the TTL_EXPIRE_VALUE parameter. Defaults to \"Never\".\n\n* Firestore TTL value: In the units specified by TTL_EXPIRE_TYPE, how long do you want records to be ineligible for deletion by a TTL policy? This parameter requires the Firestore TTL type parameter to be set to a value other than `Never`. For example, if `Firestore TTL type` is set to `Day` then setting this parameter to `1` will specify a TTL of 1 day.\n\n\n\n**Cloud Functions:**\n\n* **processQueue:** Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.\n\n\n\n**Access Required**:\n\n\n\nThis extension will operate with the following project IAM roles:\n\n* datastore.user (Reason: Allows this extension to access Cloud Firestore to read and process added email documents.)\n","displayName":"Trigger Email","events":[{"type":"firebase.extensions.firestore-send-email.v1.onStart","description":"Occurs when the extension starts execution."},{"type":"firebase.extensions.firestore-send-email.v1.onProcessing","description":"Occurs when the extension attempts to process an email."},{"type":"firebase.extensions.firestore-send-email.v1.onRetry","description":"Occurs when the extension attempts to resend an email."},{"type":"firebase.extensions.firestore-send-email.v1.onPending","description":"Occurs when an email has a pending status."},{"type":"firebase.extensions.firestore-send-email.v1.onSuccess","description":"Occurs when the extension successfully sends an email."},{"type":"firebase.extensions.firestore-send-email.v1.onComplete","description":"Occurs when the extension completes execution."},{"type":"firebase.extensions.firestore-send-email.v1.onError","description":"Occurs when the extension fails to complete execution."}],"systemParams":[{"param":"firebaseextensions.v1beta.function/memory","label":"Function memory","type":"SELECT","description":"How much memory should be allocated to each function?","options":[{"value":"128","label":"128MB"},{"value":"256","label":"256MB"},{"value":"512","label":"512MB"},{"value":"1024","label":"1GB"},{"value":"2048","label":"2GB"},{"value":"4096","label":"4GB"},{"value":"8192","label":"8GB"}],"default":"256","advanced":true},{"param":"firebaseextensions.v1beta.function/timeoutSeconds","label":"Function timeout seconds","type":"STRING","description":"How long should functions run before timing out, in seconds (0-540)?","validationRegex":"^[1-9][0-9]{0,2}$","validationErrorMessage":"Function timeout should be an integer number of seconds, between 0 and 540","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnector","label":"VPC Connector","type":"STRING","description":"The VPC Network Connector that this cloud function can connect to. It can be either the fully-qualified URI, or the short name of the network connector resource. The format of this field is projects/*/locations/*/connectors/*.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/connectors/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnectorEgressSettings","label":"VPC Connector Egress settings","type":"SELECT","description":"Controls outgoing traffic when a VPC connector is configured","options":[{"value":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","label":"Unspecified"},{"value":"PRIVATE_RANGES_ONLY","label":"Private ranges only"},{"value":"ALL_TRAFFIC","label":"All traffic"}],"default":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","advanced":true},{"param":"firebaseextensions.v1beta.function/minInstances","label":"Minimum function instances","type":"STRING","description":"The minimum number of instances of each function to run at once (0-1000)","default":"0","validationRegex":"^[0-9]*$","validationErrorMessage":"Min instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/maxInstances","label":"Maximum function instances","type":"STRING","description":"The maximum number of instances of each function to run at once","default":"3000","validationRegex":"^[0-9]*$","validationErrorMessage":"Max instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/ingressSettings","label":"Function ingress settings","type":"SELECT","description":"Where should functions allow incoming traffic from?","options":[{"value":"ALLOW_ALL","label":"Allow all"},{"value":"ALLOW_INTERNAL_ONLY","label":"Allow internal only"},{"value":"ALLOW_INTERNAL_AND_GCLB","label":"Allow internal and GCLB"}],"advanced":true},{"param":"firebaseextensions.v1beta.function/labels","label":"Function labels","type":"STRING","description":"Do you wish to set any labels on this instance's Cloud Functions? If so, provide up to 55 labels in the format 'key1:value, key2:value'","validationRegex":"^([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63},\\s*)*([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63})$","advanced":true},{"param":"firebaseextensions.v1beta.function/kmsKeyName","label":"KMS key name","type":"STRING","description":"Do you want to use a Customer Managed Eencryption Key (CMEK) to encrypt this extension's functions? If you set this, you must also set a Docker repository encrypted by that key. See https://cloud.google.com/functions/docs/securing/cmek for more details.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/keyRings/([^/]+)/cryptoKeys/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/dockerRepository","label":"Docker repository","type":"STRING","description":"What Docker repository should be used to store function images? Default repository will be used if not set.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/repositories/([^/]+)$","advanced":true}]},"state":"PUBLISHED","hash":"531fd792d6b2e19ea83d7cf444eed68434a3a0d9b0617f2188a58ff5c178ac4a","createTime":"2023-02-08T10:18:21.078133Z","id":"0.1.22-rc.0","listing":{"state":"UNLISTED"}},{"name":"publishers/firebase/extensions/firestore-send-email/versions/0.1.23","ref":"firebase/firestore-send-email@0.1.23","spec":{"specVersion":"v1beta","name":"firestore-send-email","version":"0.1.23","description":"Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.","roles":[{"role":"datastore.user","reason":"Allows this extension to access Cloud Firestore to read and process added email documents."}],"resources":[{"name":"processQueue","type":"firebaseextensions.v1beta.function","propertiesYaml":"eventTrigger:\n  eventType: providers/cloud.firestore/eventTypes/document.write\n  resource: projects/${param:PROJECT_ID}/databases/(default)/documents/${param:MAIL_COLLECTION}/{id}\nlocation: ${param:LOCATION}\nruntime: nodejs14\n","description":"Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.","deletionPolicy":"DELETE"}],"billingRequired":true,"author":{"authorName":"Firebase","url":"https://firebase.google.com"},"contributors":[{"authorName":"Michael Bleigh","url":"https://github.com/mbleigh"},{"authorName":"Invertase","email":"oss@invertase.io","url":"https://github.com/invertase"}],"license":"Apache-2.0","releaseNotesUrl":"https://github.com/firebase/extensions/blob/master/firestore-send-email/CHANGELOG.md","sourceUrl":"https://github.com/firebase/extensions/tree/master/firestore-send-email","params":[{"param":"LOCATION","label":"Cloud Functions location","type":"SELECT","description":"Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).","required":true,"options":[{"value":"us-central1","label":"Iowa (us-central1)"},{"value":"us-east1","label":"South Carolina (us-east1)"},{"value":"us-east4","label":"Northern Virginia (us-east4)"},{"value":"us-west2","label":"Los Angeles (us-west2)"},{"value":"us-west3","label":"Salt Lake City (us-west3)"},{"value":"us-west4","label":"Las Vegas (us-west4)"},{"value":"europe-central2","label":"Warsaw (europe-central2)"},{"value":"europe-west1","label":"Belgium (europe-west1)"},{"value":"europe-west2","label":"London (europe-west2)"},{"value":"europe-west3","label":"Frankfurt (europe-west3)"},{"value":"europe-west6","label":"Zurich (europe-west6)"},{"value":"asia-east1","label":"Taiwan (asia-east1)"},{"value":"asia-east2","label":"Hong Kong (asia-east2)"},{"value":"asia-northeast1","label":"Tokyo (asia-northeast1)"},{"value":"asia-northeast2","label":"Osaka (asia-northeast2)"},{"value":"asia-northeast3","label":"Seoul (asia-northeast3)"},{"value":"asia-south1","label":"Mumbai (asia-south1)"},{"value":"asia-southeast1","label":"Singapore (asia-southeast1)"},{"value":"asia-southeast2","label":"Jakarta (asia-southeast2)"},{"value":"northamerica-northeast1","label":"Montreal (northamerica-northeast1)"},{"value":"southamerica-east1","label":"Sao Paulo (southamerica-east1)"},{"value":"australia-southeast1","label":"Sydney (australia-southeast1)"}],"default":"us-central1","immutable":true},{"param":"SMTP_CONNECTION_URI","label":"SMTP connection URI","type":"STRING","description":"A URI representing an SMTP server this extension can use to deliver email. Note that port 25 is blocked by Google Cloud Platform, so we recommend using port 587 for SMTP connections. If you're using the SMTPS protocol, we recommend using port 465. In order to keep passwords secure, it is recommended to omit the password from the connection string while using the `SMTP Password` field for entering secrets and passwords. Passwords and secrets should now be included in `SMTP password` field.\nSecure format:\n `smtps://username@gmail.com@smtp.gmail.com:465` (username only)\n `smtps://smtp.gmail.com:465` (No username and password)\nBackwards Compatible (less secure):\n `smtps://username@gmail.com:password@smtp.gmail.com:465`. (username and password)","required":true,"example":"smtps://username@smtp.hostname.com:465","validationRegex":"^(smtp[s]*://.*?:[0-9]+.*$)","validationErrorMessage":"Invalid SMTP connection URI. Must be in the form `smtp(s)://username:password@hostname:port` or `smtp(s)://username@hostname:port`."},{"param":"SMTP_PASSWORD","label":"SMTP password","type":"SECRET","description":"User password for the SMTP server"},{"param":"MAIL_COLLECTION","label":"Email documents collection","type":"STRING","description":"What is the path to the collection that contains the documents used to build and send the emails?","required":true,"default":"mail","validationRegex":"^[^/]+(/[^/]+/[^/]+)*$","validationErrorMessage":"Must be a valid Cloud Firestore collection"},{"param":"DEFAULT_FROM","label":"Default FROM address","type":"STRING","description":"The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).","required":true,"example":"foobar@example.com","validationRegex":"^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$|^.*<(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})>$","validationErrorMessage":"Must be a valid email address or valid name plus email address"},{"param":"DEFAULT_REPLY_TO","label":"Default REPLY-TO address","type":"STRING","description":"The email address to use as the reply-to address (if it's not specified in the added email document)."},{"param":"USERS_COLLECTION","label":"Users collection","type":"STRING","description":"A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection."},{"param":"TEMPLATES_COLLECTION","label":"Templates collection","type":"STRING","description":"A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document."},{"param":"TTL_EXPIRE_TYPE","label":"Firestore TTL type","type":"SELECT","description":"Do you want the firestore records to be marked with an expireAt field for a TTL policy? If \"Never\" is selected then no expireAt field will be added. Otherwise you may specify the unit of time specified by the TTL_EXPIRE_VALUE parameter. Defaults to \"Never\".","required":true,"options":[{"value":"never","label":"Never"},{"value":"hour","label":"Hour"},{"value":"day","label":"Day"},{"value":"week","label":"Week"},{"value":"month","label":"Month"},{"value":"year","label":"Year"}],"default":"never"},{"param":"TTL_EXPIRE_VALUE","label":"Firestore TTL value","type":"STRING","description":"In the units specified by TTL_EXPIRE_TYPE, how long do you want records to be ineligible for deletion by a TTL policy? This parameter requires the Firestore TTL type parameter to be set to a value other than `Never`. For example, if `Firestore TTL type` is set to `Day` then setting this parameter to `1` will specify a TTL of 1 day.","required":true,"default":"1","validationRegex":"^[1-9][0-9]*$","validationErrorMessage":"The value must be an integer value greater than zero."}],"preinstallContent":"Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Setup Google App Passwords\n\n**Google** no longer allows **Gmail** users to use their own passwords to authorize third-party apps and services. Instead, you have to use the [Sign in with App Passwords](https://support.google.com/accounts/answer/185833) service to generate a special password for each app you want to authorize. To do so:\n\n1.  Go to your [Google Account](https://myaccount.google.com/).\n2.  Select **Security**.\n3.  Under \"Signing in to Google,\" select **App Passwords**. You may need to sign in. If you don’t have this option, it might be because:\n    1.  2-Step Verification is not set up for your account.\n    2.  2-Step Verification is only set up for security keys.\n    3.  Your account is through work, school, or other organization.\n    4.  You turned on Advanced Protection.\n4.  At the bottom, choose **Select app** and choose **Other** option and then write the name of the app password (e.g. `Firebase Trigger Email Extension`) and click **Generate**.\n5.  Follow the instructions to enter the App Password. The App Password is the 16-character code in the yellow bar on your device.\n6.  Tap **Done**.\n\nNow you can use your Google username with the generated password to authorize the extension.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s no-cost tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n\n#### Further reading & resources\n\nYou can find more information about this extension in the following articles:\n\n- [Sending Emails Using Firestore And Firebase Extensions](https://invertase.link/Y6Nu)","postinstallContent":"### See it in action\n\nYou can test out this extension right away!\n\n1.  Go to your [Cloud Firestore dashboard](https://console.firebase.google.com/project/${param:PROJECT_ID}/firestore/data) in the Firebase console.\n\n1.  If it doesn't already exist, create the collection you specified during installation: `${param:MAIL_COLLECTION}`.\n\n1.  Add a document with a `to` field and a `message` field with the following content:\n\n    ```js\n    to: ['someone@example.com'],\n    message: {\n      subject: 'Hello from Firebase!',\n      text: 'This is the plaintext section of the email body.',\n      html: 'This is the <code>HTML</code> section of the email body.',\n    }\n    ```\n\n1.  In a few seconds, you'll see a `delivery` field appear in the document. The field will update as the extension processes the email.\n\n**Note:** You can also use the [Firebase Admin SDK][admin_sdk] to add a document:\n\n```js\nadmin\n  .firestore()\n  .collection(\"${param:MAIL_COLLECTION}\")\n  .add({\n    to: \"someone@example.com\",\n    message: {\n      subject: \"Hello from Firebase!\",\n      text: \"This is the plaintext section of the email body.\",\n      html: \"This is the <code>HTML</code> section of the email body.\",\n    },\n  })\n  .then(() => console.log(\"Queued email for delivery!\"));\n```\n\n### Using this extension\n\nSee the [official documentation](https://firebase.google.com/docs/extensions/official/firestore-send-email) for information on using this extension, including advanced use cases such as using Handlebars templates and managing email delivery status.\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n\n[mail_collection]: https://console.firebase.google.com/project/_/firestore/data~2F${param:MAIL_COLLECTION}\n[admin_sdk]: https://firebase.google.com/docs/admin/setup\n[amp4email]: https://amp.dev/documentation/guides-and-tutorials/learn/email-spec/amp-email-format/\n[handlebars]: https://handlebarsjs.com/\n\n### Further reading & resources\n\nYou can find more information about this extension in the following articles:\n\n- [Sending Emails Using Firestore And Firebase Extensions](https://invertase.link/Y6Nu)","readmeContent":"# Trigger Email\n\n**Author**: Firebase (**[https://firebase.google.com](https://firebase.google.com)**)\n\n**Description**: Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.\n\n\n\n**Details**: Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Setup Google App Passwords\n\n**Google** no longer allows **Gmail** users to use their own passwords to authorize third-party apps and services. Instead, you have to use the [Sign in with App Passwords](https://support.google.com/accounts/answer/185833) service to generate a special password for each app you want to authorize. To do so:\n\n1.  Go to your [Google Account](https://myaccount.google.com/).\n2.  Select **Security**.\n3.  Under \"Signing in to Google,\" select **App Passwords**. You may need to sign in. If you don’t have this option, it might be because:\n    1.  2-Step Verification is not set up for your account.\n    2.  2-Step Verification is only set up for security keys.\n    3.  Your account is through work, school, or other organization.\n    4.  You turned on Advanced Protection.\n4.  At the bottom, choose **Select app** and choose **Other** option and then write the name of the app password (e.g. `Firebase Trigger Email Extension`) and click **Generate**.\n5.  Follow the instructions to enter the App Password. The App Password is the 16-character code in the yellow bar on your device.\n6.  Tap **Done**.\n\nNow you can use your Google username with the generated password to authorize the extension.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s no-cost tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n\n#### Further reading & resources\n\nYou can find more information about this extension in the following articles:\n\n- [Sending Emails Using Firestore And Firebase Extensions](https://invertase.link/Y6Nu)\n\n\n\n**Configuration Parameters:**\n\n* Cloud Functions location: Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).\n\n* SMTP connection URI: A URI representing an SMTP server this extension can use to deliver email. Note that port 25 is blocked by Google Cloud Platform, so we recommend using port 587 for SMTP connections. If you're using the SMTPS protocol, we recommend using port 465. In order to keep passwords secure, it is recommended to omit the password from the connection string while using the `SMTP Password` field for entering secrets and passwords. Passwords and secrets should now be included in `SMTP password` field.\nSecure format:\n `smtps://username@gmail.com@smtp.gmail.com:465` (username only)\n `smtps://smtp.gmail.com:465` (No username and password)\nBackwards Compatible (less secure):\n `smtps://username@gmail.com:password@smtp.gmail.com:465`. (username and password)\n\n* SMTP password: User password for the SMTP server\n\n* Email documents collection: What is the path to the collection that contains the documents used to build and send the emails?\n\n* Default FROM address: The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).\n\n* Default REPLY-TO address: The email address to use as the reply-to address (if it's not specified in the added email document).\n\n* Users collection: A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection.\n\n* Templates collection: A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document.\n\n* Firestore TTL type: Do you want the firestore records to be marked with an expireAt field for a TTL policy? If \"Never\" is selected then no expireAt field will be added. Otherwise you may specify the unit of time specified by the TTL_EXPIRE_VALUE parameter. Defaults to \"Never\".\n\n* Firestore TTL value: In the units specified by TTL_EXPIRE_TYPE, how long do you want records to be ineligible for deletion by a TTL policy? This parameter requires the Firestore TTL type parameter to be set to a value other than `Never`. For example, if `Firestore TTL type` is set to `Day` then setting this parameter to `1` will specify a TTL of 1 day.\n\n\n\n**Cloud Functions:**\n\n* **processQueue:** Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.\n\n\n\n**Access Required**:\n\n\n\nThis extension will operate with the following project IAM roles:\n\n* datastore.user (Reason: Allows this extension to access Cloud Firestore to read and process added email documents.)\n","displayName":"Trigger Email","events":[{"type":"firebase.extensions.firestore-send-email.v1.onStart","description":"Occurs when the extension starts execution."},{"type":"firebase.extensions.firestore-send-email.v1.onProcessing","description":"Occurs when the extension attempts to process an email."},{"type":"firebase.extensions.firestore-send-email.v1.onRetry","description":"Occurs when the extension attempts to resend an email."},{"type":"firebase.extensions.firestore-send-email.v1.onPending","description":"Occurs when an email has a pending status."},{"type":"firebase.extensions.firestore-send-email.v1.onSuccess","description":"Occurs when the extension successfully sends an email."},{"type":"firebase.extensions.firestore-send-email.v1.onComplete","description":"Occurs when the extension completes execution."},{"type":"firebase.extensions.firestore-send-email.v1.onError","description":"Occurs when the extension fails to complete execution."}],"systemParams":[{"param":"firebaseextensions.v1beta.function/memory","label":"Function memory","type":"SELECT","description":"How much memory should be allocated to each function?","options":[{"value":"128","label":"128MB"},{"value":"256","label":"256MB"},{"value":"512","label":"512MB"},{"value":"1024","label":"1GB"},{"value":"2048","label":"2GB"},{"value":"4096","label":"4GB"},{"value":"8192","label":"8GB"}],"default":"256","advanced":true},{"param":"firebaseextensions.v1beta.function/timeoutSeconds","label":"Function timeout seconds","type":"STRING","description":"How long should functions run before timing out, in seconds (0-540)?","validationRegex":"^[1-9][0-9]{0,2}$","validationErrorMessage":"Function timeout should be an integer number of seconds, between 0 and 540","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnector","label":"VPC Connector","type":"STRING","description":"The VPC Network Connector that this cloud function can connect to. It can be either the fully-qualified URI, or the short name of the network connector resource. The format of this field is projects/*/locations/*/connectors/*.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/connectors/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnectorEgressSettings","label":"VPC Connector Egress settings","type":"SELECT","description":"Controls outgoing traffic when a VPC connector is configured","options":[{"value":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","label":"Unspecified"},{"value":"PRIVATE_RANGES_ONLY","label":"Private ranges only"},{"value":"ALL_TRAFFIC","label":"All traffic"}],"default":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","advanced":true},{"param":"firebaseextensions.v1beta.function/minInstances","label":"Minimum function instances","type":"STRING","description":"The minimum number of instances of each function to run at once (0-1000)","default":"0","validationRegex":"^[0-9]*$","validationErrorMessage":"Min instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/maxInstances","label":"Maximum function instances","type":"STRING","description":"The maximum number of instances of each function to run at once","default":"3000","validationRegex":"^[0-9]*$","validationErrorMessage":"Max instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/ingressSettings","label":"Function ingress settings","type":"SELECT","description":"Where should functions allow incoming traffic from?","options":[{"value":"ALLOW_ALL","label":"Allow all"},{"value":"ALLOW_INTERNAL_ONLY","label":"Allow internal only"},{"value":"ALLOW_INTERNAL_AND_GCLB","label":"Allow internal and GCLB"}],"advanced":true},{"param":"firebaseextensions.v1beta.function/labels","label":"Function labels","type":"STRING","description":"Do you wish to set any labels on this instance's Cloud Functions? If so, provide up to 55 labels in the format 'key1:value, key2:value'","validationRegex":"^([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63},\\s*)*([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63})$","advanced":true},{"param":"firebaseextensions.v1beta.function/kmsKeyName","label":"KMS key name","type":"STRING","description":"Do you want to use a Customer Managed Eencryption Key (CMEK) to encrypt this extension's functions? If you set this, you must also set a Docker repository encrypted by that key. See https://cloud.google.com/functions/docs/securing/cmek for more details.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/keyRings/([^/]+)/cryptoKeys/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/dockerRepository","label":"Docker repository","type":"STRING","description":"What Docker repository should be used to store function images? Default repository will be used if not set.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/repositories/([^/]+)$","advanced":true}]},"state":"PUBLISHED","hash":"11f9fb11da6c2aca1451aa1d3e406fda30f1043f85474587d6b64122e96a5552","createTime":"2023-02-15T18:36:43.304410Z","id":"0.1.23","releaseNotes":"fixed - added template check when no message exists\n","listing":{"state":"APPROVED"},"metrics":{"activeInstallCount":"600"}},{"name":"publishers/firebase/extensions/firestore-send-email/versions/0.1.23-rc.0","ref":"firebase/firestore-send-email@0.1.23-rc.0","spec":{"specVersion":"v1beta","name":"firestore-send-email","version":"0.1.23-rc.0","description":"Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.","roles":[{"role":"datastore.user","reason":"Allows this extension to access Cloud Firestore to read and process added email documents."}],"resources":[{"name":"processQueue","type":"firebaseextensions.v1beta.function","propertiesYaml":"eventTrigger:\n  eventType: providers/cloud.firestore/eventTypes/document.write\n  resource: projects/${param:PROJECT_ID}/databases/(default)/documents/${param:MAIL_COLLECTION}/{id}\nlocation: ${param:LOCATION}\nruntime: nodejs14\n","description":"Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.","deletionPolicy":"DELETE"}],"billingRequired":true,"author":{"authorName":"Firebase","url":"https://firebase.google.com"},"contributors":[{"authorName":"Michael Bleigh","url":"https://github.com/mbleigh"},{"authorName":"Invertase","email":"oss@invertase.io","url":"https://github.com/invertase"}],"license":"Apache-2.0","releaseNotesUrl":"https://github.com/firebase/extensions/blob/master/firestore-send-email/CHANGELOG.md","sourceUrl":"https://github.com/firebase/extensions/tree/master/firestore-send-email","params":[{"param":"LOCATION","label":"Cloud Functions location","type":"SELECT","description":"Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).","required":true,"options":[{"value":"us-central1","label":"Iowa (us-central1)"},{"value":"us-east1","label":"South Carolina (us-east1)"},{"value":"us-east4","label":"Northern Virginia (us-east4)"},{"value":"us-west2","label":"Los Angeles (us-west2)"},{"value":"us-west3","label":"Salt Lake City (us-west3)"},{"value":"us-west4","label":"Las Vegas (us-west4)"},{"value":"europe-central2","label":"Warsaw (europe-central2)"},{"value":"europe-west1","label":"Belgium (europe-west1)"},{"value":"europe-west2","label":"London (europe-west2)"},{"value":"europe-west3","label":"Frankfurt (europe-west3)"},{"value":"europe-west6","label":"Zurich (europe-west6)"},{"value":"asia-east1","label":"Taiwan (asia-east1)"},{"value":"asia-east2","label":"Hong Kong (asia-east2)"},{"value":"asia-northeast1","label":"Tokyo (asia-northeast1)"},{"value":"asia-northeast2","label":"Osaka (asia-northeast2)"},{"value":"asia-northeast3","label":"Seoul (asia-northeast3)"},{"value":"asia-south1","label":"Mumbai (asia-south1)"},{"value":"asia-southeast1","label":"Singapore (asia-southeast1)"},{"value":"asia-southeast2","label":"Jakarta (asia-southeast2)"},{"value":"northamerica-northeast1","label":"Montreal (northamerica-northeast1)"},{"value":"southamerica-east1","label":"Sao Paulo (southamerica-east1)"},{"value":"australia-southeast1","label":"Sydney (australia-southeast1)"}],"default":"us-central1","immutable":true},{"param":"SMTP_CONNECTION_URI","label":"SMTP connection URI","type":"STRING","description":"A URI representing an SMTP server this extension can use to deliver email. Note that port 25 is blocked by Google Cloud Platform, so we recommend using port 587 for SMTP connections. If you're using the SMTPS protocol, we recommend using port 465. In order to keep passwords secure, it is recommended to omit the password from the connection string while using the `SMTP Password` field for entering secrets and passwords. Passwords and secrets should now be included in `SMTP password` field.\nSecure format:\n `smtps://username@gmail.com@smtp.gmail.com:465` (username only)\n `smtps://smtp.gmail.com:465` (No username and password)\nBackwards Compatible (less secure):\n `smtps://username@gmail.com:password@smtp.gmail.com:465`. (username and password)","required":true,"example":"smtps://username@smtp.hostname.com:465","validationRegex":"^(smtp[s]*://.*?:[0-9]+.*$)","validationErrorMessage":"Invalid SMTP connection URI. Must be in the form `smtp(s)://username:password@hostname:port` or `smtp(s)://username@hostname:port`."},{"param":"SMTP_PASSWORD","label":"SMTP password","type":"SECRET","description":"User password for the SMTP server"},{"param":"MAIL_COLLECTION","label":"Email documents collection","type":"STRING","description":"What is the path to the collection that contains the documents used to build and send the emails?","required":true,"default":"mail","validationRegex":"^[^/]+(/[^/]+/[^/]+)*$","validationErrorMessage":"Must be a valid Cloud Firestore collection"},{"param":"DEFAULT_FROM","label":"Default FROM address","type":"STRING","description":"The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).","required":true,"example":"foobar@example.com","validationRegex":"^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$|^.*<(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})>$","validationErrorMessage":"Must be a valid email address or valid name plus email address"},{"param":"DEFAULT_REPLY_TO","label":"Default REPLY-TO address","type":"STRING","description":"The email address to use as the reply-to address (if it's not specified in the added email document)."},{"param":"USERS_COLLECTION","label":"Users collection","type":"STRING","description":"A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection."},{"param":"TEMPLATES_COLLECTION","label":"Templates collection","type":"STRING","description":"A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document."},{"param":"TTL_EXPIRE_TYPE","label":"Firestore TTL type","type":"SELECT","description":"Do you want the firestore records to be marked with an expireAt field for a TTL policy? If \"Never\" is selected then no expireAt field will be added. Otherwise you may specify the unit of time specified by the TTL_EXPIRE_VALUE parameter. Defaults to \"Never\".","required":true,"options":[{"value":"never","label":"Never"},{"value":"hour","label":"Hour"},{"value":"day","label":"Day"},{"value":"week","label":"Week"},{"value":"month","label":"Month"},{"value":"year","label":"Year"}],"default":"never"},{"param":"TTL_EXPIRE_VALUE","label":"Firestore TTL value","type":"STRING","description":"In the units specified by TTL_EXPIRE_TYPE, how long do you want records to be ineligible for deletion by a TTL policy? This parameter requires the Firestore TTL type parameter to be set to a value other than `Never`. For example, if `Firestore TTL type` is set to `Day` then setting this parameter to `1` will specify a TTL of 1 day.","required":true,"default":"1","validationRegex":"^[1-9][0-9]*$","validationErrorMessage":"The value must be an integer value greater than zero."}],"preinstallContent":"Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Setup Google App Passwords\n\n**Google** no longer allows **Gmail** users to use their own passwords to authorize third-party apps and services. Instead, you have to use the [Sign in with App Passwords](https://support.google.com/accounts/answer/185833) service to generate a special password for each app you want to authorize. To do so:\n\n1.  Go to your [Google Account](https://myaccount.google.com/).\n2.  Select **Security**.\n3.  Under \"Signing in to Google,\" select **App Passwords**. You may need to sign in. If you don’t have this option, it might be because:\n    1.  2-Step Verification is not set up for your account.\n    2.  2-Step Verification is only set up for security keys.\n    3.  Your account is through work, school, or other organization.\n    4.  You turned on Advanced Protection.\n4.  At the bottom, choose **Select app** and choose **Other** option and then write the name of the app password (e.g. `Firebase Trigger Email Extension`) and click **Generate**.\n5.  Follow the instructions to enter the App Password. The App Password is the 16-character code in the yellow bar on your device.\n6.  Tap **Done**.\n\nNow you can use your Google username with the generated password to authorize the extension.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s no-cost tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n\n#### Further reading & resources\n\nYou can find more information about this extension in the following articles:\n\n- [Sending Emails Using Firestore And Firebase Extensions](https://invertase.link/Y6Nu)","postinstallContent":"### See it in action\n\nYou can test out this extension right away!\n\n1.  Go to your [Cloud Firestore dashboard](https://console.firebase.google.com/project/${param:PROJECT_ID}/firestore/data) in the Firebase console.\n\n1.  If it doesn't already exist, create the collection you specified during installation: `${param:MAIL_COLLECTION}`.\n\n1.  Add a document with a `to` field and a `message` field with the following content:\n\n    ```js\n    to: ['someone@example.com'],\n    message: {\n      subject: 'Hello from Firebase!',\n      text: 'This is the plaintext section of the email body.',\n      html: 'This is the <code>HTML</code> section of the email body.',\n    }\n    ```\n\n1.  In a few seconds, you'll see a `delivery` field appear in the document. The field will update as the extension processes the email.\n\n**Note:** You can also use the [Firebase Admin SDK][admin_sdk] to add a document:\n\n```js\nadmin\n  .firestore()\n  .collection(\"${param:MAIL_COLLECTION}\")\n  .add({\n    to: \"someone@example.com\",\n    message: {\n      subject: \"Hello from Firebase!\",\n      text: \"This is the plaintext section of the email body.\",\n      html: \"This is the <code>HTML</code> section of the email body.\",\n    },\n  })\n  .then(() => console.log(\"Queued email for delivery!\"));\n```\n\n### Using this extension\n\nSee the [official documentation](https://firebase.google.com/docs/extensions/official/firestore-send-email) for information on using this extension, including advanced use cases such as using Handlebars templates and managing email delivery status.\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n\n[mail_collection]: https://console.firebase.google.com/project/_/firestore/data~2F${param:MAIL_COLLECTION}\n[admin_sdk]: https://firebase.google.com/docs/admin/setup\n[amp4email]: https://amp.dev/documentation/guides-and-tutorials/learn/email-spec/amp-email-format/\n[handlebars]: https://handlebarsjs.com/\n\n### Further reading & resources\n\nYou can find more information about this extension in the following articles:\n\n- [Sending Emails Using Firestore And Firebase Extensions](https://invertase.link/Y6Nu)","readmeContent":"# Trigger Email\n\n**Author**: Firebase (**[https://firebase.google.com](https://firebase.google.com)**)\n\n**Description**: Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.\n\n\n\n**Details**: Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Setup Google App Passwords\n\n**Google** no longer allows **Gmail** users to use their own passwords to authorize third-party apps and services. Instead, you have to use the [Sign in with App Passwords](https://support.google.com/accounts/answer/185833) service to generate a special password for each app you want to authorize. To do so:\n\n1.  Go to your [Google Account](https://myaccount.google.com/).\n2.  Select **Security**.\n3.  Under \"Signing in to Google,\" select **App Passwords**. You may need to sign in. If you don’t have this option, it might be because:\n    1.  2-Step Verification is not set up for your account.\n    2.  2-Step Verification is only set up for security keys.\n    3.  Your account is through work, school, or other organization.\n    4.  You turned on Advanced Protection.\n4.  At the bottom, choose **Select app** and choose **Other** option and then write the name of the app password (e.g. `Firebase Trigger Email Extension`) and click **Generate**.\n5.  Follow the instructions to enter the App Password. The App Password is the 16-character code in the yellow bar on your device.\n6.  Tap **Done**.\n\nNow you can use your Google username with the generated password to authorize the extension.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s no-cost tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n\n#### Further reading & resources\n\nYou can find more information about this extension in the following articles:\n\n- [Sending Emails Using Firestore And Firebase Extensions](https://invertase.link/Y6Nu)\n\n\n\n**Configuration Parameters:**\n\n* Cloud Functions location: Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).\n\n* SMTP connection URI: A URI representing an SMTP server this extension can use to deliver email. Note that port 25 is blocked by Google Cloud Platform, so we recommend using port 587 for SMTP connections. If you're using the SMTPS protocol, we recommend using port 465. In order to keep passwords secure, it is recommended to omit the password from the connection string while using the `SMTP Password` field for entering secrets and passwords. Passwords and secrets should now be included in `SMTP password` field.\nSecure format:\n `smtps://username@gmail.com@smtp.gmail.com:465` (username only)\n `smtps://smtp.gmail.com:465` (No username and password)\nBackwards Compatible (less secure):\n `smtps://username@gmail.com:password@smtp.gmail.com:465`. (username and password)\n\n* SMTP password: User password for the SMTP server\n\n* Email documents collection: What is the path to the collection that contains the documents used to build and send the emails?\n\n* Default FROM address: The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).\n\n* Default REPLY-TO address: The email address to use as the reply-to address (if it's not specified in the added email document).\n\n* Users collection: A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection.\n\n* Templates collection: A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document.\n\n* Firestore TTL type: Do you want the firestore records to be marked with an expireAt field for a TTL policy? If \"Never\" is selected then no expireAt field will be added. Otherwise you may specify the unit of time specified by the TTL_EXPIRE_VALUE parameter. Defaults to \"Never\".\n\n* Firestore TTL value: In the units specified by TTL_EXPIRE_TYPE, how long do you want records to be ineligible for deletion by a TTL policy? This parameter requires the Firestore TTL type parameter to be set to a value other than `Never`. For example, if `Firestore TTL type` is set to `Day` then setting this parameter to `1` will specify a TTL of 1 day.\n\n\n\n**Cloud Functions:**\n\n* **processQueue:** Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.\n\n\n\n**Access Required**:\n\n\n\nThis extension will operate with the following project IAM roles:\n\n* datastore.user (Reason: Allows this extension to access Cloud Firestore to read and process added email documents.)\n","displayName":"Trigger Email","events":[{"type":"firebase.extensions.firestore-send-email.v1.onStart","description":"Occurs when the extension starts execution."},{"type":"firebase.extensions.firestore-send-email.v1.onProcessing","description":"Occurs when the extension attempts to process an email."},{"type":"firebase.extensions.firestore-send-email.v1.onRetry","description":"Occurs when the extension attempts to resend an email."},{"type":"firebase.extensions.firestore-send-email.v1.onPending","description":"Occurs when an email has a pending status."},{"type":"firebase.extensions.firestore-send-email.v1.onSuccess","description":"Occurs when the extension successfully sends an email."},{"type":"firebase.extensions.firestore-send-email.v1.onComplete","description":"Occurs when the extension completes execution."},{"type":"firebase.extensions.firestore-send-email.v1.onError","description":"Occurs when the extension fails to complete execution."}],"systemParams":[{"param":"firebaseextensions.v1beta.function/memory","label":"Function memory","type":"SELECT","description":"How much memory should be allocated to each function?","options":[{"value":"128","label":"128MB"},{"value":"256","label":"256MB"},{"value":"512","label":"512MB"},{"value":"1024","label":"1GB"},{"value":"2048","label":"2GB"},{"value":"4096","label":"4GB"},{"value":"8192","label":"8GB"}],"default":"256","advanced":true},{"param":"firebaseextensions.v1beta.function/timeoutSeconds","label":"Function timeout seconds","type":"STRING","description":"How long should functions run before timing out, in seconds (0-540)?","validationRegex":"^[1-9][0-9]{0,2}$","validationErrorMessage":"Function timeout should be an integer number of seconds, between 0 and 540","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnector","label":"VPC Connector","type":"STRING","description":"The VPC Network Connector that this cloud function can connect to. It can be either the fully-qualified URI, or the short name of the network connector resource. The format of this field is projects/*/locations/*/connectors/*.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/connectors/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnectorEgressSettings","label":"VPC Connector Egress settings","type":"SELECT","description":"Controls outgoing traffic when a VPC connector is configured","options":[{"value":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","label":"Unspecified"},{"value":"PRIVATE_RANGES_ONLY","label":"Private ranges only"},{"value":"ALL_TRAFFIC","label":"All traffic"}],"default":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","advanced":true},{"param":"firebaseextensions.v1beta.function/minInstances","label":"Minimum function instances","type":"STRING","description":"The minimum number of instances of each function to run at once (0-1000)","default":"0","validationRegex":"^[0-9]*$","validationErrorMessage":"Min instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/maxInstances","label":"Maximum function instances","type":"STRING","description":"The maximum number of instances of each function to run at once","default":"3000","validationRegex":"^[0-9]*$","validationErrorMessage":"Max instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/ingressSettings","label":"Function ingress settings","type":"SELECT","description":"Where should functions allow incoming traffic from?","options":[{"value":"ALLOW_ALL","label":"Allow all"},{"value":"ALLOW_INTERNAL_ONLY","label":"Allow internal only"},{"value":"ALLOW_INTERNAL_AND_GCLB","label":"Allow internal and GCLB"}],"advanced":true},{"param":"firebaseextensions.v1beta.function/labels","label":"Function labels","type":"STRING","description":"Do you wish to set any labels on this instance's Cloud Functions? If so, provide up to 55 labels in the format 'key1:value, key2:value'","validationRegex":"^([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63},\\s*)*([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63})$","advanced":true},{"param":"firebaseextensions.v1beta.function/kmsKeyName","label":"KMS key name","type":"STRING","description":"Do you want to use a Customer Managed Eencryption Key (CMEK) to encrypt this extension's functions? If you set this, you must also set a Docker repository encrypted by that key. See https://cloud.google.com/functions/docs/securing/cmek for more details.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/keyRings/([^/]+)/cryptoKeys/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/dockerRepository","label":"Docker repository","type":"STRING","description":"What Docker repository should be used to store function images? Default repository will be used if not set.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/repositories/([^/]+)$","advanced":true}]},"state":"PUBLISHED","hash":"c4b320b281e0db3a1a551e3048fface50be3de53e2eaa0dd25ae681822641620","createTime":"2023-02-15T16:24:57.936525Z","id":"0.1.23-rc.0","listing":{"state":"UNLISTED"}},{"name":"publishers/firebase/extensions/firestore-send-email/versions/0.1.24","ref":"firebase/firestore-send-email@0.1.24","spec":{"specVersion":"v1beta","name":"firestore-send-email","version":"0.1.24","description":"Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.","roles":[{"role":"datastore.user","reason":"Allows this extension to access Cloud Firestore to read and process added email documents."}],"resources":[{"name":"processQueue","type":"firebaseextensions.v1beta.function","propertiesYaml":"eventTrigger:\n  eventType: providers/cloud.firestore/eventTypes/document.write\n  resource: projects/${param:PROJECT_ID}/databases/(default)/documents/${param:MAIL_COLLECTION}/{id}\nlocation: ${param:LOCATION}\nruntime: nodejs14\n","description":"Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.","deletionPolicy":"DELETE"}],"billingRequired":true,"author":{"authorName":"Firebase","url":"https://firebase.google.com"},"contributors":[{"authorName":"Michael Bleigh","url":"https://github.com/mbleigh"},{"authorName":"Invertase","email":"oss@invertase.io","url":"https://github.com/invertase"}],"license":"Apache-2.0","releaseNotesUrl":"https://github.com/firebase/extensions/blob/master/firestore-send-email/CHANGELOG.md","sourceUrl":"https://github.com/firebase/extensions/tree/master/firestore-send-email","params":[{"param":"LOCATION","label":"Cloud Functions location","type":"SELECT","description":"Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).","required":true,"options":[{"value":"us-central1","label":"Iowa (us-central1)"},{"value":"us-east1","label":"South Carolina (us-east1)"},{"value":"us-east4","label":"Northern Virginia (us-east4)"},{"value":"us-west2","label":"Los Angeles (us-west2)"},{"value":"us-west3","label":"Salt Lake City (us-west3)"},{"value":"us-west4","label":"Las Vegas (us-west4)"},{"value":"europe-central2","label":"Warsaw (europe-central2)"},{"value":"europe-west1","label":"Belgium (europe-west1)"},{"value":"europe-west2","label":"London (europe-west2)"},{"value":"europe-west3","label":"Frankfurt (europe-west3)"},{"value":"europe-west6","label":"Zurich (europe-west6)"},{"value":"asia-east1","label":"Taiwan (asia-east1)"},{"value":"asia-east2","label":"Hong Kong (asia-east2)"},{"value":"asia-northeast1","label":"Tokyo (asia-northeast1)"},{"value":"asia-northeast2","label":"Osaka (asia-northeast2)"},{"value":"asia-northeast3","label":"Seoul (asia-northeast3)"},{"value":"asia-south1","label":"Mumbai (asia-south1)"},{"value":"asia-southeast1","label":"Singapore (asia-southeast1)"},{"value":"asia-southeast2","label":"Jakarta (asia-southeast2)"},{"value":"northamerica-northeast1","label":"Montreal (northamerica-northeast1)"},{"value":"southamerica-east1","label":"Sao Paulo (southamerica-east1)"},{"value":"australia-southeast1","label":"Sydney (australia-southeast1)"}],"default":"us-central1","immutable":true},{"param":"SMTP_CONNECTION_URI","label":"SMTP connection URI","type":"STRING","description":"A URI representing an SMTP server this extension can use to deliver email. Note that port 25 is blocked by Google Cloud Platform, so we recommend using port 587 for SMTP connections. If you're using the SMTPS protocol, we recommend using port 465. In order to keep passwords secure, it is recommended to omit the password from the connection string while using the `SMTP Password` field for entering secrets and passwords. Passwords and secrets should now be included in `SMTP password` field.\nSecure format:\n `smtps://username@gmail.com@smtp.gmail.com:465` (username only)\n `smtps://smtp.gmail.com:465` (No username and password)\nBackwards Compatible (less secure):\n `smtps://username@gmail.com:password@smtp.gmail.com:465`. (username and password)","required":true,"example":"smtps://username@smtp.hostname.com:465","validationRegex":"^(smtp[s]*://.*?:[0-9]+.*$)","validationErrorMessage":"Invalid SMTP connection URI. Must be in the form `smtp(s)://username:password@hostname:port` or `smtp(s)://username@hostname:port`."},{"param":"SMTP_PASSWORD","label":"SMTP password","type":"SECRET","description":"User password for the SMTP server"},{"param":"MAIL_COLLECTION","label":"Email documents collection","type":"STRING","description":"What is the path to the collection that contains the documents used to build and send the emails?","required":true,"default":"mail","validationRegex":"^[^/]+(/[^/]+/[^/]+)*$","validationErrorMessage":"Must be a valid Cloud Firestore collection"},{"param":"DEFAULT_FROM","label":"Default FROM address","type":"STRING","description":"The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).","required":true,"example":"foobar@example.com","validationRegex":"^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$|^.*<(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})>$","validationErrorMessage":"Must be a valid email address or valid name plus email address"},{"param":"DEFAULT_REPLY_TO","label":"Default REPLY-TO address","type":"STRING","description":"The email address to use as the reply-to address (if it's not specified in the added email document)."},{"param":"USERS_COLLECTION","label":"Users collection","type":"STRING","description":"A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection."},{"param":"TEMPLATES_COLLECTION","label":"Templates collection","type":"STRING","description":"A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document."},{"param":"TTL_EXPIRE_TYPE","label":"Firestore TTL type","type":"SELECT","description":"Do you want the firestore records to be marked with an expireAt field for a TTL policy? If \"Never\" is selected then no expireAt field will be added. Otherwise you may specify the unit of time specified by the TTL_EXPIRE_VALUE parameter. Defaults to \"Never\".","required":true,"options":[{"value":"never","label":"Never"},{"value":"hour","label":"Hour"},{"value":"day","label":"Day"},{"value":"week","label":"Week"},{"value":"month","label":"Month"},{"value":"year","label":"Year"}],"default":"never"},{"param":"TTL_EXPIRE_VALUE","label":"Firestore TTL value","type":"STRING","description":"In the units specified by TTL_EXPIRE_TYPE, how long do you want records to be ineligible for deletion by a TTL policy? This parameter requires the Firestore TTL type parameter to be set to a value other than `Never`. For example, if `Firestore TTL type` is set to `Day` then setting this parameter to `1` will specify a TTL of 1 day.","required":true,"default":"1","validationRegex":"^[1-9][0-9]*$","validationErrorMessage":"The value must be an integer value greater than zero."}],"preinstallContent":"Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Setup Google App Passwords\n\n**Google** no longer allows **Gmail** users to use their own passwords to authorize third-party apps and services. Instead, you have to use the [Sign in with App Passwords](https://support.google.com/accounts/answer/185833) service to generate a special password for each app you want to authorize. To do so:\n\n1.  Go to your [Google Account](https://myaccount.google.com/).\n2.  Select **Security**.\n3.  Under \"Signing in to Google,\" select **App Passwords**. You may need to sign in. If you don’t have this option, it might be because:\n    1.  2-Step Verification is not set up for your account.\n    2.  2-Step Verification is only set up for security keys.\n    3.  Your account is through work, school, or other organization.\n    4.  You turned on Advanced Protection.\n4.  At the bottom, choose **Select app** and choose **Other** option and then write the name of the app password (e.g. `Firebase Trigger Email from Firestore Extension`) and click **Generate**.\n5.  Follow the instructions to enter the App Password. The App Password is the 16-character code in the yellow bar on your device.\n6.  Tap **Done**.\n\nNow you can use your Google username with the generated password to authorize the extension.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s no-cost tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n\n#### Further reading & resources\n\nYou can find more information about this extension in the following articles:\n\n- [Sending Emails Using Firestore And Firebase Extensions](https://invertase.link/Y6Nu)","postinstallContent":"### See it in action\n\nYou can test out this extension right away!\n\n1.  Go to your [Cloud Firestore dashboard](https://console.firebase.google.com/project/${param:PROJECT_ID}/firestore/data) in the Firebase console.\n\n1.  If it doesn't already exist, create the collection you specified during installation: `${param:MAIL_COLLECTION}`.\n\n1.  Add a document with a `to` field and a `message` field with the following content:\n\n    ```js\n    to: ['someone@example.com'],\n    message: {\n      subject: 'Hello from Firebase!',\n      text: 'This is the plaintext section of the email body.',\n      html: 'This is the <code>HTML</code> section of the email body.',\n    }\n    ```\n\n1.  In a few seconds, you'll see a `delivery` field appear in the document. The field will update as the extension processes the email.\n\n**Note:** You can also use the [Firebase Admin SDK][admin_sdk] to add a document:\n\n```js\nadmin\n  .firestore()\n  .collection(\"${param:MAIL_COLLECTION}\")\n  .add({\n    to: \"someone@example.com\",\n    message: {\n      subject: \"Hello from Firebase!\",\n      text: \"This is the plaintext section of the email body.\",\n      html: \"This is the <code>HTML</code> section of the email body.\",\n    },\n  })\n  .then(() => console.log(\"Queued email for delivery!\"));\n```\n\n### Using this extension\n\nSee the [official documentation](https://firebase.google.com/docs/extensions/official/firestore-send-email) for information on using this extension, including advanced use cases such as using Handlebars templates and managing email delivery status.\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n\n[mail_collection]: https://console.firebase.google.com/project/_/firestore/data~2F${param:MAIL_COLLECTION}\n[admin_sdk]: https://firebase.google.com/docs/admin/setup\n[amp4email]: https://amp.dev/documentation/guides-and-tutorials/learn/email-spec/amp-email-format/\n[handlebars]: https://handlebarsjs.com/\n\n### Further reading & resources\n\nYou can find more information about this extension in the following articles:\n\n- [Sending Emails Using Firestore And Firebase Extensions](https://invertase.link/Y6Nu)","readmeContent":"# Trigger Email from Firestore\n\n**Author**: Firebase (**[https://firebase.google.com](https://firebase.google.com)**)\n\n**Description**: Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.\n\n\n\n**Details**: Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Setup Google App Passwords\n\n**Google** no longer allows **Gmail** users to use their own passwords to authorize third-party apps and services. Instead, you have to use the [Sign in with App Passwords](https://support.google.com/accounts/answer/185833) service to generate a special password for each app you want to authorize. To do so:\n\n1.  Go to your [Google Account](https://myaccount.google.com/).\n2.  Select **Security**.\n3.  Under \"Signing in to Google,\" select **App Passwords**. You may need to sign in. If you don’t have this option, it might be because:\n    1.  2-Step Verification is not set up for your account.\n    2.  2-Step Verification is only set up for security keys.\n    3.  Your account is through work, school, or other organization.\n    4.  You turned on Advanced Protection.\n4.  At the bottom, choose **Select app** and choose **Other** option and then write the name of the app password (e.g. `Firebase Trigger Email from Firestore Extension`) and click **Generate**.\n5.  Follow the instructions to enter the App Password. The App Password is the 16-character code in the yellow bar on your device.\n6.  Tap **Done**.\n\nNow you can use your Google username with the generated password to authorize the extension.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s no-cost tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n\n#### Further reading & resources\n\nYou can find more information about this extension in the following articles:\n\n- [Sending Emails Using Firestore And Firebase Extensions](https://invertase.link/Y6Nu)\n\n\n\n**Configuration Parameters:**\n\n* Cloud Functions location: Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).\n\n* SMTP connection URI: A URI representing an SMTP server this extension can use to deliver email. Note that port 25 is blocked by Google Cloud Platform, so we recommend using port 587 for SMTP connections. If you're using the SMTPS protocol, we recommend using port 465. In order to keep passwords secure, it is recommended to omit the password from the connection string while using the `SMTP Password` field for entering secrets and passwords. Passwords and secrets should now be included in `SMTP password` field.\nSecure format:\n `smtps://username@gmail.com@smtp.gmail.com:465` (username only)\n `smtps://smtp.gmail.com:465` (No username and password)\nBackwards Compatible (less secure):\n `smtps://username@gmail.com:password@smtp.gmail.com:465`. (username and password)\n\n* SMTP password: User password for the SMTP server\n\n* Email documents collection: What is the path to the collection that contains the documents used to build and send the emails?\n\n* Default FROM address: The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).\n\n* Default REPLY-TO address: The email address to use as the reply-to address (if it's not specified in the added email document).\n\n* Users collection: A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection.\n\n* Templates collection: A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document.\n\n* Firestore TTL type: Do you want the firestore records to be marked with an expireAt field for a TTL policy? If \"Never\" is selected then no expireAt field will be added. Otherwise you may specify the unit of time specified by the TTL_EXPIRE_VALUE parameter. Defaults to \"Never\".\n\n* Firestore TTL value: In the units specified by TTL_EXPIRE_TYPE, how long do you want records to be ineligible for deletion by a TTL policy? This parameter requires the Firestore TTL type parameter to be set to a value other than `Never`. For example, if `Firestore TTL type` is set to `Day` then setting this parameter to `1` will specify a TTL of 1 day.\n\n\n\n**Cloud Functions:**\n\n* **processQueue:** Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.\n\n\n\n**Access Required**:\n\n\n\nThis extension will operate with the following project IAM roles:\n\n* datastore.user (Reason: Allows this extension to access Cloud Firestore to read and process added email documents.)\n","displayName":"Trigger Email from Firestore","events":[{"type":"firebase.extensions.firestore-send-email.v1.onStart","description":"Occurs when the extension starts execution."},{"type":"firebase.extensions.firestore-send-email.v1.onProcessing","description":"Occurs when the extension attempts to process an email."},{"type":"firebase.extensions.firestore-send-email.v1.onRetry","description":"Occurs when the extension attempts to resend an email."},{"type":"firebase.extensions.firestore-send-email.v1.onPending","description":"Occurs when an email has a pending status."},{"type":"firebase.extensions.firestore-send-email.v1.onSuccess","description":"Occurs when the extension successfully sends an email."},{"type":"firebase.extensions.firestore-send-email.v1.onComplete","description":"Occurs when the extension completes execution."},{"type":"firebase.extensions.firestore-send-email.v1.onError","description":"Occurs when the extension fails to complete execution."}],"systemParams":[{"param":"firebaseextensions.v1beta.function/memory","label":"Function memory","type":"SELECT","description":"How much memory should be allocated to each function?","options":[{"value":"128","label":"128MB"},{"value":"256","label":"256MB"},{"value":"512","label":"512MB"},{"value":"1024","label":"1GB"},{"value":"2048","label":"2GB"},{"value":"4096","label":"4GB"},{"value":"8192","label":"8GB"}],"default":"256","advanced":true},{"param":"firebaseextensions.v1beta.function/timeoutSeconds","label":"Function timeout seconds","type":"STRING","description":"How long should functions run before timing out, in seconds (0-540)?","validationRegex":"^[1-9][0-9]{0,2}$","validationErrorMessage":"Function timeout should be an integer number of seconds, between 0 and 540","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnector","label":"VPC Connector","type":"STRING","description":"The VPC Network Connector that this cloud function can connect to. It can be either the fully-qualified URI, or the short name of the network connector resource. The format of this field is projects/*/locations/*/connectors/*.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/connectors/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnectorEgressSettings","label":"VPC Connector Egress settings","type":"SELECT","description":"Controls outgoing traffic when a VPC connector is configured","options":[{"value":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","label":"Unspecified"},{"value":"PRIVATE_RANGES_ONLY","label":"Private ranges only"},{"value":"ALL_TRAFFIC","label":"All traffic"}],"default":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","advanced":true},{"param":"firebaseextensions.v1beta.function/minInstances","label":"Minimum function instances","type":"STRING","description":"The minimum number of instances of each function to run at once (0-1000)","default":"0","validationRegex":"^[0-9]*$","validationErrorMessage":"Min instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/maxInstances","label":"Maximum function instances","type":"STRING","description":"The maximum number of instances of each function to run at once","default":"3000","validationRegex":"^[0-9]*$","validationErrorMessage":"Max instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/ingressSettings","label":"Function ingress settings","type":"SELECT","description":"Where should functions allow incoming traffic from?","options":[{"value":"ALLOW_ALL","label":"Allow all"},{"value":"ALLOW_INTERNAL_ONLY","label":"Allow internal only"},{"value":"ALLOW_INTERNAL_AND_GCLB","label":"Allow internal and GCLB"}],"advanced":true},{"param":"firebaseextensions.v1beta.function/labels","label":"Function labels","type":"STRING","description":"Do you wish to set any labels on this instance's Cloud Functions? If so, provide up to 55 labels in the format 'key1:value, key2:value'","validationRegex":"^([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63},\\s*)*([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63})$","advanced":true},{"param":"firebaseextensions.v1beta.function/kmsKeyName","label":"KMS key name","type":"STRING","description":"Do you want to use a Customer Managed Eencryption Key (CMEK) to encrypt this extension's functions? If you set this, you must also set a Docker repository encrypted by that key. See https://cloud.google.com/functions/docs/securing/cmek for more details.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/keyRings/([^/]+)/cryptoKeys/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/dockerRepository","label":"Docker repository","type":"STRING","description":"What Docker repository should be used to store function images? Default repository will be used if not set.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/repositories/([^/]+)$","advanced":true}]},"state":"PUBLISHED","hash":"b52654fb53fc590ab91fa131c8ba3fbd2ac34297fab29cbbdb925e2490b799fc","createTime":"2023-03-17T16:19:59.829529Z","id":"0.1.24","releaseNotes":"fixed - dont return early\n\nfixed - moved warning about no message and checked if templates are referenced\n","listing":{"state":"APPROVED"},"metrics":{"activeInstallCount":"400"}},{"name":"publishers/firebase/extensions/firestore-send-email/versions/0.1.24-rc.0","ref":"firebase/firestore-send-email@0.1.24-rc.0","spec":{"specVersion":"v1beta","name":"firestore-send-email","version":"0.1.24-rc.0","description":"Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.","roles":[{"role":"datastore.user","reason":"Allows this extension to access Cloud Firestore to read and process added email documents."}],"resources":[{"name":"processQueue","type":"firebaseextensions.v1beta.function","propertiesYaml":"eventTrigger:\n  eventType: providers/cloud.firestore/eventTypes/document.write\n  resource: projects/${param:PROJECT_ID}/databases/(default)/documents/${param:MAIL_COLLECTION}/{id}\nlocation: ${param:LOCATION}\nruntime: nodejs14\n","description":"Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.","deletionPolicy":"DELETE"}],"billingRequired":true,"author":{"authorName":"Firebase","url":"https://firebase.google.com"},"contributors":[{"authorName":"Michael Bleigh","url":"https://github.com/mbleigh"},{"authorName":"Invertase","email":"oss@invertase.io","url":"https://github.com/invertase"}],"license":"Apache-2.0","releaseNotesUrl":"https://github.com/firebase/extensions/blob/master/firestore-send-email/CHANGELOG.md","sourceUrl":"https://github.com/firebase/extensions/tree/master/firestore-send-email","params":[{"param":"LOCATION","label":"Cloud Functions location","type":"SELECT","description":"Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).","required":true,"options":[{"value":"us-central1","label":"Iowa (us-central1)"},{"value":"us-east1","label":"South Carolina (us-east1)"},{"value":"us-east4","label":"Northern Virginia (us-east4)"},{"value":"us-west2","label":"Los Angeles (us-west2)"},{"value":"us-west3","label":"Salt Lake City (us-west3)"},{"value":"us-west4","label":"Las Vegas (us-west4)"},{"value":"europe-central2","label":"Warsaw (europe-central2)"},{"value":"europe-west1","label":"Belgium (europe-west1)"},{"value":"europe-west2","label":"London (europe-west2)"},{"value":"europe-west3","label":"Frankfurt (europe-west3)"},{"value":"europe-west6","label":"Zurich (europe-west6)"},{"value":"asia-east1","label":"Taiwan (asia-east1)"},{"value":"asia-east2","label":"Hong Kong (asia-east2)"},{"value":"asia-northeast1","label":"Tokyo (asia-northeast1)"},{"value":"asia-northeast2","label":"Osaka (asia-northeast2)"},{"value":"asia-northeast3","label":"Seoul (asia-northeast3)"},{"value":"asia-south1","label":"Mumbai (asia-south1)"},{"value":"asia-southeast1","label":"Singapore (asia-southeast1)"},{"value":"asia-southeast2","label":"Jakarta (asia-southeast2)"},{"value":"northamerica-northeast1","label":"Montreal (northamerica-northeast1)"},{"value":"southamerica-east1","label":"Sao Paulo (southamerica-east1)"},{"value":"australia-southeast1","label":"Sydney (australia-southeast1)"}],"default":"us-central1","immutable":true},{"param":"SMTP_CONNECTION_URI","label":"SMTP connection URI","type":"STRING","description":"A URI representing an SMTP server this extension can use to deliver email. Note that port 25 is blocked by Google Cloud Platform, so we recommend using port 587 for SMTP connections. If you're using the SMTPS protocol, we recommend using port 465. In order to keep passwords secure, it is recommended to omit the password from the connection string while using the `SMTP Password` field for entering secrets and passwords. Passwords and secrets should now be included in `SMTP password` field.\nSecure format:\n `smtps://username@gmail.com@smtp.gmail.com:465` (username only)\n `smtps://smtp.gmail.com:465` (No username and password)\nBackwards Compatible (less secure):\n `smtps://username@gmail.com:password@smtp.gmail.com:465`. (username and password)","required":true,"example":"smtps://username@smtp.hostname.com:465","validationRegex":"^(smtp[s]*://.*?:[0-9]+.*$)","validationErrorMessage":"Invalid SMTP connection URI. Must be in the form `smtp(s)://username:password@hostname:port` or `smtp(s)://username@hostname:port`."},{"param":"SMTP_PASSWORD","label":"SMTP password","type":"SECRET","description":"User password for the SMTP server"},{"param":"MAIL_COLLECTION","label":"Email documents collection","type":"STRING","description":"What is the path to the collection that contains the documents used to build and send the emails?","required":true,"default":"mail","validationRegex":"^[^/]+(/[^/]+/[^/]+)*$","validationErrorMessage":"Must be a valid Cloud Firestore collection"},{"param":"DEFAULT_FROM","label":"Default FROM address","type":"STRING","description":"The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).","required":true,"example":"foobar@example.com","validationRegex":"^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$|^.*<(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})>$","validationErrorMessage":"Must be a valid email address or valid name plus email address"},{"param":"DEFAULT_REPLY_TO","label":"Default REPLY-TO address","type":"STRING","description":"The email address to use as the reply-to address (if it's not specified in the added email document)."},{"param":"USERS_COLLECTION","label":"Users collection","type":"STRING","description":"A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection."},{"param":"TEMPLATES_COLLECTION","label":"Templates collection","type":"STRING","description":"A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document."},{"param":"TTL_EXPIRE_TYPE","label":"Firestore TTL type","type":"SELECT","description":"Do you want the firestore records to be marked with an expireAt field for a TTL policy? If \"Never\" is selected then no expireAt field will be added. Otherwise you may specify the unit of time specified by the TTL_EXPIRE_VALUE parameter. Defaults to \"Never\".","required":true,"options":[{"value":"never","label":"Never"},{"value":"hour","label":"Hour"},{"value":"day","label":"Day"},{"value":"week","label":"Week"},{"value":"month","label":"Month"},{"value":"year","label":"Year"}],"default":"never"},{"param":"TTL_EXPIRE_VALUE","label":"Firestore TTL value","type":"STRING","description":"In the units specified by TTL_EXPIRE_TYPE, how long do you want records to be ineligible for deletion by a TTL policy? This parameter requires the Firestore TTL type parameter to be set to a value other than `Never`. For example, if `Firestore TTL type` is set to `Day` then setting this parameter to `1` will specify a TTL of 1 day.","required":true,"default":"1","validationRegex":"^[1-9][0-9]*$","validationErrorMessage":"The value must be an integer value greater than zero."}],"preinstallContent":"Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Setup Google App Passwords\n\n**Google** no longer allows **Gmail** users to use their own passwords to authorize third-party apps and services. Instead, you have to use the [Sign in with App Passwords](https://support.google.com/accounts/answer/185833) service to generate a special password for each app you want to authorize. To do so:\n\n1.  Go to your [Google Account](https://myaccount.google.com/).\n2.  Select **Security**.\n3.  Under \"Signing in to Google,\" select **App Passwords**. You may need to sign in. If you don’t have this option, it might be because:\n    1.  2-Step Verification is not set up for your account.\n    2.  2-Step Verification is only set up for security keys.\n    3.  Your account is through work, school, or other organization.\n    4.  You turned on Advanced Protection.\n4.  At the bottom, choose **Select app** and choose **Other** option and then write the name of the app password (e.g. `Firebase Trigger Email from Firestore Extension`) and click **Generate**.\n5.  Follow the instructions to enter the App Password. The App Password is the 16-character code in the yellow bar on your device.\n6.  Tap **Done**.\n\nNow you can use your Google username with the generated password to authorize the extension.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s no-cost tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n\n#### Further reading & resources\n\nYou can find more information about this extension in the following articles:\n\n- [Sending Emails Using Firestore And Firebase Extensions](https://invertase.link/Y6Nu)","postinstallContent":"### See it in action\n\nYou can test out this extension right away!\n\n1.  Go to your [Cloud Firestore dashboard](https://console.firebase.google.com/project/${param:PROJECT_ID}/firestore/data) in the Firebase console.\n\n1.  If it doesn't already exist, create the collection you specified during installation: `${param:MAIL_COLLECTION}`.\n\n1.  Add a document with a `to` field and a `message` field with the following content:\n\n    ```js\n    to: ['someone@example.com'],\n    message: {\n      subject: 'Hello from Firebase!',\n      text: 'This is the plaintext section of the email body.',\n      html: 'This is the <code>HTML</code> section of the email body.',\n    }\n    ```\n\n1.  In a few seconds, you'll see a `delivery` field appear in the document. The field will update as the extension processes the email.\n\n**Note:** You can also use the [Firebase Admin SDK][admin_sdk] to add a document:\n\n```js\nadmin\n  .firestore()\n  .collection(\"${param:MAIL_COLLECTION}\")\n  .add({\n    to: \"someone@example.com\",\n    message: {\n      subject: \"Hello from Firebase!\",\n      text: \"This is the plaintext section of the email body.\",\n      html: \"This is the <code>HTML</code> section of the email body.\",\n    },\n  })\n  .then(() => console.log(\"Queued email for delivery!\"));\n```\n\n### Using this extension\n\nSee the [official documentation](https://firebase.google.com/docs/extensions/official/firestore-send-email) for information on using this extension, including advanced use cases such as using Handlebars templates and managing email delivery status.\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n\n[mail_collection]: https://console.firebase.google.com/project/_/firestore/data~2F${param:MAIL_COLLECTION}\n[admin_sdk]: https://firebase.google.com/docs/admin/setup\n[amp4email]: https://amp.dev/documentation/guides-and-tutorials/learn/email-spec/amp-email-format/\n[handlebars]: https://handlebarsjs.com/\n\n### Further reading & resources\n\nYou can find more information about this extension in the following articles:\n\n- [Sending Emails Using Firestore And Firebase Extensions](https://invertase.link/Y6Nu)","readmeContent":"# Trigger Email from Firestore\n\n**Author**: Firebase (**[https://firebase.google.com](https://firebase.google.com)**)\n\n**Description**: Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.\n\n\n\n**Details**: Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Setup Google App Passwords\n\n**Google** no longer allows **Gmail** users to use their own passwords to authorize third-party apps and services. Instead, you have to use the [Sign in with App Passwords](https://support.google.com/accounts/answer/185833) service to generate a special password for each app you want to authorize. To do so:\n\n1.  Go to your [Google Account](https://myaccount.google.com/).\n2.  Select **Security**.\n3.  Under \"Signing in to Google,\" select **App Passwords**. You may need to sign in. If you don’t have this option, it might be because:\n    1.  2-Step Verification is not set up for your account.\n    2.  2-Step Verification is only set up for security keys.\n    3.  Your account is through work, school, or other organization.\n    4.  You turned on Advanced Protection.\n4.  At the bottom, choose **Select app** and choose **Other** option and then write the name of the app password (e.g. `Firebase Trigger Email from Firestore Extension`) and click **Generate**.\n5.  Follow the instructions to enter the App Password. The App Password is the 16-character code in the yellow bar on your device.\n6.  Tap **Done**.\n\nNow you can use your Google username with the generated password to authorize the extension.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s no-cost tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n\n#### Further reading & resources\n\nYou can find more information about this extension in the following articles:\n\n- [Sending Emails Using Firestore And Firebase Extensions](https://invertase.link/Y6Nu)\n\n\n\n**Configuration Parameters:**\n\n* Cloud Functions location: Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).\n\n* SMTP connection URI: A URI representing an SMTP server this extension can use to deliver email. Note that port 25 is blocked by Google Cloud Platform, so we recommend using port 587 for SMTP connections. If you're using the SMTPS protocol, we recommend using port 465. In order to keep passwords secure, it is recommended to omit the password from the connection string while using the `SMTP Password` field for entering secrets and passwords. Passwords and secrets should now be included in `SMTP password` field.\nSecure format:\n `smtps://username@gmail.com@smtp.gmail.com:465` (username only)\n `smtps://smtp.gmail.com:465` (No username and password)\nBackwards Compatible (less secure):\n `smtps://username@gmail.com:password@smtp.gmail.com:465`. (username and password)\n\n* SMTP password: User password for the SMTP server\n\n* Email documents collection: What is the path to the collection that contains the documents used to build and send the emails?\n\n* Default FROM address: The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).\n\n* Default REPLY-TO address: The email address to use as the reply-to address (if it's not specified in the added email document).\n\n* Users collection: A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection.\n\n* Templates collection: A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document.\n\n* Firestore TTL type: Do you want the firestore records to be marked with an expireAt field for a TTL policy? If \"Never\" is selected then no expireAt field will be added. Otherwise you may specify the unit of time specified by the TTL_EXPIRE_VALUE parameter. Defaults to \"Never\".\n\n* Firestore TTL value: In the units specified by TTL_EXPIRE_TYPE, how long do you want records to be ineligible for deletion by a TTL policy? This parameter requires the Firestore TTL type parameter to be set to a value other than `Never`. For example, if `Firestore TTL type` is set to `Day` then setting this parameter to `1` will specify a TTL of 1 day.\n\n\n\n**Cloud Functions:**\n\n* **processQueue:** Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.\n\n\n\n**Access Required**:\n\n\n\nThis extension will operate with the following project IAM roles:\n\n* datastore.user (Reason: Allows this extension to access Cloud Firestore to read and process added email documents.)\n","displayName":"Trigger Email from Firestore","events":[{"type":"firebase.extensions.firestore-send-email.v1.onStart","description":"Occurs when the extension starts execution."},{"type":"firebase.extensions.firestore-send-email.v1.onProcessing","description":"Occurs when the extension attempts to process an email."},{"type":"firebase.extensions.firestore-send-email.v1.onRetry","description":"Occurs when the extension attempts to resend an email."},{"type":"firebase.extensions.firestore-send-email.v1.onPending","description":"Occurs when an email has a pending status."},{"type":"firebase.extensions.firestore-send-email.v1.onSuccess","description":"Occurs when the extension successfully sends an email."},{"type":"firebase.extensions.firestore-send-email.v1.onComplete","description":"Occurs when the extension completes execution."},{"type":"firebase.extensions.firestore-send-email.v1.onError","description":"Occurs when the extension fails to complete execution."}],"systemParams":[{"param":"firebaseextensions.v1beta.function/memory","label":"Function memory","type":"SELECT","description":"How much memory should be allocated to each function?","options":[{"value":"128","label":"128MB"},{"value":"256","label":"256MB"},{"value":"512","label":"512MB"},{"value":"1024","label":"1GB"},{"value":"2048","label":"2GB"},{"value":"4096","label":"4GB"},{"value":"8192","label":"8GB"}],"default":"256","advanced":true},{"param":"firebaseextensions.v1beta.function/timeoutSeconds","label":"Function timeout seconds","type":"STRING","description":"How long should functions run before timing out, in seconds (0-540)?","validationRegex":"^[1-9][0-9]{0,2}$","validationErrorMessage":"Function timeout should be an integer number of seconds, between 0 and 540","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnector","label":"VPC Connector","type":"STRING","description":"The VPC Network Connector that this cloud function can connect to. It can be either the fully-qualified URI, or the short name of the network connector resource. The format of this field is projects/*/locations/*/connectors/*.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/connectors/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnectorEgressSettings","label":"VPC Connector Egress settings","type":"SELECT","description":"Controls outgoing traffic when a VPC connector is configured","options":[{"value":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","label":"Unspecified"},{"value":"PRIVATE_RANGES_ONLY","label":"Private ranges only"},{"value":"ALL_TRAFFIC","label":"All traffic"}],"default":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","advanced":true},{"param":"firebaseextensions.v1beta.function/minInstances","label":"Minimum function instances","type":"STRING","description":"The minimum number of instances of each function to run at once (0-1000)","default":"0","validationRegex":"^[0-9]*$","validationErrorMessage":"Min instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/maxInstances","label":"Maximum function instances","type":"STRING","description":"The maximum number of instances of each function to run at once","default":"3000","validationRegex":"^[0-9]*$","validationErrorMessage":"Max instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/ingressSettings","label":"Function ingress settings","type":"SELECT","description":"Where should functions allow incoming traffic from?","options":[{"value":"ALLOW_ALL","label":"Allow all"},{"value":"ALLOW_INTERNAL_ONLY","label":"Allow internal only"},{"value":"ALLOW_INTERNAL_AND_GCLB","label":"Allow internal and GCLB"}],"advanced":true},{"param":"firebaseextensions.v1beta.function/labels","label":"Function labels","type":"STRING","description":"Do you wish to set any labels on this instance's Cloud Functions? If so, provide up to 55 labels in the format 'key1:value, key2:value'","validationRegex":"^([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63},\\s*)*([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63})$","advanced":true},{"param":"firebaseextensions.v1beta.function/kmsKeyName","label":"KMS key name","type":"STRING","description":"Do you want to use a Customer Managed Eencryption Key (CMEK) to encrypt this extension's functions? If you set this, you must also set a Docker repository encrypted by that key. See https://cloud.google.com/functions/docs/securing/cmek for more details.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/keyRings/([^/]+)/cryptoKeys/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/dockerRepository","label":"Docker repository","type":"STRING","description":"What Docker repository should be used to store function images? Default repository will be used if not set.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/repositories/([^/]+)$","advanced":true}]},"state":"PUBLISHED","hash":"aebaec1570fe198e5c56a8b2f71525f7da7e7af5c35f059a62ec0c0f5e8ef028","createTime":"2023-03-17T11:07:56.834964Z","id":"0.1.24-rc.0","listing":{"state":"UNLISTED"}},{"name":"publishers/firebase/extensions/firestore-send-email/versions/0.1.24-rc.1","ref":"firebase/firestore-send-email@0.1.24-rc.1","spec":{"specVersion":"v1beta","name":"firestore-send-email","version":"0.1.24-rc.1","description":"Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.","roles":[{"role":"datastore.user","reason":"Allows this extension to access Cloud Firestore to read and process added email documents."}],"resources":[{"name":"processQueue","type":"firebaseextensions.v1beta.function","propertiesYaml":"eventTrigger:\n  eventType: providers/cloud.firestore/eventTypes/document.write\n  resource: projects/${param:PROJECT_ID}/databases/(default)/documents/${param:MAIL_COLLECTION}/{id}\nlocation: ${param:LOCATION}\nruntime: nodejs14\n","description":"Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.","deletionPolicy":"DELETE"}],"billingRequired":true,"author":{"authorName":"Firebase","url":"https://firebase.google.com"},"contributors":[{"authorName":"Michael Bleigh","url":"https://github.com/mbleigh"},{"authorName":"Invertase","email":"oss@invertase.io","url":"https://github.com/invertase"}],"license":"Apache-2.0","releaseNotesUrl":"https://github.com/firebase/extensions/blob/master/firestore-send-email/CHANGELOG.md","sourceUrl":"https://github.com/firebase/extensions/tree/master/firestore-send-email","params":[{"param":"LOCATION","label":"Cloud Functions location","type":"SELECT","description":"Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).","required":true,"options":[{"value":"us-central1","label":"Iowa (us-central1)"},{"value":"us-east1","label":"South Carolina (us-east1)"},{"value":"us-east4","label":"Northern Virginia (us-east4)"},{"value":"us-west2","label":"Los Angeles (us-west2)"},{"value":"us-west3","label":"Salt Lake City (us-west3)"},{"value":"us-west4","label":"Las Vegas (us-west4)"},{"value":"europe-central2","label":"Warsaw (europe-central2)"},{"value":"europe-west1","label":"Belgium (europe-west1)"},{"value":"europe-west2","label":"London (europe-west2)"},{"value":"europe-west3","label":"Frankfurt (europe-west3)"},{"value":"europe-west6","label":"Zurich (europe-west6)"},{"value":"asia-east1","label":"Taiwan (asia-east1)"},{"value":"asia-east2","label":"Hong Kong (asia-east2)"},{"value":"asia-northeast1","label":"Tokyo (asia-northeast1)"},{"value":"asia-northeast2","label":"Osaka (asia-northeast2)"},{"value":"asia-northeast3","label":"Seoul (asia-northeast3)"},{"value":"asia-south1","label":"Mumbai (asia-south1)"},{"value":"asia-southeast1","label":"Singapore (asia-southeast1)"},{"value":"asia-southeast2","label":"Jakarta (asia-southeast2)"},{"value":"northamerica-northeast1","label":"Montreal (northamerica-northeast1)"},{"value":"southamerica-east1","label":"Sao Paulo (southamerica-east1)"},{"value":"australia-southeast1","label":"Sydney (australia-southeast1)"}],"default":"us-central1","immutable":true},{"param":"SMTP_CONNECTION_URI","label":"SMTP connection URI","type":"STRING","description":"A URI representing an SMTP server this extension can use to deliver email. Note that port 25 is blocked by Google Cloud Platform, so we recommend using port 587 for SMTP connections. If you're using the SMTPS protocol, we recommend using port 465. In order to keep passwords secure, it is recommended to omit the password from the connection string while using the `SMTP Password` field for entering secrets and passwords. Passwords and secrets should now be included in `SMTP password` field.\nSecure format:\n `smtps://username@gmail.com@smtp.gmail.com:465` (username only)\n `smtps://smtp.gmail.com:465` (No username and password)\nBackwards Compatible (less secure):\n `smtps://username@gmail.com:password@smtp.gmail.com:465`. (username and password)","required":true,"example":"smtps://username@smtp.hostname.com:465","validationRegex":"^(smtp[s]*://.*?:[0-9]+.*$)","validationErrorMessage":"Invalid SMTP connection URI. Must be in the form `smtp(s)://username:password@hostname:port` or `smtp(s)://username@hostname:port`."},{"param":"SMTP_PASSWORD","label":"SMTP password","type":"SECRET","description":"User password for the SMTP server"},{"param":"MAIL_COLLECTION","label":"Email documents collection","type":"STRING","description":"What is the path to the collection that contains the documents used to build and send the emails?","required":true,"default":"mail","validationRegex":"^[^/]+(/[^/]+/[^/]+)*$","validationErrorMessage":"Must be a valid Cloud Firestore collection"},{"param":"DEFAULT_FROM","label":"Default FROM address","type":"STRING","description":"The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).","required":true,"example":"foobar@example.com","validationRegex":"^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$|^.*<(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})>$","validationErrorMessage":"Must be a valid email address or valid name plus email address"},{"param":"DEFAULT_REPLY_TO","label":"Default REPLY-TO address","type":"STRING","description":"The email address to use as the reply-to address (if it's not specified in the added email document)."},{"param":"USERS_COLLECTION","label":"Users collection","type":"STRING","description":"A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection."},{"param":"TEMPLATES_COLLECTION","label":"Templates collection","type":"STRING","description":"A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document."},{"param":"TTL_EXPIRE_TYPE","label":"Firestore TTL type","type":"SELECT","description":"Do you want the firestore records to be marked with an expireAt field for a TTL policy? If \"Never\" is selected then no expireAt field will be added. Otherwise you may specify the unit of time specified by the TTL_EXPIRE_VALUE parameter. Defaults to \"Never\".","required":true,"options":[{"value":"never","label":"Never"},{"value":"hour","label":"Hour"},{"value":"day","label":"Day"},{"value":"week","label":"Week"},{"value":"month","label":"Month"},{"value":"year","label":"Year"}],"default":"never"},{"param":"TTL_EXPIRE_VALUE","label":"Firestore TTL value","type":"STRING","description":"In the units specified by TTL_EXPIRE_TYPE, how long do you want records to be ineligible for deletion by a TTL policy? This parameter requires the Firestore TTL type parameter to be set to a value other than `Never`. For example, if `Firestore TTL type` is set to `Day` then setting this parameter to `1` will specify a TTL of 1 day.","required":true,"default":"1","validationRegex":"^[1-9][0-9]*$","validationErrorMessage":"The value must be an integer value greater than zero."}],"preinstallContent":"Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Setup Google App Passwords\n\n**Google** no longer allows **Gmail** users to use their own passwords to authorize third-party apps and services. Instead, you have to use the [Sign in with App Passwords](https://support.google.com/accounts/answer/185833) service to generate a special password for each app you want to authorize. To do so:\n\n1.  Go to your [Google Account](https://myaccount.google.com/).\n2.  Select **Security**.\n3.  Under \"Signing in to Google,\" select **App Passwords**. You may need to sign in. If you don’t have this option, it might be because:\n    1.  2-Step Verification is not set up for your account.\n    2.  2-Step Verification is only set up for security keys.\n    3.  Your account is through work, school, or other organization.\n    4.  You turned on Advanced Protection.\n4.  At the bottom, choose **Select app** and choose **Other** option and then write the name of the app password (e.g. `Firebase Trigger Email from Firestore Extension`) and click **Generate**.\n5.  Follow the instructions to enter the App Password. The App Password is the 16-character code in the yellow bar on your device.\n6.  Tap **Done**.\n\nNow you can use your Google username with the generated password to authorize the extension.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s no-cost tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n\n#### Further reading & resources\n\nYou can find more information about this extension in the following articles:\n\n- [Sending Emails Using Firestore And Firebase Extensions](https://invertase.link/Y6Nu)","postinstallContent":"### See it in action\n\nYou can test out this extension right away!\n\n1.  Go to your [Cloud Firestore dashboard](https://console.firebase.google.com/project/${param:PROJECT_ID}/firestore/data) in the Firebase console.\n\n1.  If it doesn't already exist, create the collection you specified during installation: `${param:MAIL_COLLECTION}`.\n\n1.  Add a document with a `to` field and a `message` field with the following content:\n\n    ```js\n    to: ['someone@example.com'],\n    message: {\n      subject: 'Hello from Firebase!',\n      text: 'This is the plaintext section of the email body.',\n      html: 'This is the <code>HTML</code> section of the email body.',\n    }\n    ```\n\n1.  In a few seconds, you'll see a `delivery` field appear in the document. The field will update as the extension processes the email.\n\n**Note:** You can also use the [Firebase Admin SDK][admin_sdk] to add a document:\n\n```js\nadmin\n  .firestore()\n  .collection(\"${param:MAIL_COLLECTION}\")\n  .add({\n    to: \"someone@example.com\",\n    message: {\n      subject: \"Hello from Firebase!\",\n      text: \"This is the plaintext section of the email body.\",\n      html: \"This is the <code>HTML</code> section of the email body.\",\n    },\n  })\n  .then(() => console.log(\"Queued email for delivery!\"));\n```\n\n### Using this extension\n\nSee the [official documentation](https://firebase.google.com/docs/extensions/official/firestore-send-email) for information on using this extension, including advanced use cases such as using Handlebars templates and managing email delivery status.\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n\n[mail_collection]: https://console.firebase.google.com/project/_/firestore/data~2F${param:MAIL_COLLECTION}\n[admin_sdk]: https://firebase.google.com/docs/admin/setup\n[amp4email]: https://amp.dev/documentation/guides-and-tutorials/learn/email-spec/amp-email-format/\n[handlebars]: https://handlebarsjs.com/\n\n### Further reading & resources\n\nYou can find more information about this extension in the following articles:\n\n- [Sending Emails Using Firestore And Firebase Extensions](https://invertase.link/Y6Nu)","readmeContent":"# Trigger Email from Firestore\n\n**Author**: Firebase (**[https://firebase.google.com](https://firebase.google.com)**)\n\n**Description**: Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.\n\n\n\n**Details**: Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Setup Google App Passwords\n\n**Google** no longer allows **Gmail** users to use their own passwords to authorize third-party apps and services. Instead, you have to use the [Sign in with App Passwords](https://support.google.com/accounts/answer/185833) service to generate a special password for each app you want to authorize. To do so:\n\n1.  Go to your [Google Account](https://myaccount.google.com/).\n2.  Select **Security**.\n3.  Under \"Signing in to Google,\" select **App Passwords**. You may need to sign in. If you don’t have this option, it might be because:\n    1.  2-Step Verification is not set up for your account.\n    2.  2-Step Verification is only set up for security keys.\n    3.  Your account is through work, school, or other organization.\n    4.  You turned on Advanced Protection.\n4.  At the bottom, choose **Select app** and choose **Other** option and then write the name of the app password (e.g. `Firebase Trigger Email from Firestore Extension`) and click **Generate**.\n5.  Follow the instructions to enter the App Password. The App Password is the 16-character code in the yellow bar on your device.\n6.  Tap **Done**.\n\nNow you can use your Google username with the generated password to authorize the extension.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s no-cost tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n\n#### Further reading & resources\n\nYou can find more information about this extension in the following articles:\n\n- [Sending Emails Using Firestore And Firebase Extensions](https://invertase.link/Y6Nu)\n\n\n\n**Configuration Parameters:**\n\n* Cloud Functions location: Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).\n\n* SMTP connection URI: A URI representing an SMTP server this extension can use to deliver email. Note that port 25 is blocked by Google Cloud Platform, so we recommend using port 587 for SMTP connections. If you're using the SMTPS protocol, we recommend using port 465. In order to keep passwords secure, it is recommended to omit the password from the connection string while using the `SMTP Password` field for entering secrets and passwords. Passwords and secrets should now be included in `SMTP password` field.\nSecure format:\n `smtps://username@gmail.com@smtp.gmail.com:465` (username only)\n `smtps://smtp.gmail.com:465` (No username and password)\nBackwards Compatible (less secure):\n `smtps://username@gmail.com:password@smtp.gmail.com:465`. (username and password)\n\n* SMTP password: User password for the SMTP server\n\n* Email documents collection: What is the path to the collection that contains the documents used to build and send the emails?\n\n* Default FROM address: The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).\n\n* Default REPLY-TO address: The email address to use as the reply-to address (if it's not specified in the added email document).\n\n* Users collection: A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection.\n\n* Templates collection: A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document.\n\n* Firestore TTL type: Do you want the firestore records to be marked with an expireAt field for a TTL policy? If \"Never\" is selected then no expireAt field will be added. Otherwise you may specify the unit of time specified by the TTL_EXPIRE_VALUE parameter. Defaults to \"Never\".\n\n* Firestore TTL value: In the units specified by TTL_EXPIRE_TYPE, how long do you want records to be ineligible for deletion by a TTL policy? This parameter requires the Firestore TTL type parameter to be set to a value other than `Never`. For example, if `Firestore TTL type` is set to `Day` then setting this parameter to `1` will specify a TTL of 1 day.\n\n\n\n**Cloud Functions:**\n\n* **processQueue:** Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.\n\n\n\n**Access Required**:\n\n\n\nThis extension will operate with the following project IAM roles:\n\n* datastore.user (Reason: Allows this extension to access Cloud Firestore to read and process added email documents.)\n","displayName":"Trigger Email from Firestore","events":[{"type":"firebase.extensions.firestore-send-email.v1.onStart","description":"Occurs when the extension starts execution."},{"type":"firebase.extensions.firestore-send-email.v1.onProcessing","description":"Occurs when the extension attempts to process an email."},{"type":"firebase.extensions.firestore-send-email.v1.onRetry","description":"Occurs when the extension attempts to resend an email."},{"type":"firebase.extensions.firestore-send-email.v1.onPending","description":"Occurs when an email has a pending status."},{"type":"firebase.extensions.firestore-send-email.v1.onSuccess","description":"Occurs when the extension successfully sends an email."},{"type":"firebase.extensions.firestore-send-email.v1.onComplete","description":"Occurs when the extension completes execution."},{"type":"firebase.extensions.firestore-send-email.v1.onError","description":"Occurs when the extension fails to complete execution."}],"systemParams":[{"param":"firebaseextensions.v1beta.function/memory","label":"Function memory","type":"SELECT","description":"How much memory should be allocated to each function?","options":[{"value":"128","label":"128MB"},{"value":"256","label":"256MB"},{"value":"512","label":"512MB"},{"value":"1024","label":"1GB"},{"value":"2048","label":"2GB"},{"value":"4096","label":"4GB"},{"value":"8192","label":"8GB"}],"default":"256","advanced":true},{"param":"firebaseextensions.v1beta.function/timeoutSeconds","label":"Function timeout seconds","type":"STRING","description":"How long should functions run before timing out, in seconds (0-540)?","validationRegex":"^[1-9][0-9]{0,2}$","validationErrorMessage":"Function timeout should be an integer number of seconds, between 0 and 540","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnector","label":"VPC Connector","type":"STRING","description":"The VPC Network Connector that this cloud function can connect to. It can be either the fully-qualified URI, or the short name of the network connector resource. The format of this field is projects/*/locations/*/connectors/*.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/connectors/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnectorEgressSettings","label":"VPC Connector Egress settings","type":"SELECT","description":"Controls outgoing traffic when a VPC connector is configured","options":[{"value":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","label":"Unspecified"},{"value":"PRIVATE_RANGES_ONLY","label":"Private ranges only"},{"value":"ALL_TRAFFIC","label":"All traffic"}],"default":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","advanced":true},{"param":"firebaseextensions.v1beta.function/minInstances","label":"Minimum function instances","type":"STRING","description":"The minimum number of instances of each function to run at once (0-1000)","default":"0","validationRegex":"^[0-9]*$","validationErrorMessage":"Min instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/maxInstances","label":"Maximum function instances","type":"STRING","description":"The maximum number of instances of each function to run at once","default":"3000","validationRegex":"^[0-9]*$","validationErrorMessage":"Max instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/ingressSettings","label":"Function ingress settings","type":"SELECT","description":"Where should functions allow incoming traffic from?","options":[{"value":"ALLOW_ALL","label":"Allow all"},{"value":"ALLOW_INTERNAL_ONLY","label":"Allow internal only"},{"value":"ALLOW_INTERNAL_AND_GCLB","label":"Allow internal and GCLB"}],"advanced":true},{"param":"firebaseextensions.v1beta.function/labels","label":"Function labels","type":"STRING","description":"Do you wish to set any labels on this instance's Cloud Functions? If so, provide up to 55 labels in the format 'key1:value, key2:value'","validationRegex":"^([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63},\\s*)*([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63})$","advanced":true},{"param":"firebaseextensions.v1beta.function/kmsKeyName","label":"KMS key name","type":"STRING","description":"Do you want to use a Customer Managed Eencryption Key (CMEK) to encrypt this extension's functions? If you set this, you must also set a Docker repository encrypted by that key. See https://cloud.google.com/functions/docs/securing/cmek for more details.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/keyRings/([^/]+)/cryptoKeys/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/dockerRepository","label":"Docker repository","type":"STRING","description":"What Docker repository should be used to store function images? Default repository will be used if not set.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/repositories/([^/]+)$","advanced":true}]},"state":"PUBLISHED","hash":"1cfdd77a2dd031d98b141991250cd782beabb97efe9833853fc0d1c4c4b03671","createTime":"2023-03-17T15:51:33.272725Z","id":"0.1.24-rc.1","listing":{"state":"UNLISTED"}},{"name":"publishers/firebase/extensions/firestore-send-email/versions/0.1.25","ref":"firebase/firestore-send-email@0.1.25","spec":{"specVersion":"v1beta","name":"firestore-send-email","version":"0.1.25","description":"Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.","roles":[{"role":"datastore.user","reason":"Allows this extension to access Cloud Firestore to read and process added email documents."}],"resources":[{"name":"processQueue","type":"firebaseextensions.v1beta.function","propertiesYaml":"eventTrigger:\n  eventType: providers/cloud.firestore/eventTypes/document.write\n  resource: projects/${param:PROJECT_ID}/databases/(default)/documents/${param:MAIL_COLLECTION}/{id}\nlocation: ${param:LOCATION}\nruntime: nodejs14\n","description":"Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.","deletionPolicy":"DELETE"}],"billingRequired":true,"author":{"authorName":"Firebase","url":"https://firebase.google.com"},"contributors":[{"authorName":"Michael Bleigh","url":"https://github.com/mbleigh"},{"authorName":"Invertase","email":"oss@invertase.io","url":"https://github.com/invertase"}],"license":"Apache-2.0","releaseNotesUrl":"https://github.com/firebase/extensions/blob/master/firestore-send-email/CHANGELOG.md","sourceUrl":"https://github.com/firebase/extensions/tree/master/firestore-send-email","params":[{"param":"LOCATION","label":"Cloud Functions location","type":"SELECT","description":"Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).","required":true,"options":[{"value":"us-central1","label":"Iowa (us-central1)"},{"value":"us-east1","label":"South Carolina (us-east1)"},{"value":"us-east4","label":"Northern Virginia (us-east4)"},{"value":"us-west2","label":"Los Angeles (us-west2)"},{"value":"us-west3","label":"Salt Lake City (us-west3)"},{"value":"us-west4","label":"Las Vegas (us-west4)"},{"value":"europe-central2","label":"Warsaw (europe-central2)"},{"value":"europe-west1","label":"Belgium (europe-west1)"},{"value":"europe-west2","label":"London (europe-west2)"},{"value":"europe-west3","label":"Frankfurt (europe-west3)"},{"value":"europe-west6","label":"Zurich (europe-west6)"},{"value":"asia-east1","label":"Taiwan (asia-east1)"},{"value":"asia-east2","label":"Hong Kong (asia-east2)"},{"value":"asia-northeast1","label":"Tokyo (asia-northeast1)"},{"value":"asia-northeast2","label":"Osaka (asia-northeast2)"},{"value":"asia-northeast3","label":"Seoul (asia-northeast3)"},{"value":"asia-south1","label":"Mumbai (asia-south1)"},{"value":"asia-southeast1","label":"Singapore (asia-southeast1)"},{"value":"asia-southeast2","label":"Jakarta (asia-southeast2)"},{"value":"northamerica-northeast1","label":"Montreal (northamerica-northeast1)"},{"value":"southamerica-east1","label":"Sao Paulo (southamerica-east1)"},{"value":"australia-southeast1","label":"Sydney (australia-southeast1)"}],"default":"us-central1","immutable":true},{"param":"SMTP_CONNECTION_URI","label":"SMTP connection URI","type":"STRING","description":"A URI representing an SMTP server this extension can use to deliver email. Note that port 25 is blocked by Google Cloud Platform, so we recommend using port 587 for SMTP connections. If you're using the SMTPS protocol, we recommend using port 465. In order to keep passwords secure, it is recommended to omit the password from the connection string while using the `SMTP Password` field for entering secrets and passwords. Passwords and secrets should now be included in `SMTP password` field.\nSecure format:\n `smtps://username@gmail.com@smtp.gmail.com:465` (username only)\n `smtps://smtp.gmail.com:465` (No username and password)\nBackwards Compatible (less secure):\n `smtps://username@gmail.com:password@smtp.gmail.com:465`. (username and password)","required":true,"example":"smtps://username@smtp.hostname.com:465","validationRegex":"^(smtp[s]*://.*?:[0-9]+.*$)","validationErrorMessage":"Invalid SMTP connection URI. Must be in the form `smtp(s)://username:password@hostname:port` or `smtp(s)://username@hostname:port`."},{"param":"SMTP_PASSWORD","label":"SMTP password","type":"SECRET","description":"User password for the SMTP server"},{"param":"MAIL_COLLECTION","label":"Email documents collection","type":"STRING","description":"What is the path to the collection that contains the documents used to build and send the emails?","required":true,"default":"mail","validationRegex":"^[^/]+(/[^/]+/[^/]+)*$","validationErrorMessage":"Must be a valid Cloud Firestore collection"},{"param":"DEFAULT_FROM","label":"Default FROM address","type":"STRING","description":"The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).","required":true,"example":"foobar@example.com","validationRegex":"^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$|^.*<(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})>$","validationErrorMessage":"Must be a valid email address or valid name plus email address"},{"param":"DEFAULT_REPLY_TO","label":"Default REPLY-TO address","type":"STRING","description":"The email address to use as the reply-to address (if it's not specified in the added email document)."},{"param":"USERS_COLLECTION","label":"Users collection","type":"STRING","description":"A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection."},{"param":"TEMPLATES_COLLECTION","label":"Templates collection","type":"STRING","description":"A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document."},{"param":"TTL_EXPIRE_TYPE","label":"Firestore TTL type","type":"SELECT","description":"Do you want the firestore records to be marked with an expireAt field for a TTL policy? If \"Never\" is selected then no expireAt field will be added. Otherwise you may specify the unit of time specified by the TTL_EXPIRE_VALUE parameter. Defaults to \"Never\".","required":true,"options":[{"value":"never","label":"Never"},{"value":"hour","label":"Hour"},{"value":"day","label":"Day"},{"value":"week","label":"Week"},{"value":"month","label":"Month"},{"value":"year","label":"Year"}],"default":"never"},{"param":"TTL_EXPIRE_VALUE","label":"Firestore TTL value","type":"STRING","description":"In the units specified by TTL_EXPIRE_TYPE, how long do you want records to be ineligible for deletion by a TTL policy? This parameter requires the Firestore TTL type parameter to be set to a value other than `Never`. For example, if `Firestore TTL type` is set to `Day` then setting this parameter to `1` will specify a TTL of 1 day.","required":true,"default":"1","validationRegex":"^[1-9][0-9]*$","validationErrorMessage":"The value must be an integer value greater than zero."}],"preinstallContent":"Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Setup Google App Passwords\n\n**Google** no longer allows **Gmail** users to use their own passwords to authorize third-party apps and services. Instead, you have to use the [Sign in with App Passwords](https://support.google.com/accounts/answer/185833) service to generate a special password for each app you want to authorize. To do so:\n\n1.  Go to your [Google Account](https://myaccount.google.com/).\n2.  Select **Security**.\n3.  Under \"Signing in to Google,\" select **App Passwords**. You may need to sign in. If you don’t have this option, it might be because:\n    1.  2-Step Verification is not set up for your account.\n    2.  2-Step Verification is only set up for security keys.\n    3.  Your account is through work, school, or other organization.\n    4.  You turned on Advanced Protection.\n4.  At the bottom, choose **Select app** and choose **Other** option and then write the name of the app password (e.g. `Firebase Trigger Email from Firestore Extension`) and click **Generate**.\n5.  Follow the instructions to enter the App Password. The App Password is the 16-character code in the yellow bar on your device.\n6.  Tap **Done**.\n\nNow you can use your Google username with the generated password to authorize the extension.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s no-cost tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n\n#### Further reading & resources\n\nYou can find more information about this extension in the following articles:\n\n- [Sending Emails Using Firestore And Firebase Extensions](https://invertase.link/Y6Nu)","postinstallContent":"### See it in action\n\nYou can test out this extension right away!\n\n1.  Go to your [Cloud Firestore dashboard](https://console.firebase.google.com/project/${param:PROJECT_ID}/firestore/data) in the Firebase console.\n\n1.  If it doesn't already exist, create the collection you specified during installation: `${param:MAIL_COLLECTION}`.\n\n1.  Add a document with a `to` field and a `message` field with the following content:\n\n    ```js\n    to: ['someone@example.com'],\n    message: {\n      subject: 'Hello from Firebase!',\n      text: 'This is the plaintext section of the email body.',\n      html: 'This is the <code>HTML</code> section of the email body.',\n    }\n    ```\n\n1.  In a few seconds, you'll see a `delivery` field appear in the document. The field will update as the extension processes the email.\n\n**Note:** You can also use the [Firebase Admin SDK][admin_sdk] to add a document:\n\n```js\nadmin\n  .firestore()\n  .collection(\"${param:MAIL_COLLECTION}\")\n  .add({\n    to: \"someone@example.com\",\n    message: {\n      subject: \"Hello from Firebase!\",\n      text: \"This is the plaintext section of the email body.\",\n      html: \"This is the <code>HTML</code> section of the email body.\",\n    },\n  })\n  .then(() => console.log(\"Queued email for delivery!\"));\n```\n\n### Using this extension\n\nSee the [official documentation](https://firebase.google.com/docs/extensions/official/firestore-send-email) for information on using this extension, including advanced use cases such as using Handlebars templates and managing email delivery status.\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n\n[mail_collection]: https://console.firebase.google.com/project/_/firestore/data~2F${param:MAIL_COLLECTION}\n[admin_sdk]: https://firebase.google.com/docs/admin/setup\n[amp4email]: https://amp.dev/documentation/guides-and-tutorials/learn/email-spec/amp-email-format/\n[handlebars]: https://handlebarsjs.com/\n\n### Further reading & resources\n\nYou can find more information about this extension in the following articles:\n\n- [Sending Emails Using Firestore And Firebase Extensions](https://invertase.link/Y6Nu)","readmeContent":"# Trigger Email from Firestore\n\n**Author**: Firebase (**[https://firebase.google.com](https://firebase.google.com)**)\n\n**Description**: Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.\n\n\n\n**Details**: Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Setup Google App Passwords\n\n**Google** no longer allows **Gmail** users to use their own passwords to authorize third-party apps and services. Instead, you have to use the [Sign in with App Passwords](https://support.google.com/accounts/answer/185833) service to generate a special password for each app you want to authorize. To do so:\n\n1.  Go to your [Google Account](https://myaccount.google.com/).\n2.  Select **Security**.\n3.  Under \"Signing in to Google,\" select **App Passwords**. You may need to sign in. If you don’t have this option, it might be because:\n    1.  2-Step Verification is not set up for your account.\n    2.  2-Step Verification is only set up for security keys.\n    3.  Your account is through work, school, or other organization.\n    4.  You turned on Advanced Protection.\n4.  At the bottom, choose **Select app** and choose **Other** option and then write the name of the app password (e.g. `Firebase Trigger Email from Firestore Extension`) and click **Generate**.\n5.  Follow the instructions to enter the App Password. The App Password is the 16-character code in the yellow bar on your device.\n6.  Tap **Done**.\n\nNow you can use your Google username with the generated password to authorize the extension.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s no-cost tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n\n#### Further reading & resources\n\nYou can find more information about this extension in the following articles:\n\n- [Sending Emails Using Firestore And Firebase Extensions](https://invertase.link/Y6Nu)\n\n\n\n**Configuration Parameters:**\n\n* Cloud Functions location: Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).\n\n* SMTP connection URI: A URI representing an SMTP server this extension can use to deliver email. Note that port 25 is blocked by Google Cloud Platform, so we recommend using port 587 for SMTP connections. If you're using the SMTPS protocol, we recommend using port 465. In order to keep passwords secure, it is recommended to omit the password from the connection string while using the `SMTP Password` field for entering secrets and passwords. Passwords and secrets should now be included in `SMTP password` field.\nSecure format:\n `smtps://username@gmail.com@smtp.gmail.com:465` (username only)\n `smtps://smtp.gmail.com:465` (No username and password)\nBackwards Compatible (less secure):\n `smtps://username@gmail.com:password@smtp.gmail.com:465`. (username and password)\n\n* SMTP password: User password for the SMTP server\n\n* Email documents collection: What is the path to the collection that contains the documents used to build and send the emails?\n\n* Default FROM address: The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).\n\n* Default REPLY-TO address: The email address to use as the reply-to address (if it's not specified in the added email document).\n\n* Users collection: A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection.\n\n* Templates collection: A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document.\n\n* Firestore TTL type: Do you want the firestore records to be marked with an expireAt field for a TTL policy? If \"Never\" is selected then no expireAt field will be added. Otherwise you may specify the unit of time specified by the TTL_EXPIRE_VALUE parameter. Defaults to \"Never\".\n\n* Firestore TTL value: In the units specified by TTL_EXPIRE_TYPE, how long do you want records to be ineligible for deletion by a TTL policy? This parameter requires the Firestore TTL type parameter to be set to a value other than `Never`. For example, if `Firestore TTL type` is set to `Day` then setting this parameter to `1` will specify a TTL of 1 day.\n\n\n\n**Cloud Functions:**\n\n* **processQueue:** Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.\n\n\n\n**Access Required**:\n\n\n\nThis extension will operate with the following project IAM roles:\n\n* datastore.user (Reason: Allows this extension to access Cloud Firestore to read and process added email documents.)\n","displayName":"Trigger Email from Firestore","events":[{"type":"firebase.extensions.firestore-send-email.v1.onStart","description":"Occurs when the extension starts execution."},{"type":"firebase.extensions.firestore-send-email.v1.onProcessing","description":"Occurs when the extension attempts to process an email."},{"type":"firebase.extensions.firestore-send-email.v1.onRetry","description":"Occurs when the extension attempts to resend an email."},{"type":"firebase.extensions.firestore-send-email.v1.onPending","description":"Occurs when an email has a pending status."},{"type":"firebase.extensions.firestore-send-email.v1.onSuccess","description":"Occurs when the extension successfully sends an email."},{"type":"firebase.extensions.firestore-send-email.v1.onComplete","description":"Occurs when the extension completes execution."},{"type":"firebase.extensions.firestore-send-email.v1.onError","description":"Occurs when the extension fails to complete execution."}],"systemParams":[{"param":"firebaseextensions.v1beta.function/memory","label":"Function memory","type":"SELECT","description":"How much memory should be allocated to each function?","options":[{"value":"128","label":"128MB"},{"value":"256","label":"256MB"},{"value":"512","label":"512MB"},{"value":"1024","label":"1GB"},{"value":"2048","label":"2GB"},{"value":"4096","label":"4GB"},{"value":"8192","label":"8GB"}],"default":"256","advanced":true},{"param":"firebaseextensions.v1beta.function/timeoutSeconds","label":"Function timeout seconds","type":"STRING","description":"How long should functions run before timing out, in seconds (0-540)?","validationRegex":"^[1-9][0-9]{0,2}$","validationErrorMessage":"Function timeout should be an integer number of seconds, between 0 and 540","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnector","label":"VPC Connector","type":"STRING","description":"The VPC Network Connector that this cloud function can connect to. It can be either the fully-qualified URI, or the short name of the network connector resource. The format of this field is projects/*/locations/*/connectors/*.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/connectors/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnectorEgressSettings","label":"VPC Connector Egress settings","type":"SELECT","description":"Controls outgoing traffic when a VPC connector is configured","options":[{"value":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","label":"Unspecified"},{"value":"PRIVATE_RANGES_ONLY","label":"Private ranges only"},{"value":"ALL_TRAFFIC","label":"All traffic"}],"default":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","advanced":true},{"param":"firebaseextensions.v1beta.function/minInstances","label":"Minimum function instances","type":"STRING","description":"The minimum number of instances of each function to run at once (0-1000)","default":"0","validationRegex":"^[0-9]*$","validationErrorMessage":"Min instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/maxInstances","label":"Maximum function instances","type":"STRING","description":"The maximum number of instances of each function to run at once","default":"3000","validationRegex":"^[0-9]*$","validationErrorMessage":"Max instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/ingressSettings","label":"Function ingress settings","type":"SELECT","description":"Where should functions allow incoming traffic from?","options":[{"value":"ALLOW_ALL","label":"Allow all"},{"value":"ALLOW_INTERNAL_ONLY","label":"Allow internal only"},{"value":"ALLOW_INTERNAL_AND_GCLB","label":"Allow internal and GCLB"}],"advanced":true},{"param":"firebaseextensions.v1beta.function/labels","label":"Function labels","type":"STRING","description":"Do you wish to set any labels on this instance's Cloud Functions? If so, provide up to 55 labels in the format 'key1:value, key2:value'","validationRegex":"^([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63},\\s*)*([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63})$","advanced":true},{"param":"firebaseextensions.v1beta.function/kmsKeyName","label":"KMS key name","type":"STRING","description":"Do you want to use a Customer Managed Eencryption Key (CMEK) to encrypt this extension's functions? If you set this, you must also set a Docker repository encrypted by that key. See https://cloud.google.com/functions/docs/securing/cmek for more details.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/keyRings/([^/]+)/cryptoKeys/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/dockerRepository","label":"Docker repository","type":"STRING","description":"What Docker repository should be used to store function images? Default repository will be used if not set.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/repositories/([^/]+)$","advanced":true}]},"state":"PUBLISHED","hash":"8790ec65165d9a18afedde0428416e26d35f422d5a1b714720305d63fc650859","createTime":"2023-04-05T14:33:07.327071Z","id":"0.1.25","releaseNotes":"fixed - change missingDeliveryField logging from `error` to `warn`\n","listing":{"state":"APPROVED"},"metrics":{"activeInstallCount":"1400"}},{"name":"publishers/firebase/extensions/firestore-send-email/versions/0.1.25-rc.0","ref":"firebase/firestore-send-email@0.1.25-rc.0","spec":{"specVersion":"v1beta","name":"firestore-send-email","version":"0.1.25-rc.0","description":"Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.","roles":[{"role":"datastore.user","reason":"Allows this extension to access Cloud Firestore to read and process added email documents."}],"resources":[{"name":"processQueue","type":"firebaseextensions.v1beta.function","propertiesYaml":"eventTrigger:\n  eventType: providers/cloud.firestore/eventTypes/document.write\n  resource: projects/${param:PROJECT_ID}/databases/(default)/documents/${param:MAIL_COLLECTION}/{id}\nlocation: ${param:LOCATION}\nruntime: nodejs14\n","description":"Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.","deletionPolicy":"DELETE"}],"billingRequired":true,"author":{"authorName":"Firebase","url":"https://firebase.google.com"},"contributors":[{"authorName":"Michael Bleigh","url":"https://github.com/mbleigh"},{"authorName":"Invertase","email":"oss@invertase.io","url":"https://github.com/invertase"}],"license":"Apache-2.0","releaseNotesUrl":"https://github.com/firebase/extensions/blob/master/firestore-send-email/CHANGELOG.md","sourceUrl":"https://github.com/firebase/extensions/tree/master/firestore-send-email","params":[{"param":"LOCATION","label":"Cloud Functions location","type":"SELECT","description":"Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).","required":true,"options":[{"value":"us-central1","label":"Iowa (us-central1)"},{"value":"us-east1","label":"South Carolina (us-east1)"},{"value":"us-east4","label":"Northern Virginia (us-east4)"},{"value":"us-west2","label":"Los Angeles (us-west2)"},{"value":"us-west3","label":"Salt Lake City (us-west3)"},{"value":"us-west4","label":"Las Vegas (us-west4)"},{"value":"europe-central2","label":"Warsaw (europe-central2)"},{"value":"europe-west1","label":"Belgium (europe-west1)"},{"value":"europe-west2","label":"London (europe-west2)"},{"value":"europe-west3","label":"Frankfurt (europe-west3)"},{"value":"europe-west6","label":"Zurich (europe-west6)"},{"value":"asia-east1","label":"Taiwan (asia-east1)"},{"value":"asia-east2","label":"Hong Kong (asia-east2)"},{"value":"asia-northeast1","label":"Tokyo (asia-northeast1)"},{"value":"asia-northeast2","label":"Osaka (asia-northeast2)"},{"value":"asia-northeast3","label":"Seoul (asia-northeast3)"},{"value":"asia-south1","label":"Mumbai (asia-south1)"},{"value":"asia-southeast1","label":"Singapore (asia-southeast1)"},{"value":"asia-southeast2","label":"Jakarta (asia-southeast2)"},{"value":"northamerica-northeast1","label":"Montreal (northamerica-northeast1)"},{"value":"southamerica-east1","label":"Sao Paulo (southamerica-east1)"},{"value":"australia-southeast1","label":"Sydney (australia-southeast1)"}],"default":"us-central1","immutable":true},{"param":"SMTP_CONNECTION_URI","label":"SMTP connection URI","type":"STRING","description":"A URI representing an SMTP server this extension can use to deliver email. Note that port 25 is blocked by Google Cloud Platform, so we recommend using port 587 for SMTP connections. If you're using the SMTPS protocol, we recommend using port 465. In order to keep passwords secure, it is recommended to omit the password from the connection string while using the `SMTP Password` field for entering secrets and passwords. Passwords and secrets should now be included in `SMTP password` field.\nSecure format:\n `smtps://username@gmail.com@smtp.gmail.com:465` (username only)\n `smtps://smtp.gmail.com:465` (No username and password)\nBackwards Compatible (less secure):\n `smtps://username@gmail.com:password@smtp.gmail.com:465`. (username and password)","required":true,"example":"smtps://username@smtp.hostname.com:465","validationRegex":"^(smtp[s]*://.*?:[0-9]+.*$)","validationErrorMessage":"Invalid SMTP connection URI. Must be in the form `smtp(s)://username:password@hostname:port` or `smtp(s)://username@hostname:port`."},{"param":"SMTP_PASSWORD","label":"SMTP password","type":"SECRET","description":"User password for the SMTP server"},{"param":"MAIL_COLLECTION","label":"Email documents collection","type":"STRING","description":"What is the path to the collection that contains the documents used to build and send the emails?","required":true,"default":"mail","validationRegex":"^[^/]+(/[^/]+/[^/]+)*$","validationErrorMessage":"Must be a valid Cloud Firestore collection"},{"param":"DEFAULT_FROM","label":"Default FROM address","type":"STRING","description":"The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).","required":true,"example":"foobar@example.com","validationRegex":"^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$|^.*<(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})>$","validationErrorMessage":"Must be a valid email address or valid name plus email address"},{"param":"DEFAULT_REPLY_TO","label":"Default REPLY-TO address","type":"STRING","description":"The email address to use as the reply-to address (if it's not specified in the added email document)."},{"param":"USERS_COLLECTION","label":"Users collection","type":"STRING","description":"A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection."},{"param":"TEMPLATES_COLLECTION","label":"Templates collection","type":"STRING","description":"A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document."},{"param":"TTL_EXPIRE_TYPE","label":"Firestore TTL type","type":"SELECT","description":"Do you want the firestore records to be marked with an expireAt field for a TTL policy? If \"Never\" is selected then no expireAt field will be added. Otherwise you may specify the unit of time specified by the TTL_EXPIRE_VALUE parameter. Defaults to \"Never\".","required":true,"options":[{"value":"never","label":"Never"},{"value":"hour","label":"Hour"},{"value":"day","label":"Day"},{"value":"week","label":"Week"},{"value":"month","label":"Month"},{"value":"year","label":"Year"}],"default":"never"},{"param":"TTL_EXPIRE_VALUE","label":"Firestore TTL value","type":"STRING","description":"In the units specified by TTL_EXPIRE_TYPE, how long do you want records to be ineligible for deletion by a TTL policy? This parameter requires the Firestore TTL type parameter to be set to a value other than `Never`. For example, if `Firestore TTL type` is set to `Day` then setting this parameter to `1` will specify a TTL of 1 day.","required":true,"default":"1","validationRegex":"^[1-9][0-9]*$","validationErrorMessage":"The value must be an integer value greater than zero."}],"preinstallContent":"Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Setup Google App Passwords\n\n**Google** no longer allows **Gmail** users to use their own passwords to authorize third-party apps and services. Instead, you have to use the [Sign in with App Passwords](https://support.google.com/accounts/answer/185833) service to generate a special password for each app you want to authorize. To do so:\n\n1.  Go to your [Google Account](https://myaccount.google.com/).\n2.  Select **Security**.\n3.  Under \"Signing in to Google,\" select **App Passwords**. You may need to sign in. If you don’t have this option, it might be because:\n    1.  2-Step Verification is not set up for your account.\n    2.  2-Step Verification is only set up for security keys.\n    3.  Your account is through work, school, or other organization.\n    4.  You turned on Advanced Protection.\n4.  At the bottom, choose **Select app** and choose **Other** option and then write the name of the app password (e.g. `Firebase Trigger Email from Firestore Extension`) and click **Generate**.\n5.  Follow the instructions to enter the App Password. The App Password is the 16-character code in the yellow bar on your device.\n6.  Tap **Done**.\n\nNow you can use your Google username with the generated password to authorize the extension.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s no-cost tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n\n#### Further reading & resources\n\nYou can find more information about this extension in the following articles:\n\n- [Sending Emails Using Firestore And Firebase Extensions](https://invertase.link/Y6Nu)","postinstallContent":"### See it in action\n\nYou can test out this extension right away!\n\n1.  Go to your [Cloud Firestore dashboard](https://console.firebase.google.com/project/${param:PROJECT_ID}/firestore/data) in the Firebase console.\n\n1.  If it doesn't already exist, create the collection you specified during installation: `${param:MAIL_COLLECTION}`.\n\n1.  Add a document with a `to` field and a `message` field with the following content:\n\n    ```js\n    to: ['someone@example.com'],\n    message: {\n      subject: 'Hello from Firebase!',\n      text: 'This is the plaintext section of the email body.',\n      html: 'This is the <code>HTML</code> section of the email body.',\n    }\n    ```\n\n1.  In a few seconds, you'll see a `delivery` field appear in the document. The field will update as the extension processes the email.\n\n**Note:** You can also use the [Firebase Admin SDK][admin_sdk] to add a document:\n\n```js\nadmin\n  .firestore()\n  .collection(\"${param:MAIL_COLLECTION}\")\n  .add({\n    to: \"someone@example.com\",\n    message: {\n      subject: \"Hello from Firebase!\",\n      text: \"This is the plaintext section of the email body.\",\n      html: \"This is the <code>HTML</code> section of the email body.\",\n    },\n  })\n  .then(() => console.log(\"Queued email for delivery!\"));\n```\n\n### Using this extension\n\nSee the [official documentation](https://firebase.google.com/docs/extensions/official/firestore-send-email) for information on using this extension, including advanced use cases such as using Handlebars templates and managing email delivery status.\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n\n[mail_collection]: https://console.firebase.google.com/project/_/firestore/data~2F${param:MAIL_COLLECTION}\n[admin_sdk]: https://firebase.google.com/docs/admin/setup\n[amp4email]: https://amp.dev/documentation/guides-and-tutorials/learn/email-spec/amp-email-format/\n[handlebars]: https://handlebarsjs.com/\n\n### Further reading & resources\n\nYou can find more information about this extension in the following articles:\n\n- [Sending Emails Using Firestore And Firebase Extensions](https://invertase.link/Y6Nu)","readmeContent":"# Trigger Email from Firestore\n\n**Author**: Firebase (**[https://firebase.google.com](https://firebase.google.com)**)\n\n**Description**: Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.\n\n\n\n**Details**: Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Setup Google App Passwords\n\n**Google** no longer allows **Gmail** users to use their own passwords to authorize third-party apps and services. Instead, you have to use the [Sign in with App Passwords](https://support.google.com/accounts/answer/185833) service to generate a special password for each app you want to authorize. To do so:\n\n1.  Go to your [Google Account](https://myaccount.google.com/).\n2.  Select **Security**.\n3.  Under \"Signing in to Google,\" select **App Passwords**. You may need to sign in. If you don’t have this option, it might be because:\n    1.  2-Step Verification is not set up for your account.\n    2.  2-Step Verification is only set up for security keys.\n    3.  Your account is through work, school, or other organization.\n    4.  You turned on Advanced Protection.\n4.  At the bottom, choose **Select app** and choose **Other** option and then write the name of the app password (e.g. `Firebase Trigger Email from Firestore Extension`) and click **Generate**.\n5.  Follow the instructions to enter the App Password. The App Password is the 16-character code in the yellow bar on your device.\n6.  Tap **Done**.\n\nNow you can use your Google username with the generated password to authorize the extension.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s no-cost tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n\n#### Further reading & resources\n\nYou can find more information about this extension in the following articles:\n\n- [Sending Emails Using Firestore And Firebase Extensions](https://invertase.link/Y6Nu)\n\n\n\n**Configuration Parameters:**\n\n* Cloud Functions location: Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).\n\n* SMTP connection URI: A URI representing an SMTP server this extension can use to deliver email. Note that port 25 is blocked by Google Cloud Platform, so we recommend using port 587 for SMTP connections. If you're using the SMTPS protocol, we recommend using port 465. In order to keep passwords secure, it is recommended to omit the password from the connection string while using the `SMTP Password` field for entering secrets and passwords. Passwords and secrets should now be included in `SMTP password` field.\nSecure format:\n `smtps://username@gmail.com@smtp.gmail.com:465` (username only)\n `smtps://smtp.gmail.com:465` (No username and password)\nBackwards Compatible (less secure):\n `smtps://username@gmail.com:password@smtp.gmail.com:465`. (username and password)\n\n* SMTP password: User password for the SMTP server\n\n* Email documents collection: What is the path to the collection that contains the documents used to build and send the emails?\n\n* Default FROM address: The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).\n\n* Default REPLY-TO address: The email address to use as the reply-to address (if it's not specified in the added email document).\n\n* Users collection: A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection.\n\n* Templates collection: A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document.\n\n* Firestore TTL type: Do you want the firestore records to be marked with an expireAt field for a TTL policy? If \"Never\" is selected then no expireAt field will be added. Otherwise you may specify the unit of time specified by the TTL_EXPIRE_VALUE parameter. Defaults to \"Never\".\n\n* Firestore TTL value: In the units specified by TTL_EXPIRE_TYPE, how long do you want records to be ineligible for deletion by a TTL policy? This parameter requires the Firestore TTL type parameter to be set to a value other than `Never`. For example, if `Firestore TTL type` is set to `Day` then setting this parameter to `1` will specify a TTL of 1 day.\n\n\n\n**Cloud Functions:**\n\n* **processQueue:** Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.\n\n\n\n**Access Required**:\n\n\n\nThis extension will operate with the following project IAM roles:\n\n* datastore.user (Reason: Allows this extension to access Cloud Firestore to read and process added email documents.)\n","displayName":"Trigger Email from Firestore","events":[{"type":"firebase.extensions.firestore-send-email.v1.onStart","description":"Occurs when the extension starts execution."},{"type":"firebase.extensions.firestore-send-email.v1.onProcessing","description":"Occurs when the extension attempts to process an email."},{"type":"firebase.extensions.firestore-send-email.v1.onRetry","description":"Occurs when the extension attempts to resend an email."},{"type":"firebase.extensions.firestore-send-email.v1.onPending","description":"Occurs when an email has a pending status."},{"type":"firebase.extensions.firestore-send-email.v1.onSuccess","description":"Occurs when the extension successfully sends an email."},{"type":"firebase.extensions.firestore-send-email.v1.onComplete","description":"Occurs when the extension completes execution."},{"type":"firebase.extensions.firestore-send-email.v1.onError","description":"Occurs when the extension fails to complete execution."}],"systemParams":[{"param":"firebaseextensions.v1beta.function/memory","label":"Function memory","type":"SELECT","description":"How much memory should be allocated to each function?","options":[{"value":"128","label":"128MB"},{"value":"256","label":"256MB"},{"value":"512","label":"512MB"},{"value":"1024","label":"1GB"},{"value":"2048","label":"2GB"},{"value":"4096","label":"4GB"},{"value":"8192","label":"8GB"}],"default":"256","advanced":true},{"param":"firebaseextensions.v1beta.function/timeoutSeconds","label":"Function timeout seconds","type":"STRING","description":"How long should functions run before timing out, in seconds (0-540)?","validationRegex":"^[1-9][0-9]{0,2}$","validationErrorMessage":"Function timeout should be an integer number of seconds, between 0 and 540","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnector","label":"VPC Connector","type":"STRING","description":"The VPC Network Connector that this cloud function can connect to. It can be either the fully-qualified URI, or the short name of the network connector resource. The format of this field is projects/*/locations/*/connectors/*.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/connectors/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnectorEgressSettings","label":"VPC Connector Egress settings","type":"SELECT","description":"Controls outgoing traffic when a VPC connector is configured","options":[{"value":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","label":"Unspecified"},{"value":"PRIVATE_RANGES_ONLY","label":"Private ranges only"},{"value":"ALL_TRAFFIC","label":"All traffic"}],"default":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","advanced":true},{"param":"firebaseextensions.v1beta.function/minInstances","label":"Minimum function instances","type":"STRING","description":"The minimum number of instances of each function to run at once (0-1000)","default":"0","validationRegex":"^[0-9]*$","validationErrorMessage":"Min instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/maxInstances","label":"Maximum function instances","type":"STRING","description":"The maximum number of instances of each function to run at once","default":"3000","validationRegex":"^[0-9]*$","validationErrorMessage":"Max instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/ingressSettings","label":"Function ingress settings","type":"SELECT","description":"Where should functions allow incoming traffic from?","options":[{"value":"ALLOW_ALL","label":"Allow all"},{"value":"ALLOW_INTERNAL_ONLY","label":"Allow internal only"},{"value":"ALLOW_INTERNAL_AND_GCLB","label":"Allow internal and GCLB"}],"advanced":true},{"param":"firebaseextensions.v1beta.function/labels","label":"Function labels","type":"STRING","description":"Do you wish to set any labels on this instance's Cloud Functions? If so, provide up to 55 labels in the format 'key1:value, key2:value'","validationRegex":"^([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63},\\s*)*([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63})$","advanced":true},{"param":"firebaseextensions.v1beta.function/kmsKeyName","label":"KMS key name","type":"STRING","description":"Do you want to use a Customer Managed Eencryption Key (CMEK) to encrypt this extension's functions? If you set this, you must also set a Docker repository encrypted by that key. See https://cloud.google.com/functions/docs/securing/cmek for more details.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/keyRings/([^/]+)/cryptoKeys/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/dockerRepository","label":"Docker repository","type":"STRING","description":"What Docker repository should be used to store function images? Default repository will be used if not set.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/repositories/([^/]+)$","advanced":true}]},"state":"PUBLISHED","hash":"ee6e3662955899aa8b51fee04857f200c9790852b4102609983a73d961276d2d","createTime":"2023-04-05T14:04:11.986445Z","id":"0.1.25-rc.0","listing":{"state":"UNLISTED"}},{"name":"publishers/firebase/extensions/firestore-send-email/versions/0.1.26","ref":"firebase/firestore-send-email@0.1.26","spec":{"specVersion":"v1beta","name":"firestore-send-email","version":"0.1.26","description":"Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.","roles":[{"role":"datastore.user","reason":"Allows this extension to access Cloud Firestore to read and process added email documents."}],"resources":[{"name":"processQueue","type":"firebaseextensions.v1beta.function","propertiesYaml":"eventTrigger:\n  eventType: providers/cloud.firestore/eventTypes/document.write\n  resource: projects/${param:PROJECT_ID}/databases/(default)/documents/${param:MAIL_COLLECTION}/{id}\nlocation: ${param:LOCATION}\nruntime: nodejs16\n","description":"Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.","deletionPolicy":"DELETE"}],"billingRequired":true,"author":{"authorName":"Firebase","url":"https://firebase.google.com"},"contributors":[{"authorName":"Michael Bleigh","url":"https://github.com/mbleigh"},{"authorName":"Invertase","email":"oss@invertase.io","url":"https://github.com/invertase"}],"license":"Apache-2.0","releaseNotesUrl":"https://github.com/firebase/extensions/blob/master/firestore-send-email/CHANGELOG.md","sourceUrl":"https://github.com/firebase/extensions/tree/master/firestore-send-email","params":[{"param":"LOCATION","label":"Cloud Functions location","type":"SELECT","description":"Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).","required":true,"options":[{"value":"us-central1","label":"Iowa (us-central1)"},{"value":"us-east1","label":"South Carolina (us-east1)"},{"value":"us-east4","label":"Northern Virginia (us-east4)"},{"value":"us-west2","label":"Los Angeles (us-west2)"},{"value":"us-west3","label":"Salt Lake City (us-west3)"},{"value":"us-west4","label":"Las Vegas (us-west4)"},{"value":"europe-central2","label":"Warsaw (europe-central2)"},{"value":"europe-west1","label":"Belgium (europe-west1)"},{"value":"europe-west2","label":"London (europe-west2)"},{"value":"europe-west3","label":"Frankfurt (europe-west3)"},{"value":"europe-west6","label":"Zurich (europe-west6)"},{"value":"asia-east1","label":"Taiwan (asia-east1)"},{"value":"asia-east2","label":"Hong Kong (asia-east2)"},{"value":"asia-northeast1","label":"Tokyo (asia-northeast1)"},{"value":"asia-northeast2","label":"Osaka (asia-northeast2)"},{"value":"asia-northeast3","label":"Seoul (asia-northeast3)"},{"value":"asia-south1","label":"Mumbai (asia-south1)"},{"value":"asia-southeast1","label":"Singapore (asia-southeast1)"},{"value":"asia-southeast2","label":"Jakarta (asia-southeast2)"},{"value":"northamerica-northeast1","label":"Montreal (northamerica-northeast1)"},{"value":"southamerica-east1","label":"Sao Paulo (southamerica-east1)"},{"value":"australia-southeast1","label":"Sydney (australia-southeast1)"}],"default":"us-central1","immutable":true},{"param":"SMTP_CONNECTION_URI","label":"SMTP connection URI","type":"STRING","description":"A URI representing an SMTP server this extension can use to deliver email. Note that port 25 is blocked by Google Cloud Platform, so we recommend using port 587 for SMTP connections. If you're using the SMTPS protocol, we recommend using port 465. In order to keep passwords secure, it is recommended to omit the password from the connection string while using the `SMTP Password` field for entering secrets and passwords. Passwords and secrets should now be included in `SMTP password` field.\nSecure format:\n `smtps://username@gmail.com@smtp.gmail.com:465` (username only)\n `smtps://smtp.gmail.com:465` (No username and password)\nBackwards Compatible (less secure):\n `smtps://username@gmail.com:password@smtp.gmail.com:465`. (username and password)","required":true,"example":"smtps://username@smtp.hostname.com:465","validationRegex":"^(smtp[s]*://.*?:[0-9]+.*$)","validationErrorMessage":"Invalid SMTP connection URI. Must be in the form `smtp(s)://username:password@hostname:port` or `smtp(s)://username@hostname:port`."},{"param":"SMTP_PASSWORD","label":"SMTP password","type":"SECRET","description":"User password for the SMTP server"},{"param":"MAIL_COLLECTION","label":"Email documents collection","type":"STRING","description":"What is the path to the collection that contains the documents used to build and send the emails?","required":true,"default":"mail","validationRegex":"^[^/]+(/[^/]+/[^/]+)*$","validationErrorMessage":"Must be a valid Cloud Firestore collection"},{"param":"DEFAULT_FROM","label":"Default FROM address","type":"STRING","description":"The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).","required":true,"example":"foobar@example.com","validationRegex":"^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$|^.*<(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})>$","validationErrorMessage":"Must be a valid email address or valid name plus email address"},{"param":"DEFAULT_REPLY_TO","label":"Default REPLY-TO address","type":"STRING","description":"The email address to use as the reply-to address (if it's not specified in the added email document)."},{"param":"USERS_COLLECTION","label":"Users collection","type":"STRING","description":"A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection."},{"param":"TEMPLATES_COLLECTION","label":"Templates collection","type":"STRING","description":"A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document."},{"param":"TTL_EXPIRE_TYPE","label":"Firestore TTL type","type":"SELECT","description":"Do you want the firestore records to be marked with an expireAt field for a TTL policy? If \"Never\" is selected then no expireAt field will be added. Otherwise you may specify the unit of time specified by the TTL_EXPIRE_VALUE parameter. Defaults to \"Never\".","required":true,"options":[{"value":"never","label":"Never"},{"value":"hour","label":"Hour"},{"value":"day","label":"Day"},{"value":"week","label":"Week"},{"value":"month","label":"Month"},{"value":"year","label":"Year"}],"default":"never"},{"param":"TTL_EXPIRE_VALUE","label":"Firestore TTL value","type":"STRING","description":"In the units specified by TTL_EXPIRE_TYPE, how long do you want records to be ineligible for deletion by a TTL policy? This parameter requires the Firestore TTL type parameter to be set to a value other than `Never`. For example, if `Firestore TTL type` is set to `Day` then setting this parameter to `1` will specify a TTL of 1 day.","required":true,"default":"1","validationRegex":"^[1-9][0-9]*$","validationErrorMessage":"The value must be an integer value greater than zero."}],"preinstallContent":"Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Setup Google App Passwords\n\n**Google** no longer allows **Gmail** users to use their own passwords to authorize third-party apps and services. Instead, you have to use the [Sign in with App Passwords](https://support.google.com/accounts/answer/185833) service to generate a special password for each app you want to authorize. To do so:\n\n1.  Go to your [Google Account](https://myaccount.google.com/).\n2.  Select **Security**.\n3.  Under \"Signing in to Google,\" select **App Passwords**. You may need to sign in. If you don’t have this option, it might be because:\n    1.  2-Step Verification is not set up for your account.\n    2.  2-Step Verification is only set up for security keys.\n    3.  Your account is through work, school, or other organization.\n    4.  You turned on Advanced Protection.\n4.  At the bottom, choose **Select app** and choose **Other** option and then write the name of the app password (e.g. `Firebase Trigger Email from Firestore Extension`) and click **Generate**.\n5.  Follow the instructions to enter the App Password. The App Password is the 16-character code in the yellow bar on your device.\n6.  Tap **Done**.\n\nNow you can use your Google username with the generated password to authorize the extension.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s no-cost tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n\n#### Further reading & resources\n\nYou can find more information about this extension in the following articles:\n\n- [Sending Emails Using Firestore And Firebase Extensions](https://invertase.link/Y6Nu)","postinstallContent":"### See it in action\n\nYou can test out this extension right away!\n\n1.  Go to your [Cloud Firestore dashboard](https://console.firebase.google.com/project/${param:PROJECT_ID}/firestore/data) in the Firebase console.\n\n1.  If it doesn't already exist, create the collection you specified during installation: `${param:MAIL_COLLECTION}`.\n\n1.  Add a document with a `to` field and a `message` field with the following content:\n\n    ```js\n    to: ['someone@example.com'],\n    message: {\n      subject: 'Hello from Firebase!',\n      text: 'This is the plaintext section of the email body.',\n      html: 'This is the <code>HTML</code> section of the email body.',\n    }\n    ```\n\n1.  In a few seconds, you'll see a `delivery` field appear in the document. The field will update as the extension processes the email.\n\n**Note:** You can also use the [Firebase Admin SDK][admin_sdk] to add a document:\n\n```js\nadmin\n  .firestore()\n  .collection(\"${param:MAIL_COLLECTION}\")\n  .add({\n    to: \"someone@example.com\",\n    message: {\n      subject: \"Hello from Firebase!\",\n      text: \"This is the plaintext section of the email body.\",\n      html: \"This is the <code>HTML</code> section of the email body.\",\n    },\n  })\n  .then(() => console.log(\"Queued email for delivery!\"));\n```\n\n### Using this extension\n\nSee the [official documentation](https://firebase.google.com/docs/extensions/official/firestore-send-email) for information on using this extension, including advanced use cases such as using Handlebars templates and managing email delivery status.\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n\n[mail_collection]: https://console.firebase.google.com/project/_/firestore/data~2F${param:MAIL_COLLECTION}\n[admin_sdk]: https://firebase.google.com/docs/admin/setup\n[amp4email]: https://amp.dev/documentation/guides-and-tutorials/learn/email-spec/amp-email-format/\n[handlebars]: https://handlebarsjs.com/\n\n### Further reading & resources\n\nYou can find more information about this extension in the following articles:\n\n- [Sending Emails Using Firestore And Firebase Extensions](https://invertase.link/Y6Nu)","readmeContent":"# Trigger Email from Firestore\n\n**Author**: Firebase (**[https://firebase.google.com](https://firebase.google.com)**)\n\n**Description**: Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.\n\n\n\n**Details**: Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Setup Google App Passwords\n\n**Google** no longer allows **Gmail** users to use their own passwords to authorize third-party apps and services. Instead, you have to use the [Sign in with App Passwords](https://support.google.com/accounts/answer/185833) service to generate a special password for each app you want to authorize. To do so:\n\n1.  Go to your [Google Account](https://myaccount.google.com/).\n2.  Select **Security**.\n3.  Under \"Signing in to Google,\" select **App Passwords**. You may need to sign in. If you don’t have this option, it might be because:\n    1.  2-Step Verification is not set up for your account.\n    2.  2-Step Verification is only set up for security keys.\n    3.  Your account is through work, school, or other organization.\n    4.  You turned on Advanced Protection.\n4.  At the bottom, choose **Select app** and choose **Other** option and then write the name of the app password (e.g. `Firebase Trigger Email from Firestore Extension`) and click **Generate**.\n5.  Follow the instructions to enter the App Password. The App Password is the 16-character code in the yellow bar on your device.\n6.  Tap **Done**.\n\nNow you can use your Google username with the generated password to authorize the extension.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s no-cost tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n\n#### Further reading & resources\n\nYou can find more information about this extension in the following articles:\n\n- [Sending Emails Using Firestore And Firebase Extensions](https://invertase.link/Y6Nu)\n\n\n\n**Configuration Parameters:**\n\n* Cloud Functions location: Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).\n\n* SMTP connection URI: A URI representing an SMTP server this extension can use to deliver email. Note that port 25 is blocked by Google Cloud Platform, so we recommend using port 587 for SMTP connections. If you're using the SMTPS protocol, we recommend using port 465. In order to keep passwords secure, it is recommended to omit the password from the connection string while using the `SMTP Password` field for entering secrets and passwords. Passwords and secrets should now be included in `SMTP password` field.\nSecure format:\n `smtps://username@gmail.com@smtp.gmail.com:465` (username only)\n `smtps://smtp.gmail.com:465` (No username and password)\nBackwards Compatible (less secure):\n `smtps://username@gmail.com:password@smtp.gmail.com:465`. (username and password)\n\n* SMTP password: User password for the SMTP server\n\n* Email documents collection: What is the path to the collection that contains the documents used to build and send the emails?\n\n* Default FROM address: The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).\n\n* Default REPLY-TO address: The email address to use as the reply-to address (if it's not specified in the added email document).\n\n* Users collection: A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection.\n\n* Templates collection: A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document.\n\n* Firestore TTL type: Do you want the firestore records to be marked with an expireAt field for a TTL policy? If \"Never\" is selected then no expireAt field will be added. Otherwise you may specify the unit of time specified by the TTL_EXPIRE_VALUE parameter. Defaults to \"Never\".\n\n* Firestore TTL value: In the units specified by TTL_EXPIRE_TYPE, how long do you want records to be ineligible for deletion by a TTL policy? This parameter requires the Firestore TTL type parameter to be set to a value other than `Never`. For example, if `Firestore TTL type` is set to `Day` then setting this parameter to `1` will specify a TTL of 1 day.\n\n\n\n**Cloud Functions:**\n\n* **processQueue:** Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.\n\n\n\n**Access Required**:\n\n\n\nThis extension will operate with the following project IAM roles:\n\n* datastore.user (Reason: Allows this extension to access Cloud Firestore to read and process added email documents.)\n","displayName":"Trigger Email from Firestore","events":[{"type":"firebase.extensions.firestore-send-email.v1.onStart","description":"Occurs when the extension starts execution."},{"type":"firebase.extensions.firestore-send-email.v1.onProcessing","description":"Occurs when the extension attempts to process an email."},{"type":"firebase.extensions.firestore-send-email.v1.onRetry","description":"Occurs when the extension attempts to resend an email."},{"type":"firebase.extensions.firestore-send-email.v1.onPending","description":"Occurs when an email has a pending status."},{"type":"firebase.extensions.firestore-send-email.v1.onSuccess","description":"Occurs when the extension successfully sends an email."},{"type":"firebase.extensions.firestore-send-email.v1.onComplete","description":"Occurs when the extension completes execution."},{"type":"firebase.extensions.firestore-send-email.v1.onError","description":"Occurs when the extension fails to complete execution."}],"systemParams":[{"param":"firebaseextensions.v1beta.function/memory","label":"Function memory","type":"SELECT","description":"How much memory should be allocated to each function?","options":[{"value":"128","label":"128MB"},{"value":"256","label":"256MB"},{"value":"512","label":"512MB"},{"value":"1024","label":"1GB"},{"value":"2048","label":"2GB"},{"value":"4096","label":"4GB"},{"value":"8192","label":"8GB"}],"default":"256","advanced":true},{"param":"firebaseextensions.v1beta.function/timeoutSeconds","label":"Function timeout seconds","type":"STRING","description":"How long should functions run before timing out, in seconds (0-540)?","validationRegex":"^[1-9][0-9]{0,2}$","validationErrorMessage":"Function timeout should be an integer number of seconds, between 0 and 540","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnector","label":"VPC Connector","type":"STRING","description":"The VPC Network Connector that this cloud function can connect to. It can be either the fully-qualified URI, or the short name of the network connector resource. The format of this field is projects/*/locations/*/connectors/*.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/connectors/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnectorEgressSettings","label":"VPC Connector Egress settings","type":"SELECT","description":"Controls outgoing traffic when a VPC connector is configured","options":[{"value":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","label":"Unspecified"},{"value":"PRIVATE_RANGES_ONLY","label":"Private ranges only"},{"value":"ALL_TRAFFIC","label":"All traffic"}],"default":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","advanced":true},{"param":"firebaseextensions.v1beta.function/minInstances","label":"Minimum function instances","type":"STRING","description":"The minimum number of instances of each function to run at once (0-1000)","default":"0","validationRegex":"^[0-9]*$","validationErrorMessage":"Min instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/maxInstances","label":"Maximum function instances","type":"STRING","description":"The maximum number of instances of each function to run at once","default":"3000","validationRegex":"^[0-9]*$","validationErrorMessage":"Max instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/ingressSettings","label":"Function ingress settings","type":"SELECT","description":"Where should functions allow incoming traffic from?","options":[{"value":"ALLOW_ALL","label":"Allow all"},{"value":"ALLOW_INTERNAL_ONLY","label":"Allow internal only"},{"value":"ALLOW_INTERNAL_AND_GCLB","label":"Allow internal and GCLB"}],"advanced":true},{"param":"firebaseextensions.v1beta.function/labels","label":"Function labels","type":"STRING","description":"Do you wish to set any labels on this instance's Cloud Functions? If so, provide up to 55 labels in the format 'key1:value, key2:value'","validationRegex":"^([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63},\\s*)*([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63})$","advanced":true},{"param":"firebaseextensions.v1beta.function/kmsKeyName","label":"KMS key name","type":"STRING","description":"Do you want to use a Customer Managed Eencryption Key (CMEK) to encrypt this extension's functions? If you set this, you must also set a Docker repository encrypted by that key. See https://cloud.google.com/functions/docs/securing/cmek for more details.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/keyRings/([^/]+)/cryptoKeys/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/dockerRepository","label":"Docker repository","type":"STRING","description":"What Docker repository should be used to store function images? Default repository will be used if not set.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/repositories/([^/]+)$","advanced":true}]},"state":"PUBLISHED","hash":"f2f0e5f105368f50af6cf1c43c0379e953c16bae309cbc0a2e59e73560fc962c","createTime":"2023-06-07T17:20:42.346358Z","id":"0.1.26","releaseNotes":"feature - bump to nodejs16\n","buildSourceUri":"https://github.com/firebase/extensions/tree/25537363d0d4416fd5d9326a0d5f452fd6e342f3","listing":{"state":"APPROVED"},"metrics":{"activeInstallCount":"900"},"extensionRoot":"firestore-send-email"},{"name":"publishers/firebase/extensions/firestore-send-email/versions/0.1.26-rc.0","ref":"firebase/firestore-send-email@0.1.26-rc.0","spec":{"specVersion":"v1beta","name":"firestore-send-email","version":"0.1.26-rc.0","description":"Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.","roles":[{"role":"datastore.user","reason":"Allows this extension to access Cloud Firestore to read and process added email documents."}],"resources":[{"name":"processQueue","type":"firebaseextensions.v1beta.function","propertiesYaml":"eventTrigger:\n  eventType: providers/cloud.firestore/eventTypes/document.write\n  resource: projects/${param:PROJECT_ID}/databases/(default)/documents/${param:MAIL_COLLECTION}/{id}\nlocation: ${param:LOCATION}\nruntime: nodejs16\n","description":"Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.","deletionPolicy":"DELETE"}],"billingRequired":true,"author":{"authorName":"Firebase","url":"https://firebase.google.com"},"contributors":[{"authorName":"Michael Bleigh","url":"https://github.com/mbleigh"},{"authorName":"Invertase","email":"oss@invertase.io","url":"https://github.com/invertase"}],"license":"Apache-2.0","releaseNotesUrl":"https://github.com/firebase/extensions/blob/master/firestore-send-email/CHANGELOG.md","sourceUrl":"https://github.com/firebase/extensions/tree/master/firestore-send-email","params":[{"param":"LOCATION","label":"Cloud Functions location","type":"SELECT","description":"Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).","required":true,"options":[{"value":"us-central1","label":"Iowa (us-central1)"},{"value":"us-east1","label":"South Carolina (us-east1)"},{"value":"us-east4","label":"Northern Virginia (us-east4)"},{"value":"us-west2","label":"Los Angeles (us-west2)"},{"value":"us-west3","label":"Salt Lake City (us-west3)"},{"value":"us-west4","label":"Las Vegas (us-west4)"},{"value":"europe-central2","label":"Warsaw (europe-central2)"},{"value":"europe-west1","label":"Belgium (europe-west1)"},{"value":"europe-west2","label":"London (europe-west2)"},{"value":"europe-west3","label":"Frankfurt (europe-west3)"},{"value":"europe-west6","label":"Zurich (europe-west6)"},{"value":"asia-east1","label":"Taiwan (asia-east1)"},{"value":"asia-east2","label":"Hong Kong (asia-east2)"},{"value":"asia-northeast1","label":"Tokyo (asia-northeast1)"},{"value":"asia-northeast2","label":"Osaka (asia-northeast2)"},{"value":"asia-northeast3","label":"Seoul (asia-northeast3)"},{"value":"asia-south1","label":"Mumbai (asia-south1)"},{"value":"asia-southeast1","label":"Singapore (asia-southeast1)"},{"value":"asia-southeast2","label":"Jakarta (asia-southeast2)"},{"value":"northamerica-northeast1","label":"Montreal (northamerica-northeast1)"},{"value":"southamerica-east1","label":"Sao Paulo (southamerica-east1)"},{"value":"australia-southeast1","label":"Sydney (australia-southeast1)"}],"default":"us-central1","immutable":true},{"param":"SMTP_CONNECTION_URI","label":"SMTP connection URI","type":"STRING","description":"A URI representing an SMTP server this extension can use to deliver email. Note that port 25 is blocked by Google Cloud Platform, so we recommend using port 587 for SMTP connections. If you're using the SMTPS protocol, we recommend using port 465. In order to keep passwords secure, it is recommended to omit the password from the connection string while using the `SMTP Password` field for entering secrets and passwords. Passwords and secrets should now be included in `SMTP password` field.\nSecure format:\n `smtps://username@gmail.com@smtp.gmail.com:465` (username only)\n `smtps://smtp.gmail.com:465` (No username and password)\nBackwards Compatible (less secure):\n `smtps://username@gmail.com:password@smtp.gmail.com:465`. (username and password)","required":true,"example":"smtps://username@smtp.hostname.com:465","validationRegex":"^(smtp[s]*://.*?:[0-9]+.*$)","validationErrorMessage":"Invalid SMTP connection URI. Must be in the form `smtp(s)://username:password@hostname:port` or `smtp(s)://username@hostname:port`."},{"param":"SMTP_PASSWORD","label":"SMTP password","type":"SECRET","description":"User password for the SMTP server"},{"param":"MAIL_COLLECTION","label":"Email documents collection","type":"STRING","description":"What is the path to the collection that contains the documents used to build and send the emails?","required":true,"default":"mail","validationRegex":"^[^/]+(/[^/]+/[^/]+)*$","validationErrorMessage":"Must be a valid Cloud Firestore collection"},{"param":"DEFAULT_FROM","label":"Default FROM address","type":"STRING","description":"The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).","required":true,"example":"foobar@example.com","validationRegex":"^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$|^.*<(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})>$","validationErrorMessage":"Must be a valid email address or valid name plus email address"},{"param":"DEFAULT_REPLY_TO","label":"Default REPLY-TO address","type":"STRING","description":"The email address to use as the reply-to address (if it's not specified in the added email document)."},{"param":"USERS_COLLECTION","label":"Users collection","type":"STRING","description":"A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection."},{"param":"TEMPLATES_COLLECTION","label":"Templates collection","type":"STRING","description":"A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document."},{"param":"TTL_EXPIRE_TYPE","label":"Firestore TTL type","type":"SELECT","description":"Do you want the firestore records to be marked with an expireAt field for a TTL policy? If \"Never\" is selected then no expireAt field will be added. Otherwise you may specify the unit of time specified by the TTL_EXPIRE_VALUE parameter. Defaults to \"Never\".","required":true,"options":[{"value":"never","label":"Never"},{"value":"hour","label":"Hour"},{"value":"day","label":"Day"},{"value":"week","label":"Week"},{"value":"month","label":"Month"},{"value":"year","label":"Year"}],"default":"never"},{"param":"TTL_EXPIRE_VALUE","label":"Firestore TTL value","type":"STRING","description":"In the units specified by TTL_EXPIRE_TYPE, how long do you want records to be ineligible for deletion by a TTL policy? This parameter requires the Firestore TTL type parameter to be set to a value other than `Never`. For example, if `Firestore TTL type` is set to `Day` then setting this parameter to `1` will specify a TTL of 1 day.","required":true,"default":"1","validationRegex":"^[1-9][0-9]*$","validationErrorMessage":"The value must be an integer value greater than zero."}],"preinstallContent":"Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Setup Google App Passwords\n\n**Google** no longer allows **Gmail** users to use their own passwords to authorize third-party apps and services. Instead, you have to use the [Sign in with App Passwords](https://support.google.com/accounts/answer/185833) service to generate a special password for each app you want to authorize. To do so:\n\n1.  Go to your [Google Account](https://myaccount.google.com/).\n2.  Select **Security**.\n3.  Under \"Signing in to Google,\" select **App Passwords**. You may need to sign in. If you don’t have this option, it might be because:\n    1.  2-Step Verification is not set up for your account.\n    2.  2-Step Verification is only set up for security keys.\n    3.  Your account is through work, school, or other organization.\n    4.  You turned on Advanced Protection.\n4.  At the bottom, choose **Select app** and choose **Other** option and then write the name of the app password (e.g. `Firebase Trigger Email from Firestore Extension`) and click **Generate**.\n5.  Follow the instructions to enter the App Password. The App Password is the 16-character code in the yellow bar on your device.\n6.  Tap **Done**.\n\nNow you can use your Google username with the generated password to authorize the extension.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s no-cost tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n\n#### Further reading & resources\n\nYou can find more information about this extension in the following articles:\n\n- [Sending Emails Using Firestore And Firebase Extensions](https://invertase.link/Y6Nu)","postinstallContent":"### See it in action\n\nYou can test out this extension right away!\n\n1.  Go to your [Cloud Firestore dashboard](https://console.firebase.google.com/project/${param:PROJECT_ID}/firestore/data) in the Firebase console.\n\n1.  If it doesn't already exist, create the collection you specified during installation: `${param:MAIL_COLLECTION}`.\n\n1.  Add a document with a `to` field and a `message` field with the following content:\n\n    ```js\n    to: ['someone@example.com'],\n    message: {\n      subject: 'Hello from Firebase!',\n      text: 'This is the plaintext section of the email body.',\n      html: 'This is the <code>HTML</code> section of the email body.',\n    }\n    ```\n\n1.  In a few seconds, you'll see a `delivery` field appear in the document. The field will update as the extension processes the email.\n\n**Note:** You can also use the [Firebase Admin SDK][admin_sdk] to add a document:\n\n```js\nadmin\n  .firestore()\n  .collection(\"${param:MAIL_COLLECTION}\")\n  .add({\n    to: \"someone@example.com\",\n    message: {\n      subject: \"Hello from Firebase!\",\n      text: \"This is the plaintext section of the email body.\",\n      html: \"This is the <code>HTML</code> section of the email body.\",\n    },\n  })\n  .then(() => console.log(\"Queued email for delivery!\"));\n```\n\n### Using this extension\n\nSee the [official documentation](https://firebase.google.com/docs/extensions/official/firestore-send-email) for information on using this extension, including advanced use cases such as using Handlebars templates and managing email delivery status.\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n\n[mail_collection]: https://console.firebase.google.com/project/_/firestore/data~2F${param:MAIL_COLLECTION}\n[admin_sdk]: https://firebase.google.com/docs/admin/setup\n[amp4email]: https://amp.dev/documentation/guides-and-tutorials/learn/email-spec/amp-email-format/\n[handlebars]: https://handlebarsjs.com/\n\n### Further reading & resources\n\nYou can find more information about this extension in the following articles:\n\n- [Sending Emails Using Firestore And Firebase Extensions](https://invertase.link/Y6Nu)","readmeContent":"# Trigger Email from Firestore\n\n**Author**: Firebase (**[https://firebase.google.com](https://firebase.google.com)**)\n\n**Description**: Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.\n\n\n\n**Details**: Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Setup Google App Passwords\n\n**Google** no longer allows **Gmail** users to use their own passwords to authorize third-party apps and services. Instead, you have to use the [Sign in with App Passwords](https://support.google.com/accounts/answer/185833) service to generate a special password for each app you want to authorize. To do so:\n\n1.  Go to your [Google Account](https://myaccount.google.com/).\n2.  Select **Security**.\n3.  Under \"Signing in to Google,\" select **App Passwords**. You may need to sign in. If you don’t have this option, it might be because:\n    1.  2-Step Verification is not set up for your account.\n    2.  2-Step Verification is only set up for security keys.\n    3.  Your account is through work, school, or other organization.\n    4.  You turned on Advanced Protection.\n4.  At the bottom, choose **Select app** and choose **Other** option and then write the name of the app password (e.g. `Firebase Trigger Email from Firestore Extension`) and click **Generate**.\n5.  Follow the instructions to enter the App Password. The App Password is the 16-character code in the yellow bar on your device.\n6.  Tap **Done**.\n\nNow you can use your Google username with the generated password to authorize the extension.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s no-cost tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n\n#### Further reading & resources\n\nYou can find more information about this extension in the following articles:\n\n- [Sending Emails Using Firestore And Firebase Extensions](https://invertase.link/Y6Nu)\n\n\n\n**Configuration Parameters:**\n\n* Cloud Functions location: Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).\n\n* SMTP connection URI: A URI representing an SMTP server this extension can use to deliver email. Note that port 25 is blocked by Google Cloud Platform, so we recommend using port 587 for SMTP connections. If you're using the SMTPS protocol, we recommend using port 465. In order to keep passwords secure, it is recommended to omit the password from the connection string while using the `SMTP Password` field for entering secrets and passwords. Passwords and secrets should now be included in `SMTP password` field.\nSecure format:\n `smtps://username@gmail.com@smtp.gmail.com:465` (username only)\n `smtps://smtp.gmail.com:465` (No username and password)\nBackwards Compatible (less secure):\n `smtps://username@gmail.com:password@smtp.gmail.com:465`. (username and password)\n\n* SMTP password: User password for the SMTP server\n\n* Email documents collection: What is the path to the collection that contains the documents used to build and send the emails?\n\n* Default FROM address: The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).\n\n* Default REPLY-TO address: The email address to use as the reply-to address (if it's not specified in the added email document).\n\n* Users collection: A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection.\n\n* Templates collection: A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document.\n\n* Firestore TTL type: Do you want the firestore records to be marked with an expireAt field for a TTL policy? If \"Never\" is selected then no expireAt field will be added. Otherwise you may specify the unit of time specified by the TTL_EXPIRE_VALUE parameter. Defaults to \"Never\".\n\n* Firestore TTL value: In the units specified by TTL_EXPIRE_TYPE, how long do you want records to be ineligible for deletion by a TTL policy? This parameter requires the Firestore TTL type parameter to be set to a value other than `Never`. For example, if `Firestore TTL type` is set to `Day` then setting this parameter to `1` will specify a TTL of 1 day.\n\n\n\n**Cloud Functions:**\n\n* **processQueue:** Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.\n\n\n\n**Access Required**:\n\n\n\nThis extension will operate with the following project IAM roles:\n\n* datastore.user (Reason: Allows this extension to access Cloud Firestore to read and process added email documents.)\n","displayName":"Trigger Email from Firestore","events":[{"type":"firebase.extensions.firestore-send-email.v1.onStart","description":"Occurs when the extension starts execution."},{"type":"firebase.extensions.firestore-send-email.v1.onProcessing","description":"Occurs when the extension attempts to process an email."},{"type":"firebase.extensions.firestore-send-email.v1.onRetry","description":"Occurs when the extension attempts to resend an email."},{"type":"firebase.extensions.firestore-send-email.v1.onPending","description":"Occurs when an email has a pending status."},{"type":"firebase.extensions.firestore-send-email.v1.onSuccess","description":"Occurs when the extension successfully sends an email."},{"type":"firebase.extensions.firestore-send-email.v1.onComplete","description":"Occurs when the extension completes execution."},{"type":"firebase.extensions.firestore-send-email.v1.onError","description":"Occurs when the extension fails to complete execution."}],"systemParams":[{"param":"firebaseextensions.v1beta.function/memory","label":"Function memory","type":"SELECT","description":"How much memory should be allocated to each function?","options":[{"value":"128","label":"128MB"},{"value":"256","label":"256MB"},{"value":"512","label":"512MB"},{"value":"1024","label":"1GB"},{"value":"2048","label":"2GB"},{"value":"4096","label":"4GB"},{"value":"8192","label":"8GB"}],"default":"256","advanced":true},{"param":"firebaseextensions.v1beta.function/timeoutSeconds","label":"Function timeout seconds","type":"STRING","description":"How long should functions run before timing out, in seconds (0-540)?","validationRegex":"^[1-9][0-9]{0,2}$","validationErrorMessage":"Function timeout should be an integer number of seconds, between 0 and 540","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnector","label":"VPC Connector","type":"STRING","description":"The VPC Network Connector that this cloud function can connect to. It can be either the fully-qualified URI, or the short name of the network connector resource. The format of this field is projects/*/locations/*/connectors/*.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/connectors/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnectorEgressSettings","label":"VPC Connector Egress settings","type":"SELECT","description":"Controls outgoing traffic when a VPC connector is configured","options":[{"value":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","label":"Unspecified"},{"value":"PRIVATE_RANGES_ONLY","label":"Private ranges only"},{"value":"ALL_TRAFFIC","label":"All traffic"}],"default":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","advanced":true},{"param":"firebaseextensions.v1beta.function/minInstances","label":"Minimum function instances","type":"STRING","description":"The minimum number of instances of each function to run at once (0-1000)","default":"0","validationRegex":"^[0-9]*$","validationErrorMessage":"Min instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/maxInstances","label":"Maximum function instances","type":"STRING","description":"The maximum number of instances of each function to run at once","default":"3000","validationRegex":"^[0-9]*$","validationErrorMessage":"Max instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/ingressSettings","label":"Function ingress settings","type":"SELECT","description":"Where should functions allow incoming traffic from?","options":[{"value":"ALLOW_ALL","label":"Allow all"},{"value":"ALLOW_INTERNAL_ONLY","label":"Allow internal only"},{"value":"ALLOW_INTERNAL_AND_GCLB","label":"Allow internal and GCLB"}],"advanced":true},{"param":"firebaseextensions.v1beta.function/labels","label":"Function labels","type":"STRING","description":"Do you wish to set any labels on this instance's Cloud Functions? If so, provide up to 55 labels in the format 'key1:value, key2:value'","validationRegex":"^([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63},\\s*)*([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63})$","advanced":true},{"param":"firebaseextensions.v1beta.function/kmsKeyName","label":"KMS key name","type":"STRING","description":"Do you want to use a Customer Managed Eencryption Key (CMEK) to encrypt this extension's functions? If you set this, you must also set a Docker repository encrypted by that key. See https://cloud.google.com/functions/docs/securing/cmek for more details.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/keyRings/([^/]+)/cryptoKeys/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/dockerRepository","label":"Docker repository","type":"STRING","description":"What Docker repository should be used to store function images? Default repository will be used if not set.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/repositories/([^/]+)$","advanced":true}]},"state":"PUBLISHED","hash":"594a8901b0bba0c143e1dce9a7c4b053f17e5e4ad2b0f24f1cb29e64720fae40","createTime":"2023-06-06T16:09:24.192349Z","id":"0.1.26-rc.0","buildSourceUri":"https://github.com/firebase/extensions/tree/56b4e9aa09971c65eca8e3e14065ca567e7b2e55","listing":{"state":"UNLISTED"},"extensionRoot":"firestore-send-email"},{"name":"publishers/firebase/extensions/firestore-send-email/versions/0.1.27","ref":"firebase/firestore-send-email@0.1.27","spec":{"specVersion":"v1beta","name":"firestore-send-email","version":"0.1.27","description":"Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.","roles":[{"role":"datastore.user","reason":"Allows this extension to access Cloud Firestore to read and process added email documents."}],"resources":[{"name":"processQueue","type":"firebaseextensions.v1beta.function","propertiesYaml":"eventTrigger:\n  eventType: providers/cloud.firestore/eventTypes/document.write\n  resource: projects/${param:PROJECT_ID}/databases/(default)/documents/${param:MAIL_COLLECTION}/{id}\nruntime: nodejs18\n","description":"Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.","deletionPolicy":"DELETE"}],"billingRequired":true,"author":{"authorName":"Firebase","url":"https://firebase.google.com"},"contributors":[{"authorName":"Michael Bleigh","url":"https://github.com/mbleigh"},{"authorName":"Invertase","email":"oss@invertase.io","url":"https://github.com/invertase"}],"license":"Apache-2.0","releaseNotesUrl":"https://github.com/firebase/extensions/blob/master/firestore-send-email/CHANGELOG.md","sourceUrl":"https://github.com/firebase/extensions/tree/master/firestore-send-email","params":[{"param":"SMTP_CONNECTION_URI","label":"SMTP connection URI","type":"STRING","description":"A URI representing an SMTP server this extension can use to deliver email. Note that port 25 is blocked by Google Cloud Platform, so we recommend using port 587 for SMTP connections. If you're using the SMTPS protocol, we recommend using port 465. In order to keep passwords secure, it is recommended to omit the password from the connection string while using the `SMTP Password` field for entering secrets and passwords. Passwords and secrets should now be included in `SMTP password` field.\nSecure format:\n `smtps://username@gmail.com@smtp.gmail.com:465` (username only)\n `smtps://smtp.gmail.com:465` (No username and password)\nBackwards Compatible (less secure):\n `smtps://username@gmail.com:password@smtp.gmail.com:465`. (username and password)","required":true,"example":"smtps://username@smtp.hostname.com:465","validationRegex":"^(smtp[s]*://.*?:[0-9]+.*$)","validationErrorMessage":"Invalid SMTP connection URI. Must be in the form `smtp(s)://username:password@hostname:port` or `smtp(s)://username@hostname:port`."},{"param":"SMTP_PASSWORD","label":"SMTP password","type":"SECRET","description":"User password for the SMTP server"},{"param":"MAIL_COLLECTION","label":"Email documents collection","type":"STRING","description":"What is the path to the collection that contains the documents used to build and send the emails?","required":true,"default":"mail","validationRegex":"^[^/]+(/[^/]+/[^/]+)*$","validationErrorMessage":"Must be a valid Cloud Firestore collection"},{"param":"DEFAULT_FROM","label":"Default FROM address","type":"STRING","description":"The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).","required":true,"example":"foobar@example.com","validationRegex":"^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$|^.*<(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})>$","validationErrorMessage":"Must be a valid email address or valid name plus email address"},{"param":"DEFAULT_REPLY_TO","label":"Default REPLY-TO address","type":"STRING","description":"The email address to use as the reply-to address (if it's not specified in the added email document)."},{"param":"USERS_COLLECTION","label":"Users collection","type":"STRING","description":"A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection."},{"param":"TEMPLATES_COLLECTION","label":"Templates collection","type":"STRING","description":"A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document."},{"param":"TTL_EXPIRE_TYPE","label":"Firestore TTL type","type":"SELECT","description":"Do you want the firestore records to be marked with an expireAt field for a TTL policy? If \"Never\" is selected then no expireAt field will be added. Otherwise you may specify the unit of time specified by the TTL_EXPIRE_VALUE parameter. Defaults to \"Never\".","required":true,"options":[{"value":"never","label":"Never"},{"value":"hour","label":"Hour"},{"value":"day","label":"Day"},{"value":"week","label":"Week"},{"value":"month","label":"Month"},{"value":"year","label":"Year"}],"default":"never"},{"param":"TTL_EXPIRE_VALUE","label":"Firestore TTL value","type":"STRING","description":"In the units specified by TTL_EXPIRE_TYPE, how long do you want records to be ineligible for deletion by a TTL policy? This parameter requires the Firestore TTL type parameter to be set to a value other than `Never`. For example, if `Firestore TTL type` is set to `Day` then setting this parameter to `1` will specify a TTL of 1 day.","required":true,"default":"1","validationRegex":"^[1-9][0-9]*$","validationErrorMessage":"The value must be an integer value greater than zero."}],"preinstallContent":"Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Setup Google App Passwords\n\n**Google** no longer allows **Gmail** users to use their own passwords to authorize third-party apps and services. Instead, you have to use the [Sign in with App Passwords](https://support.google.com/accounts/answer/185833) service to generate a special password for each app you want to authorize. To do so:\n\n1.  Go to your [Google Account](https://myaccount.google.com/).\n2.  Select **Security**.\n3.  Under \"Signing in to Google,\" select **App Passwords**. You may need to sign in. If you don’t have this option, it might be because:\n    1.  2-Step Verification is not set up for your account.\n    2.  2-Step Verification is only set up for security keys.\n    3.  Your account is through work, school, or other organization.\n    4.  You turned on Advanced Protection.\n4.  At the bottom, choose **Select app** and choose **Other** option and then write the name of the app password (e.g. `Firebase Trigger Email from Firestore Extension`) and click **Generate**.\n5.  Follow the instructions to enter the App Password. The App Password is the 16-character code in the yellow bar on your device.\n6.  Tap **Done**.\n\nNow you can use your Google username with the generated password to authorize the extension.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s no-cost tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n\n#### Further reading & resources\n\nYou can find more information about this extension in the following articles:\n\n- [Sending Emails Using Firestore And Firebase Extensions](https://invertase.link/Y6Nu)","postinstallContent":"### See it in action\n\nYou can test out this extension right away!\n\n1.  Go to your [Cloud Firestore dashboard](https://console.firebase.google.com/project/${param:PROJECT_ID}/firestore/data) in the Firebase console.\n\n1.  If it doesn't already exist, create the collection you specified during installation: `${param:MAIL_COLLECTION}`.\n\n1.  Add a document with a `to` field and a `message` field with the following content:\n\n    ```js\n    to: ['someone@example.com'],\n    message: {\n      subject: 'Hello from Firebase!',\n      text: 'This is the plaintext section of the email body.',\n      html: 'This is the <code>HTML</code> section of the email body.',\n    }\n    ```\n\n1.  In a few seconds, you'll see a `delivery` field appear in the document. The field will update as the extension processes the email.\n\n**Note:** You can also use the [Firebase Admin SDK][admin_sdk] to add a document:\n\n```js\nadmin\n  .firestore()\n  .collection(\"${param:MAIL_COLLECTION}\")\n  .add({\n    to: \"someone@example.com\",\n    message: {\n      subject: \"Hello from Firebase!\",\n      text: \"This is the plaintext section of the email body.\",\n      html: \"This is the <code>HTML</code> section of the email body.\",\n    },\n  })\n  .then(() => console.log(\"Queued email for delivery!\"));\n```\n\n### Using this extension\n\nSee the [official documentation](https://firebase.google.com/docs/extensions/official/firestore-send-email) for information on using this extension, including advanced use cases such as using Handlebars templates and managing email delivery status.\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n\n[mail_collection]: https://console.firebase.google.com/project/_/firestore/data~2F${param:MAIL_COLLECTION}\n[admin_sdk]: https://firebase.google.com/docs/admin/setup\n[amp4email]: https://amp.dev/documentation/guides-and-tutorials/learn/email-spec/amp-email-format/\n[handlebars]: https://handlebarsjs.com/\n\n### Further reading & resources\n\nYou can find more information about this extension in the following articles:\n\n- [Sending Emails Using Firestore And Firebase Extensions](https://invertase.link/Y6Nu)","readmeContent":"# Trigger Email from Firestore\n\n**Author**: Firebase (**[https://firebase.google.com](https://firebase.google.com)**)\n\n**Description**: Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.\n\n\n\n**Details**: Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Setup Google App Passwords\n\n**Google** no longer allows **Gmail** users to use their own passwords to authorize third-party apps and services. Instead, you have to use the [Sign in with App Passwords](https://support.google.com/accounts/answer/185833) service to generate a special password for each app you want to authorize. To do so:\n\n1.  Go to your [Google Account](https://myaccount.google.com/).\n2.  Select **Security**.\n3.  Under \"Signing in to Google,\" select **App Passwords**. You may need to sign in. If you don’t have this option, it might be because:\n    1.  2-Step Verification is not set up for your account.\n    2.  2-Step Verification is only set up for security keys.\n    3.  Your account is through work, school, or other organization.\n    4.  You turned on Advanced Protection.\n4.  At the bottom, choose **Select app** and choose **Other** option and then write the name of the app password (e.g. `Firebase Trigger Email from Firestore Extension`) and click **Generate**.\n5.  Follow the instructions to enter the App Password. The App Password is the 16-character code in the yellow bar on your device.\n6.  Tap **Done**.\n\nNow you can use your Google username with the generated password to authorize the extension.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s no-cost tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n\n#### Further reading & resources\n\nYou can find more information about this extension in the following articles:\n\n- [Sending Emails Using Firestore And Firebase Extensions](https://invertase.link/Y6Nu)\n\n\n\n**Configuration Parameters:**\n\n* Cloud Functions location: Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).\n\n* SMTP connection URI: A URI representing an SMTP server this extension can use to deliver email. Note that port 25 is blocked by Google Cloud Platform, so we recommend using port 587 for SMTP connections. If you're using the SMTPS protocol, we recommend using port 465. In order to keep passwords secure, it is recommended to omit the password from the connection string while using the `SMTP Password` field for entering secrets and passwords. Passwords and secrets should now be included in `SMTP password` field.\nSecure format:\n `smtps://username@gmail.com@smtp.gmail.com:465` (username only)\n `smtps://smtp.gmail.com:465` (No username and password)\nBackwards Compatible (less secure):\n `smtps://username@gmail.com:password@smtp.gmail.com:465`. (username and password)\n\n* SMTP password: User password for the SMTP server\n\n* Email documents collection: What is the path to the collection that contains the documents used to build and send the emails?\n\n* Default FROM address: The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).\n\n* Default REPLY-TO address: The email address to use as the reply-to address (if it's not specified in the added email document).\n\n* Users collection: A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection.\n\n* Templates collection: A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document.\n\n* Firestore TTL type: Do you want the firestore records to be marked with an expireAt field for a TTL policy? If \"Never\" is selected then no expireAt field will be added. Otherwise you may specify the unit of time specified by the TTL_EXPIRE_VALUE parameter. Defaults to \"Never\".\n\n* Firestore TTL value: In the units specified by TTL_EXPIRE_TYPE, how long do you want records to be ineligible for deletion by a TTL policy? This parameter requires the Firestore TTL type parameter to be set to a value other than `Never`. For example, if `Firestore TTL type` is set to `Day` then setting this parameter to `1` will specify a TTL of 1 day.\n\n\n\n**Cloud Functions:**\n\n* **processQueue:** Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.\n\n\n\n**Access Required**:\n\n\n\nThis extension will operate with the following project IAM roles:\n\n* datastore.user (Reason: Allows this extension to access Cloud Firestore to read and process added email documents.)\n","displayName":"Trigger Email from Firestore","events":[{"type":"firebase.extensions.firestore-send-email.v1.onStart","description":"Occurs when the extension starts execution."},{"type":"firebase.extensions.firestore-send-email.v1.onProcessing","description":"Occurs when the extension attempts to process an email."},{"type":"firebase.extensions.firestore-send-email.v1.onRetry","description":"Occurs when the extension attempts to resend an email."},{"type":"firebase.extensions.firestore-send-email.v1.onPending","description":"Occurs when an email has a pending status."},{"type":"firebase.extensions.firestore-send-email.v1.onSuccess","description":"Occurs when the extension successfully sends an email."},{"type":"firebase.extensions.firestore-send-email.v1.onComplete","description":"Occurs when the extension completes execution."},{"type":"firebase.extensions.firestore-send-email.v1.onError","description":"Occurs when the extension fails to complete execution."}],"systemParams":[{"param":"firebaseextensions.v1beta.function/memory","label":"Function memory","type":"SELECT","description":"How much memory should be allocated to each function?","options":[{"value":"128","label":"128MB"},{"value":"256","label":"256MB"},{"value":"512","label":"512MB"},{"value":"1024","label":"1GB"},{"value":"2048","label":"2GB"},{"value":"4096","label":"4GB"},{"value":"8192","label":"8GB"}],"default":"256","advanced":true},{"param":"firebaseextensions.v1beta.function/timeoutSeconds","label":"Function timeout seconds","type":"STRING","description":"How long should functions run before timing out, in seconds (0-540)?","validationRegex":"^[1-9][0-9]{0,2}$","validationErrorMessage":"Function timeout should be an integer number of seconds, between 0 and 540","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnector","label":"VPC Connector","type":"STRING","description":"The VPC Network Connector that this cloud function can connect to. It can be either the fully-qualified URI, or the short name of the network connector resource. The format of this field is projects/*/locations/*/connectors/*.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/connectors/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnectorEgressSettings","label":"VPC Connector Egress settings","type":"SELECT","description":"Controls outgoing traffic when a VPC connector is configured","options":[{"value":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","label":"Unspecified"},{"value":"PRIVATE_RANGES_ONLY","label":"Private ranges only"},{"value":"ALL_TRAFFIC","label":"All traffic"}],"default":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","advanced":true},{"param":"firebaseextensions.v1beta.function/minInstances","label":"Minimum function instances","type":"STRING","description":"The minimum number of instances of each function to run at once (0-1000)","default":"0","validationRegex":"^[0-9]*$","validationErrorMessage":"Min instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/maxInstances","label":"Maximum function instances","type":"STRING","description":"The maximum number of instances of each function to run at once","default":"3000","validationRegex":"^[0-9]*$","validationErrorMessage":"Max instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/ingressSettings","label":"Function ingress settings","type":"SELECT","description":"Where should functions allow incoming traffic from?","options":[{"value":"ALLOW_ALL","label":"Allow all"},{"value":"ALLOW_INTERNAL_ONLY","label":"Allow internal only"},{"value":"ALLOW_INTERNAL_AND_GCLB","label":"Allow internal and GCLB"}],"advanced":true},{"param":"firebaseextensions.v1beta.function/labels","label":"Function labels","type":"STRING","description":"Do you wish to set any labels on this instance's Cloud Functions? If so, provide up to 55 labels in the format 'key1:value, key2:value'","validationRegex":"^([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63},\\s*)*([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63})$","advanced":true},{"param":"firebaseextensions.v1beta.function/kmsKeyName","label":"KMS key name","type":"STRING","description":"Do you want to use a Customer Managed Eencryption Key (CMEK) to encrypt this extension's functions? If you set this, you must also set a Docker repository encrypted by that key. See https://cloud.google.com/functions/docs/securing/cmek for more details.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/keyRings/([^/]+)/cryptoKeys/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/dockerRepository","label":"Docker repository","type":"STRING","description":"What Docker repository should be used to store function images? Default repository will be used if not set.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/repositories/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/location","label":"Cloud Functions location","type":"SELECT","description":"Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).","required":true,"options":[{"value":"us-central1","label":"Iowa (us-central1)"},{"value":"us-east1","label":"South Carolina (us-east1)"},{"value":"us-east4","label":"Northern Virginia (us-east4)"},{"value":"us-west2","label":"Los Angeles (us-west2)"},{"value":"us-west3","label":"Salt Lake City (us-west3)"},{"value":"us-west4","label":"Las Vegas (us-west4)"},{"value":"europe-central2","label":"Warsaw (europe-central2)"},{"value":"europe-west1","label":"Belgium (europe-west1)"},{"value":"europe-west2","label":"London (europe-west2)"},{"value":"europe-west3","label":"Frankfurt (europe-west3)"},{"value":"europe-west6","label":"Zurich (europe-west6)"},{"value":"asia-east1","label":"Taiwan (asia-east1)"},{"value":"asia-east2","label":"Hong Kong (asia-east2)"},{"value":"asia-northeast1","label":"Tokyo (asia-northeast1)"},{"value":"asia-northeast2","label":"Osaka (asia-northeast2)"},{"value":"asia-northeast3","label":"Seoul (asia-northeast3)"},{"value":"asia-south1","label":"Mumbai (asia-south1)"},{"value":"asia-southeast1","label":"Singapore (asia-southeast1)"},{"value":"asia-southeast2","label":"Jakarta (asia-southeast2)"},{"value":"northamerica-northeast1","label":"Montreal (northamerica-northeast1)"},{"value":"southamerica-east1","label":"Sao Paulo (southamerica-east1)"},{"value":"australia-southeast1","label":"Sydney (australia-southeast1)"}],"default":"us-central1","immutable":true}]},"state":"PUBLISHED","hash":"2ef03fa6b7c5f2c3140d872dedf967cbd02cd3ba971bd49f9d5251a0e49b1753","createTime":"2023-07-12T08:13:42.022101Z","id":"0.1.27","releaseNotes":"feature - bump to node 18\n","buildSourceUri":"https://github.com/firebase/extensions/tree/8705822e3a07191d38fcfff9f5ab6878ce227823","listing":{"state":"APPROVED"},"metrics":{"activeInstallCount":"1100"},"extensionRoot":"firestore-send-email"},{"name":"publishers/firebase/extensions/firestore-send-email/versions/0.1.27-rc.0","ref":"firebase/firestore-send-email@0.1.27-rc.0","spec":{"specVersion":"v1beta","name":"firestore-send-email","version":"0.1.27-rc.0","description":"Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.","roles":[{"role":"datastore.user","reason":"Allows this extension to access Cloud Firestore to read and process added email documents."}],"resources":[{"name":"processQueue","type":"firebaseextensions.v1beta.function","propertiesYaml":"eventTrigger:\n  eventType: providers/cloud.firestore/eventTypes/document.write\n  resource: projects/${param:PROJECT_ID}/databases/(default)/documents/${param:MAIL_COLLECTION}/{id}\nruntime: nodejs18\n","description":"Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.","deletionPolicy":"DELETE"}],"billingRequired":true,"author":{"authorName":"Firebase","url":"https://firebase.google.com"},"contributors":[{"authorName":"Michael Bleigh","url":"https://github.com/mbleigh"},{"authorName":"Invertase","email":"oss@invertase.io","url":"https://github.com/invertase"}],"license":"Apache-2.0","releaseNotesUrl":"https://github.com/firebase/extensions/blob/master/firestore-send-email/CHANGELOG.md","sourceUrl":"https://github.com/firebase/extensions/tree/master/firestore-send-email","params":[{"param":"SMTP_CONNECTION_URI","label":"SMTP connection URI","type":"STRING","description":"A URI representing an SMTP server this extension can use to deliver email. Note that port 25 is blocked by Google Cloud Platform, so we recommend using port 587 for SMTP connections. If you're using the SMTPS protocol, we recommend using port 465. In order to keep passwords secure, it is recommended to omit the password from the connection string while using the `SMTP Password` field for entering secrets and passwords. Passwords and secrets should now be included in `SMTP password` field.\nSecure format:\n `smtps://username@gmail.com@smtp.gmail.com:465` (username only)\n `smtps://smtp.gmail.com:465` (No username and password)\nBackwards Compatible (less secure):\n `smtps://username@gmail.com:password@smtp.gmail.com:465`. (username and password)","required":true,"example":"smtps://username@smtp.hostname.com:465","validationRegex":"^(smtp[s]*://.*?:[0-9]+.*$)","validationErrorMessage":"Invalid SMTP connection URI. Must be in the form `smtp(s)://username:password@hostname:port` or `smtp(s)://username@hostname:port`."},{"param":"SMTP_PASSWORD","label":"SMTP password","type":"SECRET","description":"User password for the SMTP server"},{"param":"MAIL_COLLECTION","label":"Email documents collection","type":"STRING","description":"What is the path to the collection that contains the documents used to build and send the emails?","required":true,"default":"mail","validationRegex":"^[^/]+(/[^/]+/[^/]+)*$","validationErrorMessage":"Must be a valid Cloud Firestore collection"},{"param":"DEFAULT_FROM","label":"Default FROM address","type":"STRING","description":"The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).","required":true,"example":"foobar@example.com","validationRegex":"^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$|^.*<(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})>$","validationErrorMessage":"Must be a valid email address or valid name plus email address"},{"param":"DEFAULT_REPLY_TO","label":"Default REPLY-TO address","type":"STRING","description":"The email address to use as the reply-to address (if it's not specified in the added email document)."},{"param":"USERS_COLLECTION","label":"Users collection","type":"STRING","description":"A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection."},{"param":"TEMPLATES_COLLECTION","label":"Templates collection","type":"STRING","description":"A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document."},{"param":"TTL_EXPIRE_TYPE","label":"Firestore TTL type","type":"SELECT","description":"Do you want the firestore records to be marked with an expireAt field for a TTL policy? If \"Never\" is selected then no expireAt field will be added. Otherwise you may specify the unit of time specified by the TTL_EXPIRE_VALUE parameter. Defaults to \"Never\".","required":true,"options":[{"value":"never","label":"Never"},{"value":"hour","label":"Hour"},{"value":"day","label":"Day"},{"value":"week","label":"Week"},{"value":"month","label":"Month"},{"value":"year","label":"Year"}],"default":"never"},{"param":"TTL_EXPIRE_VALUE","label":"Firestore TTL value","type":"STRING","description":"In the units specified by TTL_EXPIRE_TYPE, how long do you want records to be ineligible for deletion by a TTL policy? This parameter requires the Firestore TTL type parameter to be set to a value other than `Never`. For example, if `Firestore TTL type` is set to `Day` then setting this parameter to `1` will specify a TTL of 1 day.","required":true,"default":"1","validationRegex":"^[1-9][0-9]*$","validationErrorMessage":"The value must be an integer value greater than zero."}],"preinstallContent":"Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Setup Google App Passwords\n\n**Google** no longer allows **Gmail** users to use their own passwords to authorize third-party apps and services. Instead, you have to use the [Sign in with App Passwords](https://support.google.com/accounts/answer/185833) service to generate a special password for each app you want to authorize. To do so:\n\n1.  Go to your [Google Account](https://myaccount.google.com/).\n2.  Select **Security**.\n3.  Under \"Signing in to Google,\" select **App Passwords**. You may need to sign in. If you don’t have this option, it might be because:\n    1.  2-Step Verification is not set up for your account.\n    2.  2-Step Verification is only set up for security keys.\n    3.  Your account is through work, school, or other organization.\n    4.  You turned on Advanced Protection.\n4.  At the bottom, choose **Select app** and choose **Other** option and then write the name of the app password (e.g. `Firebase Trigger Email from Firestore Extension`) and click **Generate**.\n5.  Follow the instructions to enter the App Password. The App Password is the 16-character code in the yellow bar on your device.\n6.  Tap **Done**.\n\nNow you can use your Google username with the generated password to authorize the extension.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s no-cost tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n\n#### Further reading & resources\n\nYou can find more information about this extension in the following articles:\n\n- [Sending Emails Using Firestore And Firebase Extensions](https://invertase.link/Y6Nu)","postinstallContent":"### See it in action\n\nYou can test out this extension right away!\n\n1.  Go to your [Cloud Firestore dashboard](https://console.firebase.google.com/project/${param:PROJECT_ID}/firestore/data) in the Firebase console.\n\n1.  If it doesn't already exist, create the collection you specified during installation: `${param:MAIL_COLLECTION}`.\n\n1.  Add a document with a `to` field and a `message` field with the following content:\n\n    ```js\n    to: ['someone@example.com'],\n    message: {\n      subject: 'Hello from Firebase!',\n      text: 'This is the plaintext section of the email body.',\n      html: 'This is the <code>HTML</code> section of the email body.',\n    }\n    ```\n\n1.  In a few seconds, you'll see a `delivery` field appear in the document. The field will update as the extension processes the email.\n\n**Note:** You can also use the [Firebase Admin SDK][admin_sdk] to add a document:\n\n```js\nadmin\n  .firestore()\n  .collection(\"${param:MAIL_COLLECTION}\")\n  .add({\n    to: \"someone@example.com\",\n    message: {\n      subject: \"Hello from Firebase!\",\n      text: \"This is the plaintext section of the email body.\",\n      html: \"This is the <code>HTML</code> section of the email body.\",\n    },\n  })\n  .then(() => console.log(\"Queued email for delivery!\"));\n```\n\n### Using this extension\n\nSee the [official documentation](https://firebase.google.com/docs/extensions/official/firestore-send-email) for information on using this extension, including advanced use cases such as using Handlebars templates and managing email delivery status.\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n\n[mail_collection]: https://console.firebase.google.com/project/_/firestore/data~2F${param:MAIL_COLLECTION}\n[admin_sdk]: https://firebase.google.com/docs/admin/setup\n[amp4email]: https://amp.dev/documentation/guides-and-tutorials/learn/email-spec/amp-email-format/\n[handlebars]: https://handlebarsjs.com/\n\n### Further reading & resources\n\nYou can find more information about this extension in the following articles:\n\n- [Sending Emails Using Firestore And Firebase Extensions](https://invertase.link/Y6Nu)","readmeContent":"# Trigger Email from Firestore\n\n**Author**: Firebase (**[https://firebase.google.com](https://firebase.google.com)**)\n\n**Description**: Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.\n\n\n\n**Details**: Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Setup Google App Passwords\n\n**Google** no longer allows **Gmail** users to use their own passwords to authorize third-party apps and services. Instead, you have to use the [Sign in with App Passwords](https://support.google.com/accounts/answer/185833) service to generate a special password for each app you want to authorize. To do so:\n\n1.  Go to your [Google Account](https://myaccount.google.com/).\n2.  Select **Security**.\n3.  Under \"Signing in to Google,\" select **App Passwords**. You may need to sign in. If you don’t have this option, it might be because:\n    1.  2-Step Verification is not set up for your account.\n    2.  2-Step Verification is only set up for security keys.\n    3.  Your account is through work, school, or other organization.\n    4.  You turned on Advanced Protection.\n4.  At the bottom, choose **Select app** and choose **Other** option and then write the name of the app password (e.g. `Firebase Trigger Email from Firestore Extension`) and click **Generate**.\n5.  Follow the instructions to enter the App Password. The App Password is the 16-character code in the yellow bar on your device.\n6.  Tap **Done**.\n\nNow you can use your Google username with the generated password to authorize the extension.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s no-cost tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n\n#### Further reading & resources\n\nYou can find more information about this extension in the following articles:\n\n- [Sending Emails Using Firestore And Firebase Extensions](https://invertase.link/Y6Nu)\n\n\n\n**Configuration Parameters:**\n\n* Cloud Functions location: Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).\n\n* SMTP connection URI: A URI representing an SMTP server this extension can use to deliver email. Note that port 25 is blocked by Google Cloud Platform, so we recommend using port 587 for SMTP connections. If you're using the SMTPS protocol, we recommend using port 465. In order to keep passwords secure, it is recommended to omit the password from the connection string while using the `SMTP Password` field for entering secrets and passwords. Passwords and secrets should now be included in `SMTP password` field.\nSecure format:\n `smtps://username@gmail.com@smtp.gmail.com:465` (username only)\n `smtps://smtp.gmail.com:465` (No username and password)\nBackwards Compatible (less secure):\n `smtps://username@gmail.com:password@smtp.gmail.com:465`. (username and password)\n\n* SMTP password: User password for the SMTP server\n\n* Email documents collection: What is the path to the collection that contains the documents used to build and send the emails?\n\n* Default FROM address: The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).\n\n* Default REPLY-TO address: The email address to use as the reply-to address (if it's not specified in the added email document).\n\n* Users collection: A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection.\n\n* Templates collection: A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document.\n\n* Firestore TTL type: Do you want the firestore records to be marked with an expireAt field for a TTL policy? If \"Never\" is selected then no expireAt field will be added. Otherwise you may specify the unit of time specified by the TTL_EXPIRE_VALUE parameter. Defaults to \"Never\".\n\n* Firestore TTL value: In the units specified by TTL_EXPIRE_TYPE, how long do you want records to be ineligible for deletion by a TTL policy? This parameter requires the Firestore TTL type parameter to be set to a value other than `Never`. For example, if `Firestore TTL type` is set to `Day` then setting this parameter to `1` will specify a TTL of 1 day.\n\n\n\n**Cloud Functions:**\n\n* **processQueue:** Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.\n\n\n\n**Access Required**:\n\n\n\nThis extension will operate with the following project IAM roles:\n\n* datastore.user (Reason: Allows this extension to access Cloud Firestore to read and process added email documents.)\n","displayName":"Trigger Email from Firestore","events":[{"type":"firebase.extensions.firestore-send-email.v1.onStart","description":"Occurs when the extension starts execution."},{"type":"firebase.extensions.firestore-send-email.v1.onProcessing","description":"Occurs when the extension attempts to process an email."},{"type":"firebase.extensions.firestore-send-email.v1.onRetry","description":"Occurs when the extension attempts to resend an email."},{"type":"firebase.extensions.firestore-send-email.v1.onPending","description":"Occurs when an email has a pending status."},{"type":"firebase.extensions.firestore-send-email.v1.onSuccess","description":"Occurs when the extension successfully sends an email."},{"type":"firebase.extensions.firestore-send-email.v1.onComplete","description":"Occurs when the extension completes execution."},{"type":"firebase.extensions.firestore-send-email.v1.onError","description":"Occurs when the extension fails to complete execution."}],"systemParams":[{"param":"firebaseextensions.v1beta.function/memory","label":"Function memory","type":"SELECT","description":"How much memory should be allocated to each function?","options":[{"value":"128","label":"128MB"},{"value":"256","label":"256MB"},{"value":"512","label":"512MB"},{"value":"1024","label":"1GB"},{"value":"2048","label":"2GB"},{"value":"4096","label":"4GB"},{"value":"8192","label":"8GB"}],"default":"256","advanced":true},{"param":"firebaseextensions.v1beta.function/timeoutSeconds","label":"Function timeout seconds","type":"STRING","description":"How long should functions run before timing out, in seconds (0-540)?","validationRegex":"^[1-9][0-9]{0,2}$","validationErrorMessage":"Function timeout should be an integer number of seconds, between 0 and 540","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnector","label":"VPC Connector","type":"STRING","description":"The VPC Network Connector that this cloud function can connect to. It can be either the fully-qualified URI, or the short name of the network connector resource. The format of this field is projects/*/locations/*/connectors/*.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/connectors/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnectorEgressSettings","label":"VPC Connector Egress settings","type":"SELECT","description":"Controls outgoing traffic when a VPC connector is configured","options":[{"value":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","label":"Unspecified"},{"value":"PRIVATE_RANGES_ONLY","label":"Private ranges only"},{"value":"ALL_TRAFFIC","label":"All traffic"}],"default":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","advanced":true},{"param":"firebaseextensions.v1beta.function/minInstances","label":"Minimum function instances","type":"STRING","description":"The minimum number of instances of each function to run at once (0-1000)","default":"0","validationRegex":"^[0-9]*$","validationErrorMessage":"Min instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/maxInstances","label":"Maximum function instances","type":"STRING","description":"The maximum number of instances of each function to run at once","default":"3000","validationRegex":"^[0-9]*$","validationErrorMessage":"Max instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/ingressSettings","label":"Function ingress settings","type":"SELECT","description":"Where should functions allow incoming traffic from?","options":[{"value":"ALLOW_ALL","label":"Allow all"},{"value":"ALLOW_INTERNAL_ONLY","label":"Allow internal only"},{"value":"ALLOW_INTERNAL_AND_GCLB","label":"Allow internal and GCLB"}],"advanced":true},{"param":"firebaseextensions.v1beta.function/labels","label":"Function labels","type":"STRING","description":"Do you wish to set any labels on this instance's Cloud Functions? If so, provide up to 55 labels in the format 'key1:value, key2:value'","validationRegex":"^([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63},\\s*)*([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63})$","advanced":true},{"param":"firebaseextensions.v1beta.function/kmsKeyName","label":"KMS key name","type":"STRING","description":"Do you want to use a Customer Managed Eencryption Key (CMEK) to encrypt this extension's functions? If you set this, you must also set a Docker repository encrypted by that key. See https://cloud.google.com/functions/docs/securing/cmek for more details.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/keyRings/([^/]+)/cryptoKeys/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/dockerRepository","label":"Docker repository","type":"STRING","description":"What Docker repository should be used to store function images? Default repository will be used if not set.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/repositories/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/location","label":"Cloud Functions location","type":"SELECT","description":"Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).","required":true,"options":[{"value":"us-central1","label":"Iowa (us-central1)"},{"value":"us-east1","label":"South Carolina (us-east1)"},{"value":"us-east4","label":"Northern Virginia (us-east4)"},{"value":"us-west2","label":"Los Angeles (us-west2)"},{"value":"us-west3","label":"Salt Lake City (us-west3)"},{"value":"us-west4","label":"Las Vegas (us-west4)"},{"value":"europe-central2","label":"Warsaw (europe-central2)"},{"value":"europe-west1","label":"Belgium (europe-west1)"},{"value":"europe-west2","label":"London (europe-west2)"},{"value":"europe-west3","label":"Frankfurt (europe-west3)"},{"value":"europe-west6","label":"Zurich (europe-west6)"},{"value":"asia-east1","label":"Taiwan (asia-east1)"},{"value":"asia-east2","label":"Hong Kong (asia-east2)"},{"value":"asia-northeast1","label":"Tokyo (asia-northeast1)"},{"value":"asia-northeast2","label":"Osaka (asia-northeast2)"},{"value":"asia-northeast3","label":"Seoul (asia-northeast3)"},{"value":"asia-south1","label":"Mumbai (asia-south1)"},{"value":"asia-southeast1","label":"Singapore (asia-southeast1)"},{"value":"asia-southeast2","label":"Jakarta (asia-southeast2)"},{"value":"northamerica-northeast1","label":"Montreal (northamerica-northeast1)"},{"value":"southamerica-east1","label":"Sao Paulo (southamerica-east1)"},{"value":"australia-southeast1","label":"Sydney (australia-southeast1)"}],"default":"us-central1","immutable":true}]},"state":"PUBLISHED","hash":"46c36c4c03a63a94cc502e419a49da0a4fa0a0ff0559eb210906a71e6e28c586","createTime":"2023-07-11T15:25:39.256913Z","id":"0.1.27-rc.0","buildSourceUri":"https://github.com/firebase/extensions/tree/fb7db1eb9b83dd533711a491764732a57da7643e","listing":{"state":"UNLISTED"},"extensionRoot":"firestore-send-email"},{"name":"publishers/firebase/extensions/firestore-send-email/versions/0.1.3","ref":"firebase/firestore-send-email@0.1.3","spec":{"specVersion":"v1beta","name":"firestore-send-email","version":"0.1.3","description":"Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.","roles":[{"role":"datastore.user","reason":"Allows this extension to access Cloud Firestore to read and process added email documents."}],"resources":[{"name":"processQueue","type":"firebaseextensions.v1beta.function","propertiesYaml":"eventTrigger:\n  eventType: providers/cloud.firestore/eventTypes/document.write\n  resource: projects/${PROJECT_ID}/databases/(default)/documents/${MAIL_COLLECTION}/{id}\nlocation: ${LOCATION}\nsourceDirectory: .\n","description":"Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.","deletionPolicy":"DELETE"}],"billingRequired":true,"author":{"authorName":"Firebase","url":"https://firebase.google.com"},"contributors":[{"authorName":"Michael Bleigh","url":"https://github.com/mbleigh"},{"authorName":"Elliot Hesp","email":"elliot@invertase.io","url":"https://github.com/ehesp"}],"license":"Apache-2.0","releaseNotesUrl":"https://github.com/firebase/extensions/blob/master/firestore-send-email/CHANGELOG.md","sourceUrl":"https://github.com/firebase/extensions/tree/master/firestore-send-email","params":[{"param":"LOCATION","label":"Cloud Functions location","type":"SELECT","description":"Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).","required":true,"options":[{"value":"us-central1","label":"Iowa (us-central1)"},{"value":"us-east1","label":"South Carolina (us-east1)"},{"value":"us-east4","label":"Northern Virginia (us-east4)"},{"value":"europe-west1","label":"Belgium (europe-west1)"},{"value":"europe-west2","label":"London (europe-west2)"},{"value":"asia-east2","label":"Hong Kong (asia-east2)"},{"value":"asia-northeast1","label":"Tokyo (asia-northeast1)"}],"default":"us-central1","immutable":true},{"param":"SMTP_CONNECTION_URI","label":"SMTP connection URI","type":"STRING","description":"A URI representing an SMTP server that this extension can use to deliver email.","required":true,"example":"smtps://username:password@smtp.hostname.com:465","validationRegex":"^smtps?://[^:]+:[^:]+@.*$","validationErrorMessage":"Invalid SMTP connection URI. Must be in the form `smtp(s)://username:password@hostname:port`."},{"param":"MAIL_COLLECTION","label":"Email documents collection","type":"STRING","description":"What is the path to the collection that contains the documents used to build and send the emails?","required":true,"default":"mail","validationRegex":"^[^/]+(/[^/]+/[^/]+)*$","validationErrorMessage":"Must be a valid Cloud Firestore collection"},{"param":"DEFAULT_FROM","label":"Default FROM address","type":"STRING","description":"The email address to use as the sender's address (if it's not specified in the added email document).","required":true,"validationRegex":"^\\S+@\\S+\\.\\S+$","validationErrorMessage":"Must be a valid email address"},{"param":"DEFAULT_REPLY_TO","label":"Default REPLY-TO address","type":"STRING","description":"The email address to use as the reply-to address (if it's not specified in the added email document)."},{"param":"USERS_COLLECTION","label":"Users collection","type":"STRING","description":"A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection."},{"param":"TEMPLATES_COLLECTION","label":"Templates collection","type":"STRING","description":"A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document."}],"preinstallContent":"Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\n\nThis extension uses other Firebase or Google Cloud Platform services which may have associated charges:\n\n- Cloud Firestore\n- Cloud Functions\n\nWhen you use Firebase Extensions, you're only charged for the underlying resources that you use. A paid-tier billing plan is only required if the extension uses a service that requires a paid-tier plan, for example calling to a Google Cloud Platform API or making outbound network requests to non-Google services. All Firebase services offer a free tier of usage. [Learn more about Firebase billing.](https://firebase.google.com/pricing)\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n","postinstallContent":"### See it in action\n\nYou can test out this extension right away:\n\n1.  Go to your [Cloud Firestore dashboard](https://console.firebase.google.com/project/${param:PROJECT_ID}/database/firestore/data).\n\n1.  If it doesn't already exist, create the collection you specified during installation: `${param:MAIL_COLLECTION}`.\n\n1.  Add a document with a `to` field and a `message` field with the following content:\n\n    ```js\n    to: ['someone@example.com'],\n    message: {\n      subject: 'Hello from Firebase!',\n      text: 'This is the plaintext section of the email body.',\n      html: 'This is the <code>HTML</code> section of the email body.',\n    }\n    ```\n\n1.  In a few seconds, you'll see a `delivery` field appear in the document. The field will update as the extension processes the email.\n\n**Note:** You can also use the [Firebase Admin SDK][admin_sdk] to add a document:\n```js\nadmin.firestore().collection('${param:MAIL_COLLECTION}').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    text: 'This is the plaintext section of the email body.',\n    html: 'This is the <code>HTML</code> section of the email body.',\n  }\n}).then(() => console.log('Queued email for delivery!'));\n```\n\n### Using this extension\n\nAfter its installation, this extension monitors all document writes to the `${param:MAIL_COLLECTION}` collection. Email is delivered based on the contents of the document's fields. The top-level fields specify the email's sender and recipients. The `message` field contains the details of the email to deliver, including the email body.\n\n#### Sender and recipient fields\n\nThe top-level fields of the document supply the email sender and recipient information. Available fields are:\n\n* **from:** The sender's email address. If not specified in the document, uses the configured \"Default FROM address\" parameter.\n* **replyTo:** The reply-to email address. If not specified in the document, uses the configured \"Default REPLY-TO address\" parameter.\n* **to:** A single recipient email address or an array containing multiple recipient email addresses.\n* **toUids:** An array containing the recipient UIDs.\n* **cc:** A single recipient email address or an array containing multiple recipient email addresses.\n* **ccUids:** An array containing the CC recipient UIDs.\n* **bcc:** A single recipient email address or an array containing multiple recipient email addresses.\n* **bccUids:** An array containing the BCC recipient UIDs.\n* **headers:** An object of additional header fields (for example, `{\"X-Custom-Header\": \"value\", \"X-Second-Custom-Header\": \"value\"}`).\n\n**NOTE:** The `toUids`, `ccUids`, and `bccUids` options deliver emails based on user UIDs keyed to email addresses within a Cloud Firestore document. To use these recipient options, you need to specify a Cloud Firestore collection for the extension's \"Users collection\" parameter. The extension can then read the `email` field for each UID specified in the `toUids`, `ccUids`, and/or `bccUids` fields.\n\n#### Message field\n\nThe `message` field of the document contains raw delivery information for the email. This field should generally only be populated by trusted code running in your own servers or Cloud Functions (refer to the \"Security rules and sending email\" section below).\n\nAvailable properties for the `message` field are:\n\n* **messageId:** A message ID header for the email, if any.\n* **subject:** The subject of the email.\n* **text:** The plaintext content of the email.\n* **html:** The HTML content of the email.\n* **amp:** The [AMP4EMAIL][amp4email] content of the email.\n* **attachments:** An array containing attachment(s); [Nodemailer options](https://nodemailer.com/message/attachments/) supported: utf-8 string, custom content type, URL, encoded string, data URI, and pregenerated MIME node (be aware that your email has no access to the cloud server's file system).\n\n#### Using templates\n\nIf you specified a \"Templates collection\" parameter during configuration of the extension, you can create and manage [Handlebars][handlebars] templates for your emails. Each document for a template should have a memorable ID that you use as the *template name* in the document that's written to your `${param:MAIL_COLLECTION}` collection.\n\nThe template document can include any of the following fields:\n\n* **subject:** A template string for the subject of the email.\n* **text:** A template string for the plaintext content of the email.\n* **html:** A template string for the HTML content of the email.\n* **amp:** A template string for the [AMP4EMAIL][amp4email] content of the email.\n\nAn example template might have an ID of `following` and content like:\n\n```js\n{\n  subject: \"@{{username}} is now following you!\",\n  html: \"Just writing to let you know that <code>@{{username}}</code> ({{name}}) is now following you.\"\n}\n```\n\nTo deliver email using templates, when adding documents to your `${param:MAIL_COLLECTION}` collection, include a `template` field with `name` and `data` properties. For example, using our `following` template from above:\n\n```js\nadmin.firestore().collection('${param:MAIL_COLLECTION}').add({\n  toUids: ['abc123'],\n  template: {\n    name: 'following',\n    data: {\n      username: 'ada',\n      name: 'Ada Lovelace'\n    }\n  }\n})\n```\n\n#### Security rules and sending email\n\nThis extension can be used to trigger email delivery directly from client applications. However, you should carefully control client access to the `${param:MAIL_COLLECTION}` collection to avoid potential abuse (you don't want users able to send arbitrary emails from your company's address!).\n\nSecurity rules will vary from application to application, but you should always make sure that emails are sent only to intended recipients and free-form content is kept to a minimum. Templates can help here -- you can use security rules to verify that the data being populated to the template matches your expectations for what a user should be allowed to trigger.\n\n#### Email delivery processing\n\nWhen a document is added to the `${param:MAIL_COLLECTION}` collection, the extension picks it up for email delivery processing. The extension creates and updates a `delivery` field in the document as it processes the email. The `delivery` field can be populated with the following fields:\n\n* **state:** One of `PENDING`, `PROCESSING`, `SUCCESS`, or `ERROR`.\n* **startTime:** Timestamp when email processing began.\n* **endTime:** Timestamp when email processing completed (that is, ended in either a `SUCCESS` or `ERROR` state).\n* **error:** If there was an email delivery error, an error message will be populated here.\n* **attempts:** Number of delivery attempts for this email.\n* **leaseExpireTime:** In case of a hang or timeout, the time at which a `PROCESSING` state should be considered an error.\n* **info:** After successful email delivery (to at least one address), this field will be populated with the following fields:\n  * **messageId:** The message ID of the delivered email.\n  * **accepted:** Array of email addresses to which the email was successfully delivered.\n  * **rejected:** Array of email addresses to which the email could not be delivered.\n  * **pending:** Array of email addresses that were temporarily rejected by SMTP.\n  * **response:** The last response from the SMTP server.\n\nAn email will typically go from `PENDING` to `PROCESSING` to either `SUCCESS` or `ERROR`. Once in the `SUCCESS` or `ERROR` state, additional changes to the document will not trigger the extension to send another email. To resend an email with document updates, you can change the `state` to `PENDING` or `RETRY`.\n\n#### Manual retries\n\nThere are instances in which email delivery fails in a recoverable fashion or the document can be manually corrected for proper delivery with minor modifications. While retries are not automatic, you can manually change the `state` in the `delivery` field to `RETRY` so that the extension attempts email delivery again (and increments the number of `attempts`).\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n\n[mail_collection]: https://console.firebase.google.com/project/_/database/firestore/data~2F${param:MAIL_COLLECTION}\n[admin_sdk]: https://firebase.google.com/docs/admin/setup\n[amp4email]: https://amp.dev/documentation/guides-and-tutorials/learn/email-spec/amp-email-format/\n[handlebars]: https://handlebarsjs.com/\n","readmeContent":"# Trigger Email\n\n**Description**: Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.\n\n\n\n**Details**: Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\n\nThis extension uses other Firebase or Google Cloud Platform services which may have associated charges:\n\n- Cloud Firestore\n- Cloud Functions\n\nWhen you use Firebase Extensions, you're only charged for the underlying resources that you use. A paid-tier billing plan is only required if the extension uses a service that requires a paid-tier plan, for example calling to a Google Cloud Platform API or making outbound network requests to non-Google services. All Firebase services offer a free tier of usage. [Learn more about Firebase billing.](https://firebase.google.com/pricing)\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n\n\n\n\n**Configuration Parameters:**\n\n* Cloud Functions location: Where do you want to deploy the functions created for this extension?  You usually want a location close to your database. For help selecting a  location, refer to the [location selection  guide](https://firebase.google.com/docs/functions/locations).\n\n* SMTP connection URI: A URI representing an SMTP server that this extension can use to deliver email.\n\n* Email documents collection: What is the path to the collection that contains the documents used to build and send the emails?\n\n* Default FROM address: The email address to use as the sender's address (if it's not specified in the added email document).\n\n* Default REPLY-TO address: The email address to use as the reply-to address (if it's not specified in the added email document).\n\n* Users collection: A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection.\n\n* Templates collection: A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document.\n\n\n\n**Cloud Functions:**\n\n* **processQueue:** Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.\n\n\n\n**Access Required**:\n\n\n\nThis extension will operate with the following project IAM roles:\n\n* datastore.user (Reason: Allows this extension to access Cloud Firestore to read and process added email documents.)\n","displayName":"Trigger Email","systemParams":[{"param":"firebaseextensions.v1beta.function/memory","label":"Function memory","type":"SELECT","description":"How much memory should be allocated to each function?","options":[{"value":"128","label":"128MB"},{"value":"256","label":"256MB"},{"value":"512","label":"512MB"},{"value":"1024","label":"1GB"},{"value":"2048","label":"2GB"},{"value":"4096","label":"4GB"},{"value":"8192","label":"8GB"}],"default":"256","advanced":true},{"param":"firebaseextensions.v1beta.function/timeoutSeconds","label":"Function timeout seconds","type":"STRING","description":"How long should functions run before timing out, in seconds (0-540)?","validationRegex":"^[1-9][0-9]{0,2}$","validationErrorMessage":"Function timeout should be an integer number of seconds, between 0 and 540","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnector","label":"VPC Connector","type":"STRING","description":"The VPC Network Connector that this cloud function can connect to. It can be either the fully-qualified URI, or the short name of the network connector resource. The format of this field is projects/*/locations/*/connectors/*.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/connectors/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnectorEgressSettings","label":"VPC Connector Egress settings","type":"SELECT","description":"Controls outgoing traffic when a VPC connector is configured","options":[{"value":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","label":"Unspecified"},{"value":"PRIVATE_RANGES_ONLY","label":"Private ranges only"},{"value":"ALL_TRAFFIC","label":"All traffic"}],"default":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","advanced":true},{"param":"firebaseextensions.v1beta.function/minInstances","label":"Minimum function instances","type":"STRING","description":"The minimum number of instances of each function to run at once (0-1000)","default":"0","validationRegex":"^[0-9]*$","validationErrorMessage":"Min instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/maxInstances","label":"Maximum function instances","type":"STRING","description":"The maximum number of instances of each function to run at once","default":"3000","validationRegex":"^[0-9]*$","validationErrorMessage":"Max instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/ingressSettings","label":"Function ingress settings","type":"SELECT","description":"Where should functions allow incoming traffic from?","options":[{"value":"ALLOW_ALL","label":"Allow all"},{"value":"ALLOW_INTERNAL_ONLY","label":"Allow internal only"},{"value":"ALLOW_INTERNAL_AND_GCLB","label":"Allow internal and GCLB"}],"advanced":true},{"param":"firebaseextensions.v1beta.function/labels","label":"Function labels","type":"STRING","description":"Do you wish to set any labels on this instance's Cloud Functions? If so, provide up to 55 labels in the format 'key1:value, key2:value'","validationRegex":"^([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63},\\s*)*([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63})$","advanced":true},{"param":"firebaseextensions.v1beta.function/kmsKeyName","label":"KMS key name","type":"STRING","description":"Do you want to use a Customer Managed Eencryption Key (CMEK) to encrypt this extension's functions? If you set this, you must also set a Docker repository encrypted by that key. See https://cloud.google.com/functions/docs/securing/cmek for more details.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/keyRings/([^/]+)/cryptoKeys/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/dockerRepository","label":"Docker repository","type":"STRING","description":"What Docker repository should be used to store function images? Default repository will be used if not set.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/repositories/([^/]+)$","advanced":true}]},"state":"DEPRECATED","hash":"0e7af6658ec8b9c183e7c067c3c757e91051f5c35f91252035d0488ae0b3060e","createTime":"2020-02-06T18:22:41.581234142Z","id":"0.1.3","releaseNotes":"fixed - Disables HTML escaping for plain text fields when using the `templates` option.\n","listing":{"state":"APPROVED"},"metrics":{"activeInstallCount":"100"}},{"name":"publishers/firebase/extensions/firestore-send-email/versions/0.1.4","ref":"firebase/firestore-send-email@0.1.4","spec":{"specVersion":"v1beta","name":"firestore-send-email","version":"0.1.4","description":"Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.","roles":[{"role":"datastore.user","reason":"Allows this extension to access Cloud Firestore to read and process added email documents."}],"resources":[{"name":"processQueue","type":"firebaseextensions.v1beta.function","propertiesYaml":"eventTrigger:\n  eventType: providers/cloud.firestore/eventTypes/document.write\n  resource: projects/${PROJECT_ID}/databases/(default)/documents/${MAIL_COLLECTION}/{id}\nlocation: ${LOCATION}\nsourceDirectory: .\n","description":"Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.","deletionPolicy":"DELETE"}],"billingRequired":true,"author":{"authorName":"Firebase","url":"https://firebase.google.com"},"contributors":[{"authorName":"Michael Bleigh","url":"https://github.com/mbleigh"},{"authorName":"Elliot Hesp","email":"elliot@invertase.io","url":"https://github.com/ehesp"}],"license":"Apache-2.0","releaseNotesUrl":"https://github.com/firebase/extensions/blob/master/firestore-send-email/CHANGELOG.md","sourceUrl":"https://github.com/firebase/extensions/tree/master/firestore-send-email","params":[{"param":"LOCATION","label":"Cloud Functions location","type":"SELECT","description":"Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).","required":true,"options":[{"value":"us-central1","label":"Iowa (us-central1)"},{"value":"us-east1","label":"South Carolina (us-east1)"},{"value":"us-east4","label":"Northern Virginia (us-east4)"},{"value":"europe-west1","label":"Belgium (europe-west1)"},{"value":"europe-west2","label":"London (europe-west2)"},{"value":"europe-west3","label":"Frankfurt (europe-west3)"},{"value":"asia-east2","label":"Hong Kong (asia-east2)"},{"value":"asia-northeast1","label":"Tokyo (asia-northeast1)"}],"default":"us-central1","immutable":true},{"param":"SMTP_CONNECTION_URI","label":"SMTP connection URI","type":"STRING","description":"A URI representing an SMTP server that this extension can use to deliver email.","required":true,"example":"smtps://username:password@smtp.hostname.com:465","validationRegex":"^smtps?://[^:]+:[^:]+@.*$","validationErrorMessage":"Invalid SMTP connection URI. Must be in the form `smtp(s)://username:password@hostname:port`."},{"param":"MAIL_COLLECTION","label":"Email documents collection","type":"STRING","description":"What is the path to the collection that contains the documents used to build and send the emails?","required":true,"default":"mail","validationRegex":"^[^/]+(/[^/]+/[^/]+)*$","validationErrorMessage":"Must be a valid Cloud Firestore collection"},{"param":"DEFAULT_FROM","label":"Default FROM address","type":"STRING","description":"The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).","required":true,"example":"foobar@example.com","validationRegex":"^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$|^.*<(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})>$","validationErrorMessage":"Must be a valid email address or valid name plus email address"},{"param":"DEFAULT_REPLY_TO","label":"Default REPLY-TO address","type":"STRING","description":"The email address to use as the reply-to address (if it's not specified in the added email document)."},{"param":"USERS_COLLECTION","label":"Users collection","type":"STRING","description":"A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection."},{"param":"TEMPLATES_COLLECTION","label":"Templates collection","type":"STRING","description":"A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document."}],"preinstallContent":"Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\n\nThis extension uses other Firebase or Google Cloud Platform services which may have associated charges:\n\n- Cloud Firestore\n- Cloud Functions\n\nWhen you use Firebase Extensions, you're only charged for the underlying resources that you use. A paid-tier billing plan is only required if the extension uses a service that requires a paid-tier plan, for example calling to a Google Cloud Platform API or making outbound network requests to non-Google services. All Firebase services offer a free tier of usage. [Learn more about Firebase billing.](https://firebase.google.com/pricing)\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n","postinstallContent":"### See it in action\n\nYou can test out this extension right away!\n\n1.  Go to your [Cloud Firestore dashboard](https://console.firebase.google.com/project/${param:PROJECT_ID}/database/firestore/data) in the Firebase console.\n\n1.  If it doesn't already exist, create the collection you specified during installation: `${param:MAIL_COLLECTION}`.\n\n1.  Add a document with a `to` field and a `message` field with the following content:\n\n    ```js\n    to: ['someone@example.com'],\n    message: {\n      subject: 'Hello from Firebase!',\n      text: 'This is the plaintext section of the email body.',\n      html: 'This is the <code>HTML</code> section of the email body.',\n    }\n    ```\n\n1.  In a few seconds, you'll see a `delivery` field appear in the document. The field will update as the extension processes the email.\n\n**Note:** You can also use the [Firebase Admin SDK][admin_sdk] to add a document:\n```js\nadmin.firestore().collection('${param:MAIL_COLLECTION}').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    text: 'This is the plaintext section of the email body.',\n    html: 'This is the <code>HTML</code> section of the email body.',\n  }\n}).then(() => console.log('Queued email for delivery!'));\n```\n\n### Using this extension\n\nAfter its installation, this extension monitors all document writes to the `${param:MAIL_COLLECTION}` collection. Email is delivered based on the contents of the document's fields. The top-level fields specify the email's sender and recipients. The `message` field contains the details of the email to deliver, including the email body.\n\n#### Sender and recipient fields\n\nThe top-level fields of the document supply the email sender and recipient information. Available fields are:\n\n* **from:** The sender's email address. If not specified in the document, uses the configured \"Default FROM address\" parameter.\n* **replyTo:** The reply-to email address. If not specified in the document, uses the configured \"Default REPLY-TO address\" parameter.\n* **to:** A single recipient email address or an array containing multiple recipient email addresses.\n* **toUids:** An array containing the recipient UIDs.\n* **cc:** A single recipient email address or an array containing multiple recipient email addresses.\n* **ccUids:** An array containing the CC recipient UIDs.\n* **bcc:** A single recipient email address or an array containing multiple recipient email addresses.\n* **bccUids:** An array containing the BCC recipient UIDs.\n* **headers:** An object of additional header fields (for example, `{\"X-Custom-Header\": \"value\", \"X-Second-Custom-Header\": \"value\"}`).\n\n**NOTE:** The `toUids`, `ccUids`, and `bccUids` options deliver emails based on user UIDs keyed to email addresses within a Cloud Firestore document. To use these recipient options, you need to specify a Cloud Firestore collection for the extension's \"Users collection\" parameter. The extension can then read the `email` field for each UID specified in the `toUids`, `ccUids`, and/or `bccUids` fields.\n\n#### Message field\n\nThe `message` field of the document contains raw delivery information for the email. This field should generally only be populated by trusted code running in your own servers or Cloud Functions (refer to the \"Security rules and sending email\" section below).\n\nAvailable properties for the `message` field are:\n\n* **messageId:** A message ID header for the email, if any.\n* **subject:** The subject of the email.\n* **text:** The plaintext content of the email.\n* **html:** The HTML content of the email.\n* **amp:** The [AMP4EMAIL][amp4email] content of the email.\n* **attachments:** An array containing attachment(s); [Nodemailer options](https://nodemailer.com/message/attachments/) supported: utf-8 string, custom content type, URL, encoded string, data URI, and pregenerated MIME node (be aware that your email has no access to the cloud server's file system).\n\n#### Using templates\n\nIf you specified a \"Templates collection\" parameter during configuration of the extension, you can create and manage [Handlebars][handlebars] templates for your emails. Each document for a template should have a memorable ID that you use as the *template name* in the document that's written to your `${param:MAIL_COLLECTION}` collection.\n\nThe template document can include any of the following fields:\n\n* **subject:** A template string for the subject of the email.\n* **text:** A template string for the plaintext content of the email.\n* **html:** A template string for the HTML content of the email.\n* **amp:** A template string for the [AMP4EMAIL][amp4email] content of the email.\n\nAn example template might have an ID of `following` and content like:\n\n```js\n{\n  subject: \"@{{username}} is now following you!\",\n  html: \"Just writing to let you know that <code>@{{username}}</code> ({{name}}) is now following you.\"\n}\n```\n\nTo deliver email using templates, when adding documents to your `${param:MAIL_COLLECTION}` collection, include a `template` field with `name` and `data` properties. For example, using our `following` template from above:\n\n```js\nadmin.firestore().collection('${param:MAIL_COLLECTION}').add({\n  toUids: ['abc123'],\n  template: {\n    name: 'following',\n    data: {\n      username: 'ada',\n      name: 'Ada Lovelace'\n    }\n  }\n})\n```\n\n#### Security rules and sending email\n\nThis extension can be used to trigger email delivery directly from client applications. However, you should carefully control client access to the `${param:MAIL_COLLECTION}` collection to avoid potential abuse (you don't want users able to send arbitrary emails from your company's address!).\n\nSecurity rules will vary from application to application, but you should always make sure that emails are sent only to intended recipients and free-form content is kept to a minimum. Templates can help here -- you can use security rules to verify that the data being populated to the template matches your expectations for what a user should be allowed to trigger.\n\n#### Email delivery processing\n\nWhen a document is added to the `${param:MAIL_COLLECTION}` collection, the extension picks it up for email delivery processing. The extension creates and updates a `delivery` field in the document as it processes the email. The `delivery` field can be populated with the following fields:\n\n* **state:** One of `PENDING`, `PROCESSING`, `SUCCESS`, or `ERROR`.\n* **startTime:** Timestamp when email processing began.\n* **endTime:** Timestamp when email processing completed (that is, ended in either a `SUCCESS` or `ERROR` state).\n* **error:** If there was an email delivery error, an error message will be populated here.\n* **attempts:** Number of delivery attempts for this email.\n* **leaseExpireTime:** In case of a hang or timeout, the time at which a `PROCESSING` state should be considered an error.\n* **info:** After successful email delivery (to at least one address), this field will be populated with the following fields:\n  * **messageId:** The message ID of the delivered email.\n  * **accepted:** Array of email addresses to which the email was successfully delivered.\n  * **rejected:** Array of email addresses to which the email could not be delivered.\n  * **pending:** Array of email addresses that were temporarily rejected by SMTP.\n  * **response:** The last response from the SMTP server.\n\nAn email will typically go from `PENDING` to `PROCESSING` to either `SUCCESS` or `ERROR`. Once in the `SUCCESS` or `ERROR` state, additional changes to the document will not trigger the extension to send another email. To resend an email with document updates, you can change the `state` to `PENDING` or `RETRY`.\n\n#### Manual retries\n\nThere are instances in which email delivery fails in a recoverable fashion or the document can be manually corrected for proper delivery with minor modifications. While retries are not automatic, you can manually change the `state` in the `delivery` field to `RETRY` so that the extension attempts email delivery again (and increments the number of `attempts`).\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n\n[mail_collection]: https://console.firebase.google.com/project/_/database/firestore/data~2F${param:MAIL_COLLECTION}\n[admin_sdk]: https://firebase.google.com/docs/admin/setup\n[amp4email]: https://amp.dev/documentation/guides-and-tutorials/learn/email-spec/amp-email-format/\n[handlebars]: https://handlebarsjs.com/\n","readmeContent":"# Trigger Email\n\n**Description**: Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.\n\n\n\n**Details**: Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\n\nThis extension uses other Firebase or Google Cloud Platform services which may have associated charges:\n\n- Cloud Firestore\n- Cloud Functions\n\nWhen you use Firebase Extensions, you're only charged for the underlying resources that you use. A paid-tier billing plan is only required if the extension uses a service that requires a paid-tier plan, for example calling to a Google Cloud Platform API or making outbound network requests to non-Google services. All Firebase services offer a free tier of usage. [Learn more about Firebase billing.](https://firebase.google.com/pricing)\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n\n\n\n\n**Configuration Parameters:**\n\n* Cloud Functions location: Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).\n\n* SMTP connection URI: A URI representing an SMTP server that this extension can use to deliver email.\n\n* Email documents collection: What is the path to the collection that contains the documents used to build and send the emails?\n\n* Default FROM address: The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).\n\n* Default REPLY-TO address: The email address to use as the reply-to address (if it's not specified in the added email document).\n\n* Users collection: A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection.\n\n* Templates collection: A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document.\n\n\n\n**Cloud Functions:**\n\n* **processQueue:** Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.\n\n\n\n**Access Required**:\n\n\n\nThis extension will operate with the following project IAM roles:\n\n* datastore.user (Reason: Allows this extension to access Cloud Firestore to read and process added email documents.)\n","displayName":"Trigger Email","systemParams":[{"param":"firebaseextensions.v1beta.function/memory","label":"Function memory","type":"SELECT","description":"How much memory should be allocated to each function?","options":[{"value":"128","label":"128MB"},{"value":"256","label":"256MB"},{"value":"512","label":"512MB"},{"value":"1024","label":"1GB"},{"value":"2048","label":"2GB"},{"value":"4096","label":"4GB"},{"value":"8192","label":"8GB"}],"default":"256","advanced":true},{"param":"firebaseextensions.v1beta.function/timeoutSeconds","label":"Function timeout seconds","type":"STRING","description":"How long should functions run before timing out, in seconds (0-540)?","validationRegex":"^[1-9][0-9]{0,2}$","validationErrorMessage":"Function timeout should be an integer number of seconds, between 0 and 540","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnector","label":"VPC Connector","type":"STRING","description":"The VPC Network Connector that this cloud function can connect to. It can be either the fully-qualified URI, or the short name of the network connector resource. The format of this field is projects/*/locations/*/connectors/*.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/connectors/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnectorEgressSettings","label":"VPC Connector Egress settings","type":"SELECT","description":"Controls outgoing traffic when a VPC connector is configured","options":[{"value":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","label":"Unspecified"},{"value":"PRIVATE_RANGES_ONLY","label":"Private ranges only"},{"value":"ALL_TRAFFIC","label":"All traffic"}],"default":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","advanced":true},{"param":"firebaseextensions.v1beta.function/minInstances","label":"Minimum function instances","type":"STRING","description":"The minimum number of instances of each function to run at once (0-1000)","default":"0","validationRegex":"^[0-9]*$","validationErrorMessage":"Min instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/maxInstances","label":"Maximum function instances","type":"STRING","description":"The maximum number of instances of each function to run at once","default":"3000","validationRegex":"^[0-9]*$","validationErrorMessage":"Max instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/ingressSettings","label":"Function ingress settings","type":"SELECT","description":"Where should functions allow incoming traffic from?","options":[{"value":"ALLOW_ALL","label":"Allow all"},{"value":"ALLOW_INTERNAL_ONLY","label":"Allow internal only"},{"value":"ALLOW_INTERNAL_AND_GCLB","label":"Allow internal and GCLB"}],"advanced":true},{"param":"firebaseextensions.v1beta.function/labels","label":"Function labels","type":"STRING","description":"Do you wish to set any labels on this instance's Cloud Functions? If so, provide up to 55 labels in the format 'key1:value, key2:value'","validationRegex":"^([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63},\\s*)*([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63})$","advanced":true},{"param":"firebaseextensions.v1beta.function/kmsKeyName","label":"KMS key name","type":"STRING","description":"Do you want to use a Customer Managed Eencryption Key (CMEK) to encrypt this extension's functions? If you set this, you must also set a Docker repository encrypted by that key. See https://cloud.google.com/functions/docs/securing/cmek for more details.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/keyRings/([^/]+)/cryptoKeys/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/dockerRepository","label":"Docker repository","type":"STRING","description":"What Docker repository should be used to store function images? Default repository will be used if not set.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/repositories/([^/]+)$","advanced":true}]},"state":"DEPRECATED","hash":"56b10d51ca618697ba4f9d456d1ff8addfa0786a98c87dde11abe4e31f5d48ee","createTime":"2020-05-07T17:13:51.294236213Z","id":"0.1.4","releaseNotes":"feature - Updated \"Default FROM address\" parameter to accept either an email address (`foobar@example.com`) _or_ a name plus email address (`Friendly Firebaser <foobar@example.com>`). (issue #167)\n","listing":{"state":"APPROVED"},"metrics":{"activeInstallCount":"800"}},{"name":"publishers/firebase/extensions/firestore-send-email/versions/0.1.4-rc.1","ref":"firebase/firestore-send-email@0.1.4-rc.1","spec":{"specVersion":"v1beta","name":"firestore-send-email","version":"0.1.4","description":"Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.","roles":[{"role":"datastore.user","reason":"Allows this extension to access Cloud Firestore to read and process added email documents."}],"resources":[{"name":"processQueue","type":"firebaseextensions.v1beta.function","propertiesYaml":"eventTrigger:\n  eventType: providers/cloud.firestore/eventTypes/document.write\n  resource: projects/${PROJECT_ID}/databases/(default)/documents/${MAIL_COLLECTION}/{id}\nlocation: ${LOCATION}\nsourceDirectory: .\n","description":"Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.","deletionPolicy":"DELETE"}],"billingRequired":true,"author":{"authorName":"Firebase","url":"https://firebase.google.com"},"contributors":[{"authorName":"Michael Bleigh","url":"https://github.com/mbleigh"},{"authorName":"Elliot Hesp","email":"elliot@invertase.io","url":"https://github.com/ehesp"}],"license":"Apache-2.0","releaseNotesUrl":"https://github.com/firebase/extensions/blob/master/firestore-send-email/CHANGELOG.md","sourceUrl":"https://github.com/firebase/extensions/tree/master/firestore-send-email","params":[{"param":"LOCATION","label":"Cloud Functions location","type":"SELECT","description":"Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).","required":true,"options":[{"value":"us-central1","label":"Iowa (us-central1)"},{"value":"us-east1","label":"South Carolina (us-east1)"},{"value":"us-east4","label":"Northern Virginia (us-east4)"},{"value":"europe-west1","label":"Belgium (europe-west1)"},{"value":"europe-west2","label":"London (europe-west2)"},{"value":"asia-east2","label":"Hong Kong (asia-east2)"},{"value":"asia-northeast1","label":"Tokyo (asia-northeast1)"}],"default":"us-central1","immutable":true},{"param":"SMTP_CONNECTION_URI","label":"SMTP connection URI","type":"STRING","description":"A URI representing an SMTP server that this extension can use to deliver email.","required":true,"example":"smtps://username:password@smtp.hostname.com:465","validationRegex":"^smtps?://[^:]+:[^:]+@.*$","validationErrorMessage":"Invalid SMTP connection URI. Must be in the form `smtp(s)://username:password@hostname:port`."},{"param":"MAIL_COLLECTION","label":"Email documents collection","type":"STRING","description":"What is the path to the collection that contains the documents used to build and send the emails?","required":true,"default":"mail","validationRegex":"^[^/]+(/[^/]+/[^/]+)*$","validationErrorMessage":"Must be a valid Cloud Firestore collection"},{"param":"DEFAULT_FROM","label":"Default FROM address","type":"STRING","description":"The email address to use as the sender's address (if it's not specified in the added email document).","required":true,"example":"foobar@example.com","validationRegex":"^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$|^.*<(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})>$","validationErrorMessage":"Must be a valid email address or valid name plus email address"},{"param":"DEFAULT_REPLY_TO","label":"Default REPLY-TO address","type":"STRING","description":"The email address to use as the reply-to address (if it's not specified in the added email document)."},{"param":"USERS_COLLECTION","label":"Users collection","type":"STRING","description":"A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection."},{"param":"TEMPLATES_COLLECTION","label":"Templates collection","type":"STRING","description":"A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document."}],"preinstallContent":"Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\n\nThis extension uses other Firebase or Google Cloud Platform services which may have associated charges:\n\n- Cloud Firestore\n- Cloud Functions\n\nWhen you use Firebase Extensions, you're only charged for the underlying resources that you use. A paid-tier billing plan is only required if the extension uses a service that requires a paid-tier plan, for example calling to a Google Cloud Platform API or making outbound network requests to non-Google services. All Firebase services offer a free tier of usage. [Learn more about Firebase billing.](https://firebase.google.com/pricing)\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n","postinstallContent":"### See it in action\n\nYou can test out this extension right away:\n\n1.  Go to your [Cloud Firestore dashboard](https://console.firebase.google.com/project/${param:PROJECT_ID}/database/firestore/data).\n\n1.  If it doesn't already exist, create the collection you specified during installation: `${param:MAIL_COLLECTION}`.\n\n1.  Add a document with a `to` field and a `message` field with the following content:\n\n    ```js\n    to: ['someone@example.com'],\n    message: {\n      subject: 'Hello from Firebase!',\n      text: 'This is the plaintext section of the email body.',\n      html: 'This is the <code>HTML</code> section of the email body.',\n    }\n    ```\n\n1.  In a few seconds, you'll see a `delivery` field appear in the document. The field will update as the extension processes the email.\n\n**Note:** You can also use the [Firebase Admin SDK][admin_sdk] to add a document:\n```js\nadmin.firestore().collection('${param:MAIL_COLLECTION}').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    text: 'This is the plaintext section of the email body.',\n    html: 'This is the <code>HTML</code> section of the email body.',\n  }\n}).then(() => console.log('Queued email for delivery!'));\n```\n\n### Using this extension\n\nAfter its installation, this extension monitors all document writes to the `${param:MAIL_COLLECTION}` collection. Email is delivered based on the contents of the document's fields. The top-level fields specify the email's sender and recipients. The `message` field contains the details of the email to deliver, including the email body.\n\n#### Sender and recipient fields\n\nThe top-level fields of the document supply the email sender and recipient information. Available fields are:\n\n* **from:** The sender's email address. If not specified in the document, uses the configured \"Default FROM address\" parameter.\n* **replyTo:** The reply-to email address. If not specified in the document, uses the configured \"Default REPLY-TO address\" parameter.\n* **to:** A single recipient email address or an array containing multiple recipient email addresses.\n* **toUids:** An array containing the recipient UIDs.\n* **cc:** A single recipient email address or an array containing multiple recipient email addresses.\n* **ccUids:** An array containing the CC recipient UIDs.\n* **bcc:** A single recipient email address or an array containing multiple recipient email addresses.\n* **bccUids:** An array containing the BCC recipient UIDs.\n* **headers:** An object of additional header fields (for example, `{\"X-Custom-Header\": \"value\", \"X-Second-Custom-Header\": \"value\"}`).\n\n**NOTE:** The `toUids`, `ccUids`, and `bccUids` options deliver emails based on user UIDs keyed to email addresses within a Cloud Firestore document. To use these recipient options, you need to specify a Cloud Firestore collection for the extension's \"Users collection\" parameter. The extension can then read the `email` field for each UID specified in the `toUids`, `ccUids`, and/or `bccUids` fields.\n\n#### Message field\n\nThe `message` field of the document contains raw delivery information for the email. This field should generally only be populated by trusted code running in your own servers or Cloud Functions (refer to the \"Security rules and sending email\" section below).\n\nAvailable properties for the `message` field are:\n\n* **messageId:** A message ID header for the email, if any.\n* **subject:** The subject of the email.\n* **text:** The plaintext content of the email.\n* **html:** The HTML content of the email.\n* **amp:** The [AMP4EMAIL][amp4email] content of the email.\n* **attachments:** An array containing attachment(s); [Nodemailer options](https://nodemailer.com/message/attachments/) supported: utf-8 string, custom content type, URL, encoded string, data URI, and pregenerated MIME node (be aware that your email has no access to the cloud server's file system).\n\n#### Using templates\n\nIf you specified a \"Templates collection\" parameter during configuration of the extension, you can create and manage [Handlebars][handlebars] templates for your emails. Each document for a template should have a memorable ID that you use as the *template name* in the document that's written to your `${param:MAIL_COLLECTION}` collection.\n\nThe template document can include any of the following fields:\n\n* **subject:** A template string for the subject of the email.\n* **text:** A template string for the plaintext content of the email.\n* **html:** A template string for the HTML content of the email.\n* **amp:** A template string for the [AMP4EMAIL][amp4email] content of the email.\n\nAn example template might have an ID of `following` and content like:\n\n```js\n{\n  subject: \"@{{username}} is now following you!\",\n  html: \"Just writing to let you know that <code>@{{username}}</code> ({{name}}) is now following you.\"\n}\n```\n\nTo deliver email using templates, when adding documents to your `${param:MAIL_COLLECTION}` collection, include a `template` field with `name` and `data` properties. For example, using our `following` template from above:\n\n```js\nadmin.firestore().collection('${param:MAIL_COLLECTION}').add({\n  toUids: ['abc123'],\n  template: {\n    name: 'following',\n    data: {\n      username: 'ada',\n      name: 'Ada Lovelace'\n    }\n  }\n})\n```\n\n#### Security rules and sending email\n\nThis extension can be used to trigger email delivery directly from client applications. However, you should carefully control client access to the `${param:MAIL_COLLECTION}` collection to avoid potential abuse (you don't want users able to send arbitrary emails from your company's address!).\n\nSecurity rules will vary from application to application, but you should always make sure that emails are sent only to intended recipients and free-form content is kept to a minimum. Templates can help here -- you can use security rules to verify that the data being populated to the template matches your expectations for what a user should be allowed to trigger.\n\n#### Email delivery processing\n\nWhen a document is added to the `${param:MAIL_COLLECTION}` collection, the extension picks it up for email delivery processing. The extension creates and updates a `delivery` field in the document as it processes the email. The `delivery` field can be populated with the following fields:\n\n* **state:** One of `PENDING`, `PROCESSING`, `SUCCESS`, or `ERROR`.\n* **startTime:** Timestamp when email processing began.\n* **endTime:** Timestamp when email processing completed (that is, ended in either a `SUCCESS` or `ERROR` state).\n* **error:** If there was an email delivery error, an error message will be populated here.\n* **attempts:** Number of delivery attempts for this email.\n* **leaseExpireTime:** In case of a hang or timeout, the time at which a `PROCESSING` state should be considered an error.\n* **info:** After successful email delivery (to at least one address), this field will be populated with the following fields:\n  * **messageId:** The message ID of the delivered email.\n  * **accepted:** Array of email addresses to which the email was successfully delivered.\n  * **rejected:** Array of email addresses to which the email could not be delivered.\n  * **pending:** Array of email addresses that were temporarily rejected by SMTP.\n  * **response:** The last response from the SMTP server.\n\nAn email will typically go from `PENDING` to `PROCESSING` to either `SUCCESS` or `ERROR`. Once in the `SUCCESS` or `ERROR` state, additional changes to the document will not trigger the extension to send another email. To resend an email with document updates, you can change the `state` to `PENDING` or `RETRY`.\n\n#### Manual retries\n\nThere are instances in which email delivery fails in a recoverable fashion or the document can be manually corrected for proper delivery with minor modifications. While retries are not automatic, you can manually change the `state` in the `delivery` field to `RETRY` so that the extension attempts email delivery again (and increments the number of `attempts`).\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n\n[mail_collection]: https://console.firebase.google.com/project/_/database/firestore/data~2F${param:MAIL_COLLECTION}\n[admin_sdk]: https://firebase.google.com/docs/admin/setup\n[amp4email]: https://amp.dev/documentation/guides-and-tutorials/learn/email-spec/amp-email-format/\n[handlebars]: https://handlebarsjs.com/\n","readmeContent":"# Trigger Email\n\n**Description**: Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.\n\n\n\n**Details**: Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\n\nThis extension uses other Firebase or Google Cloud Platform services which may have associated charges:\n\n- Cloud Firestore\n- Cloud Functions\n\nWhen you use Firebase Extensions, you're only charged for the underlying resources that you use. A paid-tier billing plan is only required if the extension uses a service that requires a paid-tier plan, for example calling to a Google Cloud Platform API or making outbound network requests to non-Google services. All Firebase services offer a free tier of usage. [Learn more about Firebase billing.](https://firebase.google.com/pricing)\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n\n\n\n\n**Configuration Parameters:**\n\n* Cloud Functions location: Where do you want to deploy the functions created for this extension?  You usually want a location close to your database. For help selecting a  location, refer to the [location selection  guide](https://firebase.google.com/docs/functions/locations).\n\n* SMTP connection URI: A URI representing an SMTP server that this extension can use to deliver email.\n\n* Email documents collection: What is the path to the collection that contains the documents used to build and send the emails?\n\n* Default FROM address: The email address to use as the sender's address (if it's not specified in the added email document).\n\n* Default REPLY-TO address: The email address to use as the reply-to address (if it's not specified in the added email document).\n\n* Users collection: A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection.\n\n* Templates collection: A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document.\n\n\n\n**Cloud Functions:**\n\n* **processQueue:** Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.\n\n\n\n**Access Required**:\n\n\n\nThis extension will operate with the following project IAM roles:\n\n* datastore.user (Reason: Allows this extension to access Cloud Firestore to read and process added email documents.)\n","displayName":"Trigger Email","systemParams":[{"param":"firebaseextensions.v1beta.function/memory","label":"Function memory","type":"SELECT","description":"How much memory should be allocated to each function?","options":[{"value":"128","label":"128MB"},{"value":"256","label":"256MB"},{"value":"512","label":"512MB"},{"value":"1024","label":"1GB"},{"value":"2048","label":"2GB"},{"value":"4096","label":"4GB"},{"value":"8192","label":"8GB"}],"default":"256","advanced":true},{"param":"firebaseextensions.v1beta.function/timeoutSeconds","label":"Function timeout seconds","type":"STRING","description":"How long should functions run before timing out, in seconds (0-540)?","validationRegex":"^[1-9][0-9]{0,2}$","validationErrorMessage":"Function timeout should be an integer number of seconds, between 0 and 540","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnector","label":"VPC Connector","type":"STRING","description":"The VPC Network Connector that this cloud function can connect to. It can be either the fully-qualified URI, or the short name of the network connector resource. The format of this field is projects/*/locations/*/connectors/*.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/connectors/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnectorEgressSettings","label":"VPC Connector Egress settings","type":"SELECT","description":"Controls outgoing traffic when a VPC connector is configured","options":[{"value":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","label":"Unspecified"},{"value":"PRIVATE_RANGES_ONLY","label":"Private ranges only"},{"value":"ALL_TRAFFIC","label":"All traffic"}],"default":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","advanced":true},{"param":"firebaseextensions.v1beta.function/minInstances","label":"Minimum function instances","type":"STRING","description":"The minimum number of instances of each function to run at once (0-1000)","default":"0","validationRegex":"^[0-9]*$","validationErrorMessage":"Min instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/maxInstances","label":"Maximum function instances","type":"STRING","description":"The maximum number of instances of each function to run at once","default":"3000","validationRegex":"^[0-9]*$","validationErrorMessage":"Max instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/ingressSettings","label":"Function ingress settings","type":"SELECT","description":"Where should functions allow incoming traffic from?","options":[{"value":"ALLOW_ALL","label":"Allow all"},{"value":"ALLOW_INTERNAL_ONLY","label":"Allow internal only"},{"value":"ALLOW_INTERNAL_AND_GCLB","label":"Allow internal and GCLB"}],"advanced":true},{"param":"firebaseextensions.v1beta.function/labels","label":"Function labels","type":"STRING","description":"Do you wish to set any labels on this instance's Cloud Functions? If so, provide up to 55 labels in the format 'key1:value, key2:value'","validationRegex":"^([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63},\\s*)*([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63})$","advanced":true},{"param":"firebaseextensions.v1beta.function/kmsKeyName","label":"KMS key name","type":"STRING","description":"Do you want to use a Customer Managed Eencryption Key (CMEK) to encrypt this extension's functions? If you set this, you must also set a Docker repository encrypted by that key. See https://cloud.google.com/functions/docs/securing/cmek for more details.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/keyRings/([^/]+)/cryptoKeys/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/dockerRepository","label":"Docker repository","type":"STRING","description":"What Docker repository should be used to store function images? Default repository will be used if not set.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/repositories/([^/]+)$","advanced":true}]},"state":"PUBLISHED","createTime":"2020-03-05T18:15:20.620040430Z","id":"0.1.4-rc.1","listing":{"state":"UNLISTED"},"metrics":{"activeInstallCount":"60"}},{"name":"publishers/firebase/extensions/firestore-send-email/versions/0.1.4-rc.2","ref":"firebase/firestore-send-email@0.1.4-rc.2","spec":{"specVersion":"v1beta","name":"firestore-send-email","version":"0.1.4","description":"Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.","roles":[{"role":"datastore.user","reason":"Allows this extension to access Cloud Firestore to read and process added email documents."}],"resources":[{"name":"processQueue","type":"firebaseextensions.v1beta.function","propertiesYaml":"eventTrigger:\n  eventType: providers/cloud.firestore/eventTypes/document.write\n  resource: projects/${PROJECT_ID}/databases/(default)/documents/${MAIL_COLLECTION}/{id}\nlocation: ${LOCATION}\nsourceDirectory: .\n","description":"Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.","deletionPolicy":"DELETE"}],"billingRequired":true,"author":{"authorName":"Firebase","url":"https://firebase.google.com"},"contributors":[{"authorName":"Michael Bleigh","url":"https://github.com/mbleigh"},{"authorName":"Elliot Hesp","email":"elliot@invertase.io","url":"https://github.com/ehesp"}],"license":"Apache-2.0","releaseNotesUrl":"https://github.com/firebase/extensions/blob/master/firestore-send-email/CHANGELOG.md","sourceUrl":"https://github.com/firebase/extensions/tree/master/firestore-send-email","params":[{"param":"LOCATION","label":"Cloud Functions location","type":"SELECT","description":"Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).","required":true,"options":[{"value":"us-central1","label":"Iowa (us-central1)"},{"value":"us-east1","label":"South Carolina (us-east1)"},{"value":"us-east4","label":"Northern Virginia (us-east4)"},{"value":"europe-west1","label":"Belgium (europe-west1)"},{"value":"europe-west2","label":"London (europe-west2)"},{"value":"asia-east2","label":"Hong Kong (asia-east2)"},{"value":"asia-northeast1","label":"Tokyo (asia-northeast1)"}],"default":"us-central1","immutable":true},{"param":"SMTP_CONNECTION_URI","label":"SMTP connection URI","type":"STRING","description":"A URI representing an SMTP server that this extension can use to deliver email.","required":true,"example":"smtps://username:password@smtp.hostname.com:465","validationRegex":"^smtps?://[^:]+:[^:]+@.*$","validationErrorMessage":"Invalid SMTP connection URI. Must be in the form `smtp(s)://username:password@hostname:port`."},{"param":"MAIL_COLLECTION","label":"Email documents collection","type":"STRING","description":"What is the path to the collection that contains the documents used to build and send the emails?","required":true,"default":"mail","validationRegex":"^[^/]+(/[^/]+/[^/]+)*$","validationErrorMessage":"Must be a valid Cloud Firestore collection"},{"param":"DEFAULT_FROM","label":"Default FROM address","type":"STRING","description":"The email address to use as the sender's address (if it's not specified in the added email document).","required":true,"example":"foobar@example.com","validationRegex":"^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$|^.*<(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})>$","validationErrorMessage":"Must be a valid email address or valid name plus email address"},{"param":"DEFAULT_REPLY_TO","label":"Default REPLY-TO address","type":"STRING","description":"The email address to use as the reply-to address (if it's not specified in the added email document)."},{"param":"USERS_COLLECTION","label":"Users collection","type":"STRING","description":"A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection."},{"param":"TEMPLATES_COLLECTION","label":"Templates collection","type":"STRING","description":"A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document."}],"preinstallContent":"Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\n\nThis extension uses other Firebase or Google Cloud Platform services which may have associated charges:\n\n- Cloud Firestore\n- Cloud Functions\n\nWhen you use Firebase Extensions, you're only charged for the underlying resources that you use. A paid-tier billing plan is only required if the extension uses a service that requires a paid-tier plan, for example calling to a Google Cloud Platform API or making outbound network requests to non-Google services. All Firebase services offer a free tier of usage. [Learn more about Firebase billing.](https://firebase.google.com/pricing)\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n","postinstallContent":"### See it in action\n\nYou can test out this extension right away:\n\n1.  Go to your [Cloud Firestore dashboard](https://console.firebase.google.com/project/${param:PROJECT_ID}/database/firestore/data).\n\n1.  If it doesn't already exist, create the collection you specified during installation: `${param:MAIL_COLLECTION}`.\n\n1.  Add a document with a `to` field and a `message` field with the following content:\n\n    ```js\n    to: ['someone@example.com'],\n    message: {\n      subject: 'Hello from Firebase!',\n      text: 'This is the plaintext section of the email body.',\n      html: 'This is the <code>HTML</code> section of the email body.',\n    }\n    ```\n\n1.  In a few seconds, you'll see a `delivery` field appear in the document. The field will update as the extension processes the email.\n\n**Note:** You can also use the [Firebase Admin SDK][admin_sdk] to add a document:\n```js\nadmin.firestore().collection('${param:MAIL_COLLECTION}').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    text: 'This is the plaintext section of the email body.',\n    html: 'This is the <code>HTML</code> section of the email body.',\n  }\n}).then(() => console.log('Queued email for delivery!'));\n```\n\n### Using this extension\n\nAfter its installation, this extension monitors all document writes to the `${param:MAIL_COLLECTION}` collection. Email is delivered based on the contents of the document's fields. The top-level fields specify the email's sender and recipients. The `message` field contains the details of the email to deliver, including the email body.\n\n#### Sender and recipient fields\n\nThe top-level fields of the document supply the email sender and recipient information. Available fields are:\n\n* **from:** The sender's email address. If not specified in the document, uses the configured \"Default FROM address\" parameter.\n* **replyTo:** The reply-to email address. If not specified in the document, uses the configured \"Default REPLY-TO address\" parameter.\n* **to:** A single recipient email address or an array containing multiple recipient email addresses.\n* **toUids:** An array containing the recipient UIDs.\n* **cc:** A single recipient email address or an array containing multiple recipient email addresses.\n* **ccUids:** An array containing the CC recipient UIDs.\n* **bcc:** A single recipient email address or an array containing multiple recipient email addresses.\n* **bccUids:** An array containing the BCC recipient UIDs.\n* **headers:** An object of additional header fields (for example, `{\"X-Custom-Header\": \"value\", \"X-Second-Custom-Header\": \"value\"}`).\n\n**NOTE:** The `toUids`, `ccUids`, and `bccUids` options deliver emails based on user UIDs keyed to email addresses within a Cloud Firestore document. To use these recipient options, you need to specify a Cloud Firestore collection for the extension's \"Users collection\" parameter. The extension can then read the `email` field for each UID specified in the `toUids`, `ccUids`, and/or `bccUids` fields.\n\n#### Message field\n\nThe `message` field of the document contains raw delivery information for the email. This field should generally only be populated by trusted code running in your own servers or Cloud Functions (refer to the \"Security rules and sending email\" section below).\n\nAvailable properties for the `message` field are:\n\n* **messageId:** A message ID header for the email, if any.\n* **subject:** The subject of the email.\n* **text:** The plaintext content of the email.\n* **html:** The HTML content of the email.\n* **amp:** The [AMP4EMAIL][amp4email] content of the email.\n* **attachments:** An array containing attachment(s); [Nodemailer options](https://nodemailer.com/message/attachments/) supported: utf-8 string, custom content type, URL, encoded string, data URI, and pregenerated MIME node (be aware that your email has no access to the cloud server's file system).\n\n#### Using templates\n\nIf you specified a \"Templates collection\" parameter during configuration of the extension, you can create and manage [Handlebars][handlebars] templates for your emails. Each document for a template should have a memorable ID that you use as the *template name* in the document that's written to your `${param:MAIL_COLLECTION}` collection.\n\nThe template document can include any of the following fields:\n\n* **subject:** A template string for the subject of the email.\n* **text:** A template string for the plaintext content of the email.\n* **html:** A template string for the HTML content of the email.\n* **amp:** A template string for the [AMP4EMAIL][amp4email] content of the email.\n\nAn example template might have an ID of `following` and content like:\n\n```js\n{\n  subject: \"@{{username}} is now following you!\",\n  html: \"Just writing to let you know that <code>@{{username}}</code> ({{name}}) is now following you.\"\n}\n```\n\nTo deliver email using templates, when adding documents to your `${param:MAIL_COLLECTION}` collection, include a `template` field with `name` and `data` properties. For example, using our `following` template from above:\n\n```js\nadmin.firestore().collection('${param:MAIL_COLLECTION}').add({\n  toUids: ['abc123'],\n  template: {\n    name: 'following',\n    data: {\n      username: 'ada',\n      name: 'Ada Lovelace'\n    }\n  }\n})\n```\n\n#### Security rules and sending email\n\nThis extension can be used to trigger email delivery directly from client applications. However, you should carefully control client access to the `${param:MAIL_COLLECTION}` collection to avoid potential abuse (you don't want users able to send arbitrary emails from your company's address!).\n\nSecurity rules will vary from application to application, but you should always make sure that emails are sent only to intended recipients and free-form content is kept to a minimum. Templates can help here -- you can use security rules to verify that the data being populated to the template matches your expectations for what a user should be allowed to trigger.\n\n#### Email delivery processing\n\nWhen a document is added to the `${param:MAIL_COLLECTION}` collection, the extension picks it up for email delivery processing. The extension creates and updates a `delivery` field in the document as it processes the email. The `delivery` field can be populated with the following fields:\n\n* **state:** One of `PENDING`, `PROCESSING`, `SUCCESS`, or `ERROR`.\n* **startTime:** Timestamp when email processing began.\n* **endTime:** Timestamp when email processing completed (that is, ended in either a `SUCCESS` or `ERROR` state).\n* **error:** If there was an email delivery error, an error message will be populated here.\n* **attempts:** Number of delivery attempts for this email.\n* **leaseExpireTime:** In case of a hang or timeout, the time at which a `PROCESSING` state should be considered an error.\n* **info:** After successful email delivery (to at least one address), this field will be populated with the following fields:\n  * **messageId:** The message ID of the delivered email.\n  * **accepted:** Array of email addresses to which the email was successfully delivered.\n  * **rejected:** Array of email addresses to which the email could not be delivered.\n  * **pending:** Array of email addresses that were temporarily rejected by SMTP.\n  * **response:** The last response from the SMTP server.\n\nAn email will typically go from `PENDING` to `PROCESSING` to either `SUCCESS` or `ERROR`. Once in the `SUCCESS` or `ERROR` state, additional changes to the document will not trigger the extension to send another email. To resend an email with document updates, you can change the `state` to `PENDING` or `RETRY`.\n\n#### Manual retries\n\nThere are instances in which email delivery fails in a recoverable fashion or the document can be manually corrected for proper delivery with minor modifications. While retries are not automatic, you can manually change the `state` in the `delivery` field to `RETRY` so that the extension attempts email delivery again (and increments the number of `attempts`).\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n\n[mail_collection]: https://console.firebase.google.com/project/_/database/firestore/data~2F${param:MAIL_COLLECTION}\n[admin_sdk]: https://firebase.google.com/docs/admin/setup\n[amp4email]: https://amp.dev/documentation/guides-and-tutorials/learn/email-spec/amp-email-format/\n[handlebars]: https://handlebarsjs.com/\n","readmeContent":"# Trigger Email\n\n**Description**: Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.\n\n\n\n**Details**: Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\n\nThis extension uses other Firebase or Google Cloud Platform services which may have associated charges:\n\n- Cloud Firestore\n- Cloud Functions\n\nWhen you use Firebase Extensions, you're only charged for the underlying resources that you use. A paid-tier billing plan is only required if the extension uses a service that requires a paid-tier plan, for example calling to a Google Cloud Platform API or making outbound network requests to non-Google services. All Firebase services offer a free tier of usage. [Learn more about Firebase billing.](https://firebase.google.com/pricing)\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n\n\n\n\n**Configuration Parameters:**\n\n* Cloud Functions location: Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).\n\n* SMTP connection URI: A URI representing an SMTP server that this extension can use to deliver email.\n\n* Email documents collection: What is the path to the collection that contains the documents used to build and send the emails?\n\n* Default FROM address: The email address to use as the sender's address (if it's not specified in the added email document).\n\n* Default REPLY-TO address: The email address to use as the reply-to address (if it's not specified in the added email document).\n\n* Users collection: A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection.\n\n* Templates collection: A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document.\n\n\n\n**Cloud Functions:**\n\n* **processQueue:** Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.\n\n\n\n**Access Required**:\n\n\n\nThis extension will operate with the following project IAM roles:\n\n* datastore.user (Reason: Allows this extension to access Cloud Firestore to read and process added email documents.)\n","displayName":"Trigger Email","systemParams":[{"param":"firebaseextensions.v1beta.function/memory","label":"Function memory","type":"SELECT","description":"How much memory should be allocated to each function?","options":[{"value":"128","label":"128MB"},{"value":"256","label":"256MB"},{"value":"512","label":"512MB"},{"value":"1024","label":"1GB"},{"value":"2048","label":"2GB"},{"value":"4096","label":"4GB"},{"value":"8192","label":"8GB"}],"default":"256","advanced":true},{"param":"firebaseextensions.v1beta.function/timeoutSeconds","label":"Function timeout seconds","type":"STRING","description":"How long should functions run before timing out, in seconds (0-540)?","validationRegex":"^[1-9][0-9]{0,2}$","validationErrorMessage":"Function timeout should be an integer number of seconds, between 0 and 540","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnector","label":"VPC Connector","type":"STRING","description":"The VPC Network Connector that this cloud function can connect to. It can be either the fully-qualified URI, or the short name of the network connector resource. The format of this field is projects/*/locations/*/connectors/*.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/connectors/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnectorEgressSettings","label":"VPC Connector Egress settings","type":"SELECT","description":"Controls outgoing traffic when a VPC connector is configured","options":[{"value":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","label":"Unspecified"},{"value":"PRIVATE_RANGES_ONLY","label":"Private ranges only"},{"value":"ALL_TRAFFIC","label":"All traffic"}],"default":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","advanced":true},{"param":"firebaseextensions.v1beta.function/minInstances","label":"Minimum function instances","type":"STRING","description":"The minimum number of instances of each function to run at once (0-1000)","default":"0","validationRegex":"^[0-9]*$","validationErrorMessage":"Min instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/maxInstances","label":"Maximum function instances","type":"STRING","description":"The maximum number of instances of each function to run at once","default":"3000","validationRegex":"^[0-9]*$","validationErrorMessage":"Max instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/ingressSettings","label":"Function ingress settings","type":"SELECT","description":"Where should functions allow incoming traffic from?","options":[{"value":"ALLOW_ALL","label":"Allow all"},{"value":"ALLOW_INTERNAL_ONLY","label":"Allow internal only"},{"value":"ALLOW_INTERNAL_AND_GCLB","label":"Allow internal and GCLB"}],"advanced":true},{"param":"firebaseextensions.v1beta.function/labels","label":"Function labels","type":"STRING","description":"Do you wish to set any labels on this instance's Cloud Functions? If so, provide up to 55 labels in the format 'key1:value, key2:value'","validationRegex":"^([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63},\\s*)*([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63})$","advanced":true},{"param":"firebaseextensions.v1beta.function/kmsKeyName","label":"KMS key name","type":"STRING","description":"Do you want to use a Customer Managed Eencryption Key (CMEK) to encrypt this extension's functions? If you set this, you must also set a Docker repository encrypted by that key. See https://cloud.google.com/functions/docs/securing/cmek for more details.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/keyRings/([^/]+)/cryptoKeys/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/dockerRepository","label":"Docker repository","type":"STRING","description":"What Docker repository should be used to store function images? Default repository will be used if not set.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/repositories/([^/]+)$","advanced":true}]},"state":"PUBLISHED","createTime":"2020-03-19T18:14:15.827667702Z","id":"0.1.4-rc.2","listing":{"state":"UNLISTED"},"metrics":{"activeInstallCount":"100"}},{"name":"publishers/firebase/extensions/firestore-send-email/versions/0.1.4-rc.3","ref":"firebase/firestore-send-email@0.1.4-rc.3","spec":{"specVersion":"v1beta","name":"firestore-send-email","version":"0.1.4","description":"Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.","roles":[{"role":"datastore.user","reason":"Allows this extension to access Cloud Firestore to read and process added email documents."}],"resources":[{"name":"processQueue","type":"firebaseextensions.v1beta.function","propertiesYaml":"eventTrigger:\n  eventType: providers/cloud.firestore/eventTypes/document.write\n  resource: projects/${PROJECT_ID}/databases/(default)/documents/${MAIL_COLLECTION}/{id}\nlocation: ${LOCATION}\nsourceDirectory: .\n","description":"Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.","deletionPolicy":"DELETE"}],"billingRequired":true,"author":{"authorName":"Firebase","url":"https://firebase.google.com"},"contributors":[{"authorName":"Michael Bleigh","url":"https://github.com/mbleigh"},{"authorName":"Elliot Hesp","email":"elliot@invertase.io","url":"https://github.com/ehesp"}],"license":"Apache-2.0","releaseNotesUrl":"https://github.com/firebase/extensions/blob/master/firestore-send-email/CHANGELOG.md","sourceUrl":"https://github.com/firebase/extensions/tree/master/firestore-send-email","params":[{"param":"LOCATION","label":"Cloud Functions location","type":"SELECT","description":"Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).","required":true,"options":[{"value":"us-central1","label":"Iowa (us-central1)"},{"value":"us-east1","label":"South Carolina (us-east1)"},{"value":"us-east4","label":"Northern Virginia (us-east4)"},{"value":"europe-west1","label":"Belgium (europe-west1)"},{"value":"europe-west2","label":"London (europe-west2)"},{"value":"asia-east2","label":"Hong Kong (asia-east2)"},{"value":"asia-northeast1","label":"Tokyo (asia-northeast1)"}],"default":"us-central1","immutable":true},{"param":"SMTP_CONNECTION_URI","label":"SMTP connection URI","type":"STRING","description":"A URI representing an SMTP server that this extension can use to deliver email.","required":true,"example":"smtps://username:password@smtp.hostname.com:465","validationRegex":"^smtps?://[^:]+:[^:]+@.*$","validationErrorMessage":"Invalid SMTP connection URI. Must be in the form `smtp(s)://username:password@hostname:port`."},{"param":"MAIL_COLLECTION","label":"Email documents collection","type":"STRING","description":"What is the path to the collection that contains the documents used to build and send the emails?","required":true,"default":"mail","validationRegex":"^[^/]+(/[^/]+/[^/]+)*$","validationErrorMessage":"Must be a valid Cloud Firestore collection"},{"param":"DEFAULT_FROM","label":"Default FROM address","type":"STRING","description":"The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).","required":true,"example":"foobar@example.com","validationRegex":"^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$|^.*<(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})>$","validationErrorMessage":"Must be a valid email address or valid name plus email address"},{"param":"DEFAULT_REPLY_TO","label":"Default REPLY-TO address","type":"STRING","description":"The email address to use as the reply-to address (if it's not specified in the added email document)."},{"param":"USERS_COLLECTION","label":"Users collection","type":"STRING","description":"A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection."},{"param":"TEMPLATES_COLLECTION","label":"Templates collection","type":"STRING","description":"A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document."}],"preinstallContent":"Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\n\nThis extension uses other Firebase or Google Cloud Platform services which may have associated charges:\n\n- Cloud Firestore\n- Cloud Functions\n\nWhen you use Firebase Extensions, you're only charged for the underlying resources that you use. A paid-tier billing plan is only required if the extension uses a service that requires a paid-tier plan, for example calling to a Google Cloud Platform API or making outbound network requests to non-Google services. All Firebase services offer a free tier of usage. [Learn more about Firebase billing.](https://firebase.google.com/pricing)\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n","postinstallContent":"### See it in action\n\nYou can test out this extension right away!\n\n1.  Go to your [Cloud Firestore dashboard](https://console.firebase.google.com/project/${param:PROJECT_ID}/database/firestore/data) in the Firebase console.\n\n1.  If it doesn't already exist, create the collection you specified during installation: `${param:MAIL_COLLECTION}`.\n\n1.  Add a document with a `to` field and a `message` field with the following content:\n\n    ```js\n    to: ['someone@example.com'],\n    message: {\n      subject: 'Hello from Firebase!',\n      text: 'This is the plaintext section of the email body.',\n      html: 'This is the <code>HTML</code> section of the email body.',\n    }\n    ```\n\n1.  In a few seconds, you'll see a `delivery` field appear in the document. The field will update as the extension processes the email.\n\n**Note:** You can also use the [Firebase Admin SDK][admin_sdk] to add a document:\n```js\nadmin.firestore().collection('${param:MAIL_COLLECTION}').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    text: 'This is the plaintext section of the email body.',\n    html: 'This is the <code>HTML</code> section of the email body.',\n  }\n}).then(() => console.log('Queued email for delivery!'));\n```\n\n### Using this extension\n\nAfter its installation, this extension monitors all document writes to the `${param:MAIL_COLLECTION}` collection. Email is delivered based on the contents of the document's fields. The top-level fields specify the email's sender and recipients. The `message` field contains the details of the email to deliver, including the email body.\n\n#### Sender and recipient fields\n\nThe top-level fields of the document supply the email sender and recipient information. Available fields are:\n\n* **from:** The sender's email address. If not specified in the document, uses the configured \"Default FROM address\" parameter.\n* **replyTo:** The reply-to email address. If not specified in the document, uses the configured \"Default REPLY-TO address\" parameter.\n* **to:** A single recipient email address or an array containing multiple recipient email addresses.\n* **toUids:** An array containing the recipient UIDs.\n* **cc:** A single recipient email address or an array containing multiple recipient email addresses.\n* **ccUids:** An array containing the CC recipient UIDs.\n* **bcc:** A single recipient email address or an array containing multiple recipient email addresses.\n* **bccUids:** An array containing the BCC recipient UIDs.\n* **headers:** An object of additional header fields (for example, `{\"X-Custom-Header\": \"value\", \"X-Second-Custom-Header\": \"value\"}`).\n\n**NOTE:** The `toUids`, `ccUids`, and `bccUids` options deliver emails based on user UIDs keyed to email addresses within a Cloud Firestore document. To use these recipient options, you need to specify a Cloud Firestore collection for the extension's \"Users collection\" parameter. The extension can then read the `email` field for each UID specified in the `toUids`, `ccUids`, and/or `bccUids` fields.\n\n#### Message field\n\nThe `message` field of the document contains raw delivery information for the email. This field should generally only be populated by trusted code running in your own servers or Cloud Functions (refer to the \"Security rules and sending email\" section below).\n\nAvailable properties for the `message` field are:\n\n* **messageId:** A message ID header for the email, if any.\n* **subject:** The subject of the email.\n* **text:** The plaintext content of the email.\n* **html:** The HTML content of the email.\n* **amp:** The [AMP4EMAIL][amp4email] content of the email.\n* **attachments:** An array containing attachment(s); [Nodemailer options](https://nodemailer.com/message/attachments/) supported: utf-8 string, custom content type, URL, encoded string, data URI, and pregenerated MIME node (be aware that your email has no access to the cloud server's file system).\n\n#### Using templates\n\nIf you specified a \"Templates collection\" parameter during configuration of the extension, you can create and manage [Handlebars][handlebars] templates for your emails. Each document for a template should have a memorable ID that you use as the *template name* in the document that's written to your `${param:MAIL_COLLECTION}` collection.\n\nThe template document can include any of the following fields:\n\n* **subject:** A template string for the subject of the email.\n* **text:** A template string for the plaintext content of the email.\n* **html:** A template string for the HTML content of the email.\n* **amp:** A template string for the [AMP4EMAIL][amp4email] content of the email.\n\nAn example template might have an ID of `following` and content like:\n\n```js\n{\n  subject: \"@{{username}} is now following you!\",\n  html: \"Just writing to let you know that <code>@{{username}}</code> ({{name}}) is now following you.\"\n}\n```\n\nTo deliver email using templates, when adding documents to your `${param:MAIL_COLLECTION}` collection, include a `template` field with `name` and `data` properties. For example, using our `following` template from above:\n\n```js\nadmin.firestore().collection('${param:MAIL_COLLECTION}').add({\n  toUids: ['abc123'],\n  template: {\n    name: 'following',\n    data: {\n      username: 'ada',\n      name: 'Ada Lovelace'\n    }\n  }\n})\n```\n\n#### Security rules and sending email\n\nThis extension can be used to trigger email delivery directly from client applications. However, you should carefully control client access to the `${param:MAIL_COLLECTION}` collection to avoid potential abuse (you don't want users able to send arbitrary emails from your company's address!).\n\nSecurity rules will vary from application to application, but you should always make sure that emails are sent only to intended recipients and free-form content is kept to a minimum. Templates can help here -- you can use security rules to verify that the data being populated to the template matches your expectations for what a user should be allowed to trigger.\n\n#### Email delivery processing\n\nWhen a document is added to the `${param:MAIL_COLLECTION}` collection, the extension picks it up for email delivery processing. The extension creates and updates a `delivery` field in the document as it processes the email. The `delivery` field can be populated with the following fields:\n\n* **state:** One of `PENDING`, `PROCESSING`, `SUCCESS`, or `ERROR`.\n* **startTime:** Timestamp when email processing began.\n* **endTime:** Timestamp when email processing completed (that is, ended in either a `SUCCESS` or `ERROR` state).\n* **error:** If there was an email delivery error, an error message will be populated here.\n* **attempts:** Number of delivery attempts for this email.\n* **leaseExpireTime:** In case of a hang or timeout, the time at which a `PROCESSING` state should be considered an error.\n* **info:** After successful email delivery (to at least one address), this field will be populated with the following fields:\n  * **messageId:** The message ID of the delivered email.\n  * **accepted:** Array of email addresses to which the email was successfully delivered.\n  * **rejected:** Array of email addresses to which the email could not be delivered.\n  * **pending:** Array of email addresses that were temporarily rejected by SMTP.\n  * **response:** The last response from the SMTP server.\n\nAn email will typically go from `PENDING` to `PROCESSING` to either `SUCCESS` or `ERROR`. Once in the `SUCCESS` or `ERROR` state, additional changes to the document will not trigger the extension to send another email. To resend an email with document updates, you can change the `state` to `PENDING` or `RETRY`.\n\n#### Manual retries\n\nThere are instances in which email delivery fails in a recoverable fashion or the document can be manually corrected for proper delivery with minor modifications. While retries are not automatic, you can manually change the `state` in the `delivery` field to `RETRY` so that the extension attempts email delivery again (and increments the number of `attempts`).\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n\n[mail_collection]: https://console.firebase.google.com/project/_/database/firestore/data~2F${param:MAIL_COLLECTION}\n[admin_sdk]: https://firebase.google.com/docs/admin/setup\n[amp4email]: https://amp.dev/documentation/guides-and-tutorials/learn/email-spec/amp-email-format/\n[handlebars]: https://handlebarsjs.com/\n","readmeContent":"# Trigger Email\n\n**Description**: Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.\n\n\n\n**Details**: Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\n\nThis extension uses other Firebase or Google Cloud Platform services which may have associated charges:\n\n- Cloud Firestore\n- Cloud Functions\n\nWhen you use Firebase Extensions, you're only charged for the underlying resources that you use. A paid-tier billing plan is only required if the extension uses a service that requires a paid-tier plan, for example calling to a Google Cloud Platform API or making outbound network requests to non-Google services. All Firebase services offer a free tier of usage. [Learn more about Firebase billing.](https://firebase.google.com/pricing)\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n\n\n\n\n**Configuration Parameters:**\n\n* Cloud Functions location: Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).\n\n* SMTP connection URI: A URI representing an SMTP server that this extension can use to deliver email.\n\n* Email documents collection: What is the path to the collection that contains the documents used to build and send the emails?\n\n* Default FROM address: The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).\n\n* Default REPLY-TO address: The email address to use as the reply-to address (if it's not specified in the added email document).\n\n* Users collection: A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection.\n\n* Templates collection: A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document.\n\n\n\n**Cloud Functions:**\n\n* **processQueue:** Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.\n\n\n\n**Access Required**:\n\n\n\nThis extension will operate with the following project IAM roles:\n\n* datastore.user (Reason: Allows this extension to access Cloud Firestore to read and process added email documents.)\n","displayName":"Trigger Email","systemParams":[{"param":"firebaseextensions.v1beta.function/memory","label":"Function memory","type":"SELECT","description":"How much memory should be allocated to each function?","options":[{"value":"128","label":"128MB"},{"value":"256","label":"256MB"},{"value":"512","label":"512MB"},{"value":"1024","label":"1GB"},{"value":"2048","label":"2GB"},{"value":"4096","label":"4GB"},{"value":"8192","label":"8GB"}],"default":"256","advanced":true},{"param":"firebaseextensions.v1beta.function/timeoutSeconds","label":"Function timeout seconds","type":"STRING","description":"How long should functions run before timing out, in seconds (0-540)?","validationRegex":"^[1-9][0-9]{0,2}$","validationErrorMessage":"Function timeout should be an integer number of seconds, between 0 and 540","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnector","label":"VPC Connector","type":"STRING","description":"The VPC Network Connector that this cloud function can connect to. It can be either the fully-qualified URI, or the short name of the network connector resource. The format of this field is projects/*/locations/*/connectors/*.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/connectors/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnectorEgressSettings","label":"VPC Connector Egress settings","type":"SELECT","description":"Controls outgoing traffic when a VPC connector is configured","options":[{"value":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","label":"Unspecified"},{"value":"PRIVATE_RANGES_ONLY","label":"Private ranges only"},{"value":"ALL_TRAFFIC","label":"All traffic"}],"default":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","advanced":true},{"param":"firebaseextensions.v1beta.function/minInstances","label":"Minimum function instances","type":"STRING","description":"The minimum number of instances of each function to run at once (0-1000)","default":"0","validationRegex":"^[0-9]*$","validationErrorMessage":"Min instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/maxInstances","label":"Maximum function instances","type":"STRING","description":"The maximum number of instances of each function to run at once","default":"3000","validationRegex":"^[0-9]*$","validationErrorMessage":"Max instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/ingressSettings","label":"Function ingress settings","type":"SELECT","description":"Where should functions allow incoming traffic from?","options":[{"value":"ALLOW_ALL","label":"Allow all"},{"value":"ALLOW_INTERNAL_ONLY","label":"Allow internal only"},{"value":"ALLOW_INTERNAL_AND_GCLB","label":"Allow internal and GCLB"}],"advanced":true},{"param":"firebaseextensions.v1beta.function/labels","label":"Function labels","type":"STRING","description":"Do you wish to set any labels on this instance's Cloud Functions? If so, provide up to 55 labels in the format 'key1:value, key2:value'","validationRegex":"^([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63},\\s*)*([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63})$","advanced":true},{"param":"firebaseextensions.v1beta.function/kmsKeyName","label":"KMS key name","type":"STRING","description":"Do you want to use a Customer Managed Eencryption Key (CMEK) to encrypt this extension's functions? If you set this, you must also set a Docker repository encrypted by that key. See https://cloud.google.com/functions/docs/securing/cmek for more details.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/keyRings/([^/]+)/cryptoKeys/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/dockerRepository","label":"Docker repository","type":"STRING","description":"What Docker repository should be used to store function images? Default repository will be used if not set.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/repositories/([^/]+)$","advanced":true}]},"state":"PUBLISHED","createTime":"2020-04-09T17:19:22.479054513Z","id":"0.1.4-rc.3","listing":{"state":"UNLISTED"},"metrics":{"activeInstallCount":"200"}},{"name":"publishers/firebase/extensions/firestore-send-email/versions/0.1.5","ref":"firebase/firestore-send-email@0.1.5","spec":{"specVersion":"v1beta","name":"firestore-send-email","version":"0.1.5","description":"Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.","roles":[{"role":"datastore.user","reason":"Allows this extension to access Cloud Firestore to read and process added email documents."}],"resources":[{"name":"processQueue","type":"firebaseextensions.v1beta.function","propertiesYaml":"eventTrigger:\n  eventType: providers/cloud.firestore/eventTypes/document.write\n  resource: projects/${PROJECT_ID}/databases/(default)/documents/${MAIL_COLLECTION}/{id}\nlocation: ${LOCATION}\nruntime: nodejs10\n","description":"Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.","deletionPolicy":"DELETE"}],"billingRequired":true,"author":{"authorName":"Firebase","url":"https://firebase.google.com"},"contributors":[{"authorName":"Michael Bleigh","url":"https://github.com/mbleigh"},{"authorName":"Invertase","email":"oss@invertase.io","url":"https://github.com/invertase"}],"license":"Apache-2.0","releaseNotesUrl":"https://github.com/firebase/extensions/blob/master/firestore-send-email/CHANGELOG.md","sourceUrl":"https://github.com/firebase/extensions/tree/master/firestore-send-email","params":[{"param":"LOCATION","label":"Cloud Functions location","type":"SELECT","description":"Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).","required":true,"options":[{"value":"us-central1","label":"Iowa (us-central1)"},{"value":"us-east1","label":"South Carolina (us-east1)"},{"value":"us-east4","label":"Northern Virginia (us-east4)"},{"value":"europe-west1","label":"Belgium (europe-west1)"},{"value":"europe-west2","label":"London (europe-west2)"},{"value":"europe-west3","label":"Frankfurt (europe-west3)"},{"value":"asia-east2","label":"Hong Kong (asia-east2)"},{"value":"asia-northeast1","label":"Tokyo (asia-northeast1)"}],"default":"us-central1","immutable":true},{"param":"SMTP_CONNECTION_URI","label":"SMTP connection URI","type":"STRING","description":"A URI representing an SMTP server that this extension can use to deliver email.","required":true,"example":"smtps://username:password@smtp.hostname.com:465","validationRegex":"^smtps?://[^:]+:[^:]+@.*$","validationErrorMessage":"Invalid SMTP connection URI. Must be in the form `smtp(s)://username:password@hostname:port`."},{"param":"MAIL_COLLECTION","label":"Email documents collection","type":"STRING","description":"What is the path to the collection that contains the documents used to build and send the emails?","required":true,"default":"mail","validationRegex":"^[^/]+(/[^/]+/[^/]+)*$","validationErrorMessage":"Must be a valid Cloud Firestore collection"},{"param":"DEFAULT_FROM","label":"Default FROM address","type":"STRING","description":"The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).","required":true,"example":"foobar@example.com","validationRegex":"^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$|^.*<(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})>$","validationErrorMessage":"Must be a valid email address or valid name plus email address"},{"param":"DEFAULT_REPLY_TO","label":"Default REPLY-TO address","type":"STRING","description":"The email address to use as the reply-to address (if it's not specified in the added email document)."},{"param":"USERS_COLLECTION","label":"Users collection","type":"STRING","description":"A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection."},{"param":"TEMPLATES_COLLECTION","label":"Templates collection","type":"STRING","description":"A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document."}],"preinstallContent":"Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- You will be charged a small amount (typically around $0.01/month) for the Firebase resources required by this extension (even if it is not used).\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s free tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#expandable-24))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n","postinstallContent":"### See it in action\n\nYou can test out this extension right away!\n\n1.  Go to your [Cloud Firestore dashboard](https://console.firebase.google.com/project/${param:PROJECT_ID}/firestore/data) in the Firebase console.\n\n1.  If it doesn't already exist, create the collection you specified during installation: `${param:MAIL_COLLECTION}`.\n\n1.  Add a document with a `to` field and a `message` field with the following content:\n\n    ```js\n    to: ['someone@example.com'],\n    message: {\n      subject: 'Hello from Firebase!',\n      text: 'This is the plaintext section of the email body.',\n      html: 'This is the <code>HTML</code> section of the email body.',\n    }\n    ```\n\n1.  In a few seconds, you'll see a `delivery` field appear in the document. The field will update as the extension processes the email.\n\n**Note:** You can also use the [Firebase Admin SDK][admin_sdk] to add a document:\n```js\nadmin.firestore().collection('${param:MAIL_COLLECTION}').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    text: 'This is the plaintext section of the email body.',\n    html: 'This is the <code>HTML</code> section of the email body.',\n  }\n}).then(() => console.log('Queued email for delivery!'));\n```\n\n### Using this extension\n\nAfter its installation, this extension monitors all document writes to the `${param:MAIL_COLLECTION}` collection. Email is delivered based on the contents of the document's fields. The top-level fields specify the email's sender and recipients. The `message` field contains the details of the email to deliver, including the email body.\n\n#### Sender and recipient fields\n\nThe top-level fields of the document supply the email sender and recipient information. Available fields are:\n\n* **from:** The sender's email address. If not specified in the document, uses the configured \"Default FROM address\" parameter.\n* **replyTo:** The reply-to email address. If not specified in the document, uses the configured \"Default REPLY-TO address\" parameter.\n* **to:** A single recipient email address or an array containing multiple recipient email addresses.\n* **toUids:** An array containing the recipient UIDs.\n* **cc:** A single recipient email address or an array containing multiple recipient email addresses.\n* **ccUids:** An array containing the CC recipient UIDs.\n* **bcc:** A single recipient email address or an array containing multiple recipient email addresses.\n* **bccUids:** An array containing the BCC recipient UIDs.\n* **headers:** An object of additional header fields (for example, `{\"X-Custom-Header\": \"value\", \"X-Second-Custom-Header\": \"value\"}`).\n\n**NOTE:** The `toUids`, `ccUids`, and `bccUids` options deliver emails based on user UIDs keyed to email addresses within a Cloud Firestore document. To use these recipient options, you need to specify a Cloud Firestore collection for the extension's \"Users collection\" parameter. The extension can then read the `email` field for each UID specified in the `toUids`, `ccUids`, and/or `bccUids` fields.\n\n#### Message field\n\nThe `message` field of the document contains raw delivery information for the email. This field should generally only be populated by trusted code running in your own servers or Cloud Functions (refer to the \"Security rules and sending email\" section below).\n\nAvailable properties for the `message` field are:\n\n* **messageId:** A message ID header for the email, if any.\n* **subject:** The subject of the email.\n* **text:** The plaintext content of the email.\n* **html:** The HTML content of the email.\n* **amp:** The [AMP4EMAIL][amp4email] content of the email.\n* **attachments:** An array containing attachment(s); [Nodemailer options](https://nodemailer.com/message/attachments/) supported: utf-8 string, custom content type, URL, encoded string, data URI, and pregenerated MIME node (be aware that your email has no access to the cloud server's file system).\n\n#### Using templates\n\nIf you specified a \"Templates collection\" parameter during configuration of the extension, you can create and manage [Handlebars][handlebars] templates for your emails. Each document for a template should have a memorable ID that you use as the *template name* in the document that's written to your `${param:MAIL_COLLECTION}` collection.\n\nThe template document can include any of the following fields:\n\n* **subject:** A template string for the subject of the email.\n* **text:** A template string for the plaintext content of the email.\n* **html:** A template string for the HTML content of the email.\n* **amp:** A template string for the [AMP4EMAIL][amp4email] content of the email.\n\nAn example template might have an ID of `following` and content like:\n\n```js\n{\n  subject: \"@{{username}} is now following you!\",\n  html: \"Just writing to let you know that <code>@{{username}}</code> ({{name}}) is now following you.\"\n}\n```\n\nTo deliver email using templates, when adding documents to your `${param:MAIL_COLLECTION}` collection, include a `template` field with `name` and `data` properties. For example, using our `following` template from above:\n\n```js\nadmin.firestore().collection('${param:MAIL_COLLECTION}').add({\n  toUids: ['abc123'],\n  template: {\n    name: 'following',\n    data: {\n      username: 'ada',\n      name: 'Ada Lovelace'\n    }\n  }\n})\n```\n\n#### Security rules and sending email\n\nThis extension can be used to trigger email delivery directly from client applications. However, you should carefully control client access to the `${param:MAIL_COLLECTION}` collection to avoid potential abuse (you don't want users able to send arbitrary emails from your company's address!).\n\nSecurity rules will vary from application to application, but you should always make sure that emails are sent only to intended recipients and free-form content is kept to a minimum. Templates can help here -- you can use security rules to verify that the data being populated to the template matches your expectations for what a user should be allowed to trigger.\n\n#### Email delivery processing\n\nWhen a document is added to the `${param:MAIL_COLLECTION}` collection, the extension picks it up for email delivery processing. The extension creates and updates a `delivery` field in the document as it processes the email. The `delivery` field can be populated with the following fields:\n\n* **state:** One of `PENDING`, `PROCESSING`, `SUCCESS`, or `ERROR`.\n* **startTime:** Timestamp when email processing began.\n* **endTime:** Timestamp when email processing completed (that is, ended in either a `SUCCESS` or `ERROR` state).\n* **error:** If there was an email delivery error, an error message will be populated here.\n* **attempts:** Number of delivery attempts for this email.\n* **leaseExpireTime:** In case of a hang or timeout, the time at which a `PROCESSING` state should be considered an error.\n* **info:** After successful email delivery (to at least one address), this field will be populated with the following fields:\n  * **messageId:** The message ID of the delivered email.\n  * **accepted:** Array of email addresses to which the email was successfully delivered.\n  * **rejected:** Array of email addresses to which the email could not be delivered.\n  * **pending:** Array of email addresses that were temporarily rejected by SMTP.\n  * **response:** The last response from the SMTP server.\n\nAn email will typically go from `PENDING` to `PROCESSING` to either `SUCCESS` or `ERROR`. Once in the `SUCCESS` or `ERROR` state, additional changes to the document will not trigger the extension to send another email. To resend an email with document updates, you can change the `state` to `PENDING` or `RETRY`.\n\n#### Manual retries\n\nThere are instances in which email delivery fails in a recoverable fashion or the document can be manually corrected for proper delivery with minor modifications. While retries are not automatic, you can manually change the `state` in the `delivery` field to `RETRY` so that the extension attempts email delivery again (and increments the number of `attempts`).\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n\n[mail_collection]: https://console.firebase.google.com/project/_/firestore/data~2F${param:MAIL_COLLECTION}\n[admin_sdk]: https://firebase.google.com/docs/admin/setup\n[amp4email]: https://amp.dev/documentation/guides-and-tutorials/learn/email-spec/amp-email-format/\n[handlebars]: https://handlebarsjs.com/\n","displayName":"Trigger Email","systemParams":[{"param":"firebaseextensions.v1beta.function/memory","label":"Function memory","type":"SELECT","description":"How much memory should be allocated to each function?","options":[{"value":"128","label":"128MB"},{"value":"256","label":"256MB"},{"value":"512","label":"512MB"},{"value":"1024","label":"1GB"},{"value":"2048","label":"2GB"},{"value":"4096","label":"4GB"},{"value":"8192","label":"8GB"}],"default":"256","advanced":true},{"param":"firebaseextensions.v1beta.function/timeoutSeconds","label":"Function timeout seconds","type":"STRING","description":"How long should functions run before timing out, in seconds (0-540)?","validationRegex":"^[1-9][0-9]{0,2}$","validationErrorMessage":"Function timeout should be an integer number of seconds, between 0 and 540","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnector","label":"VPC Connector","type":"STRING","description":"The VPC Network Connector that this cloud function can connect to. It can be either the fully-qualified URI, or the short name of the network connector resource. The format of this field is projects/*/locations/*/connectors/*.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/connectors/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnectorEgressSettings","label":"VPC Connector Egress settings","type":"SELECT","description":"Controls outgoing traffic when a VPC connector is configured","options":[{"value":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","label":"Unspecified"},{"value":"PRIVATE_RANGES_ONLY","label":"Private ranges only"},{"value":"ALL_TRAFFIC","label":"All traffic"}],"default":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","advanced":true},{"param":"firebaseextensions.v1beta.function/minInstances","label":"Minimum function instances","type":"STRING","description":"The minimum number of instances of each function to run at once (0-1000)","default":"0","validationRegex":"^[0-9]*$","validationErrorMessage":"Min instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/maxInstances","label":"Maximum function instances","type":"STRING","description":"The maximum number of instances of each function to run at once","default":"3000","validationRegex":"^[0-9]*$","validationErrorMessage":"Max instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/ingressSettings","label":"Function ingress settings","type":"SELECT","description":"Where should functions allow incoming traffic from?","options":[{"value":"ALLOW_ALL","label":"Allow all"},{"value":"ALLOW_INTERNAL_ONLY","label":"Allow internal only"},{"value":"ALLOW_INTERNAL_AND_GCLB","label":"Allow internal and GCLB"}],"advanced":true},{"param":"firebaseextensions.v1beta.function/labels","label":"Function labels","type":"STRING","description":"Do you wish to set any labels on this instance's Cloud Functions? If so, provide up to 55 labels in the format 'key1:value, key2:value'","validationRegex":"^([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63},\\s*)*([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63})$","advanced":true},{"param":"firebaseextensions.v1beta.function/kmsKeyName","label":"KMS key name","type":"STRING","description":"Do you want to use a Customer Managed Eencryption Key (CMEK) to encrypt this extension's functions? If you set this, you must also set a Docker repository encrypted by that key. See https://cloud.google.com/functions/docs/securing/cmek for more details.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/keyRings/([^/]+)/cryptoKeys/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/dockerRepository","label":"Docker repository","type":"STRING","description":"What Docker repository should be used to store function images? Default repository will be used if not set.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/repositories/([^/]+)$","advanced":true}]},"state":"PUBLISHED","hash":"82cf66d1051fe27b6e66eb9f8456beaecd0af4b21f46622c052bb3c2318847e4","createTime":"2020-09-01T17:11:44.817837Z","id":"0.1.5","releaseNotes":"feature - Update Cloud Functions runtime to Node.js 10.\n","listing":{"state":"APPROVED"},"metrics":{"activeInstallCount":"100"}},{"name":"publishers/firebase/extensions/firestore-send-email/versions/0.1.6","ref":"firebase/firestore-send-email@0.1.6","spec":{"specVersion":"v1beta","name":"firestore-send-email","version":"0.1.6","description":"Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.","roles":[{"role":"datastore.user","reason":"Allows this extension to access Cloud Firestore to read and process added email documents."}],"resources":[{"name":"processQueue","type":"firebaseextensions.v1beta.function","propertiesYaml":"eventTrigger:\n  eventType: providers/cloud.firestore/eventTypes/document.write\n  resource: projects/${param:PROJECT_ID}/databases/(default)/documents/${param:MAIL_COLLECTION}/{id}\nlocation: ${param:LOCATION}\nruntime: nodejs10\n","description":"Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.","deletionPolicy":"DELETE"}],"billingRequired":true,"author":{"authorName":"Firebase","url":"https://firebase.google.com"},"contributors":[{"authorName":"Michael Bleigh","url":"https://github.com/mbleigh"},{"authorName":"Invertase","email":"oss@invertase.io","url":"https://github.com/invertase"}],"license":"Apache-2.0","releaseNotesUrl":"https://github.com/firebase/extensions/blob/master/firestore-send-email/CHANGELOG.md","sourceUrl":"https://github.com/firebase/extensions/tree/master/firestore-send-email","params":[{"param":"LOCATION","label":"Cloud Functions location","type":"SELECT","description":"Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).","required":true,"options":[{"value":"us-central1","label":"Iowa (us-central1)"},{"value":"us-east1","label":"South Carolina (us-east1)"},{"value":"us-east4","label":"Northern Virginia (us-east4)"},{"value":"us-west2","label":"Los Angeles (us-west2)"},{"value":"us-west3","label":"Salt Lake City (us-west3)"},{"value":"us-west4","label":"Las Vegas (us-west4)"},{"value":"europe-west1","label":"Belgium (europe-west1)"},{"value":"europe-west2","label":"London (europe-west2)"},{"value":"europe-west3","label":"Frankfurt (europe-west3)"},{"value":"europe-west6","label":"Zurich (europe-west6)"},{"value":"asia-east2","label":"Hong Kong (asia-east2)"},{"value":"asia-northeast1","label":"Tokyo (asia-northeast1)"},{"value":"asia-northeast2","label":"Osaka (asia-northeast2)"},{"value":"asia-northeast3","label":"Seoul (asia-northeast3)"},{"value":"asia-south1","label":"Mumbai (asia-south1)"},{"value":"asia-southeast2","label":"Jakarta (asia-southeast2)"},{"value":"northamerica-northeast1","label":"Montreal (northamerica-northeast1)"},{"value":"southamerica-east1","label":"Sao Paulo (southamerica-east1)"},{"value":"australia-southeast1","label":"Sydney (australia-southeast1)"}],"default":"us-central1","immutable":true},{"param":"SMTP_CONNECTION_URI","label":"SMTP connection URI","type":"STRING","description":"A URI representing an SMTP server that this extension can use to deliver email.","required":true,"example":"smtps://username:password@smtp.hostname.com:465","validationRegex":"^smtps?://[^:]+:[^:]+@.*$","validationErrorMessage":"Invalid SMTP connection URI. Must be in the form `smtp(s)://username:password@hostname:port`."},{"param":"MAIL_COLLECTION","label":"Email documents collection","type":"STRING","description":"What is the path to the collection that contains the documents used to build and send the emails?","required":true,"default":"mail","validationRegex":"^[^/]+(/[^/]+/[^/]+)*$","validationErrorMessage":"Must be a valid Cloud Firestore collection"},{"param":"DEFAULT_FROM","label":"Default FROM address","type":"STRING","description":"The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).","required":true,"example":"foobar@example.com","validationRegex":"^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$|^.*<(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})>$","validationErrorMessage":"Must be a valid email address or valid name plus email address"},{"param":"DEFAULT_REPLY_TO","label":"Default REPLY-TO address","type":"STRING","description":"The email address to use as the reply-to address (if it's not specified in the added email document)."},{"param":"USERS_COLLECTION","label":"Users collection","type":"STRING","description":"A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection."},{"param":"TEMPLATES_COLLECTION","label":"Templates collection","type":"STRING","description":"A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document."}],"preinstallContent":"Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- You will be charged a small amount (typically around $0.01/month) for the Firebase resources required by this extension (even if it is not used).\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s free tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#expandable-24))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n","postinstallContent":"### See it in action\n\nYou can test out this extension right away!\n\n1.  Go to your [Cloud Firestore dashboard](https://console.firebase.google.com/project/${param:PROJECT_ID}/firestore/data) in the Firebase console.\n\n1.  If it doesn't already exist, create the collection you specified during installation: `${param:MAIL_COLLECTION}`.\n\n1.  Add a document with a `to` field and a `message` field with the following content:\n\n    ```js\n    to: ['someone@example.com'],\n    message: {\n      subject: 'Hello from Firebase!',\n      text: 'This is the plaintext section of the email body.',\n      html: 'This is the <code>HTML</code> section of the email body.',\n    }\n    ```\n\n1.  In a few seconds, you'll see a `delivery` field appear in the document. The field will update as the extension processes the email.\n\n**Note:** You can also use the [Firebase Admin SDK][admin_sdk] to add a document:\n\n```js\nadmin\n  .firestore()\n  .collection(\"${param:MAIL_COLLECTION}\")\n  .add({\n    to: \"someone@example.com\",\n    message: {\n      subject: \"Hello from Firebase!\",\n      text: \"This is the plaintext section of the email body.\",\n      html: \"This is the <code>HTML</code> section of the email body.\",\n    },\n  })\n  .then(() => console.log(\"Queued email for delivery!\"));\n```\n\n### Using this extension\n\nAfter its installation, this extension monitors all document writes to the `${param:MAIL_COLLECTION}` collection. Email is delivered based on the contents of the document's fields. The top-level fields specify the email's sender and recipients. The `message` field contains the details of the email to deliver, including the email body.\n\n#### Sender and recipient fields\n\nThe top-level fields of the document supply the email sender and recipient information. Available fields are:\n\n- **from:** The sender's email address. If not specified in the document, uses the configured \"Default FROM address\" parameter.\n- **replyTo:** The reply-to email address. If not specified in the document, uses the configured \"Default REPLY-TO address\" parameter.\n- **to:** A single recipient email address or an array containing multiple recipient email addresses.\n- **toUids:** An array containing the recipient UIDs.\n- **cc:** A single recipient email address or an array containing multiple recipient email addresses.\n- **ccUids:** An array containing the CC recipient UIDs.\n- **bcc:** A single recipient email address or an array containing multiple recipient email addresses.\n- **bccUids:** An array containing the BCC recipient UIDs.\n- **headers:** An object of additional header fields (for example, `{\"X-Custom-Header\": \"value\", \"X-Second-Custom-Header\": \"value\"}`).\n\n**NOTE:** The `toUids`, `ccUids`, and `bccUids` options deliver emails based on user UIDs keyed to email addresses within a Cloud Firestore document. To use these recipient options, you need to specify a Cloud Firestore collection for the extension's \"Users collection\" parameter. The extension can then read the `email` field for each UID specified in the `toUids`, `ccUids`, and/or `bccUids` fields.\n\n#### Message field\n\nThe `message` field of the document contains raw delivery information for the email. This field should generally only be populated by trusted code running in your own servers or Cloud Functions (refer to the \"Security rules and sending email\" section below).\n\nAvailable properties for the `message` field are:\n\n- **messageId:** A message ID header for the email, if any.\n- **subject:** The subject of the email.\n- **text:** The plaintext content of the email.\n- **html:** The HTML content of the email.\n- **amp:** The [AMP4EMAIL][amp4email] content of the email.\n- **attachments:** An array containing attachment(s); [Nodemailer options](https://nodemailer.com/message/attachments/) supported: utf-8 string, custom content type, URL, encoded string, data URI, and pregenerated MIME node (be aware that your email has no access to the cloud server's file system).\n\n#### Using templates\n\nIf you specified a \"Templates collection\" parameter during configuration of the extension, you can create and manage [Handlebars][handlebars] templates for your emails. Each document for a template should have a memorable ID that you use as the _template name_ in the document that's written to your `${param:MAIL_COLLECTION}` collection.\n\nThe template document can include any of the following fields:\n\n- **subject:** A template string for the subject of the email.\n- **text:** A template string for the plaintext content of the email.\n- **html:** A template string for the HTML content of the email.\n- **amp:** A template string for the [AMP4EMAIL][amp4email] content of the email.\n\nAn example template might have an ID of `following` and content like:\n\n```js\n{\n  subject: \"@{{username}} is now following you!\",\n  html: \"Just writing to let you know that <code>@{{username}}</code> ({{name}}) is now following you.\"\n}\n```\n\nTo deliver email using templates, when adding documents to your `${param:MAIL_COLLECTION}` collection, include a `template` field with `name` and `data` properties. For example, using our `following` template from above:\n\n```js\nadmin\n  .firestore()\n  .collection(\"${param:MAIL_COLLECTION}\")\n  .add({\n    toUids: [\"abc123\"],\n    template: {\n      name: \"following\",\n      data: {\n        username: \"ada\",\n        name: \"Ada Lovelace\",\n      },\n    },\n  });\n```\n\n#### Template Partials\n\nTemplates may be registered reusable [partials](https://handlebarsjs.com/guide/partials.html) by specifying `{partial: true}` in the document in the template collection. Each of the standard data fields (`subject`, `html`, `text`, and `amp`) will be defined as a partial used only in its own environment. For example, a partial called `footer` might have data like:\n\n```js\n{\n  partial: true,\n  html: \"<p>This mail was sent by ExampleApp, Inc. <a href='https://example.com/unsubscribe'>Unsubscribe</a></p>\",\n  text: \"This mail was sent by ExampleApp, Inc. Unsubscribe here: https://example.com/unsubscribe\"\n}\n```\n\nIn another template, the partial can be included by its name (document ID):\n\n```html\n<p>This is my main template content, but it will use a common footer.</p>\n\n{{> footer }}\n```\n\n#### Security rules and sending email\n\nThis extension can be used to trigger email delivery directly from client applications. However, you should carefully control client access to the `${param:MAIL_COLLECTION}` collection to avoid potential abuse (you don't want users able to send arbitrary emails from your company's address!).\n\nSecurity rules will vary from application to application, but you should always make sure that emails are sent only to intended recipients and free-form content is kept to a minimum. Templates can help here -- you can use security rules to verify that the data being populated to the template matches your expectations for what a user should be allowed to trigger.\n\n#### Email delivery processing\n\nWhen a document is added to the `${param:MAIL_COLLECTION}` collection, the extension picks it up for email delivery processing. The extension creates and updates a `delivery` field in the document as it processes the email. The `delivery` field can be populated with the following fields:\n\n- **state:** One of `PENDING`, `PROCESSING`, `SUCCESS`, or `ERROR`.\n- **startTime:** Timestamp when email processing began.\n- **endTime:** Timestamp when email processing completed (that is, ended in either a `SUCCESS` or `ERROR` state).\n- **error:** If there was an email delivery error, an error message will be populated here.\n- **attempts:** Number of delivery attempts for this email.\n- **leaseExpireTime:** In case of a hang or timeout, the time at which a `PROCESSING` state should be considered an error.\n- **info:** After successful email delivery (to at least one address), this field will be populated with the following fields:\n  - **messageId:** The message ID of the delivered email.\n  - **accepted:** Array of email addresses to which the email was successfully delivered.\n  - **rejected:** Array of email addresses to which the email could not be delivered.\n  - **pending:** Array of email addresses that were temporarily rejected by SMTP.\n  - **response:** The last response from the SMTP server.\n\nAn email will typically go from `PENDING` to `PROCESSING` to either `SUCCESS` or `ERROR`. Once in the `SUCCESS` or `ERROR` state, additional changes to the document will not trigger the extension to send another email. To resend an email with document updates, you can change the `state` to `PENDING` or `RETRY`.\n\n#### Manual retries\n\nThere are instances in which email delivery fails in a recoverable fashion or the document can be manually corrected for proper delivery with minor modifications. While retries are not automatic, you can manually change the `state` in the `delivery` field to `RETRY` so that the extension attempts email delivery again (and increments the number of `attempts`).\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n\n[mail_collection]: https://console.firebase.google.com/project/_/firestore/data~2F${param:MAIL_COLLECTION}\n[admin_sdk]: https://firebase.google.com/docs/admin/setup\n[amp4email]: https://amp.dev/documentation/guides-and-tutorials/learn/email-spec/amp-email-format/\n[handlebars]: https://handlebarsjs.com/\n","readmeContent":"# Trigger Email\n\n**Author**: Firebase (**[https://firebase.google.com](https://firebase.google.com)**)\n\n**Description**: Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.\n\n\n\n**Details**: Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- You will be charged a small amount (typically around $0.01/month) for the Firebase resources required by this extension (even if it is not used).\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s free tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#expandable-24))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n\n\n\n\n**Configuration Parameters:**\n\n* Cloud Functions location: Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).\n\n* SMTP connection URI: A URI representing an SMTP server that this extension can use to deliver email.\n\n* Email documents collection: What is the path to the collection that contains the documents used to build and send the emails?\n\n* Default FROM address: The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).\n\n* Default REPLY-TO address: The email address to use as the reply-to address (if it's not specified in the added email document).\n\n* Users collection: A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection.\n\n* Templates collection: A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document.\n\n\n\n**Cloud Functions:**\n\n* **processQueue:** Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.\n\n\n\n**Access Required**:\n\n\n\nThis extension will operate with the following project IAM roles:\n\n* datastore.user (Reason: Allows this extension to access Cloud Firestore to read and process added email documents.)\n","displayName":"Trigger Email","systemParams":[{"param":"firebaseextensions.v1beta.function/memory","label":"Function memory","type":"SELECT","description":"How much memory should be allocated to each function?","options":[{"value":"128","label":"128MB"},{"value":"256","label":"256MB"},{"value":"512","label":"512MB"},{"value":"1024","label":"1GB"},{"value":"2048","label":"2GB"},{"value":"4096","label":"4GB"},{"value":"8192","label":"8GB"}],"default":"256","advanced":true},{"param":"firebaseextensions.v1beta.function/timeoutSeconds","label":"Function timeout seconds","type":"STRING","description":"How long should functions run before timing out, in seconds (0-540)?","validationRegex":"^[1-9][0-9]{0,2}$","validationErrorMessage":"Function timeout should be an integer number of seconds, between 0 and 540","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnector","label":"VPC Connector","type":"STRING","description":"The VPC Network Connector that this cloud function can connect to. It can be either the fully-qualified URI, or the short name of the network connector resource. The format of this field is projects/*/locations/*/connectors/*.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/connectors/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnectorEgressSettings","label":"VPC Connector Egress settings","type":"SELECT","description":"Controls outgoing traffic when a VPC connector is configured","options":[{"value":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","label":"Unspecified"},{"value":"PRIVATE_RANGES_ONLY","label":"Private ranges only"},{"value":"ALL_TRAFFIC","label":"All traffic"}],"default":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","advanced":true},{"param":"firebaseextensions.v1beta.function/minInstances","label":"Minimum function instances","type":"STRING","description":"The minimum number of instances of each function to run at once (0-1000)","default":"0","validationRegex":"^[0-9]*$","validationErrorMessage":"Min instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/maxInstances","label":"Maximum function instances","type":"STRING","description":"The maximum number of instances of each function to run at once","default":"3000","validationRegex":"^[0-9]*$","validationErrorMessage":"Max instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/ingressSettings","label":"Function ingress settings","type":"SELECT","description":"Where should functions allow incoming traffic from?","options":[{"value":"ALLOW_ALL","label":"Allow all"},{"value":"ALLOW_INTERNAL_ONLY","label":"Allow internal only"},{"value":"ALLOW_INTERNAL_AND_GCLB","label":"Allow internal and GCLB"}],"advanced":true},{"param":"firebaseextensions.v1beta.function/labels","label":"Function labels","type":"STRING","description":"Do you wish to set any labels on this instance's Cloud Functions? If so, provide up to 55 labels in the format 'key1:value, key2:value'","validationRegex":"^([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63},\\s*)*([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63})$","advanced":true},{"param":"firebaseextensions.v1beta.function/kmsKeyName","label":"KMS key name","type":"STRING","description":"Do you want to use a Customer Managed Eencryption Key (CMEK) to encrypt this extension's functions? If you set this, you must also set a Docker repository encrypted by that key. See https://cloud.google.com/functions/docs/securing/cmek for more details.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/keyRings/([^/]+)/cryptoKeys/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/dockerRepository","label":"Docker repository","type":"STRING","description":"What Docker repository should be used to store function images? Default repository will be used if not set.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/repositories/([^/]+)$","advanced":true}]},"state":"PUBLISHED","hash":"a9e8bd5ca1c0075f25747d0cd2321f40751c432dc94c71845d7d9acd3cc51fbe","createTime":"2020-12-10T18:42:54.573694Z","id":"0.1.6","releaseNotes":"feature - adds support for Handlebars partials (#419)\n\nfeature - Add new Cloud Functions locations. For more information about locations and their pricing tiers, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).\n","listing":{"state":"APPROVED"},"metrics":{"activeInstallCount":"300"}},{"name":"publishers/firebase/extensions/firestore-send-email/versions/0.1.6-rc.1","ref":"firebase/firestore-send-email@0.1.6-rc.1","spec":{"specVersion":"v1beta","name":"firestore-send-email","version":"0.1.6","description":"Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.","roles":[{"role":"datastore.user","reason":"Allows this extension to access Cloud Firestore to read and process added email documents."}],"resources":[{"name":"processQueue","type":"firebaseextensions.v1beta.function","propertiesYaml":"eventTrigger:\n  eventType: providers/cloud.firestore/eventTypes/document.write\n  resource: projects/${PROJECT_ID}/databases/(default)/documents/${MAIL_COLLECTION}/{id}\nlocation: ${LOCATION}\nruntime: nodejs10\n","description":"Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.","deletionPolicy":"DELETE"}],"billingRequired":true,"author":{"authorName":"Firebase","url":"https://firebase.google.com"},"contributors":[{"authorName":"Michael Bleigh","url":"https://github.com/mbleigh"},{"authorName":"Invertase","email":"oss@invertase.io","url":"https://github.com/invertase"}],"license":"Apache-2.0","releaseNotesUrl":"https://github.com/firebase/extensions/blob/master/firestore-send-email/CHANGELOG.md","sourceUrl":"https://github.com/firebase/extensions/tree/master/firestore-send-email","params":[{"param":"LOCATION","label":"Cloud Functions location","type":"SELECT","description":"Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).","required":true,"options":[{"value":"us-central1","label":"Iowa (us-central1)"},{"value":"us-east1","label":"South Carolina (us-east1)"},{"value":"us-east4","label":"Northern Virginia (us-east4)"},{"value":"us-west2","label":"Los Angeles (us-west2)"},{"value":"us-west3","label":"Salt Lake City (us-west3)"},{"value":"us-west4","label":"Las Vegas (us-west4)"},{"value":"europe-west1","label":"Belgium (europe-west1)"},{"value":"europe-west2","label":"London (europe-west2)"},{"value":"europe-west3","label":"Frankfurt (europe-west3)"},{"value":"europe-west6","label":"Zurich (europe-west6)"},{"value":"asia-east2","label":"Hong Kong (asia-east2)"},{"value":"asia-northeast1","label":"Tokyo (asia-northeast1)"},{"value":"asia-northeast2","label":"Osaka (asia-northeast2)"},{"value":"asia-northeast3","label":"Seoul (asia-northeast3)"},{"value":"asia-south1","label":"Mumbai (asia-south1)"},{"value":"asia-southeast2","label":"Jakarta (asia-southeast2)"},{"value":"northamerica-northeast1","label":"Montreal (northamerica-northeast1)"},{"value":"southamerica-east1","label":"Sao Paulo (southamerica-east1)"},{"value":"australia-southeast1","label":"Sydney (australia-southeast1)"}],"default":"us-central1","immutable":true},{"param":"SMTP_CONNECTION_URI","label":"SMTP connection URI","type":"STRING","description":"A URI representing an SMTP server that this extension can use to deliver email.","required":true,"example":"smtps://username:password@smtp.hostname.com:465","validationRegex":"^smtps?://[^:]+:[^:]+@.*$","validationErrorMessage":"Invalid SMTP connection URI. Must be in the form `smtp(s)://username:password@hostname:port`."},{"param":"MAIL_COLLECTION","label":"Email documents collection","type":"STRING","description":"What is the path to the collection that contains the documents used to build and send the emails?","required":true,"default":"mail","validationRegex":"^[^/]+(/[^/]+/[^/]+)*$","validationErrorMessage":"Must be a valid Cloud Firestore collection"},{"param":"DEFAULT_FROM","label":"Default FROM address","type":"STRING","description":"The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).","required":true,"example":"foobar@example.com","validationRegex":"^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$|^.*<(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})>$","validationErrorMessage":"Must be a valid email address or valid name plus email address"},{"param":"DEFAULT_REPLY_TO","label":"Default REPLY-TO address","type":"STRING","description":"The email address to use as the reply-to address (if it's not specified in the added email document)."},{"param":"USERS_COLLECTION","label":"Users collection","type":"STRING","description":"A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection."},{"param":"TEMPLATES_COLLECTION","label":"Templates collection","type":"STRING","description":"A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document."}],"preinstallContent":"Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- You will be charged a small amount (typically around $0.01/month) for the Firebase resources required by this extension (even if it is not used).\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s free tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#expandable-24))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n","postinstallContent":"### See it in action\n\nYou can test out this extension right away!\n\n1.  Go to your [Cloud Firestore dashboard](https://console.firebase.google.com/project/${param:PROJECT_ID}/firestore/data) in the Firebase console.\n\n1.  If it doesn't already exist, create the collection you specified during installation: `${param:MAIL_COLLECTION}`.\n\n1.  Add a document with a `to` field and a `message` field with the following content:\n\n    ```js\n    to: ['someone@example.com'],\n    message: {\n      subject: 'Hello from Firebase!',\n      text: 'This is the plaintext section of the email body.',\n      html: 'This is the <code>HTML</code> section of the email body.',\n    }\n    ```\n\n1.  In a few seconds, you'll see a `delivery` field appear in the document. The field will update as the extension processes the email.\n\n**Note:** You can also use the [Firebase Admin SDK][admin_sdk] to add a document:\n\n```js\nadmin\n  .firestore()\n  .collection(\"${param:MAIL_COLLECTION}\")\n  .add({\n    to: \"someone@example.com\",\n    message: {\n      subject: \"Hello from Firebase!\",\n      text: \"This is the plaintext section of the email body.\",\n      html: \"This is the <code>HTML</code> section of the email body.\",\n    },\n  })\n  .then(() => console.log(\"Queued email for delivery!\"));\n```\n\n### Using this extension\n\nAfter its installation, this extension monitors all document writes to the `${param:MAIL_COLLECTION}` collection. Email is delivered based on the contents of the document's fields. The top-level fields specify the email's sender and recipients. The `message` field contains the details of the email to deliver, including the email body.\n\n#### Sender and recipient fields\n\nThe top-level fields of the document supply the email sender and recipient information. Available fields are:\n\n- **from:** The sender's email address. If not specified in the document, uses the configured \"Default FROM address\" parameter.\n- **replyTo:** The reply-to email address. If not specified in the document, uses the configured \"Default REPLY-TO address\" parameter.\n- **to:** A single recipient email address or an array containing multiple recipient email addresses.\n- **toUids:** An array containing the recipient UIDs.\n- **cc:** A single recipient email address or an array containing multiple recipient email addresses.\n- **ccUids:** An array containing the CC recipient UIDs.\n- **bcc:** A single recipient email address or an array containing multiple recipient email addresses.\n- **bccUids:** An array containing the BCC recipient UIDs.\n- **headers:** An object of additional header fields (for example, `{\"X-Custom-Header\": \"value\", \"X-Second-Custom-Header\": \"value\"}`).\n\n**NOTE:** The `toUids`, `ccUids`, and `bccUids` options deliver emails based on user UIDs keyed to email addresses within a Cloud Firestore document. To use these recipient options, you need to specify a Cloud Firestore collection for the extension's \"Users collection\" parameter. The extension can then read the `email` field for each UID specified in the `toUids`, `ccUids`, and/or `bccUids` fields.\n\n#### Message field\n\nThe `message` field of the document contains raw delivery information for the email. This field should generally only be populated by trusted code running in your own servers or Cloud Functions (refer to the \"Security rules and sending email\" section below).\n\nAvailable properties for the `message` field are:\n\n- **messageId:** A message ID header for the email, if any.\n- **subject:** The subject of the email.\n- **text:** The plaintext content of the email.\n- **html:** The HTML content of the email.\n- **amp:** The [AMP4EMAIL][amp4email] content of the email.\n- **attachments:** An array containing attachment(s); [Nodemailer options](https://nodemailer.com/message/attachments/) supported: utf-8 string, custom content type, URL, encoded string, data URI, and pregenerated MIME node (be aware that your email has no access to the cloud server's file system).\n\n#### Using templates\n\nIf you specified a \"Templates collection\" parameter during configuration of the extension, you can create and manage [Handlebars][handlebars] templates for your emails. Each document for a template should have a memorable ID that you use as the _template name_ in the document that's written to your `${param:MAIL_COLLECTION}` collection.\n\nThe template document can include any of the following fields:\n\n- **subject:** A template string for the subject of the email.\n- **text:** A template string for the plaintext content of the email.\n- **html:** A template string for the HTML content of the email.\n- **amp:** A template string for the [AMP4EMAIL][amp4email] content of the email.\n\nAn example template might have an ID of `following` and content like:\n\n```js\n{\n  subject: \"@{{username}} is now following you!\",\n  html: \"Just writing to let you know that <code>@{{username}}</code> ({{name}}) is now following you.\"\n}\n```\n\nTo deliver email using templates, when adding documents to your `${param:MAIL_COLLECTION}` collection, include a `template` field with `name` and `data` properties. For example, using our `following` template from above:\n\n```js\nadmin\n  .firestore()\n  .collection(\"${param:MAIL_COLLECTION}\")\n  .add({\n    toUids: [\"abc123\"],\n    template: {\n      name: \"following\",\n      data: {\n        username: \"ada\",\n        name: \"Ada Lovelace\",\n      },\n    },\n  });\n```\n\n#### Template Partials\n\nTemplates may be registered reusable [partials](https://handlebarsjs.com/guide/partials.html) by specifying `{partial: true}` in the document in the template collection. Each of the standard data fields (`subject`, `html`, `text`, and `amp`) will be defined as a partial used only in its own environment. For example, a partial called `footer` might have data like:\n\n```js\n{\n  partial: true,\n  html: \"<p>This mail was sent by ExampleApp, Inc. <a href='https://example.com/unsubscribe'>Unsubscribe</a></p>\",\n  text: \"This mail was sent by ExampleApp, Inc. Unsubscribe here: https://example.com/unsubscribe\"\n}\n```\n\nIn another template, the partial can be included by its name (document ID):\n\n```html\n<p>This is my main template content, but it will use a common footer.</p>\n\n{{> footer }}\n```\n\n#### Security rules and sending email\n\nThis extension can be used to trigger email delivery directly from client applications. However, you should carefully control client access to the `${param:MAIL_COLLECTION}` collection to avoid potential abuse (you don't want users able to send arbitrary emails from your company's address!).\n\nSecurity rules will vary from application to application, but you should always make sure that emails are sent only to intended recipients and free-form content is kept to a minimum. Templates can help here -- you can use security rules to verify that the data being populated to the template matches your expectations for what a user should be allowed to trigger.\n\n#### Email delivery processing\n\nWhen a document is added to the `${param:MAIL_COLLECTION}` collection, the extension picks it up for email delivery processing. The extension creates and updates a `delivery` field in the document as it processes the email. The `delivery` field can be populated with the following fields:\n\n- **state:** One of `PENDING`, `PROCESSING`, `SUCCESS`, or `ERROR`.\n- **startTime:** Timestamp when email processing began.\n- **endTime:** Timestamp when email processing completed (that is, ended in either a `SUCCESS` or `ERROR` state).\n- **error:** If there was an email delivery error, an error message will be populated here.\n- **attempts:** Number of delivery attempts for this email.\n- **leaseExpireTime:** In case of a hang or timeout, the time at which a `PROCESSING` state should be considered an error.\n- **info:** After successful email delivery (to at least one address), this field will be populated with the following fields:\n  - **messageId:** The message ID of the delivered email.\n  - **accepted:** Array of email addresses to which the email was successfully delivered.\n  - **rejected:** Array of email addresses to which the email could not be delivered.\n  - **pending:** Array of email addresses that were temporarily rejected by SMTP.\n  - **response:** The last response from the SMTP server.\n\nAn email will typically go from `PENDING` to `PROCESSING` to either `SUCCESS` or `ERROR`. Once in the `SUCCESS` or `ERROR` state, additional changes to the document will not trigger the extension to send another email. To resend an email with document updates, you can change the `state` to `PENDING` or `RETRY`.\n\n#### Manual retries\n\nThere are instances in which email delivery fails in a recoverable fashion or the document can be manually corrected for proper delivery with minor modifications. While retries are not automatic, you can manually change the `state` in the `delivery` field to `RETRY` so that the extension attempts email delivery again (and increments the number of `attempts`).\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n\n[mail_collection]: https://console.firebase.google.com/project/_/firestore/data~2F${param:MAIL_COLLECTION}\n[admin_sdk]: https://firebase.google.com/docs/admin/setup\n[amp4email]: https://amp.dev/documentation/guides-and-tutorials/learn/email-spec/amp-email-format/\n[handlebars]: https://handlebarsjs.com/\n","displayName":"Trigger Email","systemParams":[{"param":"firebaseextensions.v1beta.function/memory","label":"Function memory","type":"SELECT","description":"How much memory should be allocated to each function?","options":[{"value":"128","label":"128MB"},{"value":"256","label":"256MB"},{"value":"512","label":"512MB"},{"value":"1024","label":"1GB"},{"value":"2048","label":"2GB"},{"value":"4096","label":"4GB"},{"value":"8192","label":"8GB"}],"default":"256","advanced":true},{"param":"firebaseextensions.v1beta.function/timeoutSeconds","label":"Function timeout seconds","type":"STRING","description":"How long should functions run before timing out, in seconds (0-540)?","validationRegex":"^[1-9][0-9]{0,2}$","validationErrorMessage":"Function timeout should be an integer number of seconds, between 0 and 540","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnector","label":"VPC Connector","type":"STRING","description":"The VPC Network Connector that this cloud function can connect to. It can be either the fully-qualified URI, or the short name of the network connector resource. The format of this field is projects/*/locations/*/connectors/*.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/connectors/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnectorEgressSettings","label":"VPC Connector Egress settings","type":"SELECT","description":"Controls outgoing traffic when a VPC connector is configured","options":[{"value":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","label":"Unspecified"},{"value":"PRIVATE_RANGES_ONLY","label":"Private ranges only"},{"value":"ALL_TRAFFIC","label":"All traffic"}],"default":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","advanced":true},{"param":"firebaseextensions.v1beta.function/minInstances","label":"Minimum function instances","type":"STRING","description":"The minimum number of instances of each function to run at once (0-1000)","default":"0","validationRegex":"^[0-9]*$","validationErrorMessage":"Min instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/maxInstances","label":"Maximum function instances","type":"STRING","description":"The maximum number of instances of each function to run at once","default":"3000","validationRegex":"^[0-9]*$","validationErrorMessage":"Max instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/ingressSettings","label":"Function ingress settings","type":"SELECT","description":"Where should functions allow incoming traffic from?","options":[{"value":"ALLOW_ALL","label":"Allow all"},{"value":"ALLOW_INTERNAL_ONLY","label":"Allow internal only"},{"value":"ALLOW_INTERNAL_AND_GCLB","label":"Allow internal and GCLB"}],"advanced":true},{"param":"firebaseextensions.v1beta.function/labels","label":"Function labels","type":"STRING","description":"Do you wish to set any labels on this instance's Cloud Functions? If so, provide up to 55 labels in the format 'key1:value, key2:value'","validationRegex":"^([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63},\\s*)*([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63})$","advanced":true},{"param":"firebaseextensions.v1beta.function/kmsKeyName","label":"KMS key name","type":"STRING","description":"Do you want to use a Customer Managed Eencryption Key (CMEK) to encrypt this extension's functions? If you set this, you must also set a Docker repository encrypted by that key. See https://cloud.google.com/functions/docs/securing/cmek for more details.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/keyRings/([^/]+)/cryptoKeys/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/dockerRepository","label":"Docker repository","type":"STRING","description":"What Docker repository should be used to store function images? Default repository will be used if not set.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/repositories/([^/]+)$","advanced":true}]},"state":"PUBLISHED","createTime":"2020-09-10T17:15:34.657462Z","id":"0.1.6-rc.1","listing":{"state":"UNLISTED"},"metrics":{"activeInstallCount":"1200"}},{"name":"publishers/firebase/extensions/firestore-send-email/versions/0.1.7","ref":"firebase/firestore-send-email@0.1.7","spec":{"specVersion":"v1beta","name":"firestore-send-email","version":"0.1.7","description":"Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.","roles":[{"role":"datastore.user","reason":"Allows this extension to access Cloud Firestore to read and process added email documents."}],"resources":[{"name":"processQueue","type":"firebaseextensions.v1beta.function","propertiesYaml":"eventTrigger:\n  eventType: providers/cloud.firestore/eventTypes/document.write\n  resource: projects/${param:PROJECT_ID}/databases/(default)/documents/${param:MAIL_COLLECTION}/{id}\nlocation: ${param:LOCATION}\nruntime: nodejs10\n","description":"Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.","deletionPolicy":"DELETE"}],"billingRequired":true,"author":{"authorName":"Firebase","url":"https://firebase.google.com"},"contributors":[{"authorName":"Michael Bleigh","url":"https://github.com/mbleigh"},{"authorName":"Invertase","email":"oss@invertase.io","url":"https://github.com/invertase"}],"license":"Apache-2.0","releaseNotesUrl":"https://github.com/firebase/extensions/blob/master/firestore-send-email/CHANGELOG.md","sourceUrl":"https://github.com/firebase/extensions/tree/master/firestore-send-email","params":[{"param":"LOCATION","label":"Cloud Functions location","type":"SELECT","description":"Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).","required":true,"options":[{"value":"us-central1","label":"Iowa (us-central1)"},{"value":"us-east1","label":"South Carolina (us-east1)"},{"value":"us-east4","label":"Northern Virginia (us-east4)"},{"value":"us-west2","label":"Los Angeles (us-west2)"},{"value":"us-west3","label":"Salt Lake City (us-west3)"},{"value":"us-west4","label":"Las Vegas (us-west4)"},{"value":"europe-west1","label":"Belgium (europe-west1)"},{"value":"europe-west2","label":"London (europe-west2)"},{"value":"europe-west3","label":"Frankfurt (europe-west3)"},{"value":"europe-west6","label":"Zurich (europe-west6)"},{"value":"asia-east2","label":"Hong Kong (asia-east2)"},{"value":"asia-northeast1","label":"Tokyo (asia-northeast1)"},{"value":"asia-northeast2","label":"Osaka (asia-northeast2)"},{"value":"asia-northeast3","label":"Seoul (asia-northeast3)"},{"value":"asia-south1","label":"Mumbai (asia-south1)"},{"value":"asia-southeast2","label":"Jakarta (asia-southeast2)"},{"value":"northamerica-northeast1","label":"Montreal (northamerica-northeast1)"},{"value":"southamerica-east1","label":"Sao Paulo (southamerica-east1)"},{"value":"australia-southeast1","label":"Sydney (australia-southeast1)"}],"default":"us-central1","immutable":true},{"param":"SMTP_CONNECTION_URI","label":"SMTP connection URI","type":"STRING","description":"A URI representing an SMTP server that this extension can use to deliver email.","required":true,"example":"smtps://username:password@smtp.hostname.com:465","validationRegex":"^smtps?://[^:]+:[^:]+@.*$","validationErrorMessage":"Invalid SMTP connection URI. Must be in the form `smtp(s)://username:password@hostname:port`."},{"param":"MAIL_COLLECTION","label":"Email documents collection","type":"STRING","description":"What is the path to the collection that contains the documents used to build and send the emails?","required":true,"default":"mail","validationRegex":"^[^/]+(/[^/]+/[^/]+)*$","validationErrorMessage":"Must be a valid Cloud Firestore collection"},{"param":"DEFAULT_FROM","label":"Default FROM address","type":"STRING","description":"The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).","required":true,"example":"foobar@example.com","validationRegex":"^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$|^.*<(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})>$","validationErrorMessage":"Must be a valid email address or valid name plus email address"},{"param":"DEFAULT_REPLY_TO","label":"Default REPLY-TO address","type":"STRING","description":"The email address to use as the reply-to address (if it's not specified in the added email document)."},{"param":"USERS_COLLECTION","label":"Users collection","type":"STRING","description":"A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection."},{"param":"TEMPLATES_COLLECTION","label":"Templates collection","type":"STRING","description":"A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document."}],"preinstallContent":"Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- You will be charged a small amount (typically around $0.01/month) for the Firebase resources required by this extension (even if it is not used).\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s free tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#expandable-24))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n","postinstallContent":"### See it in action\n\nYou can test out this extension right away!\n\n1.  Go to your [Cloud Firestore dashboard](https://console.firebase.google.com/project/${param:PROJECT_ID}/firestore/data) in the Firebase console.\n\n1.  If it doesn't already exist, create the collection you specified during installation: `${param:MAIL_COLLECTION}`.\n\n1.  Add a document with a `to` field and a `message` field with the following content:\n\n    ```js\n    to: ['someone@example.com'],\n    message: {\n      subject: 'Hello from Firebase!',\n      text: 'This is the plaintext section of the email body.',\n      html: 'This is the <code>HTML</code> section of the email body.',\n    }\n    ```\n\n1.  In a few seconds, you'll see a `delivery` field appear in the document. The field will update as the extension processes the email.\n\n**Note:** You can also use the [Firebase Admin SDK][admin_sdk] to add a document:\n\n```js\nadmin\n  .firestore()\n  .collection(\"${param:MAIL_COLLECTION}\")\n  .add({\n    to: \"someone@example.com\",\n    message: {\n      subject: \"Hello from Firebase!\",\n      text: \"This is the plaintext section of the email body.\",\n      html: \"This is the <code>HTML</code> section of the email body.\",\n    },\n  })\n  .then(() => console.log(\"Queued email for delivery!\"));\n```\n\n### Using this extension\n\nAfter its installation, this extension monitors all document writes to the `${param:MAIL_COLLECTION}` collection. Email is delivered based on the contents of the document's fields. The top-level fields specify the email's sender and recipients. The `message` field contains the details of the email to deliver, including the email body.\n\n#### Sender and recipient fields\n\nThe top-level fields of the document supply the email sender and recipient information. Available fields are:\n\n- **from:** The sender's email address. If not specified in the document, uses the configured \"Default FROM address\" parameter.\n- **replyTo:** The reply-to email address. If not specified in the document, uses the configured \"Default REPLY-TO address\" parameter.\n- **to:** A single recipient email address or an array containing multiple recipient email addresses.\n- **toUids:** An array containing the recipient UIDs.\n- **cc:** A single recipient email address or an array containing multiple recipient email addresses.\n- **ccUids:** An array containing the CC recipient UIDs.\n- **bcc:** A single recipient email address or an array containing multiple recipient email addresses.\n- **bccUids:** An array containing the BCC recipient UIDs.\n- **headers:** An object of additional header fields (for example, `{\"X-Custom-Header\": \"value\", \"X-Second-Custom-Header\": \"value\"}`).\n\n**NOTE:** The `toUids`, `ccUids`, and `bccUids` options deliver emails based on user UIDs keyed to email addresses within a Cloud Firestore document. To use these recipient options, you need to specify a Cloud Firestore collection for the extension's \"Users collection\" parameter. The extension can then read the `email` field for each UID specified in the `toUids`, `ccUids`, and/or `bccUids` fields.\n\n#### Message field\n\nThe `message` field of the document contains raw delivery information for the email. This field should generally only be populated by trusted code running in your own servers or Cloud Functions (refer to the \"Security rules and sending email\" section below).\n\nAvailable properties for the `message` field are:\n\n- **messageId:** A message ID header for the email, if any.\n- **subject:** The subject of the email.\n- **text:** The plaintext content of the email.\n- **html:** The HTML content of the email.\n- **amp:** The [AMP4EMAIL][amp4email] content of the email.\n- **attachments:** An array containing attachment(s); [Nodemailer options](https://nodemailer.com/message/attachments/) supported: utf-8 string, custom content type, URL, encoded string, data URI, and pregenerated MIME node (be aware that your email has no access to the cloud server's file system).\n\n#### Using templates\n\nIf you specified a \"Templates collection\" parameter during configuration of the extension, you can create and manage [Handlebars][handlebars] templates for your emails. Each document for a template should have a memorable ID that you use as the _template name_ in the document that's written to your `${param:MAIL_COLLECTION}` collection.\n\nThe template document can include any of the following fields:\n\n- **subject:** A template string for the subject of the email.\n- **text:** A template string for the plaintext content of the email.\n- **html:** A template string for the HTML content of the email.\n- **amp:** A template string for the [AMP4EMAIL][amp4email] content of the email.\n\nAn example template might have an ID of `following` and content like:\n\n```js\n{\n  subject: \"@{{username}} is now following you!\",\n  html: \"Just writing to let you know that <code>@{{username}}</code> ({{name}}) is now following you.\"\n}\n```\n\nTo deliver email using templates, when adding documents to your `${param:MAIL_COLLECTION}` collection, include a `template` field with `name` and `data` properties. For example, using our `following` template from above:\n\n```js\nadmin\n  .firestore()\n  .collection(\"${param:MAIL_COLLECTION}\")\n  .add({\n    toUids: [\"abc123\"],\n    template: {\n      name: \"following\",\n      data: {\n        username: \"ada\",\n        name: \"Ada Lovelace\",\n      },\n    },\n  });\n```\n\n#### Template Partials\n\nTemplates may be registered reusable [partials](https://handlebarsjs.com/guide/partials.html) by specifying `{partial: true}` in the document in the template collection. Each of the standard data fields (`subject`, `html`, `text`, and `amp`) will be defined as a partial used only in its own environment. For example, a partial called `footer` might have data like:\n\n```js\n{\n  partial: true,\n  html: \"<p>This mail was sent by ExampleApp, Inc. <a href='https://example.com/unsubscribe'>Unsubscribe</a></p>\",\n  text: \"This mail was sent by ExampleApp, Inc. Unsubscribe here: https://example.com/unsubscribe\"\n}\n```\n\nIn another template, the partial can be included by its name (document ID):\n\n```html\n<p>This is my main template content, but it will use a common footer.</p>\n\n{{> footer }}\n```\n\n#### Security rules and sending email\n\nThis extension can be used to trigger email delivery directly from client applications. However, you should carefully control client access to the `${param:MAIL_COLLECTION}` collection to avoid potential abuse (you don't want users able to send arbitrary emails from your company's address!).\n\nSecurity rules will vary from application to application, but you should always make sure that emails are sent only to intended recipients and free-form content is kept to a minimum. Templates can help here -- you can use security rules to verify that the data being populated to the template matches your expectations for what a user should be allowed to trigger.\n\n#### Email delivery processing\n\nWhen a document is added to the `${param:MAIL_COLLECTION}` collection, the extension picks it up for email delivery processing. The extension creates and updates a `delivery` field in the document as it processes the email. The `delivery` field can be populated with the following fields:\n\n- **state:** One of `PENDING`, `PROCESSING`, `SUCCESS`, or `ERROR`.\n- **startTime:** Timestamp when email processing began.\n- **endTime:** Timestamp when email processing completed (that is, ended in either a `SUCCESS` or `ERROR` state).\n- **error:** If there was an email delivery error, an error message will be populated here.\n- **attempts:** Number of delivery attempts for this email.\n- **leaseExpireTime:** In case of a hang or timeout, the time at which a `PROCESSING` state should be considered an error.\n- **info:** After successful email delivery (to at least one address), this field will be populated with the following fields:\n  - **messageId:** The message ID of the delivered email.\n  - **accepted:** Array of email addresses to which the email was successfully delivered.\n  - **rejected:** Array of email addresses to which the email could not be delivered.\n  - **pending:** Array of email addresses that were temporarily rejected by SMTP.\n  - **response:** The last response from the SMTP server.\n\nAn email will typically go from `PENDING` to `PROCESSING` to either `SUCCESS` or `ERROR`. Once in the `SUCCESS` or `ERROR` state, additional changes to the document will not trigger the extension to send another email. To resend an email with document updates, you can change the `state` to `PENDING` or `RETRY`.\n\n#### Manual retries\n\nThere are instances in which email delivery fails in a recoverable fashion or the document can be manually corrected for proper delivery with minor modifications. While retries are not automatic, you can manually change the `state` in the `delivery` field to `RETRY` so that the extension attempts email delivery again (and increments the number of `attempts`).\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n\n[mail_collection]: https://console.firebase.google.com/project/_/firestore/data~2F${param:MAIL_COLLECTION}\n[admin_sdk]: https://firebase.google.com/docs/admin/setup\n[amp4email]: https://amp.dev/documentation/guides-and-tutorials/learn/email-spec/amp-email-format/\n[handlebars]: https://handlebarsjs.com/\n","readmeContent":"# Trigger Email\n\n**Author**: Firebase (**[https://firebase.google.com](https://firebase.google.com)**)\n\n**Description**: Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.\n\n\n\n**Details**: Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- You will be charged a small amount (typically around $0.01/month) for the Firebase resources required by this extension (even if it is not used).\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s free tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#expandable-24))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n\n\n\n\n**Configuration Parameters:**\n\n* Cloud Functions location: Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).\n\n* SMTP connection URI: A URI representing an SMTP server that this extension can use to deliver email.\n\n* Email documents collection: What is the path to the collection that contains the documents used to build and send the emails?\n\n* Default FROM address: The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).\n\n* Default REPLY-TO address: The email address to use as the reply-to address (if it's not specified in the added email document).\n\n* Users collection: A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection.\n\n* Templates collection: A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document.\n\n\n\n**Cloud Functions:**\n\n* **processQueue:** Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.\n\n\n\n**Access Required**:\n\n\n\nThis extension will operate with the following project IAM roles:\n\n* datastore.user (Reason: Allows this extension to access Cloud Firestore to read and process added email documents.)\n","displayName":"Trigger Email","systemParams":[{"param":"firebaseextensions.v1beta.function/memory","label":"Function memory","type":"SELECT","description":"How much memory should be allocated to each function?","options":[{"value":"128","label":"128MB"},{"value":"256","label":"256MB"},{"value":"512","label":"512MB"},{"value":"1024","label":"1GB"},{"value":"2048","label":"2GB"},{"value":"4096","label":"4GB"},{"value":"8192","label":"8GB"}],"default":"256","advanced":true},{"param":"firebaseextensions.v1beta.function/timeoutSeconds","label":"Function timeout seconds","type":"STRING","description":"How long should functions run before timing out, in seconds (0-540)?","validationRegex":"^[1-9][0-9]{0,2}$","validationErrorMessage":"Function timeout should be an integer number of seconds, between 0 and 540","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnector","label":"VPC Connector","type":"STRING","description":"The VPC Network Connector that this cloud function can connect to. It can be either the fully-qualified URI, or the short name of the network connector resource. The format of this field is projects/*/locations/*/connectors/*.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/connectors/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnectorEgressSettings","label":"VPC Connector Egress settings","type":"SELECT","description":"Controls outgoing traffic when a VPC connector is configured","options":[{"value":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","label":"Unspecified"},{"value":"PRIVATE_RANGES_ONLY","label":"Private ranges only"},{"value":"ALL_TRAFFIC","label":"All traffic"}],"default":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","advanced":true},{"param":"firebaseextensions.v1beta.function/minInstances","label":"Minimum function instances","type":"STRING","description":"The minimum number of instances of each function to run at once (0-1000)","default":"0","validationRegex":"^[0-9]*$","validationErrorMessage":"Min instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/maxInstances","label":"Maximum function instances","type":"STRING","description":"The maximum number of instances of each function to run at once","default":"3000","validationRegex":"^[0-9]*$","validationErrorMessage":"Max instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/ingressSettings","label":"Function ingress settings","type":"SELECT","description":"Where should functions allow incoming traffic from?","options":[{"value":"ALLOW_ALL","label":"Allow all"},{"value":"ALLOW_INTERNAL_ONLY","label":"Allow internal only"},{"value":"ALLOW_INTERNAL_AND_GCLB","label":"Allow internal and GCLB"}],"advanced":true},{"param":"firebaseextensions.v1beta.function/labels","label":"Function labels","type":"STRING","description":"Do you wish to set any labels on this instance's Cloud Functions? If so, provide up to 55 labels in the format 'key1:value, key2:value'","validationRegex":"^([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63},\\s*)*([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63})$","advanced":true},{"param":"firebaseextensions.v1beta.function/kmsKeyName","label":"KMS key name","type":"STRING","description":"Do you want to use a Customer Managed Eencryption Key (CMEK) to encrypt this extension's functions? If you set this, you must also set a Docker repository encrypted by that key. See https://cloud.google.com/functions/docs/securing/cmek for more details.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/keyRings/([^/]+)/cryptoKeys/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/dockerRepository","label":"Docker repository","type":"STRING","description":"What Docker repository should be used to store function images? Default repository will be used if not set.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/repositories/([^/]+)$","advanced":true}]},"state":"PUBLISHED","hash":"60fc94c65d2ca318320b8c1576af984996aff69e63141d268fcd29f5d09f3644","createTime":"2021-01-14T17:46:17.045351Z","id":"0.1.7","releaseNotes":"fixed - Switch from `console.log` to `functions.logger.log` for cleaner log outputs.\n","listing":{"state":"APPROVED"},"metrics":{"activeInstallCount":"300"}},{"name":"publishers/firebase/extensions/firestore-send-email/versions/0.1.8","ref":"firebase/firestore-send-email@0.1.8","spec":{"specVersion":"v1beta","name":"firestore-send-email","version":"0.1.8","description":"Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.","roles":[{"role":"datastore.user","reason":"Allows this extension to access Cloud Firestore to read and process added email documents."}],"resources":[{"name":"processQueue","type":"firebaseextensions.v1beta.function","propertiesYaml":"eventTrigger:\n  eventType: providers/cloud.firestore/eventTypes/document.write\n  resource: projects/${param:PROJECT_ID}/databases/(default)/documents/${param:MAIL_COLLECTION}/{id}\nlocation: ${param:LOCATION}\nruntime: nodejs10\n","description":"Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.","deletionPolicy":"DELETE"}],"billingRequired":true,"author":{"authorName":"Firebase","url":"https://firebase.google.com"},"contributors":[{"authorName":"Michael Bleigh","url":"https://github.com/mbleigh"},{"authorName":"Invertase","email":"oss@invertase.io","url":"https://github.com/invertase"}],"license":"Apache-2.0","releaseNotesUrl":"https://github.com/firebase/extensions/blob/master/firestore-send-email/CHANGELOG.md","sourceUrl":"https://github.com/firebase/extensions/tree/master/firestore-send-email","params":[{"param":"LOCATION","label":"Cloud Functions location","type":"SELECT","description":"Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).","required":true,"options":[{"value":"us-central1","label":"Iowa (us-central1)"},{"value":"us-east1","label":"South Carolina (us-east1)"},{"value":"us-east4","label":"Northern Virginia (us-east4)"},{"value":"us-west2","label":"Los Angeles (us-west2)"},{"value":"us-west3","label":"Salt Lake City (us-west3)"},{"value":"us-west4","label":"Las Vegas (us-west4)"},{"value":"europe-west1","label":"Belgium (europe-west1)"},{"value":"europe-west2","label":"London (europe-west2)"},{"value":"europe-west3","label":"Frankfurt (europe-west3)"},{"value":"europe-west6","label":"Zurich (europe-west6)"},{"value":"asia-east2","label":"Hong Kong (asia-east2)"},{"value":"asia-northeast1","label":"Tokyo (asia-northeast1)"},{"value":"asia-northeast2","label":"Osaka (asia-northeast2)"},{"value":"asia-northeast3","label":"Seoul (asia-northeast3)"},{"value":"asia-south1","label":"Mumbai (asia-south1)"},{"value":"asia-southeast2","label":"Jakarta (asia-southeast2)"},{"value":"northamerica-northeast1","label":"Montreal (northamerica-northeast1)"},{"value":"southamerica-east1","label":"Sao Paulo (southamerica-east1)"},{"value":"australia-southeast1","label":"Sydney (australia-southeast1)"}],"default":"us-central1","immutable":true},{"param":"SMTP_CONNECTION_URI","label":"SMTP connection URI","type":"STRING","description":"A URI representing an SMTP server this extension can use to deliver email. Note that port 25 is blocked by Google Cloud Platform, so we recommend using port 587 for SMTP connections. If you're using the SMTPS protocol, we recommend using port 465.","required":true,"example":"smtps://username:password@smtp.hostname.com:465","validationRegex":"^smtps?://[^:]+:[^:]+@.*$","validationErrorMessage":"Invalid SMTP connection URI. Must be in the form `smtp(s)://username:password@hostname:port`."},{"param":"MAIL_COLLECTION","label":"Email documents collection","type":"STRING","description":"What is the path to the collection that contains the documents used to build and send the emails?","required":true,"default":"mail","validationRegex":"^[^/]+(/[^/]+/[^/]+)*$","validationErrorMessage":"Must be a valid Cloud Firestore collection"},{"param":"DEFAULT_FROM","label":"Default FROM address","type":"STRING","description":"The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).","required":true,"example":"foobar@example.com","validationRegex":"^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$|^.*<(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})>$","validationErrorMessage":"Must be a valid email address or valid name plus email address"},{"param":"DEFAULT_REPLY_TO","label":"Default REPLY-TO address","type":"STRING","description":"The email address to use as the reply-to address (if it's not specified in the added email document)."},{"param":"USERS_COLLECTION","label":"Users collection","type":"STRING","description":"A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection."},{"param":"TEMPLATES_COLLECTION","label":"Templates collection","type":"STRING","description":"A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document."}],"preinstallContent":"Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- You will be charged a small amount (typically around $0.01/month) for the Firebase resources required by this extension (even if it is not used).\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s free tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#expandable-24))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n","postinstallContent":"### See it in action\n\nYou can test out this extension right away!\n\n1.  Go to your [Cloud Firestore dashboard](https://console.firebase.google.com/project/${param:PROJECT_ID}/firestore/data) in the Firebase console.\n\n1.  If it doesn't already exist, create the collection you specified during installation: `${param:MAIL_COLLECTION}`.\n\n1.  Add a document with a `to` field and a `message` field with the following content:\n\n    ```js\n    to: ['someone@example.com'],\n    message: {\n      subject: 'Hello from Firebase!',\n      text: 'This is the plaintext section of the email body.',\n      html: 'This is the <code>HTML</code> section of the email body.',\n    }\n    ```\n\n1.  In a few seconds, you'll see a `delivery` field appear in the document. The field will update as the extension processes the email.\n\n**Note:** You can also use the [Firebase Admin SDK][admin_sdk] to add a document:\n\n```js\nadmin\n  .firestore()\n  .collection(\"${param:MAIL_COLLECTION}\")\n  .add({\n    to: \"someone@example.com\",\n    message: {\n      subject: \"Hello from Firebase!\",\n      text: \"This is the plaintext section of the email body.\",\n      html: \"This is the <code>HTML</code> section of the email body.\",\n    },\n  })\n  .then(() => console.log(\"Queued email for delivery!\"));\n```\n\n### Using this extension\n\nAfter its installation, this extension monitors all document writes to the `${param:MAIL_COLLECTION}` collection. Email is delivered based on the contents of the document's fields. The top-level fields specify the email's sender and recipients. The `message` field contains the details of the email to deliver, including the email body.\n\n#### Sender and recipient fields\n\nThe top-level fields of the document supply the email sender and recipient information. Available fields are:\n\n- **from:** The sender's email address. If not specified in the document, uses the configured \"Default FROM address\" parameter.\n- **replyTo:** The reply-to email address. If not specified in the document, uses the configured \"Default REPLY-TO address\" parameter.\n- **to:** A single recipient email address or an array containing multiple recipient email addresses.\n- **toUids:** An array containing the recipient UIDs.\n- **cc:** A single recipient email address or an array containing multiple recipient email addresses.\n- **ccUids:** An array containing the CC recipient UIDs.\n- **bcc:** A single recipient email address or an array containing multiple recipient email addresses.\n- **bccUids:** An array containing the BCC recipient UIDs.\n- **headers:** An object of additional header fields (for example, `{\"X-Custom-Header\": \"value\", \"X-Second-Custom-Header\": \"value\"}`).\n\n**NOTE:** The `toUids`, `ccUids`, and `bccUids` options deliver emails based on user UIDs keyed to email addresses within a Cloud Firestore document. To use these recipient options, you need to specify a Cloud Firestore collection for the extension's \"Users collection\" parameter. The extension can then read the `email` field for each UID specified in the `toUids`, `ccUids`, and/or `bccUids` fields.\n\n#### Message field\n\nThe `message` field of the document contains raw delivery information for the email. This field should generally only be populated by trusted code running in your own servers or Cloud Functions (refer to the \"Security rules and sending email\" section below).\n\nAvailable properties for the `message` field are:\n\n- **messageId:** A message ID header for the email, if any.\n- **subject:** The subject of the email.\n- **text:** The plaintext content of the email.\n- **html:** The HTML content of the email.\n- **amp:** The [AMP4EMAIL][amp4email] content of the email.\n- **attachments:** An array containing attachment(s); [Nodemailer options](https://nodemailer.com/message/attachments/) supported: utf-8 string, custom content type, URL, encoded string, data URI, and pregenerated MIME node (be aware that your email has no access to the cloud server's file system).\n\n#### Using templates\n\nIf you specified a \"Templates collection\" parameter during configuration of the extension, you can create and manage [Handlebars][handlebars] templates for your emails. Each document for a template should have a memorable ID that you use as the _template name_ in the document that's written to your `${param:MAIL_COLLECTION}` collection.\n\nThe template document can include any of the following fields:\n\n- **subject:** A template string for the subject of the email.\n- **text:** A template string for the plaintext content of the email.\n- **html:** A template string for the HTML content of the email.\n- **amp:** A template string for the [AMP4EMAIL][amp4email] content of the email.\n\nAn example template might have an ID of `following` and content like:\n\n```js\n{\n  subject: \"@{{username}} is now following you!\",\n  html: \"Just writing to let you know that <code>@{{username}}</code> ({{name}}) is now following you.\"\n}\n```\n\nTo deliver email using templates, when adding documents to your `${param:MAIL_COLLECTION}` collection, include a `template` field with `name` and `data` properties. For example, using our `following` template from above:\n\n```js\nadmin\n  .firestore()\n  .collection(\"${param:MAIL_COLLECTION}\")\n  .add({\n    toUids: [\"abc123\"],\n    template: {\n      name: \"following\",\n      data: {\n        username: \"ada\",\n        name: \"Ada Lovelace\",\n      },\n    },\n  });\n```\n\n#### Template Partials\n\nTemplates may be registered reusable [partials](https://handlebarsjs.com/guide/partials.html) by specifying `{partial: true}` in the document in the template collection. Each of the standard data fields (`subject`, `html`, `text`, and `amp`) will be defined as a partial used only in its own environment. For example, a partial called `footer` might have data like:\n\n```js\n{\n  partial: true,\n  html: \"<p>This mail was sent by ExampleApp, Inc. <a href='https://example.com/unsubscribe'>Unsubscribe</a></p>\",\n  text: \"This mail was sent by ExampleApp, Inc. Unsubscribe here: https://example.com/unsubscribe\"\n}\n```\n\nIn another template, the partial can be included by its name (document ID):\n\n```html\n<p>This is my main template content, but it will use a common footer.</p>\n\n{{> footer }}\n```\n\n#### Security rules and sending email\n\nThis extension can be used to trigger email delivery directly from client applications. However, you should carefully control client access to the `${param:MAIL_COLLECTION}` collection to avoid potential abuse (you don't want users able to send arbitrary emails from your company's address!).\n\nSecurity rules will vary from application to application, but you should always make sure that emails are sent only to intended recipients and free-form content is kept to a minimum. Templates can help here -- you can use security rules to verify that the data being populated to the template matches your expectations for what a user should be allowed to trigger.\n\n#### Email delivery processing\n\nWhen a document is added to the `${param:MAIL_COLLECTION}` collection, the extension picks it up for email delivery processing. The extension creates and updates a `delivery` field in the document as it processes the email. The `delivery` field can be populated with the following fields:\n\n- **state:** One of `PENDING`, `PROCESSING`, `SUCCESS`, or `ERROR`.\n- **startTime:** Timestamp when email processing began.\n- **endTime:** Timestamp when email processing completed (that is, ended in either a `SUCCESS` or `ERROR` state).\n- **error:** If there was an email delivery error, an error message will be populated here.\n- **attempts:** Number of delivery attempts for this email.\n- **leaseExpireTime:** In case of a hang or timeout, the time at which a `PROCESSING` state should be considered an error.\n- **info:** After successful email delivery (to at least one address), this field will be populated with the following fields:\n  - **messageId:** The message ID of the delivered email.\n  - **accepted:** Array of email addresses to which the email was successfully delivered.\n  - **rejected:** Array of email addresses to which the email could not be delivered.\n  - **pending:** Array of email addresses that were temporarily rejected by SMTP.\n  - **response:** The last response from the SMTP server.\n\nAn email will typically go from `PENDING` to `PROCESSING` to either `SUCCESS` or `ERROR`. Once in the `SUCCESS` or `ERROR` state, additional changes to the document will not trigger the extension to send another email. To resend an email with document updates, you can change the `state` to `PENDING` or `RETRY`.\n\n#### Manual retries\n\nThere are instances in which email delivery fails in a recoverable fashion or the document can be manually corrected for proper delivery with minor modifications. While retries are not automatic, you can manually change the `state` in the `delivery` field to `RETRY` so that the extension attempts email delivery again (and increments the number of `attempts`).\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n\n[mail_collection]: https://console.firebase.google.com/project/_/firestore/data~2F${param:MAIL_COLLECTION}\n[admin_sdk]: https://firebase.google.com/docs/admin/setup\n[amp4email]: https://amp.dev/documentation/guides-and-tutorials/learn/email-spec/amp-email-format/\n[handlebars]: https://handlebarsjs.com/\n","readmeContent":"# Trigger Email\n\n**Author**: Firebase (**[https://firebase.google.com](https://firebase.google.com)**)\n\n**Description**: Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.\n\n\n\n**Details**: Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- You will be charged a small amount (typically around $0.01/month) for the Firebase resources required by this extension (even if it is not used).\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s free tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#expandable-24))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n\n\n\n\n**Configuration Parameters:**\n\n* Cloud Functions location: Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).\n\n* SMTP connection URI: A URI representing an SMTP server this extension can use to deliver email. Note that port 25 is blocked by Google Cloud Platform, so we recommend using port 587 for SMTP connections. If you're using the SMTPS protocol, we recommend using port 465.\n\n* Email documents collection: What is the path to the collection that contains the documents used to build and send the emails?\n\n* Default FROM address: The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).\n\n* Default REPLY-TO address: The email address to use as the reply-to address (if it's not specified in the added email document).\n\n* Users collection: A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection.\n\n* Templates collection: A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document.\n\n\n\n**Cloud Functions:**\n\n* **processQueue:** Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.\n\n\n\n**Access Required**:\n\n\n\nThis extension will operate with the following project IAM roles:\n\n* datastore.user (Reason: Allows this extension to access Cloud Firestore to read and process added email documents.)\n","displayName":"Trigger Email","systemParams":[{"param":"firebaseextensions.v1beta.function/memory","label":"Function memory","type":"SELECT","description":"How much memory should be allocated to each function?","options":[{"value":"128","label":"128MB"},{"value":"256","label":"256MB"},{"value":"512","label":"512MB"},{"value":"1024","label":"1GB"},{"value":"2048","label":"2GB"},{"value":"4096","label":"4GB"},{"value":"8192","label":"8GB"}],"default":"256","advanced":true},{"param":"firebaseextensions.v1beta.function/timeoutSeconds","label":"Function timeout seconds","type":"STRING","description":"How long should functions run before timing out, in seconds (0-540)?","validationRegex":"^[1-9][0-9]{0,2}$","validationErrorMessage":"Function timeout should be an integer number of seconds, between 0 and 540","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnector","label":"VPC Connector","type":"STRING","description":"The VPC Network Connector that this cloud function can connect to. It can be either the fully-qualified URI, or the short name of the network connector resource. The format of this field is projects/*/locations/*/connectors/*.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/connectors/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnectorEgressSettings","label":"VPC Connector Egress settings","type":"SELECT","description":"Controls outgoing traffic when a VPC connector is configured","options":[{"value":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","label":"Unspecified"},{"value":"PRIVATE_RANGES_ONLY","label":"Private ranges only"},{"value":"ALL_TRAFFIC","label":"All traffic"}],"default":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","advanced":true},{"param":"firebaseextensions.v1beta.function/minInstances","label":"Minimum function instances","type":"STRING","description":"The minimum number of instances of each function to run at once (0-1000)","default":"0","validationRegex":"^[0-9]*$","validationErrorMessage":"Min instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/maxInstances","label":"Maximum function instances","type":"STRING","description":"The maximum number of instances of each function to run at once","default":"3000","validationRegex":"^[0-9]*$","validationErrorMessage":"Max instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/ingressSettings","label":"Function ingress settings","type":"SELECT","description":"Where should functions allow incoming traffic from?","options":[{"value":"ALLOW_ALL","label":"Allow all"},{"value":"ALLOW_INTERNAL_ONLY","label":"Allow internal only"},{"value":"ALLOW_INTERNAL_AND_GCLB","label":"Allow internal and GCLB"}],"advanced":true},{"param":"firebaseextensions.v1beta.function/labels","label":"Function labels","type":"STRING","description":"Do you wish to set any labels on this instance's Cloud Functions? If so, provide up to 55 labels in the format 'key1:value, key2:value'","validationRegex":"^([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63},\\s*)*([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63})$","advanced":true},{"param":"firebaseextensions.v1beta.function/kmsKeyName","label":"KMS key name","type":"STRING","description":"Do you want to use a Customer Managed Eencryption Key (CMEK) to encrypt this extension's functions? If you set this, you must also set a Docker repository encrypted by that key. See https://cloud.google.com/functions/docs/securing/cmek for more details.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/keyRings/([^/]+)/cryptoKeys/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/dockerRepository","label":"Docker repository","type":"STRING","description":"What Docker repository should be used to store function images? Default repository will be used if not set.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/repositories/([^/]+)$","advanced":true}]},"state":"PUBLISHED","hash":"a0ea559be5c4a8c056865981985b643ec3e0f836850e25d06c9db235ecab7d8d","createTime":"2021-02-11T23:35:52.190066Z","id":"0.1.8","releaseNotes":"docs - updated \"SMTP connection URI\" parameter description to clarify which ports are recommended for SMTP connections (#582)\n","listing":{"state":"APPROVED"},"metrics":{"activeInstallCount":"200"}},{"name":"publishers/firebase/extensions/firestore-send-email/versions/0.1.9","ref":"firebase/firestore-send-email@0.1.9","spec":{"specVersion":"v1beta","name":"firestore-send-email","version":"0.1.9","description":"Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.","roles":[{"role":"datastore.user","reason":"Allows this extension to access Cloud Firestore to read and process added email documents."}],"resources":[{"name":"processQueue","type":"firebaseextensions.v1beta.function","propertiesYaml":"eventTrigger:\n  eventType: providers/cloud.firestore/eventTypes/document.write\n  resource: projects/${param:PROJECT_ID}/databases/(default)/documents/${param:MAIL_COLLECTION}/{id}\nlocation: ${param:LOCATION}\nruntime: nodejs10\n","description":"Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.","deletionPolicy":"DELETE"}],"billingRequired":true,"author":{"authorName":"Firebase","url":"https://firebase.google.com"},"contributors":[{"authorName":"Michael Bleigh","url":"https://github.com/mbleigh"},{"authorName":"Invertase","email":"oss@invertase.io","url":"https://github.com/invertase"}],"license":"Apache-2.0","releaseNotesUrl":"https://github.com/firebase/extensions/blob/master/firestore-send-email/CHANGELOG.md","sourceUrl":"https://github.com/firebase/extensions/tree/master/firestore-send-email","params":[{"param":"LOCATION","label":"Cloud Functions location","type":"SELECT","description":"Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).","required":true,"options":[{"value":"us-central1","label":"Iowa (us-central1)"},{"value":"us-east1","label":"South Carolina (us-east1)"},{"value":"us-east4","label":"Northern Virginia (us-east4)"},{"value":"us-west2","label":"Los Angeles (us-west2)"},{"value":"us-west3","label":"Salt Lake City (us-west3)"},{"value":"us-west4","label":"Las Vegas (us-west4)"},{"value":"europe-west1","label":"Belgium (europe-west1)"},{"value":"europe-west2","label":"London (europe-west2)"},{"value":"europe-west3","label":"Frankfurt (europe-west3)"},{"value":"europe-west6","label":"Zurich (europe-west6)"},{"value":"asia-east2","label":"Hong Kong (asia-east2)"},{"value":"asia-northeast1","label":"Tokyo (asia-northeast1)"},{"value":"asia-northeast2","label":"Osaka (asia-northeast2)"},{"value":"asia-northeast3","label":"Seoul (asia-northeast3)"},{"value":"asia-south1","label":"Mumbai (asia-south1)"},{"value":"asia-southeast2","label":"Jakarta (asia-southeast2)"},{"value":"northamerica-northeast1","label":"Montreal (northamerica-northeast1)"},{"value":"southamerica-east1","label":"Sao Paulo (southamerica-east1)"},{"value":"australia-southeast1","label":"Sydney (australia-southeast1)"}],"default":"us-central1","immutable":true},{"param":"SMTP_CONNECTION_URI","label":"SMTP connection URI","type":"STRING","description":"A URI representing an SMTP server this extension can use to deliver email. Note that port 25 is blocked by Google Cloud Platform, so we recommend using port 587 for SMTP connections. If you're using the SMTPS protocol, we recommend using port 465.","required":true,"example":"smtps://username:password@smtp.hostname.com:465","validationRegex":"^smtps?://[^:]+:[^:]+@.*$","validationErrorMessage":"Invalid SMTP connection URI. Must be in the form `smtp(s)://username:password@hostname:port`."},{"param":"MAIL_COLLECTION","label":"Email documents collection","type":"STRING","description":"What is the path to the collection that contains the documents used to build and send the emails?","required":true,"default":"mail","validationRegex":"^[^/]+(/[^/]+/[^/]+)*$","validationErrorMessage":"Must be a valid Cloud Firestore collection"},{"param":"DEFAULT_FROM","label":"Default FROM address","type":"STRING","description":"The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).","required":true,"example":"foobar@example.com","validationRegex":"^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$|^.*<(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})>$","validationErrorMessage":"Must be a valid email address or valid name plus email address"},{"param":"DEFAULT_REPLY_TO","label":"Default REPLY-TO address","type":"STRING","description":"The email address to use as the reply-to address (if it's not specified in the added email document)."},{"param":"USERS_COLLECTION","label":"Users collection","type":"STRING","description":"A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection."},{"param":"TEMPLATES_COLLECTION","label":"Templates collection","type":"STRING","description":"A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document."}],"preinstallContent":"Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- You will be charged a small amount (typically around $0.01/month) for the Firebase resources required by this extension (even if it is not used).\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s free tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#expandable-24))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n","postinstallContent":"### See it in action\n\nYou can test out this extension right away!\n\n1.  Go to your [Cloud Firestore dashboard](https://console.firebase.google.com/project/${param:PROJECT_ID}/firestore/data) in the Firebase console.\n\n1.  If it doesn't already exist, create the collection you specified during installation: `${param:MAIL_COLLECTION}`.\n\n1.  Add a document with a `to` field and a `message` field with the following content:\n\n    ```js\n    to: ['someone@example.com'],\n    message: {\n      subject: 'Hello from Firebase!',\n      text: 'This is the plaintext section of the email body.',\n      html: 'This is the <code>HTML</code> section of the email body.',\n    }\n    ```\n\n1.  In a few seconds, you'll see a `delivery` field appear in the document. The field will update as the extension processes the email.\n\n**Note:** You can also use the [Firebase Admin SDK][admin_sdk] to add a document:\n\n```js\nadmin\n  .firestore()\n  .collection(\"${param:MAIL_COLLECTION}\")\n  .add({\n    to: \"someone@example.com\",\n    message: {\n      subject: \"Hello from Firebase!\",\n      text: \"This is the plaintext section of the email body.\",\n      html: \"This is the <code>HTML</code> section of the email body.\",\n    },\n  })\n  .then(() => console.log(\"Queued email for delivery!\"));\n```\n\n### Using this extension\n\nAfter its installation, this extension monitors all document writes to the `${param:MAIL_COLLECTION}` collection. Email is delivered based on the contents of the document's fields. The top-level fields specify the email's sender and recipients. The `message` field contains the details of the email to deliver, including the email body.\n\n#### Sender and recipient fields\n\nThe top-level fields of the document supply the email sender and recipient information. Available fields are:\n\n- **from:** The sender's email address. If not specified in the document, uses the configured \"Default FROM address\" parameter.\n- **replyTo:** The reply-to email address. If not specified in the document, uses the configured \"Default REPLY-TO address\" parameter.\n- **to:** A single recipient email address or an array containing multiple recipient email addresses.\n- **toUids:** An array containing the recipient UIDs.\n- **cc:** A single recipient email address or an array containing multiple recipient email addresses.\n- **ccUids:** An array containing the CC recipient UIDs.\n- **bcc:** A single recipient email address or an array containing multiple recipient email addresses.\n- **bccUids:** An array containing the BCC recipient UIDs.\n- **headers:** An object of additional header fields (for example, `{\"X-Custom-Header\": \"value\", \"X-Second-Custom-Header\": \"value\"}`).\n\n**NOTE:** The `toUids`, `ccUids`, and `bccUids` options deliver emails based on user UIDs keyed to email addresses within a Cloud Firestore document. To use these recipient options, you need to specify a Cloud Firestore collection for the extension's \"Users collection\" parameter. The extension can then read the `email` field for each UID specified in the `toUids`, `ccUids`, and/or `bccUids` fields.\n\n#### Message field\n\nThe `message` field of the document contains raw delivery information for the email. This field should generally only be populated by trusted code running in your own servers or Cloud Functions (refer to the \"Security rules and sending email\" section below).\n\nAvailable properties for the `message` field are:\n\n- **messageId:** A message ID header for the email, if any.\n- **subject:** The subject of the email.\n- **text:** The plaintext content of the email.\n- **html:** The HTML content of the email.\n- **amp:** The [AMP4EMAIL][amp4email] content of the email.\n- **attachments:** An array containing attachment(s); [Nodemailer options](https://nodemailer.com/message/attachments/) supported: utf-8 string, custom content type, URL, encoded string, data URI, and pregenerated MIME node (be aware that your email has no access to the cloud server's file system).\n\n#### Using templates\n\nIf you specified a \"Templates collection\" parameter during configuration of the extension, you can create and manage [Handlebars][handlebars] templates for your emails. Each document for a template should have a memorable ID that you use as the _template name_ in the document that's written to your `${param:MAIL_COLLECTION}` collection.\n\nThe template document can include any of the following fields:\n\n- **subject:** A template string for the subject of the email.\n- **text:** A template string for the plaintext content of the email.\n- **html:** A template string for the HTML content of the email.\n- **amp:** A template string for the [AMP4EMAIL][amp4email] content of the email.\n- **attachments:** An array of attachments with template strings as values; [Nodemailer options](https://nodemailer.com/message/attachments/) supported: utf-8 string, custom content type, URL, encoded string, data URI, and pre-generated MIME node (be aware that your email has no access to the cloud server's file system).\n\nAn example template might have an ID of `following` and content like:\n\n```js\n{\n  subject: \"@{{username}} is now following you!\",\n  html: \"Just writing to let you know that <code>@{{username}}</code> ({{name}}) is now following you.\",\n  attachments: [\n    {\n     filename: \"{{username}}.jpg\",\n     path: \"{{imagePath}}\" \n    }\n  ]\n}\n```\n\nTo deliver email using templates, when adding documents to your `${param:MAIL_COLLECTION}` collection, include a `template` field with `name` and `data` properties. For example, using our `following` template from above:\n\n```js\nadmin\n  .firestore()\n  .collection(\"${param:MAIL_COLLECTION}\")\n  .add({\n    toUids: [\"abc123\"],\n    template: {\n      name: \"following\",\n      data: {\n        username: \"ada\",\n        name: \"Ada Lovelace\",\n        imagePath: \"https://path-to-file/image-name.jpg\"\n      },\n    },\n  });\n```\n\n#### Template Partials\n\nTemplates may be registered reusable [partials](https://handlebarsjs.com/guide/partials.html) by specifying `{partial: true}` in the document in the template collection. Each of the standard data fields (`subject`, `html`, `text`, and `amp`) will be defined as a partial used only in its own environment. For example, a partial called `footer` might have data like:\n\n```js\n{\n  partial: true,\n  html: \"<p>This mail was sent by ExampleApp, Inc. <a href='https://example.com/unsubscribe'>Unsubscribe</a></p>\",\n  text: \"This mail was sent by ExampleApp, Inc. Unsubscribe here: https://example.com/unsubscribe\"\n}\n```\n\nIn another template, the partial can be included by its name (document ID):\n\n```html\n<p>This is my main template content, but it will use a common footer.</p>\n\n{{> footer }}\n```\n\n#### Security rules and sending email\n\nThis extension can be used to trigger email delivery directly from client applications. However, you should carefully control client access to the `${param:MAIL_COLLECTION}` collection to avoid potential abuse (you don't want users able to send arbitrary emails from your company's address!).\n\nSecurity rules will vary from application to application, but you should always make sure that emails are sent only to intended recipients and free-form content is kept to a minimum. Templates can help here -- you can use security rules to verify that the data being populated to the template matches your expectations for what a user should be allowed to trigger.\n\n#### Email delivery processing\n\nWhen a document is added to the `${param:MAIL_COLLECTION}` collection, the extension picks it up for email delivery processing. The extension creates and updates a `delivery` field in the document as it processes the email. The `delivery` field can be populated with the following fields:\n\n- **state:** One of `PENDING`, `PROCESSING`, `SUCCESS`, or `ERROR`.\n- **startTime:** Timestamp when email processing began.\n- **endTime:** Timestamp when email processing completed (that is, ended in either a `SUCCESS` or `ERROR` state).\n- **error:** If there was an email delivery error, an error message will be populated here.\n- **attempts:** Number of delivery attempts for this email.\n- **leaseExpireTime:** In case of a hang or timeout, the time at which a `PROCESSING` state should be considered an error.\n- **info:** After successful email delivery (to at least one address), this field will be populated with the following fields:\n  - **messageId:** The message ID of the delivered email.\n  - **accepted:** Array of email addresses to which the email was successfully delivered.\n  - **rejected:** Array of email addresses to which the email could not be delivered.\n  - **pending:** Array of email addresses that were temporarily rejected by SMTP.\n  - **response:** The last response from the SMTP server.\n\nAn email will typically go from `PENDING` to `PROCESSING` to either `SUCCESS` or `ERROR`. Once in the `SUCCESS` or `ERROR` state, additional changes to the document will not trigger the extension to send another email. To resend an email with document updates, you can change the `state` to `PENDING` or `RETRY`.\n\n#### Manual retries\n\nThere are instances in which email delivery fails in a recoverable fashion or the document can be manually corrected for proper delivery with minor modifications. While retries are not automatic, you can manually change the `state` in the `delivery` field to `RETRY` so that the extension attempts email delivery again (and increments the number of `attempts`).\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n\n[mail_collection]: https://console.firebase.google.com/project/_/firestore/data~2F${param:MAIL_COLLECTION}\n[admin_sdk]: https://firebase.google.com/docs/admin/setup\n[amp4email]: https://amp.dev/documentation/guides-and-tutorials/learn/email-spec/amp-email-format/\n[handlebars]: https://handlebarsjs.com/\n","readmeContent":"# Trigger Email\n\n**Author**: Firebase (**[https://firebase.google.com](https://firebase.google.com)**)\n\n**Description**: Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.\n\n\n\n**Details**: Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- You will be charged a small amount (typically around $0.01/month) for the Firebase resources required by this extension (even if it is not used).\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s free tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#expandable-24))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n\n\n\n\n**Configuration Parameters:**\n\n* Cloud Functions location: Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).\n\n* SMTP connection URI: A URI representing an SMTP server this extension can use to deliver email. Note that port 25 is blocked by Google Cloud Platform, so we recommend using port 587 for SMTP connections. If you're using the SMTPS protocol, we recommend using port 465.\n\n* Email documents collection: What is the path to the collection that contains the documents used to build and send the emails?\n\n* Default FROM address: The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).\n\n* Default REPLY-TO address: The email address to use as the reply-to address (if it's not specified in the added email document).\n\n* Users collection: A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection.\n\n* Templates collection: A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document.\n\n\n\n**Cloud Functions:**\n\n* **processQueue:** Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.\n\n\n\n**Access Required**:\n\n\n\nThis extension will operate with the following project IAM roles:\n\n* datastore.user (Reason: Allows this extension to access Cloud Firestore to read and process added email documents.)\n","displayName":"Trigger Email","systemParams":[{"param":"firebaseextensions.v1beta.function/memory","label":"Function memory","type":"SELECT","description":"How much memory should be allocated to each function?","options":[{"value":"128","label":"128MB"},{"value":"256","label":"256MB"},{"value":"512","label":"512MB"},{"value":"1024","label":"1GB"},{"value":"2048","label":"2GB"},{"value":"4096","label":"4GB"},{"value":"8192","label":"8GB"}],"default":"256","advanced":true},{"param":"firebaseextensions.v1beta.function/timeoutSeconds","label":"Function timeout seconds","type":"STRING","description":"How long should functions run before timing out, in seconds (0-540)?","validationRegex":"^[1-9][0-9]{0,2}$","validationErrorMessage":"Function timeout should be an integer number of seconds, between 0 and 540","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnector","label":"VPC Connector","type":"STRING","description":"The VPC Network Connector that this cloud function can connect to. It can be either the fully-qualified URI, or the short name of the network connector resource. The format of this field is projects/*/locations/*/connectors/*.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/connectors/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnectorEgressSettings","label":"VPC Connector Egress settings","type":"SELECT","description":"Controls outgoing traffic when a VPC connector is configured","options":[{"value":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","label":"Unspecified"},{"value":"PRIVATE_RANGES_ONLY","label":"Private ranges only"},{"value":"ALL_TRAFFIC","label":"All traffic"}],"default":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","advanced":true},{"param":"firebaseextensions.v1beta.function/minInstances","label":"Minimum function instances","type":"STRING","description":"The minimum number of instances of each function to run at once (0-1000)","default":"0","validationRegex":"^[0-9]*$","validationErrorMessage":"Min instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/maxInstances","label":"Maximum function instances","type":"STRING","description":"The maximum number of instances of each function to run at once","default":"3000","validationRegex":"^[0-9]*$","validationErrorMessage":"Max instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/ingressSettings","label":"Function ingress settings","type":"SELECT","description":"Where should functions allow incoming traffic from?","options":[{"value":"ALLOW_ALL","label":"Allow all"},{"value":"ALLOW_INTERNAL_ONLY","label":"Allow internal only"},{"value":"ALLOW_INTERNAL_AND_GCLB","label":"Allow internal and GCLB"}],"advanced":true},{"param":"firebaseextensions.v1beta.function/labels","label":"Function labels","type":"STRING","description":"Do you wish to set any labels on this instance's Cloud Functions? If so, provide up to 55 labels in the format 'key1:value, key2:value'","validationRegex":"^([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63},\\s*)*([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63})$","advanced":true},{"param":"firebaseextensions.v1beta.function/kmsKeyName","label":"KMS key name","type":"STRING","description":"Do you want to use a Customer Managed Eencryption Key (CMEK) to encrypt this extension's functions? If you set this, you must also set a Docker repository encrypted by that key. See https://cloud.google.com/functions/docs/securing/cmek for more details.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/keyRings/([^/]+)/cryptoKeys/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/dockerRepository","label":"Docker repository","type":"STRING","description":"What Docker repository should be used to store function images? Default repository will be used if not set.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/repositories/([^/]+)$","advanced":true}]},"state":"PUBLISHED","hash":"5087460006e7892c7fd353382e05fce7eb4f6b2ca7e1063fb1132990e770dc05","createTime":"2021-03-04T17:50:06.051323Z","id":"0.1.9","releaseNotes":"feature - Allow attachments within template records to be interpolated with data values passed into a new record in the mail collection. (#519)\n","listing":{"state":"APPROVED"},"metrics":{"activeInstallCount":"1300"}}]}
[debug] [2023-08-17T12:57:58.094Z] >>> [apiv2][query] GET https://firebaseextensions.googleapis.com/v1beta/publishers/firebase/extensions/firestore-send-email/versions/0.1.22 [none]
[debug] [2023-08-17T12:57:58.521Z] <<< [apiv2][status] GET https://firebaseextensions.googleapis.com/v1beta/publishers/firebase/extensions/firestore-send-email/versions/0.1.22 200
[debug] [2023-08-17T12:57:58.521Z] <<< [apiv2][body] GET https://firebaseextensions.googleapis.com/v1beta/publishers/firebase/extensions/firestore-send-email/versions/0.1.22 {"name":"publishers/firebase/extensions/firestore-send-email/versions/0.1.22","ref":"firebase/firestore-send-email@0.1.22","spec":{"specVersion":"v1beta","name":"firestore-send-email","version":"0.1.22","description":"Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.","roles":[{"role":"datastore.user","reason":"Allows this extension to access Cloud Firestore to read and process added email documents."}],"resources":[{"name":"processQueue","type":"firebaseextensions.v1beta.function","propertiesYaml":"eventTrigger:\n  eventType: providers/cloud.firestore/eventTypes/document.write\n  resource: projects/${param:PROJECT_ID}/databases/(default)/documents/${param:MAIL_COLLECTION}/{id}\nlocation: ${param:LOCATION}\nruntime: nodejs14\n","description":"Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.","deletionPolicy":"DELETE"}],"billingRequired":true,"author":{"authorName":"Firebase","url":"https://firebase.google.com"},"contributors":[{"authorName":"Michael Bleigh","url":"https://github.com/mbleigh"},{"authorName":"Invertase","email":"oss@invertase.io","url":"https://github.com/invertase"}],"license":"Apache-2.0","releaseNotesUrl":"https://github.com/firebase/extensions/blob/master/firestore-send-email/CHANGELOG.md","sourceUrl":"https://github.com/firebase/extensions/tree/master/firestore-send-email","params":[{"param":"LOCATION","label":"Cloud Functions location","type":"SELECT","description":"Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).","required":true,"options":[{"value":"us-central1","label":"Iowa (us-central1)"},{"value":"us-east1","label":"South Carolina (us-east1)"},{"value":"us-east4","label":"Northern Virginia (us-east4)"},{"value":"us-west2","label":"Los Angeles (us-west2)"},{"value":"us-west3","label":"Salt Lake City (us-west3)"},{"value":"us-west4","label":"Las Vegas (us-west4)"},{"value":"europe-central2","label":"Warsaw (europe-central2)"},{"value":"europe-west1","label":"Belgium (europe-west1)"},{"value":"europe-west2","label":"London (europe-west2)"},{"value":"europe-west3","label":"Frankfurt (europe-west3)"},{"value":"europe-west6","label":"Zurich (europe-west6)"},{"value":"asia-east1","label":"Taiwan (asia-east1)"},{"value":"asia-east2","label":"Hong Kong (asia-east2)"},{"value":"asia-northeast1","label":"Tokyo (asia-northeast1)"},{"value":"asia-northeast2","label":"Osaka (asia-northeast2)"},{"value":"asia-northeast3","label":"Seoul (asia-northeast3)"},{"value":"asia-south1","label":"Mumbai (asia-south1)"},{"value":"asia-southeast1","label":"Singapore (asia-southeast1)"},{"value":"asia-southeast2","label":"Jakarta (asia-southeast2)"},{"value":"northamerica-northeast1","label":"Montreal (northamerica-northeast1)"},{"value":"southamerica-east1","label":"Sao Paulo (southamerica-east1)"},{"value":"australia-southeast1","label":"Sydney (australia-southeast1)"}],"default":"us-central1","immutable":true},{"param":"SMTP_CONNECTION_URI","label":"SMTP connection URI","type":"STRING","description":"A URI representing an SMTP server this extension can use to deliver email. Note that port 25 is blocked by Google Cloud Platform, so we recommend using port 587 for SMTP connections. If you're using the SMTPS protocol, we recommend using port 465. In order to keep passwords secure, it is recommended to omit the password from the connection string while using the `SMTP Password` field for entering secrets and passwords. Passwords and secrets should now be included in `SMTP password` field.\nSecure format:\n `smtps://username@gmail.com@smtp.gmail.com:465` (username only)\n `smtps://smtp.gmail.com:465` (No username and password)\nBackwards Compatible (less secure):\n `smtps://username@gmail.com:password@smtp.gmail.com:465`. (username and password)","required":true,"example":"smtps://username@smtp.hostname.com:465","validationRegex":"^(smtp[s]*://.*?:[0-9]+.*$)","validationErrorMessage":"Invalid SMTP connection URI. Must be in the form `smtp(s)://username:password@hostname:port` or `smtp(s)://username@hostname:port`."},{"param":"SMTP_PASSWORD","label":"SMTP password","type":"SECRET","description":"User password for the SMTP server"},{"param":"MAIL_COLLECTION","label":"Email documents collection","type":"STRING","description":"What is the path to the collection that contains the documents used to build and send the emails?","required":true,"default":"mail","validationRegex":"^[^/]+(/[^/]+/[^/]+)*$","validationErrorMessage":"Must be a valid Cloud Firestore collection"},{"param":"DEFAULT_FROM","label":"Default FROM address","type":"STRING","description":"The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).","required":true,"example":"foobar@example.com","validationRegex":"^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$|^.*<(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})>$","validationErrorMessage":"Must be a valid email address or valid name plus email address"},{"param":"DEFAULT_REPLY_TO","label":"Default REPLY-TO address","type":"STRING","description":"The email address to use as the reply-to address (if it's not specified in the added email document)."},{"param":"USERS_COLLECTION","label":"Users collection","type":"STRING","description":"A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection."},{"param":"TEMPLATES_COLLECTION","label":"Templates collection","type":"STRING","description":"A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document."},{"param":"TTL_EXPIRE_TYPE","label":"Firestore TTL type","type":"SELECT","description":"Do you want the firestore records to be marked with an expireAt field for a TTL policy? If \"Never\" is selected then no expireAt field will be added. Otherwise you may specify the unit of time specified by the TTL_EXPIRE_VALUE parameter. Defaults to \"Never\".","required":true,"options":[{"value":"never","label":"Never"},{"value":"hour","label":"Hour"},{"value":"day","label":"Day"},{"value":"week","label":"Week"},{"value":"month","label":"Month"},{"value":"year","label":"Year"}],"default":"never"},{"param":"TTL_EXPIRE_VALUE","label":"Firestore TTL value","type":"STRING","description":"In the units specified by TTL_EXPIRE_TYPE, how long do you want records to be ineligible for deletion by a TTL policy? This parameter requires the Firestore TTL type parameter to be set to a value other than `Never`. For example, if `Firestore TTL type` is set to `Day` then setting this parameter to `1` will specify a TTL of 1 day.","required":true,"default":"1","validationRegex":"^[1-9][0-9]*$","validationErrorMessage":"The value must be an integer value greater than zero."}],"preinstallContent":"Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Setup Google App Passwords\n\n**Google** no longer allows **Gmail** users to use their own passwords to authorize third-party apps and services. Instead, you have to use the [Sign in with App Passwords](https://support.google.com/accounts/answer/185833) service to generate a special password for each app you want to authorize. To do so:\n\n1.  Go to your [Google Account](https://myaccount.google.com/).\n2.  Select **Security**.\n3.  Under \"Signing in to Google,\" select **App Passwords**. You may need to sign in. If you don’t have this option, it might be because:\n    1.  2-Step Verification is not set up for your account.\n    2.  2-Step Verification is only set up for security keys.\n    3.  Your account is through work, school, or other organization.\n    4.  You turned on Advanced Protection.\n4.  At the bottom, choose **Select app** and choose **Other** option and then write the name of the app password (e.g. `Firebase Trigger Email Extension`) and click **Generate**.\n5.  Follow the instructions to enter the App Password. The App Password is the 16-character code in the yellow bar on your device.\n6.  Tap **Done**.\n\nNow you can use your Google username with the generated password to authorize the extension.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s no-cost tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n\n#### Further reading & resources\n\nYou can find more information about this extension in the following articles:\n\n- [Sending Emails Using Firestore And Firebase Extensions](https://invertase.link/Y6Nu)","postinstallContent":"### See it in action\n\nYou can test out this extension right away!\n\n1.  Go to your [Cloud Firestore dashboard](https://console.firebase.google.com/project/${param:PROJECT_ID}/firestore/data) in the Firebase console.\n\n1.  If it doesn't already exist, create the collection you specified during installation: `${param:MAIL_COLLECTION}`.\n\n1.  Add a document with a `to` field and a `message` field with the following content:\n\n    ```js\n    to: ['someone@example.com'],\n    message: {\n      subject: 'Hello from Firebase!',\n      text: 'This is the plaintext section of the email body.',\n      html: 'This is the <code>HTML</code> section of the email body.',\n    }\n    ```\n\n1.  In a few seconds, you'll see a `delivery` field appear in the document. The field will update as the extension processes the email.\n\n**Note:** You can also use the [Firebase Admin SDK][admin_sdk] to add a document:\n\n```js\nadmin\n  .firestore()\n  .collection(\"${param:MAIL_COLLECTION}\")\n  .add({\n    to: \"someone@example.com\",\n    message: {\n      subject: \"Hello from Firebase!\",\n      text: \"This is the plaintext section of the email body.\",\n      html: \"This is the <code>HTML</code> section of the email body.\",\n    },\n  })\n  .then(() => console.log(\"Queued email for delivery!\"));\n```\n\n### Using this extension\n\nSee the [official documentation](https://firebase.google.com/docs/extensions/official/firestore-send-email) for information on using this extension, including advanced use cases such as using Handlebars templates and managing email delivery status.\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n\n[mail_collection]: https://console.firebase.google.com/project/_/firestore/data~2F${param:MAIL_COLLECTION}\n[admin_sdk]: https://firebase.google.com/docs/admin/setup\n[amp4email]: https://amp.dev/documentation/guides-and-tutorials/learn/email-spec/amp-email-format/\n[handlebars]: https://handlebarsjs.com/\n\n### Further reading & resources\n\nYou can find more information about this extension in the following articles:\n\n- [Sending Emails Using Firestore And Firebase Extensions](https://invertase.link/Y6Nu)","readmeContent":"# Trigger Email\n\n**Author**: Firebase (**[https://firebase.google.com](https://firebase.google.com)**)\n\n**Description**: Composes and sends an email based on the contents of a document written to a specified Cloud Firestore collection.\n\n\n\n**Details**: Use this extension to render and send emails that contain the information from documents added to a specified Cloud Firestore collection.\n\nAdding a document triggers this extension to send an email built from the document's fields. The document's top-level fields specify the email sender and recipients, including `to`, `cc`, and `bcc` options (each supporting UIDs). The document's `message` field specifies the other email elements, like subject line and email body (either plaintext or HTML)\n\nHere's a basic example document write that would trigger this extension:\n\n```js\nadmin.firestore().collection('mail').add({\n  to: 'someone@example.com',\n  message: {\n    subject: 'Hello from Firebase!',\n    html: 'This is an <code>HTML</code> email body.',\n  },\n})\n```\n\nYou can also optionally configure this extension to render emails using [Handlebar](https://handlebarsjs.com/) templates. Each template is a document stored in a Cloud Firestore collection.\n\nWhen you configure this extension, you'll need to supply your **SMTP credentials for mail delivery**. Note that this extension is for use with bulk email service providers, like SendGrid, Mailgun, etc.\n\n#### Setup Google App Passwords\n\n**Google** no longer allows **Gmail** users to use their own passwords to authorize third-party apps and services. Instead, you have to use the [Sign in with App Passwords](https://support.google.com/accounts/answer/185833) service to generate a special password for each app you want to authorize. To do so:\n\n1.  Go to your [Google Account](https://myaccount.google.com/).\n2.  Select **Security**.\n3.  Under \"Signing in to Google,\" select **App Passwords**. You may need to sign in. If you don’t have this option, it might be because:\n    1.  2-Step Verification is not set up for your account.\n    2.  2-Step Verification is only set up for security keys.\n    3.  Your account is through work, school, or other organization.\n    4.  You turned on Advanced Protection.\n4.  At the bottom, choose **Select app** and choose **Other** option and then write the name of the app password (e.g. `Firebase Trigger Email Extension`) and click **Generate**.\n5.  Follow the instructions to enter the App Password. The App Password is the 16-character code in the yellow bar on your device.\n6.  Tap **Done**.\n\nNow you can use your Google username with the generated password to authorize the extension.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n\n#### Billing\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s no-cost tier:\n  - Cloud Firestore\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n\nUsage of this extension also requires you to have SMTP credentials for mail delivery. You are responsible for any associated costs with your usage of your SMTP provider.\n\n#### Further reading & resources\n\nYou can find more information about this extension in the following articles:\n\n- [Sending Emails Using Firestore And Firebase Extensions](https://invertase.link/Y6Nu)\n\n\n\n**Configuration Parameters:**\n\n* Cloud Functions location: Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).\n\n* SMTP connection URI: A URI representing an SMTP server this extension can use to deliver email. Note that port 25 is blocked by Google Cloud Platform, so we recommend using port 587 for SMTP connections. If you're using the SMTPS protocol, we recommend using port 465. In order to keep passwords secure, it is recommended to omit the password from the connection string while using the `SMTP Password` field for entering secrets and passwords. Passwords and secrets should now be included in `SMTP password` field.\nSecure format:\n `smtps://username@gmail.com@smtp.gmail.com:465` (username only)\n `smtps://smtp.gmail.com:465` (No username and password)\nBackwards Compatible (less secure):\n `smtps://username@gmail.com:password@smtp.gmail.com:465`. (username and password)\n\n* SMTP password: User password for the SMTP server\n\n* Email documents collection: What is the path to the collection that contains the documents used to build and send the emails?\n\n* Default FROM address: The email address to use as the sender's address (if it's not specified in the added email document).  You can optionally include a name with the email address (`Friendly Firebaser <foobar@example.com>`).\n\n* Default REPLY-TO address: The email address to use as the reply-to address (if it's not specified in the added email document).\n\n* Users collection: A collection of documents keyed by user UID. If the `toUids`, `ccUids`, and/or `bccUids` recipient options are used in the added email document, this extension delivers email to the `email` field based on lookups in this collection.\n\n* Templates collection: A collection of email templates keyed by name. This extension can render an email using a [Handlebar](https://handlebarsjs.com/) template, if the template is specified in the added email document.\n\n* Firestore TTL type: Do you want the firestore records to be marked with an expireAt field for a TTL policy? If \"Never\" is selected then no expireAt field will be added. Otherwise you may specify the unit of time specified by the TTL_EXPIRE_VALUE parameter. Defaults to \"Never\".\n\n* Firestore TTL value: In the units specified by TTL_EXPIRE_TYPE, how long do you want records to be ineligible for deletion by a TTL policy? This parameter requires the Firestore TTL type parameter to be set to a value other than `Never`. For example, if `Firestore TTL type` is set to `Day` then setting this parameter to `1` will specify a TTL of 1 day.\n\n\n\n**Cloud Functions:**\n\n* **processQueue:** Processes document changes in the specified Cloud Firestore collection, delivers emails, and updates the document with delivery status information.\n\n\n\n**Access Required**:\n\n\n\nThis extension will operate with the following project IAM roles:\n\n* datastore.user (Reason: Allows this extension to access Cloud Firestore to read and process added email documents.)\n","displayName":"Trigger Email","events":[{"type":"firebase.extensions.firestore-send-email.v1.onStart","description":"Occurs when the extension starts execution."},{"type":"firebase.extensions.firestore-send-email.v1.onProcessing","description":"Occurs when the extension attempts to process an email."},{"type":"firebase.extensions.firestore-send-email.v1.onRetry","description":"Occurs when the extension attempts to resend an email."},{"type":"firebase.extensions.firestore-send-email.v1.onPending","description":"Occurs when an email has a pending status."},{"type":"firebase.extensions.firestore-send-email.v1.onSuccess","description":"Occurs when the extension successfully sends an email."},{"type":"firebase.extensions.firestore-send-email.v1.onComplete","description":"Occurs when the extension completes execution."},{"type":"firebase.extensions.firestore-send-email.v1.onError","description":"Occurs when the extension fails to complete execution."}],"systemParams":[{"param":"firebaseextensions.v1beta.function/memory","label":"Function memory","type":"SELECT","description":"How much memory should be allocated to each function?","options":[{"value":"128","label":"128MB"},{"value":"256","label":"256MB"},{"value":"512","label":"512MB"},{"value":"1024","label":"1GB"},{"value":"2048","label":"2GB"},{"value":"4096","label":"4GB"},{"value":"8192","label":"8GB"}],"default":"256","advanced":true},{"param":"firebaseextensions.v1beta.function/timeoutSeconds","label":"Function timeout seconds","type":"STRING","description":"How long should functions run before timing out, in seconds (0-540)?","validationRegex":"^[1-9][0-9]{0,2}$","validationErrorMessage":"Function timeout should be an integer number of seconds, between 0 and 540","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnector","label":"VPC Connector","type":"STRING","description":"The VPC Network Connector that this cloud function can connect to. It can be either the fully-qualified URI, or the short name of the network connector resource. The format of this field is projects/*/locations/*/connectors/*.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/connectors/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/vpcConnectorEgressSettings","label":"VPC Connector Egress settings","type":"SELECT","description":"Controls outgoing traffic when a VPC connector is configured","options":[{"value":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","label":"Unspecified"},{"value":"PRIVATE_RANGES_ONLY","label":"Private ranges only"},{"value":"ALL_TRAFFIC","label":"All traffic"}],"default":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","advanced":true},{"param":"firebaseextensions.v1beta.function/minInstances","label":"Minimum function instances","type":"STRING","description":"The minimum number of instances of each function to run at once (0-1000)","default":"0","validationRegex":"^[0-9]*$","validationErrorMessage":"Min instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/maxInstances","label":"Maximum function instances","type":"STRING","description":"The maximum number of instances of each function to run at once","default":"3000","validationRegex":"^[0-9]*$","validationErrorMessage":"Max instances must be a non-negative integer.","advanced":true},{"param":"firebaseextensions.v1beta.function/ingressSettings","label":"Function ingress settings","type":"SELECT","description":"Where should functions allow incoming traffic from?","options":[{"value":"ALLOW_ALL","label":"Allow all"},{"value":"ALLOW_INTERNAL_ONLY","label":"Allow internal only"},{"value":"ALLOW_INTERNAL_AND_GCLB","label":"Allow internal and GCLB"}],"advanced":true},{"param":"firebaseextensions.v1beta.function/labels","label":"Function labels","type":"STRING","description":"Do you wish to set any labels on this instance's Cloud Functions? If so, provide up to 55 labels in the format 'key1:value, key2:value'","validationRegex":"^([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63},\\s*)*([a-zžà-ÿ][A-Za-zŽžÀ-ÿ0-9_-]{0,62}:[A-Za-zŽžÀ-ÿ0-9_-]{0,63})$","advanced":true},{"param":"firebaseextensions.v1beta.function/kmsKeyName","label":"KMS key name","type":"STRING","description":"Do you want to use a Customer Managed Eencryption Key (CMEK) to encrypt this extension's functions? If you set this, you must also set a Docker repository encrypted by that key. See https://cloud.google.com/functions/docs/securing/cmek for more details.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/keyRings/([^/]+)/cryptoKeys/([^/]+)$","advanced":true},{"param":"firebaseextensions.v1beta.function/dockerRepository","label":"Docker repository","type":"STRING","description":"What Docker repository should be used to store function images? Default repository will be used if not set.","validationRegex":"^projects/([^/]+)/locations/([^/]+)/repositories/([^/]+)$","advanced":true}]},"state":"PUBLISHED","hash":"7badb9bae5ecff0689c4ec1fc308836f9ce8a3296ad379bfe1bd64998058c8fe","createTime":"2023-02-08T12:01:27.117137Z","sourceDownloadUri":"https://storage.googleapis.com/firebase-mod-sources-prod/7badb9bae5ecff0689c4ec1fc308836f9ce8a3296ad379bfe1bd64998058c8fe","id":"0.1.22","releaseNotes":"fixed - fix typo in extension\n\nfeature - upgrade extensions to the latest firebase-admin sdk\n\nfeature - improve TTL params\n\nfeature - add TTL support\n\nfixed - read and write delivery status from inside a single transaction\n","listing":{"state":"APPROVED"},"metrics":{"activeInstallCount":"100"}}
[debug] [2023-08-17T12:57:58.524Z] [extensions] Source code valid for firebase/firestore-send-email@0.1.22
[debug] [2023-08-17T12:57:58.525Z] >>> [apiv2][query] GET https://firebaseextensions.googleapis.com/v1beta/publishers/firebase/extensions/firestore-send-email [none]
[debug] [2023-08-17T12:57:58.915Z] <<< [apiv2][status] GET https://firebaseextensions.googleapis.com/v1beta/publishers/firebase/extensions/firestore-send-email 200
[debug] [2023-08-17T12:57:58.915Z] <<< [apiv2][body] GET https://firebaseextensions.googleapis.com/v1beta/publishers/firebase/extensions/firestore-send-email {"name":"publishers/firebase/extensions/firestore-send-email","ref":"firebase/firestore-send-email","latestVersion":"0.1.27","latestVersionCreateTime":"2023-07-12T08:13:42.022101Z","state":"PUBLISHED","createTime":"2021-03-18T22:02:59.748671Z","iconUri":"https://storage.googleapis.com/firebase-extensions-icons/extension_icons/firebase/trigger_email_120@2x.png","publisher":{"displayName":"Firebase","iconUri":"https://storage.googleapis.com/firebase-extensions-icons/publisher_icons/firebase/firebase_128dp.png"},"repoUri":"https://github.com/firebase/extensions","metrics":{"activeInstallCount":"19700"},"latestApprovedVersion":"0.1.27"}
[debug] [2023-08-17T12:57:58.926Z] [functions] Functions Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2023-08-17T12:57:58.926Z] [eventarc] Eventarc Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2023-08-17T12:57:58.926Z] [logging] Logging Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2023-08-17T12:57:58.926Z] [firestore] Firestore Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2023-08-17T12:57:58.926Z] [firestore.websocket] websocket server for firestore only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2023-08-17T12:57:58.926Z] [database] Database Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2023-08-17T12:57:58.926Z] [hosting] Hosting Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2023-08-17T12:57:58.926Z] assigned listening specs for emulators {"user":{"functions":[{"address":"127.0.0.1","family":"IPv4","port":5001}],"eventarc":[{"address":"127.0.0.1","family":"IPv4","port":9299}],"hub":[{"address":"127.0.0.1","family":"IPv4","port":4400},{"address":"::1","family":"IPv6","port":4400}],"ui":[{"address":"127.0.0.1","family":"IPv4","port":4000},{"address":"::1","family":"IPv6","port":4000}],"logging":[{"address":"127.0.0.1","family":"IPv4","port":4500}],"firestore":[{"address":"127.0.0.1","family":"IPv4","port":8080}],"firestore.websocket":[{"address":"127.0.0.1","family":"IPv4","port":9150}],"database":[{"address":"127.0.0.1","family":"IPv4","port":9000}],"hosting":[{"address":"127.0.0.1","family":"IPv4","port":5000}]},"metadata":{"message":"assigned listening specs for emulators"}}
[debug] [2023-08-17T12:57:58.934Z] [hub] writing locator at C:\Users\danie\AppData\Local\Temp\hub-ecrphmsb.json
[debug] [2023-08-17T12:57:58.938Z] [Extensions] Started Extensions emulator, this is a noop.
[warn] !  functions: The following emulators are not running, calls to these services from the Functions emulator will affect production: auth, pubsub, storage {"metadata":{"emulator":{"name":"functions"},"message":"The following emulators are not running, calls to these services from the Functions emulator will affect production: \u001b[1mauth, pubsub, storage\u001b[22m"}}
[debug] [2023-08-17T12:57:58.939Z] defaultcredentials: writing to file C:\Users\danie\AppData\Roaming\firebase\daniel_uzcategui_chopzi.com_application_default_credentials.json
[debug] [2023-08-17T12:57:58.940Z] Setting GAC to C:\Users\danie\AppData\Roaming\firebase\daniel_uzcategui_chopzi.com_application_default_credentials.json {"metadata":{"emulator":{"name":"functions"},"message":"Setting GAC to C:\\Users\\danie\\AppData\\Roaming\\firebase\\daniel_uzcategui_chopzi.com_application_default_credentials.json"}}
[debug] [2023-08-17T12:57:58.940Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/ecrphmsb/adminSdkConfig [none]
[debug] [2023-08-17T12:57:59.262Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/ecrphmsb/adminSdkConfig 200
[debug] [2023-08-17T12:57:59.262Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/ecrphmsb/adminSdkConfig {"projectId":"ecrphmsb","storageBucket":"ecrphmsb.appspot.com","locationId":"us-central"}
[info] i  firestore: Importing data from C:\Users\danie\Documents\GitHub\PagosColegio\firebase-export-16922770325459aqoyl\firestore_export\firestore_export.overall_export_metadata {"metadata":{"emulator":{"name":"firestore"},"message":"Importing data from C:\\Users\\danie\\Documents\\GitHub\\PagosColegio\\firebase-export-16922770325459aqoyl\\firestore_export\\firestore_export.overall_export_metadata"}}
[debug] [2023-08-17T12:57:59.271Z] Ignoring unsupported arg: auto_download {"metadata":{"emulator":{"name":"firestore"},"message":"Ignoring unsupported arg: auto_download"}}
[debug] [2023-08-17T12:57:59.271Z] Ignoring unsupported arg: single_project_mode_error {"metadata":{"emulator":{"name":"firestore"},"message":"Ignoring unsupported arg: single_project_mode_error"}}
[debug] [2023-08-17T12:57:59.271Z] Starting Firestore Emulator with command {"binary":"java","args":["-Dgoogle.cloud_firestore.debug_log_level=FINE","-Duser.language=en","-jar","C:\\Users\\danie\\.cache\\firebase\\emulators\\cloud-firestore-emulator-v1.18.1.jar","--host","127.0.0.1","--port",8080,"--websocket_port",9150,"--project_id","ecrphmsb","--seed_from_export","C:\\Users\\danie\\Documents\\GitHub\\PagosColegio\\firebase-export-16922770325459aqoyl\\firestore_export\\firestore_export.overall_export_metadata","--rules","C:\\Users\\danie\\Documents\\GitHub\\PagosColegio\\firestore.rules","--single_project_mode",true,"--functions_emulator","127.0.0.1:5001"],"optionalArgs":["port","webchannel_port","host","rules","websocket_port","functions_emulator","seed_from_export","project_id","single_project_mode"],"joinArgs":false} {"metadata":{"emulator":{"name":"firestore"},"message":"Starting Firestore Emulator with command {\"binary\":\"java\",\"args\":[\"-Dgoogle.cloud_firestore.debug_log_level=FINE\",\"-Duser.language=en\",\"-jar\",\"C:\\\\Users\\\\danie\\\\.cache\\\\firebase\\\\emulators\\\\cloud-firestore-emulator-v1.18.1.jar\",\"--host\",\"127.0.0.1\",\"--port\",8080,\"--websocket_port\",9150,\"--project_id\",\"ecrphmsb\",\"--seed_from_export\",\"C:\\\\Users\\\\danie\\\\Documents\\\\GitHub\\\\PagosColegio\\\\firebase-export-16922770325459aqoyl\\\\firestore_export\\\\firestore_export.overall_export_metadata\",\"--rules\",\"C:\\\\Users\\\\danie\\\\Documents\\\\GitHub\\\\PagosColegio\\\\firestore.rules\",\"--single_project_mode\",true,\"--functions_emulator\",\"127.0.0.1:5001\"],\"optionalArgs\":[\"port\",\"webchannel_port\",\"host\",\"rules\",\"websocket_port\",\"functions_emulator\",\"seed_from_export\",\"project_id\",\"single_project_mode\"],\"joinArgs\":false}"}}
[info] i  firestore: Firestore Emulator logging to firestore-debug.log {"metadata":{"emulator":{"name":"firestore"},"message":"Firestore Emulator logging to \u001b[1mfirestore-debug.log\u001b[22m"}}
[debug] [2023-08-17T12:58:00.877Z] Aug 17, 2023 8:58:00 AM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketServer start
INFO: Started WebSocket server on ws://127.0.0.1:9150
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 8:58:00 AM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketServer start\r\nINFO: Started WebSocket server on ws://127.0.0.1:9150\r\n"}}
[debug] [2023-08-17T12:58:00.902Z] API endpoint: http:// {"metadata":{"emulator":{"name":"firestore"},"message":"API endpoint: http://"}}
[debug] [2023-08-17T12:58:00.902Z] 127.0.0.1:8080
If you are using a library that supports the FIRESTORE_EMULATOR_HOST environment variable, run:

   export FIRESTORE_EMULATOR_HOST=127.0.0.1:8080

Dev App Server is now running.

 {"metadata":{"emulator":{"name":"firestore"},"message":"127.0.0.1:8080\nIf you are using a library that supports the FIRESTORE_EMULATOR_HOST environment variable, run:\r\n\n   export FIRESTORE_EMULATOR_HOST=127.0.0.1:8080\n\nDev App Server is now running.\n\r\n"}}
[info] +  firestore: Firestore Emulator UI websocket is running on 9150. {"metadata":{"emulator":{"name":"firestore"},"message":"Firestore Emulator UI websocket is running on 9150."}}
[debug] [2023-08-17T12:58:01.076Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/ecrphmsb [none]
[debug] [2023-08-17T12:58:01.415Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/ecrphmsb 200
[debug] [2023-08-17T12:58:01.415Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/ecrphmsb {"projectId":"ecrphmsb","projectNumber":"9151880564","displayName":"ecrphmsb","name":"projects/ecrphmsb","resources":{"hostingSite":"ecrphmsb","storageBucket":"ecrphmsb.appspot.com","locationId":"us-central"},"state":"ACTIVE","etag":"1_46b9d145-f9f9-4cf7-9388-1bce6b665d61"}
[debug] [2023-08-17T12:58:01.415Z] database rules config:  []
[warn] !  database: Did not find a Realtime Database rules file specified in a firebase.json config file. The emulator will default to allowing all reads and writes. Learn more about this option: https://firebase.google.com/docs/emulator-suite/install_and_configure#security_rules_configuration. {"metadata":{"emulator":{"name":"database"},"message":"Did not find a Realtime Database rules file specified in a firebase.json config file. The emulator will default to allowing all reads and writes. Learn more about this option: https://firebase.google.com/docs/emulator-suite/install_and_configure#security_rules_configuration."}}
[debug] [2023-08-17T12:58:01.416Z] Ignoring unsupported arg: projectId {"metadata":{"emulator":{"name":"database"},"message":"Ignoring unsupported arg: projectId"}}
[debug] [2023-08-17T12:58:01.416Z] Ignoring unsupported arg: auto_download {"metadata":{"emulator":{"name":"database"},"message":"Ignoring unsupported arg: auto_download"}}
[debug] [2023-08-17T12:58:01.416Z] Ignoring unsupported arg: rules {"metadata":{"emulator":{"name":"database"},"message":"Ignoring unsupported arg: rules"}}
[debug] [2023-08-17T12:58:01.416Z] Starting Database Emulator with command {"binary":"java","args":["-Duser.language=en","-jar","C:\\Users\\danie\\.cache\\firebase\\emulators\\firebase-database-emulator-v4.11.2.jar","--host","127.0.0.1","--port",9000,"--single_project_mode","Warning","--functions_emulator_host","127.0.0.1","--functions_emulator_port",5001],"optionalArgs":["port","host","functions_emulator_port","functions_emulator_host","single_project_mode"],"joinArgs":false} {"metadata":{"emulator":{"name":"database"},"message":"Starting Database Emulator with command {\"binary\":\"java\",\"args\":[\"-Duser.language=en\",\"-jar\",\"C:\\\\Users\\\\danie\\\\.cache\\\\firebase\\\\emulators\\\\firebase-database-emulator-v4.11.2.jar\",\"--host\",\"127.0.0.1\",\"--port\",9000,\"--single_project_mode\",\"Warning\",\"--functions_emulator_host\",\"127.0.0.1\",\"--functions_emulator_port\",5001],\"optionalArgs\":[\"port\",\"host\",\"functions_emulator_port\",\"functions_emulator_host\",\"single_project_mode\"],\"joinArgs\":false}"}}
[info] i  database: Database Emulator logging to database-debug.log {"metadata":{"emulator":{"name":"database"},"message":"Database Emulator logging to \u001b[1mdatabase-debug.log\u001b[22m"}}
[debug] [2023-08-17T12:58:02.087Z] WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by io.netty.util.internal.ReflectionUtil (file:/C:/Users/danie/.cache/firebase/emulators/firebase-database-emulator-v4.11.2.jar) to field sun.nio.ch.SelectorImpl.selectedKeys
WARNING: Please consider reporting this to the maintainers of io.netty.util.internal.ReflectionUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release {"metadata":{"emulator":{"name":"database"},"message":"WARNING: An illegal reflective access operation has occurred\r\nWARNING: Illegal reflective access by io.netty.util.internal.ReflectionUtil (file:/C:/Users/danie/.cache/firebase/emulators/firebase-database-emulator-v4.11.2.jar) to field sun.nio.ch.SelectorImpl.selectedKeys\r\nWARNING: Please consider reporting this to the maintainers of io.netty.util.internal.ReflectionUtil\r\nWARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations\r\nWARNING: All illegal access operations will be denied in a future release"}}
[debug] [2023-08-17T12:58:02.087Z] 
 {"metadata":{"emulator":{"name":"database"},"message":"\r\n"}}
[debug] [2023-08-17T12:58:02.522Z] 08:58:02.520 [NamespaceSystem-akka.actor.default-dispatcher-4] INFO akka.event.slf4j.Slf4jLogger - Slf4jLogger started
 {"metadata":{"emulator":{"name":"database"},"message":"08:58:02.520 [NamespaceSystem-akka.actor.default-dispatcher-4] INFO akka.event.slf4j.Slf4jLogger - Slf4jLogger started\r\n"}}
[debug] [2023-08-17T12:58:02.648Z] 08:58:02.648 [main] INFO com.firebase.server.forge.App$ - Listening at 127.0.0.1:9000
 {"metadata":{"emulator":{"name":"database"},"message":"08:58:02.648 [main] INFO com.firebase.server.forge.App$ - Listening at 127.0.0.1:9000\r\n"}}
[debug] [2023-08-17T12:58:02.942Z] >>> [apiv2][query] GET https://firebasehosting.googleapis.com/v1beta1/projects/ecrphmsb/sites 
[debug] [2023-08-17T12:58:03.274Z] Aug 17, 2023 8:58:03 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 8:58:03 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T12:58:03.481Z] <<< [apiv2][status] GET https://firebasehosting.googleapis.com/v1beta1/projects/ecrphmsb/sites 200
[debug] [2023-08-17T12:58:03.481Z] <<< [apiv2][body] GET https://firebasehosting.googleapis.com/v1beta1/projects/ecrphmsb/sites {"sites":[{"name":"projects/ecrphmsb/sites/ecrphmsb","defaultUrl":"https://ecrphmsb.web.app","type":"DEFAULT_SITE"},{"name":"projects/ecrphmsb/sites/ecrphmsb-admin","defaultUrl":"https://ecrphmsb-admin.web.app","type":"USER_SITE"}]}
[debug] [2023-08-17T12:58:03.481Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/ecrphmsb/webApps/-/config [none]
[debug] [2023-08-17T12:58:03.962Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/ecrphmsb/webApps/-/config 200
[debug] [2023-08-17T12:58:03.962Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/ecrphmsb/webApps/-/config {"projectId":"ecrphmsb","appId":"1:9151880564:web:cbf4bbad229c4dea64a021","storageBucket":"ecrphmsb.appspot.com","locationId":"us-central","apiKey":"AIzaSyCjb7issX8anpmznoEMyLhUxaLOVxG0iUY","authDomain":"ecrphmsb.firebaseapp.com","messagingSenderId":"9151880564"}
[debug] [2023-08-17T12:58:03.965Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/ecrphmsb [none]
[debug] [2023-08-17T12:58:04.273Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/ecrphmsb 200
[debug] [2023-08-17T12:58:04.273Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/ecrphmsb {"projectId":"ecrphmsb","projectNumber":"9151880564","displayName":"ecrphmsb","name":"projects/ecrphmsb","resources":{"hostingSite":"ecrphmsb","storageBucket":"ecrphmsb.appspot.com","locationId":"us-central"},"state":"ACTIVE","etag":"1_46b9d145-f9f9-4cf7-9388-1bce6b665d61"}
[info] i  hosting[ecrphmsb]: Serving hosting files from: dist/spa {"metadata":{"emulator":{"name":"hosting"},"message":"Serving hosting files from: \u001b[1mdist/spa\u001b[22m"}}
[info] +  hosting[ecrphmsb]: Local server: http://127.0.0.1:5000 {"metadata":{"emulator":{"name":"hosting"},"message":"Local server: \u001b[4m\u001b[1mhttp://127.0.0.1:5000\u001b[22m\u001b[24m"}}
[debug] [2023-08-17T12:58:04.284Z] Ignoring unsupported arg: auto_download {"metadata":{"emulator":{"name":"ui"},"message":"Ignoring unsupported arg: auto_download"}}
[debug] [2023-08-17T12:58:04.284Z] Ignoring unsupported arg: port {"metadata":{"emulator":{"name":"ui"},"message":"Ignoring unsupported arg: port"}}
[debug] [2023-08-17T12:58:04.284Z] Starting Emulator UI with command {"binary":"node","args":["C:\\Users\\danie\\.cache\\firebase\\emulators\\ui-v1.11.7\\server\\server.js"],"optionalArgs":[],"joinArgs":false} {"metadata":{"emulator":{"name":"ui"},"message":"Starting Emulator UI with command {\"binary\":\"node\",\"args\":[\"C:\\\\Users\\\\danie\\\\.cache\\\\firebase\\\\emulators\\\\ui-v1.11.7\\\\server\\\\server.js\"],\"optionalArgs\":[],\"joinArgs\":false}"}}
[info] i  ui: Emulator UI logging to ui-debug.log {"metadata":{"emulator":{"name":"ui"},"message":"Emulator UI logging to \u001b[1mui-debug.log\u001b[22m"}}
[debug] [2023-08-17T12:58:04.380Z] Web / API server started at 127.0.0.1:4000
 {"metadata":{"emulator":{"name":"ui"},"message":"Web / API server started at 127.0.0.1:4000\n"}}
[debug] [2023-08-17T12:58:04.380Z] Web / API server started at ::1:4000
 {"metadata":{"emulator":{"name":"ui"},"message":"Web / API server started at ::1:4000\n"}}
[debug] [2023-08-17T12:58:04.554Z] [Extensions] Connecting Extensions emulator, this is a noop.
[info] i  functions: Watching "C:\Users\danie\.cache\firebase\extensions\firebase\firestore-send-email@0.1.22\functions" for Cloud Functions... {"metadata":{"emulator":{"name":"functions"},"message":"Watching \"C:\\Users\\danie\\.cache\\firebase\\extensions\\firebase\\firestore-send-email@0.1.22\\functions\" for Cloud Functions..."}}
[info] +  functions: Loaded functions definitions from source: processQueue. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: processQueue."}}
[debug] [2023-08-17T12:58:04.557Z] addFirestoreTrigger "{\"eventTrigger\":{\"eventType\":\"providers/cloud.firestore/eventTypes/document.write\",\"resource\":\"projects/ecrphmsb/databases/(default)/documents/mail/{id}\",\"service\":\"firestore.googleapis.com\"}}"
[debug] [2023-08-17T12:58:04.558Z] >>> [apiv2][query] PUT http://127.0.0.1:8080/emulator/v1/projects/ecrphmsb/triggers/us-central1-ext-firestore-send-email-processQueue-0 [none]
[debug] [2023-08-17T12:58:04.558Z] >>> [apiv2][body] PUT http://127.0.0.1:8080/emulator/v1/projects/ecrphmsb/triggers/us-central1-ext-firestore-send-email-processQueue-0 "{\"eventTrigger\":{\"eventType\":\"providers/cloud.firestore/eventTypes/document.write\",\"resource\":\"projects/ecrphmsb/databases/(default)/documents/mail/{id}\",\"service\":\"firestore.googleapis.com\"}}"
[debug] [2023-08-17T12:58:04.561Z] Aug 17, 2023 8:58:04 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 8:58:04 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T12:58:04.683Z] Aug 17, 2023 8:58:04 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 8:58:04 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T12:58:04.774Z] Aug 17, 2023 8:58:04 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 8:58:04 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T12:58:04.798Z] <<< [apiv2][status] PUT http://127.0.0.1:8080/emulator/v1/projects/ecrphmsb/triggers/us-central1-ext-firestore-send-email-processQueue-0 200
[debug] [2023-08-17T12:58:04.798Z] <<< [apiv2][body] PUT http://127.0.0.1:8080/emulator/v1/projects/ecrphmsb/triggers/us-central1-ext-firestore-send-email-processQueue-0 {}
[info] +  functions[us-central1-ext-firestore-send-email-processQueue]: firestore function initialized. {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mfirestore\u001b[22m function initialized."}}
[info] i  functions: Watching "C:\Users\danie\Documents\GitHub\PagosColegio\functions" for Cloud Functions... {"metadata":{"emulator":{"name":"functions"},"message":"Watching \"C:\\Users\\danie\\Documents\\GitHub\\PagosColegio\\functions\" for Cloud Functions..."}}
[debug] [2023-08-17T12:58:04.800Z] Validating nodejs source
[debug] [2023-08-17T12:58:05.725Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "type": "module",
  "sourceType": "module",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "cors": "^2.8.5",
    "express": "^4.18.2",
    "firebase": "^10.1.0",
    "firebase-admin": "^11.10.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^0.2.0"
  },
  "private": true
}
[debug] [2023-08-17T12:58:05.725Z] Building nodejs source
[debug] [2023-08-17T12:58:05.725Z] Failed to find version of module node: reached end of search path C:\Users\danie\Documents\GitHub\PagosColegio\functions\node_modules
[info] +  functions: Using node@18 from host. 
[debug] [2023-08-17T12:58:05.727Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-08-17T12:58:05.732Z] Found firebase-functions binary at 'C:\Users\danie\Documents\GitHub\PagosColegio\functions\node_modules\.bin\firebase-functions'
[debug] [2023-08-17T12:58:05.744Z] Aug 17, 2023 8:58:04 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 8:58:04 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[info] Serving at port 8135

[debug] [2023-08-17T12:58:06.047Z] Got response from /__/functions.yaml {"endpoints":{"calculateAmountOwedByAllHouseholds":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":10,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"callableTrigger":{},"entryPoint":"calculateAmountOwedByAllHouseholds"},"handleCuota":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":10,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.written","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"cuota/{cuotaId}"},"retry":false},"entryPoint":"handleCuota"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] shutdown requested via /__/quitquitquit

[info] +  functions: Loaded functions definitions from source: calculateAmountOwedByAllHouseholds, handleCuota. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: calculateAmountOwedByAllHouseholds, handleCuota."}}
[info] +  functions[us-central1-calculateAmountOwedByAllHouseholds]: http function initialized (http://127.0.0.1:5001/ecrphmsb/us-central1/calculateAmountOwedByAllHouseholds). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://127.0.0.1:5001/ecrphmsb/us-central1/calculateAmountOwedByAllHouseholds)."}}
[debug] [2023-08-17T12:58:06.061Z] Found a v2 firestore trigger.
[debug] [2023-08-17T12:58:06.061Z] addFirestoreTrigger "{\"eventType\":\"google.cloud.firestore.document.v1.written\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":{\"value\":\"cuota/{cuotaId}\",\"matchType\":\"PATH_PATTERN\"}}"
[debug] [2023-08-17T12:58:06.061Z] >>> [apiv2][query] POST http://127.0.0.1:8080/emulator/v1/projects/ecrphmsb/eventarcTrigger?eventarcTriggerId=us-central1-handleCuota-0 [none]
[debug] [2023-08-17T12:58:06.061Z] >>> [apiv2][body] POST http://127.0.0.1:8080/emulator/v1/projects/ecrphmsb/eventarcTrigger?eventarcTriggerId=us-central1-handleCuota-0 "{\"eventType\":\"google.cloud.firestore.document.v1.written\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":{\"value\":\"cuota/{cuotaId}\",\"matchType\":\"PATH_PATTERN\"}}"
[debug] [2023-08-17T12:58:06.063Z] Aug 17, 2023 8:58:06 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 8:58:06 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T12:58:06.088Z] <<< [apiv2][status] POST http://127.0.0.1:8080/emulator/v1/projects/ecrphmsb/eventarcTrigger?eventarcTriggerId=us-central1-handleCuota-0 200
[debug] [2023-08-17T12:58:06.089Z] <<< [apiv2][body] POST http://127.0.0.1:8080/emulator/v1/projects/ecrphmsb/eventarcTrigger?eventarcTriggerId=us-central1-handleCuota-0 {"eventType":"google.cloud.firestore.document.v1.written","database":"(default)","namespace":"(default)","document":{"value":"cuota/{cuotaId}","matchType":"PATH_PATTERN"}}
[info] +  functions[us-central1-handleCuota]: firestore function initialized. {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mfirestore\u001b[22m function initialized."}}
[info] i  functions: Watching "C:\Users\danie\Documents\GitHub\PagosColegio\colegio" for Cloud Functions... {"metadata":{"emulator":{"name":"functions"},"message":"Watching \"C:\\Users\\danie\\Documents\\GitHub\\PagosColegio\\colegio\" for Cloud Functions..."}}
[debug] [2023-08-17T12:58:06.090Z] Validating nodejs source
[debug] [2023-08-17T12:58:06.998Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "type": "module",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "firebase-admin": "^11.8.0",
    "firebase-functions": "^4.3.1"
  },
  "devDependencies": {
    "eslint": "^8.15.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true
}
[debug] [2023-08-17T12:58:06.999Z] Building nodejs source
[debug] [2023-08-17T12:58:06.999Z] Failed to find version of module node: reached end of search path C:\Users\danie\Documents\GitHub\PagosColegio\colegio\node_modules
[info] +  functions: Using node@18 from host. 
[debug] [2023-08-17T12:58:06.999Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-08-17T12:58:07.003Z] Found firebase-functions binary at 'C:\Users\danie\Documents\GitHub\PagosColegio\colegio\node_modules\.bin\firebase-functions'
[info] Serving at port 8491

[debug] [2023-08-17T12:58:07.310Z] Got response from /__/functions.yaml {"endpoints":{"calculateAmountOwedByAllHouseholds":{"availableMemoryMb":null,"timeoutSeconds":300,"minInstances":null,"maxInstances":10,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"callableTrigger":{},"entryPoint":"calculateAmountOwedByAllHouseholds"},"handleCuota":{"availableMemoryMb":null,"timeoutSeconds":300,"minInstances":null,"maxInstances":10,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.written","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"cuotas/{cuotaId}"},"retry":false},"entryPoint":"handleCuota"},"handleNewDiscount":{"availableMemoryMb":null,"timeoutSeconds":300,"minInstances":null,"maxInstances":10,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.updated","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"students/{studentId}"},"retry":false},"entryPoint":"handleNewDiscount"},"handlePayment":{"availableMemoryMb":null,"timeoutSeconds":300,"minInstances":null,"maxInstances":10,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.written","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"students/{studentId}/cuota_payments/{cuotaId}"},"retry":false},"entryPoint":"handlePayment"},"handleStudent":{"availableMemoryMb":null,"timeoutSeconds":300,"minInstances":null,"maxInstances":10,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.created","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"students/{studentId}"},"retry":false},"entryPoint":"handleStudent"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] shutdown requested via /__/quitquitquit

[info] +  functions: Loaded functions definitions from source: calculateAmountOwedByAllHouseholds, handleCuota, handleNewDiscount, handlePayment, handleStudent. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: calculateAmountOwedByAllHouseholds, handleCuota, handleNewDiscount, handlePayment, handleStudent."}}
[info] +  functions[us-central1-calculateAmountOwedByAllHouseholds]: http function initialized (http://127.0.0.1:5001/ecrphmsb/us-central1/calculateAmountOwedByAllHouseholds). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://127.0.0.1:5001/ecrphmsb/us-central1/calculateAmountOwedByAllHouseholds)."}}
[debug] [2023-08-17T12:58:07.322Z] Found a v2 firestore trigger.
[debug] [2023-08-17T12:58:07.322Z] addFirestoreTrigger "{\"eventType\":\"google.cloud.firestore.document.v1.written\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":{\"value\":\"cuotas/{cuotaId}\",\"matchType\":\"PATH_PATTERN\"}}"
[debug] [2023-08-17T12:58:07.322Z] >>> [apiv2][query] POST http://127.0.0.1:8080/emulator/v1/projects/ecrphmsb/eventarcTrigger?eventarcTriggerId=us-central1-handleCuota-0 [none]
[debug] [2023-08-17T12:58:07.322Z] >>> [apiv2][body] POST http://127.0.0.1:8080/emulator/v1/projects/ecrphmsb/eventarcTrigger?eventarcTriggerId=us-central1-handleCuota-0 "{\"eventType\":\"google.cloud.firestore.document.v1.written\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":{\"value\":\"cuotas/{cuotaId}\",\"matchType\":\"PATH_PATTERN\"}}"
[debug] [2023-08-17T12:58:07.324Z] Aug 17, 2023 8:58:07 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 8:58:07 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T12:58:07.329Z] <<< [apiv2][status] POST http://127.0.0.1:8080/emulator/v1/projects/ecrphmsb/eventarcTrigger?eventarcTriggerId=us-central1-handleCuota-0 200
[debug] [2023-08-17T12:58:07.329Z] <<< [apiv2][body] POST http://127.0.0.1:8080/emulator/v1/projects/ecrphmsb/eventarcTrigger?eventarcTriggerId=us-central1-handleCuota-0 {"eventType":"google.cloud.firestore.document.v1.written","database":"(default)","namespace":"(default)","document":{"value":"cuotas/{cuotaId}","matchType":"PATH_PATTERN"}}
[info] +  functions[us-central1-handleCuota]: firestore function initialized. {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mfirestore\u001b[22m function initialized."}}
[debug] [2023-08-17T12:58:07.329Z] Found a v2 firestore trigger.
[debug] [2023-08-17T12:58:07.330Z] addFirestoreTrigger "{\"eventType\":\"google.cloud.firestore.document.v1.updated\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":{\"value\":\"students/{studentId}\",\"matchType\":\"PATH_PATTERN\"}}"
[debug] [2023-08-17T12:58:07.330Z] >>> [apiv2][query] POST http://127.0.0.1:8080/emulator/v1/projects/ecrphmsb/eventarcTrigger?eventarcTriggerId=us-central1-handleNewDiscount-0 [none]
[debug] [2023-08-17T12:58:07.330Z] >>> [apiv2][body] POST http://127.0.0.1:8080/emulator/v1/projects/ecrphmsb/eventarcTrigger?eventarcTriggerId=us-central1-handleNewDiscount-0 "{\"eventType\":\"google.cloud.firestore.document.v1.updated\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":{\"value\":\"students/{studentId}\",\"matchType\":\"PATH_PATTERN\"}}"
[debug] [2023-08-17T12:58:07.332Z] Aug 17, 2023 8:58:07 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 8:58:07 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T12:58:07.335Z] <<< [apiv2][status] POST http://127.0.0.1:8080/emulator/v1/projects/ecrphmsb/eventarcTrigger?eventarcTriggerId=us-central1-handleNewDiscount-0 200
[debug] [2023-08-17T12:58:07.335Z] <<< [apiv2][body] POST http://127.0.0.1:8080/emulator/v1/projects/ecrphmsb/eventarcTrigger?eventarcTriggerId=us-central1-handleNewDiscount-0 {"eventType":"google.cloud.firestore.document.v1.updated","database":"(default)","namespace":"(default)","document":{"value":"students/{studentId}","matchType":"PATH_PATTERN"}}
[info] +  functions[us-central1-handleNewDiscount]: firestore function initialized. {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mfirestore\u001b[22m function initialized."}}
[debug] [2023-08-17T12:58:07.336Z] Found a v2 firestore trigger.
[debug] [2023-08-17T12:58:07.336Z] addFirestoreTrigger "{\"eventType\":\"google.cloud.firestore.document.v1.written\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":{\"value\":\"students/{studentId}/cuota_payments/{cuotaId}\",\"matchType\":\"PATH_PATTERN\"}}"
[debug] [2023-08-17T12:58:07.336Z] >>> [apiv2][query] POST http://127.0.0.1:8080/emulator/v1/projects/ecrphmsb/eventarcTrigger?eventarcTriggerId=us-central1-handlePayment-0 [none]
[debug] [2023-08-17T12:58:07.336Z] >>> [apiv2][body] POST http://127.0.0.1:8080/emulator/v1/projects/ecrphmsb/eventarcTrigger?eventarcTriggerId=us-central1-handlePayment-0 "{\"eventType\":\"google.cloud.firestore.document.v1.written\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":{\"value\":\"students/{studentId}/cuota_payments/{cuotaId}\",\"matchType\":\"PATH_PATTERN\"}}"
[debug] [2023-08-17T12:58:07.338Z] Aug 17, 2023 8:58:07 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 8:58:07 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T12:58:07.342Z] <<< [apiv2][status] POST http://127.0.0.1:8080/emulator/v1/projects/ecrphmsb/eventarcTrigger?eventarcTriggerId=us-central1-handlePayment-0 200
[debug] [2023-08-17T12:58:07.342Z] <<< [apiv2][body] POST http://127.0.0.1:8080/emulator/v1/projects/ecrphmsb/eventarcTrigger?eventarcTriggerId=us-central1-handlePayment-0 {"eventType":"google.cloud.firestore.document.v1.written","database":"(default)","namespace":"(default)","document":{"value":"students/{studentId}/cuota_payments/{cuotaId}","matchType":"PATH_PATTERN"}}
[info] +  functions[us-central1-handlePayment]: firestore function initialized. {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mfirestore\u001b[22m function initialized."}}
[debug] [2023-08-17T12:58:07.342Z] Found a v2 firestore trigger.
[debug] [2023-08-17T12:58:07.342Z] addFirestoreTrigger "{\"eventType\":\"google.cloud.firestore.document.v1.created\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":{\"value\":\"students/{studentId}\",\"matchType\":\"PATH_PATTERN\"}}"
[debug] [2023-08-17T12:58:07.343Z] >>> [apiv2][query] POST http://127.0.0.1:8080/emulator/v1/projects/ecrphmsb/eventarcTrigger?eventarcTriggerId=us-central1-handleStudent-0 [none]
[debug] [2023-08-17T12:58:07.343Z] >>> [apiv2][body] POST http://127.0.0.1:8080/emulator/v1/projects/ecrphmsb/eventarcTrigger?eventarcTriggerId=us-central1-handleStudent-0 "{\"eventType\":\"google.cloud.firestore.document.v1.created\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":{\"value\":\"students/{studentId}\",\"matchType\":\"PATH_PATTERN\"}}"
[debug] [2023-08-17T12:58:07.344Z] Aug 17, 2023 8:58:07 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 8:58:07 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T12:58:07.348Z] <<< [apiv2][status] POST http://127.0.0.1:8080/emulator/v1/projects/ecrphmsb/eventarcTrigger?eventarcTriggerId=us-central1-handleStudent-0 200
[debug] [2023-08-17T12:58:07.348Z] <<< [apiv2][body] POST http://127.0.0.1:8080/emulator/v1/projects/ecrphmsb/eventarcTrigger?eventarcTriggerId=us-central1-handleStudent-0 {"eventType":"google.cloud.firestore.document.v1.created","database":"(default)","namespace":"(default)","document":{"value":"students/{studentId}","matchType":"PATH_PATTERN"}}
[info] +  functions[us-central1-handleStudent]: firestore function initialized. {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mfirestore\u001b[22m function initialized."}}
[info] 
┌─────────────────────────────────────────────────────────────┐
│ ✔  All emulators ready! It is now safe to connect your app. │
│ i  View Emulator UI at http://127.0.0.1:4000/               │
└─────────────────────────────────────────────────────────────┘

┌────────────┬────────────────┬──────────────────────────────────┐
│ Emulator   │ Host:Port      │ View in Emulator UI              │
├────────────┼────────────────┼──────────────────────────────────┤
│ Functions  │ 127.0.0.1:5001 │ http://127.0.0.1:4000/functions  │
├────────────┼────────────────┼──────────────────────────────────┤
│ Firestore  │ 127.0.0.1:8080 │ http://127.0.0.1:4000/firestore  │
├────────────┼────────────────┼──────────────────────────────────┤
│ Database   │ 127.0.0.1:9000 │ http://127.0.0.1:4000/database   │
├────────────┼────────────────┼──────────────────────────────────┤
│ Hosting    │ 127.0.0.1:5000 │ n/a                              │
├────────────┼────────────────┼──────────────────────────────────┤
│ Eventarc   │ 127.0.0.1:9299 │ n/a                              │
├────────────┼────────────────┼──────────────────────────────────┤
│ Extensions │ 127.0.0.1:5001 │ http://127.0.0.1:4000/extensions │
└────────────┴────────────────┴──────────────────────────────────┘
  Emulator Hub running at 127.0.0.1:4400
  Other reserved ports: 4500, 9150
┌─────────────────────────┬──────────────────────────────────────┬───────────────────────────────────────────────────────┐
│ Extension Instance Name │ Extension Ref                        │ View in Emulator UI                                   │
├─────────────────────────┼──────────────────────────────────────┼───────────────────────────────────────────────────────┤
│ firestore-send-email    │ firebase/firestore-send-email@0.1.22 │ http://127.0.0.1:4000/extensions/firestore-send-email │
└─────────────────────────┴──────────────────────────────────────┴───────────────────────────────────────────────────────┘
Issues? Report them at https://github.com/firebase/firebase-tools/issues and attach the *-debug.log files.
 
[debug] [2023-08-17T12:58:13.273Z] Aug 17, 2023 8:58:13 AM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler initChannel
INFO: Connected to new websocket client
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 8:58:13 AM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler initChannel\r\nINFO: Connected to new websocket client\r\n"}}
[debug] [2023-08-17T12:58:13.756Z] Aug 17, 2023 8:58:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 8:58:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T12:58:13.760Z] Aug 17, 2023 8:58:13 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 8:58:13 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T12:58:13.773Z] Aug 17, 2023 8:58:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 8:58:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T12:58:13.799Z] Aug 17, 2023 8:58:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 8:58:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T12:58:13.799Z] Aug 17, 2023 8:58:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 8:58:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T12:58:13.805Z] Aug 17, 2023 8:58:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 8:58:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T12:58:13.831Z] Aug 17, 2023 8:58:13 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 8:58:13 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T12:58:13.994Z] Aug 17, 2023 8:58:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 8:58:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T12:58:16.654Z] [work-queue] {"queuedWork":["/ecrphmsb/us-central1/calculateAmountOwedByAllHouseholds-2023-08-17T12:58:16.654Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T12:58:16.654Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/ecrphmsb/us-central1/calculateAmountOwedByAllHouseholds-2023-08-17T12:58:16.654Z"],"workRunningCount":1}
[debug] [2023-08-17T12:58:16.655Z] Accepted request OPTIONS /ecrphmsb/us-central1/calculateAmountOwedByAllHouseholds --> us-central1-calculateAmountOwedByAllHouseholds
[debug] [2023-08-17T12:58:16.655Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T12:58:16.655Z] [functions] Got req.url=/ecrphmsb/us-central1/calculateAmountOwedByAllHouseholds, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/ecrphmsb/us-central1/calculateAmountOwedByAllHouseholds, mapping to path=/"}}
[debug] [2023-08-17T12:58:16.662Z] [worker-pool] addWorker(us-central1-calculateAmountOwedByAllHouseholds) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-calculateAmountOwedByAllHouseholds)"}}
[debug] [2023-08-17T12:58:16.662Z] [worker-pool] Adding worker with key us-central1-calculateAmountOwedByAllHouseholds, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-calculateAmountOwedByAllHouseholds, total=1"}}
[debug] [2023-08-17T12:58:17.447Z] [runtime-status] [20156] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"C:\\Users\\danie\\Documents\\GitHub\\PagosColegio\\colegio\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"[runtime-status] [20156] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"C:\\\\Users\\\\danie\\\\Documents\\\\GitHub\\\\PagosColegio\\\\colegio\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2023-08-17T12:58:17.447Z] [runtime-status] [20156] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"C:\\Users\\danie\\Documents\\GitHub\\PagosColegio\\colegio\\node_modules\\firebase-functions\\lib\\v1\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"[runtime-status] [20156] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"C:\\\\Users\\\\danie\\\\Documents\\\\GitHub\\\\PagosColegio\\\\colegio\\\\node_modules\\\\firebase-functions\\\\lib\\\\v1\\\\index.js\"}"}}
[debug] [2023-08-17T12:58:17.447Z] [runtime-status] [20156] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"[runtime-status] [20156] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-08-17T12:58:17.448Z] [runtime-status] [20156] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"C:\\Users\\danie\\Documents\\GitHub\\PagosColegio\\colegio\\node_modules\\firebase-functions\\lib\\v1\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"[runtime-status] [20156] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"C:\\\\Users\\\\danie\\\\Documents\\\\GitHub\\\\PagosColegio\\\\colegio\\\\node_modules\\\\firebase-functions\\\\lib\\\\v1\\\\index.js\"}"}}
[debug] [2023-08-17T12:58:17.616Z] [runtime-status] [20156] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"[runtime-status] [20156] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-08-17T12:58:17.616Z] [runtime-status] [20156] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"C:\\Users\\danie\\Documents\\GitHub\\PagosColegio\\colegio\\node_modules\\firebase-functions\\lib\\v1\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"[runtime-status] [20156] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"C:\\\\Users\\\\danie\\\\Documents\\\\GitHub\\\\PagosColegio\\\\colegio\\\\node_modules\\\\firebase-functions\\\\lib\\\\v1\\\\index.js\"}}"}}
[debug] [2023-08-17T12:58:17.617Z] [runtime-status] [20156] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"C:\\Users\\danie\\Documents\\GitHub\\PagosColegio\\colegio\\node_modules\\firebase-functions\\lib\\v1\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"[runtime-status] [20156] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"C:\\\\Users\\\\danie\\\\Documents\\\\GitHub\\\\PagosColegio\\\\colegio\\\\node_modules\\\\firebase-functions\\\\lib\\\\v1\\\\index.js\"}"}}
[debug] [2023-08-17T12:58:17.618Z] [runtime-status] [20156] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"C:\\Users\\danie\\Documents\\GitHub\\PagosColegio\\colegio\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"[runtime-status] [20156] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"C:\\\\Users\\\\danie\\\\Documents\\\\GitHub\\\\PagosColegio\\\\colegio\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2023-08-17T12:58:17.619Z] [runtime-status] [20156] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"C:\\Users\\danie\\Documents\\GitHub\\PagosColegio\\colegio\\node_modules\\firebase-functions\\lib\\v1\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"[runtime-status] [20156] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"C:\\\\Users\\\\danie\\\\Documents\\\\GitHub\\\\PagosColegio\\\\colegio\\\\node_modules\\\\firebase-functions\\\\lib\\\\v1\\\\index.js\"}"}}
[debug] [2023-08-17T12:58:17.620Z] [runtime-status] [20156] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.10.1","resolution":"C:\\Users\\danie\\Documents\\GitHub\\PagosColegio\\colegio\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"[runtime-status] [20156] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"C:\\\\Users\\\\danie\\\\Documents\\\\GitHub\\\\PagosColegio\\\\colegio\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[debug] [2023-08-17T12:58:17.660Z] [runtime-status] [20156] Functions runtime initialized. {"cwd":"C:\\Users\\danie\\Documents\\GitHub\\PagosColegio\\colegio","node_version":"18.17.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"[runtime-status] [20156] Functions runtime initialized. {\"cwd\":\"C:\\\\Users\\\\danie\\\\Documents\\\\GitHub\\\\PagosColegio\\\\colegio\",\"node_version\":\"18.17.0\"}"}}
[debug] [2023-08-17T12:58:17.660Z] [runtime-status] [20156] Listening to port: \\?\pipe\fire_emu_3bbff6bdf790d460 {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"[runtime-status] [20156] Listening to port: \\\\?\\pipe\\fire_emu_3bbff6bdf790d460"}}
[debug] [2023-08-17T12:58:17.664Z] [worker-us-central1-calculateAmountOwedByAllHouseholds-f0a4f37e-9cb5-4c31-b630-0ae08fa9f132]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"[worker-us-central1-calculateAmountOwedByAllHouseholds-f0a4f37e-9cb5-4c31-b630-0ae08fa9f132]: IDLE"}}
[debug] [2023-08-17T12:58:17.664Z] [worker-pool] submitRequest(triggerId=us-central1-calculateAmountOwedByAllHouseholds) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-calculateAmountOwedByAllHouseholds)"}}
[info] i  functions: Beginning execution of "us-central1-calculateAmountOwedByAllHouseholds" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"Beginning execution of \"us-central1-calculateAmountOwedByAllHouseholds\""}}
[debug] [2023-08-17T12:58:17.665Z] [worker-us-central1-calculateAmountOwedByAllHouseholds-f0a4f37e-9cb5-4c31-b630-0ae08fa9f132]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"[worker-us-central1-calculateAmountOwedByAllHouseholds-f0a4f37e-9cb5-4c31-b630-0ae08fa9f132]: BUSY"}}
[debug] [2023-08-17T12:58:17.668Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-calculateAmountOwedByAllHouseholds" in 3.1001ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"Finished \"us-central1-calculateAmountOwedByAllHouseholds\" in 3.1001ms"}}
[debug] [2023-08-17T12:58:17.668Z] [worker-us-central1-calculateAmountOwedByAllHouseholds-f0a4f37e-9cb5-4c31-b630-0ae08fa9f132]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"[worker-us-central1-calculateAmountOwedByAllHouseholds-f0a4f37e-9cb5-4c31-b630-0ae08fa9f132]: IDLE"}}
[debug] [2023-08-17T12:58:17.668Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T12:58:17.668Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T12:58:17.668Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T12:58:17.669Z] [work-queue] {"queuedWork":["/ecrphmsb/us-central1/calculateAmountOwedByAllHouseholds-2023-08-17T12:58:17.669Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T12:58:17.669Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/ecrphmsb/us-central1/calculateAmountOwedByAllHouseholds-2023-08-17T12:58:17.669Z"],"workRunningCount":1}
[debug] [2023-08-17T12:58:17.669Z] Accepted request POST /ecrphmsb/us-central1/calculateAmountOwedByAllHouseholds --> us-central1-calculateAmountOwedByAllHouseholds
[debug] [2023-08-17T12:58:17.669Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T12:58:17.669Z] [functions] Got req.url=/ecrphmsb/us-central1/calculateAmountOwedByAllHouseholds, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/ecrphmsb/us-central1/calculateAmountOwedByAllHouseholds, mapping to path=/"}}
[debug] [2023-08-17T12:58:17.669Z] [worker-pool] submitRequest(triggerId=us-central1-calculateAmountOwedByAllHouseholds) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-calculateAmountOwedByAllHouseholds)"}}
[info] i  functions: Beginning execution of "us-central1-calculateAmountOwedByAllHouseholds" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"Beginning execution of \"us-central1-calculateAmountOwedByAllHouseholds\""}}
[debug] [2023-08-17T12:58:17.670Z] [worker-us-central1-calculateAmountOwedByAllHouseholds-f0a4f37e-9cb5-4c31-b630-0ae08fa9f132]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"[worker-us-central1-calculateAmountOwedByAllHouseholds-f0a4f37e-9cb5-4c31-b630-0ae08fa9f132]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  Starting the call {"user":"Starting the call","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"\u001b[90m> \u001b[39m Starting the call"}}
[debug] [2023-08-17T12:58:17.899Z] Aug 17, 2023 8:58:17 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 8:58:17 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected HTTP/2 connection.\r\n"}}
[info] >  {"severity":"ERROR","message":"Unhandled error ReferenceError: amountOwed is not defined\n    at file:///C:/Users/danie/Documents/GitHub/PagosColegio/colegio/functions/calculateAmountOwedByAllHouseholds.js:97:21\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async C:\\Users\\danie\\Documents\\GitHub\\PagosColegio\\colegio\\node_modules\\firebase-functions\\lib\\common\\providers\\https.js:467:26\n    at async runFunction (C:\\Users\\danie\\AppData\\Local\\Yarn\\Data\\global\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\danie\\AppData\\Local\\Yarn\\Data\\global\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\danie\\AppData\\Local\\Yarn\\Data\\global\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:693:21"} {"user":{"severity":"ERROR","message":"Unhandled error ReferenceError: amountOwed is not defined\n    at file:///C:/Users/danie/Documents/GitHub/PagosColegio/colegio/functions/calculateAmountOwedByAllHouseholds.js:97:21\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async C:\\Users\\danie\\Documents\\GitHub\\PagosColegio\\colegio\\node_modules\\firebase-functions\\lib\\common\\providers\\https.js:467:26\n    at async runFunction (C:\\Users\\danie\\AppData\\Local\\Yarn\\Data\\global\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\danie\\AppData\\Local\\Yarn\\Data\\global\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\danie\\AppData\\Local\\Yarn\\Data\\global\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:693:21"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"Unhandled error ReferenceError: amountOwed is not defined\\n    at file:///C:/Users/danie/Documents/GitHub/PagosColegio/colegio/functions/calculateAmountOwedByAllHouseholds.js:97:21\\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\\n    at async C:\\\\Users\\\\danie\\\\Documents\\\\GitHub\\\\PagosColegio\\\\colegio\\\\node_modules\\\\firebase-functions\\\\lib\\\\common\\\\providers\\\\https.js:467:26\\n    at async runFunction (C:\\\\Users\\\\danie\\\\AppData\\\\Local\\\\Yarn\\\\Data\\\\global\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:506:9)\\n    at async runHTTPS (C:\\\\Users\\\\danie\\\\AppData\\\\Local\\\\Yarn\\\\Data\\\\global\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:531:5)\\n    at async C:\\\\Users\\\\danie\\\\AppData\\\\Local\\\\Yarn\\\\Data\\\\global\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:693:21\"}"}}
[debug] [2023-08-17T12:58:21.851Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-calculateAmountOwedByAllHouseholds" in 4181.7578ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"Finished \"us-central1-calculateAmountOwedByAllHouseholds\" in 4181.7578ms"}}
[debug] [2023-08-17T12:58:21.852Z] [worker-us-central1-calculateAmountOwedByAllHouseholds-f0a4f37e-9cb5-4c31-b630-0ae08fa9f132]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"[worker-us-central1-calculateAmountOwedByAllHouseholds-f0a4f37e-9cb5-4c31-b630-0ae08fa9f132]: IDLE"}}
[debug] [2023-08-17T12:58:21.852Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T12:58:21.852Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T12:58:21.852Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T12:58:36.875Z] File C:\Users\danie\Documents\GitHub\PagosColegio\colegio\functions\calculateAmountOwedByAllHouseholds.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\danie\\Documents\\GitHub\\PagosColegio\\colegio\\functions\\calculateAmountOwedByAllHouseholds.js changed, reloading triggers"}}
[debug] [2023-08-17T12:58:37.889Z] Validating nodejs source
[debug] [2023-08-17T12:58:38.803Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "type": "module",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "firebase-admin": "^11.8.0",
    "firebase-functions": "^4.3.1"
  },
  "devDependencies": {
    "eslint": "^8.15.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true
}
[debug] [2023-08-17T12:58:38.803Z] Building nodejs source
[debug] [2023-08-17T12:58:38.803Z] Failed to find version of module node: reached end of search path C:\Users\danie\Documents\GitHub\PagosColegio\colegio\node_modules
[info] +  functions: Using node@18 from host. 
[debug] [2023-08-17T12:58:38.804Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-08-17T12:58:38.808Z] Found firebase-functions binary at 'C:\Users\danie\Documents\GitHub\PagosColegio\colegio\node_modules\.bin\firebase-functions'
[info] Serving at port 8114

[debug] [2023-08-17T12:58:39.129Z] Got response from /__/functions.yaml {"endpoints":{"calculateAmountOwedByAllHouseholds":{"availableMemoryMb":null,"timeoutSeconds":300,"minInstances":null,"maxInstances":10,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"callableTrigger":{},"entryPoint":"calculateAmountOwedByAllHouseholds"},"handleCuota":{"availableMemoryMb":null,"timeoutSeconds":300,"minInstances":null,"maxInstances":10,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.written","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"cuotas/{cuotaId}"},"retry":false},"entryPoint":"handleCuota"},"handleNewDiscount":{"availableMemoryMb":null,"timeoutSeconds":300,"minInstances":null,"maxInstances":10,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.updated","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"students/{studentId}"},"retry":false},"entryPoint":"handleNewDiscount"},"handlePayment":{"availableMemoryMb":null,"timeoutSeconds":300,"minInstances":null,"maxInstances":10,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.written","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"students/{studentId}/cuota_payments/{cuotaId}"},"retry":false},"entryPoint":"handlePayment"},"handleStudent":{"availableMemoryMb":null,"timeoutSeconds":300,"minInstances":null,"maxInstances":10,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.created","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"students/{studentId}"},"retry":false},"entryPoint":"handleStudent"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] shutdown requested via /__/quitquitquit

[info] +  functions: Loaded functions definitions from source: calculateAmountOwedByAllHouseholds, handleCuota, handleNewDiscount, handlePayment, handleStudent. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: calculateAmountOwedByAllHouseholds, handleCuota, handleNewDiscount, handlePayment, handleStudent."}}
[debug] [2023-08-17T12:58:39.141Z] [worker-pool] Shutting down IDLE worker (us-central1-calculateAmountOwedByAllHouseholds) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-calculateAmountOwedByAllHouseholds)"}}
[debug] [2023-08-17T12:58:39.141Z] [worker-us-central1-calculateAmountOwedByAllHouseholds-f0a4f37e-9cb5-4c31-b630-0ae08fa9f132]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"[worker-us-central1-calculateAmountOwedByAllHouseholds-f0a4f37e-9cb5-4c31-b630-0ae08fa9f132]: FINISHING"}}
[debug] [2023-08-17T12:58:39.143Z] Aug 17, 2023 8:58:39 AM io.netty.channel.DefaultChannelPipeline onUnhandledInboundException
WARNING: An exceptionCaught() event was fired, and it reached at the tail of the pipeline. It usually means the last handler in the pipeline did not handle the exception.
java.io.IOException: An existing connection was forcibly closed by the remote host
	at java.base/sun.nio.ch.SocketDispatcher.read0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.read(SocketDispatcher.java:43)
	at java.base/sun.nio.ch.IOUtil.readIntoNativeBuffer(IOUtil.java:276)
	at java.base/sun.nio.ch.IOUtil.read(IOUtil.java:233)
	at java.base/sun.nio.ch.IOUtil.read(IOUtil.java:223)
	at java.base/sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:356)
	at io.netty.buffer.PooledByteBuf.setBytes(PooledByteBuf.java:259)
	at io.netty.buffer.AbstractByteBuf.writeBytes(AbstractByteBuf.java:1132)
	at io.netty.channel.socket.nio.NioSocketChannel.doReadBytes(NioSocketChannel.java:357)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:151)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:829)

 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 8:58:39 AM io.netty.channel.DefaultChannelPipeline onUnhandledInboundException\r\nWARNING: An exceptionCaught() event was fired, and it reached at the tail of the pipeline. It usually means the last handler in the pipeline did not handle the exception.\r\njava.io.IOException: An existing connection was forcibly closed by the remote host\r\n\tat java.base/sun.nio.ch.SocketDispatcher.read0(Native Method)\r\n\tat java.base/sun.nio.ch.SocketDispatcher.read(SocketDispatcher.java:43)\r\n\tat java.base/sun.nio.ch.IOUtil.readIntoNativeBuffer(IOUtil.java:276)\r\n\tat java.base/sun.nio.ch.IOUtil.read(IOUtil.java:233)\r\n\tat java.base/sun.nio.ch.IOUtil.read(IOUtil.java:223)\r\n\tat java.base/sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:356)\r\n\tat io.netty.buffer.PooledByteBuf.setBytes(PooledByteBuf.java:259)\r\n\tat io.netty.buffer.AbstractByteBuf.writeBytes(AbstractByteBuf.java:1132)\r\n\tat io.netty.channel.socket.nio.NioSocketChannel.doReadBytes(NioSocketChannel.java:357)\r\n\tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:151)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)\r\n\tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\r\n\tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n\tat java.base/java.lang.Thread.run(Thread.java:829)\r\n\r\n"}}
[debug] [2023-08-17T12:58:39.148Z] [worker-us-central1-calculateAmountOwedByAllHouseholds-f0a4f37e-9cb5-4c31-b630-0ae08fa9f132]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"[worker-us-central1-calculateAmountOwedByAllHouseholds-f0a4f37e-9cb5-4c31-b630-0ae08fa9f132]: exited"}}
[debug] [2023-08-17T12:58:39.148Z] [worker-us-central1-calculateAmountOwedByAllHouseholds-f0a4f37e-9cb5-4c31-b630-0ae08fa9f132]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"[worker-us-central1-calculateAmountOwedByAllHouseholds-f0a4f37e-9cb5-4c31-b630-0ae08fa9f132]: FINISHED"}}
[debug] [2023-08-17T12:58:42.016Z] [work-queue] {"queuedWork":["/ecrphmsb/us-central1/calculateAmountOwedByAllHouseholds-2023-08-17T12:58:42.016Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T12:58:42.016Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/ecrphmsb/us-central1/calculateAmountOwedByAllHouseholds-2023-08-17T12:58:42.016Z"],"workRunningCount":1}
[debug] [2023-08-17T12:58:42.016Z] Accepted request OPTIONS /ecrphmsb/us-central1/calculateAmountOwedByAllHouseholds --> us-central1-calculateAmountOwedByAllHouseholds
[debug] [2023-08-17T12:58:42.016Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T12:58:42.016Z] [functions] Got req.url=/ecrphmsb/us-central1/calculateAmountOwedByAllHouseholds, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/ecrphmsb/us-central1/calculateAmountOwedByAllHouseholds, mapping to path=/"}}
[debug] [2023-08-17T12:58:42.016Z] [worker-pool] Cleaned up workers for us-central1-calculateAmountOwedByAllHouseholds: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-calculateAmountOwedByAllHouseholds: 1 --> 0"}}
[debug] [2023-08-17T12:58:42.021Z] [worker-pool] addWorker(us-central1-calculateAmountOwedByAllHouseholds) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-calculateAmountOwedByAllHouseholds)"}}
[debug] [2023-08-17T12:58:42.021Z] [worker-pool] Adding worker with key us-central1-calculateAmountOwedByAllHouseholds, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-calculateAmountOwedByAllHouseholds, total=1"}}
[debug] [2023-08-17T12:58:42.802Z] [runtime-status] [7840] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"C:\\Users\\danie\\Documents\\GitHub\\PagosColegio\\colegio\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"[runtime-status] [7840] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"C:\\\\Users\\\\danie\\\\Documents\\\\GitHub\\\\PagosColegio\\\\colegio\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2023-08-17T12:58:42.803Z] [runtime-status] [7840] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"C:\\Users\\danie\\Documents\\GitHub\\PagosColegio\\colegio\\node_modules\\firebase-functions\\lib\\v1\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"[runtime-status] [7840] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"C:\\\\Users\\\\danie\\\\Documents\\\\GitHub\\\\PagosColegio\\\\colegio\\\\node_modules\\\\firebase-functions\\\\lib\\\\v1\\\\index.js\"}"}}
[debug] [2023-08-17T12:58:42.804Z] [runtime-status] [7840] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"[runtime-status] [7840] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-08-17T12:58:42.804Z] [runtime-status] [7840] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"C:\\Users\\danie\\Documents\\GitHub\\PagosColegio\\colegio\\node_modules\\firebase-functions\\lib\\v1\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"[runtime-status] [7840] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"C:\\\\Users\\\\danie\\\\Documents\\\\GitHub\\\\PagosColegio\\\\colegio\\\\node_modules\\\\firebase-functions\\\\lib\\\\v1\\\\index.js\"}"}}
[debug] [2023-08-17T12:58:42.970Z] [runtime-status] [7840] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"[runtime-status] [7840] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-08-17T12:58:42.970Z] [runtime-status] [7840] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"C:\\Users\\danie\\Documents\\GitHub\\PagosColegio\\colegio\\node_modules\\firebase-functions\\lib\\v1\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"[runtime-status] [7840] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"C:\\\\Users\\\\danie\\\\Documents\\\\GitHub\\\\PagosColegio\\\\colegio\\\\node_modules\\\\firebase-functions\\\\lib\\\\v1\\\\index.js\"}}"}}
[debug] [2023-08-17T12:58:42.970Z] [runtime-status] [7840] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"C:\\Users\\danie\\Documents\\GitHub\\PagosColegio\\colegio\\node_modules\\firebase-functions\\lib\\v1\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"[runtime-status] [7840] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"C:\\\\Users\\\\danie\\\\Documents\\\\GitHub\\\\PagosColegio\\\\colegio\\\\node_modules\\\\firebase-functions\\\\lib\\\\v1\\\\index.js\"}"}}
[debug] [2023-08-17T12:58:42.971Z] [runtime-status] [7840] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"C:\\Users\\danie\\Documents\\GitHub\\PagosColegio\\colegio\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"[runtime-status] [7840] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"C:\\\\Users\\\\danie\\\\Documents\\\\GitHub\\\\PagosColegio\\\\colegio\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2023-08-17T12:58:42.973Z] [runtime-status] [7840] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"C:\\Users\\danie\\Documents\\GitHub\\PagosColegio\\colegio\\node_modules\\firebase-functions\\lib\\v1\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"[runtime-status] [7840] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"C:\\\\Users\\\\danie\\\\Documents\\\\GitHub\\\\PagosColegio\\\\colegio\\\\node_modules\\\\firebase-functions\\\\lib\\\\v1\\\\index.js\"}"}}
[debug] [2023-08-17T12:58:42.973Z] [runtime-status] [7840] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.10.1","resolution":"C:\\Users\\danie\\Documents\\GitHub\\PagosColegio\\colegio\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"[runtime-status] [7840] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"C:\\\\Users\\\\danie\\\\Documents\\\\GitHub\\\\PagosColegio\\\\colegio\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[debug] [2023-08-17T12:58:43.014Z] [runtime-status] [7840] Functions runtime initialized. {"cwd":"C:\\Users\\danie\\Documents\\GitHub\\PagosColegio\\colegio","node_version":"18.17.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"[runtime-status] [7840] Functions runtime initialized. {\"cwd\":\"C:\\\\Users\\\\danie\\\\Documents\\\\GitHub\\\\PagosColegio\\\\colegio\",\"node_version\":\"18.17.0\"}"}}
[debug] [2023-08-17T12:58:43.014Z] [runtime-status] [7840] Listening to port: \\?\pipe\fire_emu_baaee5dae8343c78 {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"[runtime-status] [7840] Listening to port: \\\\?\\pipe\\fire_emu_baaee5dae8343c78"}}
[debug] [2023-08-17T12:58:43.018Z] [worker-us-central1-calculateAmountOwedByAllHouseholds-adb4eb03-d51f-4437-a528-edaea58500cb]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"[worker-us-central1-calculateAmountOwedByAllHouseholds-adb4eb03-d51f-4437-a528-edaea58500cb]: IDLE"}}
[debug] [2023-08-17T12:58:43.018Z] [worker-pool] submitRequest(triggerId=us-central1-calculateAmountOwedByAllHouseholds) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-calculateAmountOwedByAllHouseholds)"}}
[info] i  functions: Beginning execution of "us-central1-calculateAmountOwedByAllHouseholds" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"Beginning execution of \"us-central1-calculateAmountOwedByAllHouseholds\""}}
[debug] [2023-08-17T12:58:43.019Z] [worker-us-central1-calculateAmountOwedByAllHouseholds-adb4eb03-d51f-4437-a528-edaea58500cb]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"[worker-us-central1-calculateAmountOwedByAllHouseholds-adb4eb03-d51f-4437-a528-edaea58500cb]: BUSY"}}
[debug] [2023-08-17T12:58:43.022Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-calculateAmountOwedByAllHouseholds" in 3.3349ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"Finished \"us-central1-calculateAmountOwedByAllHouseholds\" in 3.3349ms"}}
[debug] [2023-08-17T12:58:43.022Z] [worker-us-central1-calculateAmountOwedByAllHouseholds-adb4eb03-d51f-4437-a528-edaea58500cb]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"[worker-us-central1-calculateAmountOwedByAllHouseholds-adb4eb03-d51f-4437-a528-edaea58500cb]: IDLE"}}
[debug] [2023-08-17T12:58:43.022Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T12:58:43.022Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T12:58:43.022Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T12:58:43.023Z] [work-queue] {"queuedWork":["/ecrphmsb/us-central1/calculateAmountOwedByAllHouseholds-2023-08-17T12:58:43.023Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T12:58:43.023Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/ecrphmsb/us-central1/calculateAmountOwedByAllHouseholds-2023-08-17T12:58:43.023Z"],"workRunningCount":1}
[debug] [2023-08-17T12:58:43.023Z] Accepted request POST /ecrphmsb/us-central1/calculateAmountOwedByAllHouseholds --> us-central1-calculateAmountOwedByAllHouseholds
[debug] [2023-08-17T12:58:43.023Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T12:58:43.023Z] [functions] Got req.url=/ecrphmsb/us-central1/calculateAmountOwedByAllHouseholds, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/ecrphmsb/us-central1/calculateAmountOwedByAllHouseholds, mapping to path=/"}}
[debug] [2023-08-17T12:58:43.023Z] [worker-pool] submitRequest(triggerId=us-central1-calculateAmountOwedByAllHouseholds) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-calculateAmountOwedByAllHouseholds)"}}
[info] i  functions: Beginning execution of "us-central1-calculateAmountOwedByAllHouseholds" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"Beginning execution of \"us-central1-calculateAmountOwedByAllHouseholds\""}}
[debug] [2023-08-17T12:58:43.023Z] [worker-us-central1-calculateAmountOwedByAllHouseholds-adb4eb03-d51f-4437-a528-edaea58500cb]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"[worker-us-central1-calculateAmountOwedByAllHouseholds-adb4eb03-d51f-4437-a528-edaea58500cb]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  Starting the call {"user":"Starting the call","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"\u001b[90m> \u001b[39m Starting the call"}}
[debug] [2023-08-17T12:58:43.252Z] Aug 17, 2023 8:58:43 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 8:58:43 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T12:58:46.892Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-calculateAmountOwedByAllHouseholds" in 3869.0314ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"Finished \"us-central1-calculateAmountOwedByAllHouseholds\" in 3869.0314ms"}}
[debug] [2023-08-17T12:58:46.893Z] [worker-us-central1-calculateAmountOwedByAllHouseholds-adb4eb03-d51f-4437-a528-edaea58500cb]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"[worker-us-central1-calculateAmountOwedByAllHouseholds-adb4eb03-d51f-4437-a528-edaea58500cb]: IDLE"}}
[debug] [2023-08-17T12:58:46.893Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T12:58:46.893Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T12:58:46.893Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T12:58:54.892Z] Aug 17, 2023 8:58:54 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 8:58:54 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T12:58:54.896Z] Aug 17, 2023 8:58:54 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 8:58:54 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T12:58:54.914Z] Aug 17, 2023 8:58:54 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 8:58:54 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T12:58:54.943Z] Aug 17, 2023 8:58:54 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 8:58:54 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T12:58:54.944Z] Aug 17, 2023 8:58:54 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 8:58:54 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T12:58:54.950Z] Aug 17, 2023 8:58:54 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 8:58:54 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T12:58:55.002Z] Aug 17, 2023 8:58:55 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 8:58:55 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T12:58:58.805Z] Aug 17, 2023 8:58:58 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 8:58:58 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T12:58:58.808Z] Aug 17, 2023 8:58:58 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 8:58:58 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T12:58:58.833Z] Aug 17, 2023 8:58:58 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 8:58:58 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T12:59:02.446Z] Aug 17, 2023 8:59:02 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 8:59:02 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T12:59:02.450Z] Aug 17, 2023 8:59:02 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 8:59:02 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T12:59:02.476Z] Aug 17, 2023 8:59:02 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 8:59:02 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T12:59:05.363Z] Aug 17, 2023 8:59:05 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 8:59:05 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T12:59:05.385Z] Aug 17, 2023 8:59:05 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 8:59:05 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T12:59:05.447Z] Aug 17, 2023 8:59:05 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 8:59:05 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T12:59:05.486Z] Aug 17, 2023 8:59:05 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 8:59:05 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:00:05.504Z] Aug 17, 2023 9:00:05 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:00:05 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:00:36.407Z] Aug 17, 2023 9:00:36 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:00:36 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:00:36.420Z] Aug 17, 2023 9:00:36 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:00:36 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:00:36.421Z] Aug 17, 2023 9:00:36 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:00:36 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:00:36.425Z] Aug 17, 2023 9:00:36 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:00:36 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T13:00:36.442Z] Aug 17, 2023 9:00:36 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:00:36 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T13:00:36.472Z] Aug 17, 2023 9:00:36 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:00:36 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T13:00:36.481Z] Aug 17, 2023 9:00:36 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:00:36 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:00:36.489Z] Aug 17, 2023 9:00:36 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:00:36 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:00:36.496Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T13:00:36.496Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T13:00:36.496Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T13:00:36.496Z"],"workRunningCount":1}
[debug] [2023-08-17T13:00:36.496Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T13:00:36.497Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T13:00:36.497Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T13:00:36.502Z] [worker-pool] addWorker(us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-handlePayment)"}}
[debug] [2023-08-17T13:00:36.502Z] [worker-pool] Adding worker with key us-central1-handlePayment, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-handlePayment, total=1"}}
[debug] [2023-08-17T13:00:36.508Z] Aug 17, 2023 9:00:36 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:00:36 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:00:36.510Z] Aug 17, 2023 9:00:36 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:00:36 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T13:00:36.520Z] Aug 17, 2023 9:00:36 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:00:36 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T13:00:36.541Z] Aug 17, 2023 9:00:36 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:00:36 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:00:36.543Z] Aug 17, 2023 9:00:36 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:00:36 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T13:00:36.552Z] Aug 17, 2023 9:00:36 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:00:36 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T13:00:36.583Z] Aug 17, 2023 9:00:36 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:00:36 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:00:36.628Z] Aug 17, 2023 9:00:36 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:00:36 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:00:36.665Z] Aug 17, 2023 9:00:36 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:00:36 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:00:37.321Z] [runtime-status] [20208] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"C:\\Users\\danie\\Documents\\GitHub\\PagosColegio\\colegio\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"C:\\\\Users\\\\danie\\\\Documents\\\\GitHub\\\\PagosColegio\\\\colegio\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2023-08-17T13:00:37.322Z] [runtime-status] [20208] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"C:\\Users\\danie\\Documents\\GitHub\\PagosColegio\\colegio\\node_modules\\firebase-functions\\lib\\v1\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"C:\\\\Users\\\\danie\\\\Documents\\\\GitHub\\\\PagosColegio\\\\colegio\\\\node_modules\\\\firebase-functions\\\\lib\\\\v1\\\\index.js\"}"}}
[debug] [2023-08-17T13:00:37.323Z] [runtime-status] [20208] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-08-17T13:00:37.323Z] [runtime-status] [20208] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"C:\\Users\\danie\\Documents\\GitHub\\PagosColegio\\colegio\\node_modules\\firebase-functions\\lib\\v1\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"C:\\\\Users\\\\danie\\\\Documents\\\\GitHub\\\\PagosColegio\\\\colegio\\\\node_modules\\\\firebase-functions\\\\lib\\\\v1\\\\index.js\"}"}}
[debug] [2023-08-17T13:00:37.489Z] [runtime-status] [20208] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-08-17T13:00:37.489Z] [runtime-status] [20208] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"C:\\Users\\danie\\Documents\\GitHub\\PagosColegio\\colegio\\node_modules\\firebase-functions\\lib\\v1\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"C:\\\\Users\\\\danie\\\\Documents\\\\GitHub\\\\PagosColegio\\\\colegio\\\\node_modules\\\\firebase-functions\\\\lib\\\\v1\\\\index.js\"}}"}}
[debug] [2023-08-17T13:00:37.489Z] [runtime-status] [20208] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"C:\\Users\\danie\\Documents\\GitHub\\PagosColegio\\colegio\\node_modules\\firebase-functions\\lib\\v1\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"C:\\\\Users\\\\danie\\\\Documents\\\\GitHub\\\\PagosColegio\\\\colegio\\\\node_modules\\\\firebase-functions\\\\lib\\\\v1\\\\index.js\"}"}}
[debug] [2023-08-17T13:00:37.490Z] [runtime-status] [20208] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"C:\\Users\\danie\\Documents\\GitHub\\PagosColegio\\colegio\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"C:\\\\Users\\\\danie\\\\Documents\\\\GitHub\\\\PagosColegio\\\\colegio\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2023-08-17T13:00:37.492Z] [runtime-status] [20208] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"C:\\Users\\danie\\Documents\\GitHub\\PagosColegio\\colegio\\node_modules\\firebase-functions\\lib\\v1\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"C:\\\\Users\\\\danie\\\\Documents\\\\GitHub\\\\PagosColegio\\\\colegio\\\\node_modules\\\\firebase-functions\\\\lib\\\\v1\\\\index.js\"}"}}
[debug] [2023-08-17T13:00:37.492Z] [runtime-status] [20208] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.10.1","resolution":"C:\\Users\\danie\\Documents\\GitHub\\PagosColegio\\colegio\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"C:\\\\Users\\\\danie\\\\Documents\\\\GitHub\\\\PagosColegio\\\\colegio\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[debug] [2023-08-17T13:00:37.532Z] [runtime-status] [20208] Functions runtime initialized. {"cwd":"C:\\Users\\danie\\Documents\\GitHub\\PagosColegio\\colegio","node_version":"18.17.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] Functions runtime initialized. {\"cwd\":\"C:\\\\Users\\\\danie\\\\Documents\\\\GitHub\\\\PagosColegio\\\\colegio\",\"node_version\":\"18.17.0\"}"}}
[debug] [2023-08-17T13:00:37.532Z] [runtime-status] [20208] Listening to port: \\?\pipe\fire_emu_7391ee7850434614 {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] Listening to port: \\\\?\\pipe\\fire_emu_7391ee7850434614"}}
[debug] [2023-08-17T13:00:37.574Z] Aug 17, 2023 9:00:37 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:00:37 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:00:37.576Z] Aug 17, 2023 9:00:37 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:00:37 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T13:00:37.605Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T13:00:37.605Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T13:00:37.606Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T13:00:37.610Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"a5b9030b-9510-49f1-a53d-24434a6d2438","subject":"documents/students/mrEePBhzCrCmcn1m7n7H/cuota_payments/0R9adu5ygBntxhplS1Mr","time":"2023-08-17T13:00:36.471927800Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/mrEePBhzCrCmcn1m7n7H/cuota_payments/0R9adu5ygBntxhplS1Mr","data":{"type":"Buffer","data":[10,147,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,48,82,57,97,100,117,53,121,103,66,110,116,120,104,112,108,83,49,77,114,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,20,10,5,65,108,105,97,115,18,11,138,1,8,70,101,98,114,117,97,114,121,18,11,10,5,77,111,110,116,111,18,2,16,50,18,102,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,86,50,84,10,20,10,5,65,108,105,97,115,18,11,138,1,8,70,101,98,114,117,97,114,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,199,231,158,6,10,14,10,2,116,111,18,8,82,6,8,192,248,245,159,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,110,88,65,88,100,48,110,89,87,78,90,90,113,74,116,121,90,116,53,90,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,199,231,158,6,10,14,10,2,116,111,18,8,82,6,8,192,248,245,159,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,50,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,0,18,28,10,10,108,97,115,116,85,112,100,97,116,101,18,14,82,12,8,244,179,248,166,6,16,128,197,225,210,1,26,11,8,220,178,248,166,6,16,136,196,181,118,34,12,8,244,179,248,166,6,16,224,155,130,215,1,18,227,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,48,82,57,97,100,117,53,121,103,66,110,116,120,104,112,108,83,49,77,114,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,20,10,5,65,108,105,97,115,18,11,138,1,8,70,101,98,114,117,97,114,121,18,11,10,5,77,111,110,116,111,18,2,16,50,18,102,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,86,50,84,10,20,10,5,65,108,105,97,115,18,11,138,1,8,70,101,98,114,117,97,114,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,199,231,158,6,10,14,10,2,116,111,18,8,82,6,8,192,248,245,159,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,110,88,65,88,100,48,110,89,87,78,90,90,113,74,116,121,90,116,53,90,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,199,231,158,6,10,14,10,2,116,111,18,8,82,6,8,192,248,245,159,6,26,11,8,220,178,248,166,6,16,136,196,181,118,34,11,8,220,178,248,166,6,16,136,196,181,118,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"a5b9030b-9510-49f1-a53d-24434a6d2438\",\"subject\":\"documents/students/mrEePBhzCrCmcn1m7n7H/cuota_payments/0R9adu5ygBntxhplS1Mr\",\"time\":\"2023-08-17T13:00:36.471927800Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/mrEePBhzCrCmcn1m7n7H/cuota_payments/0R9adu5ygBntxhplS1Mr\",\"data\":{\"type\":\"Buffer\",\"data\":[10,147,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,48,82,57,97,100,117,53,121,103,66,110,116,120,104,112,108,83,49,77,114,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,20,10,5,65,108,105,97,115,18,11,138,1,8,70,101,98,114,117,97,114,121,18,11,10,5,77,111,110,116,111,18,2,16,50,18,102,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,86,50,84,10,20,10,5,65,108,105,97,115,18,11,138,1,8,70,101,98,114,117,97,114,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,199,231,158,6,10,14,10,2,116,111,18,8,82,6,8,192,248,245,159,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,110,88,65,88,100,48,110,89,87,78,90,90,113,74,116,121,90,116,53,90,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,199,231,158,6,10,14,10,2,116,111,18,8,82,6,8,192,248,245,159,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,50,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,0,18,28,10,10,108,97,115,116,85,112,100,97,116,101,18,14,82,12,8,244,179,248,166,6,16,128,197,225,210,1,26,11,8,220,178,248,166,6,16,136,196,181,118,34,12,8,244,179,248,166,6,16,224,155,130,215,1,18,227,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,48,82,57,97,100,117,53,121,103,66,110,116,120,104,112,108,83,49,77,114,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,20,10,5,65,108,105,97,115,18,11,138,1,8,70,101,98,114,117,97,114,121,18,11,10,5,77,111,110,116,111,18,2,16,50,18,102,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,86,50,84,10,20,10,5,65,108,105,97,115,18,11,138,1,8,70,101,98,114,117,97,114,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,199,231,158,6,10,14,10,2,116,111,18,8,82,6,8,192,248,245,159,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,110,88,65,88,100,48,110,89,87,78,90,90,113,74,116,121,90,116,53,90,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,199,231,158,6,10,14,10,2,116,111,18,8,82,6,8,192,248,245,159,6,26,11,8,220,178,248,166,6,16,136,196,181,118,34,11,8,220,178,248,166,6,16,136,196,181,118,26,0]}}"}}
[debug] [2023-08-17T13:00:37.618Z] Aug 17, 2023 9:00:37 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:00:37 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:00:37.833Z] Aug 17, 2023 9:00:37 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:00:37 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:00:37.902Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 296.2835ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 296.2835ms"}}
[debug] [2023-08-17T13:00:37.902Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T13:00:37.902Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T13:00:37.902Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T13:00:37.902Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T13:00:37.919Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T13:00:37.919Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T13:00:37.919Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T13:00:37.919Z"],"workRunningCount":1}
[debug] [2023-08-17T13:00:37.919Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T13:00:37.919Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T13:00:37.920Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T13:00:37.920Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T13:00:37.920Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T13:00:37.922Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"7a666204-089d-4937-b0a5-7f0cb4ac8f49","subject":"documents/students/mrEePBhzCrCmcn1m7n7H/cuota_payments/4pVxjOPda7qLonEhjrNI","time":"2023-08-17T13:00:37.907370800Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/mrEePBhzCrCmcn1m7n7H/cuota_payments/4pVxjOPda7qLonEhjrNI","data":{"type":"Buffer","data":[10,141,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,52,112,86,120,106,79,80,100,97,55,113,76,111,110,69,104,106,114,78,73,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,17,10,5,65,108,105,97,115,18,8,138,1,5,77,97,114,99,104,18,11,10,5,77,111,110,116,111,18,2,16,50,18,99,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,83,50,81,10,17,10,5,65,108,105,97,115,18,8,138,1,5,77,97,114,99,104,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,155,251,159,6,10,14,10,2,116,111,18,8,82,6,8,192,181,153,161,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,66,88,83,72,97,122,54,80,73,49,69,56,76,116,100,75,65,71,51,68,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,155,251,159,6,10,14,10,2,116,111,18,8,82,6,8,192,181,153,161,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,35,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,15,18,28,10,10,108,97,115,116,85,112,100,97,116,101,18,14,82,12,8,244,179,248,166,6,16,128,164,250,247,1,26,11,8,220,178,248,166,6,16,184,206,152,97,34,12,8,244,179,248,166,6,16,192,189,173,249,1,18,221,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,52,112,86,120,106,79,80,100,97,55,113,76,111,110,69,104,106,114,78,73,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,17,10,5,65,108,105,97,115,18,8,138,1,5,77,97,114,99,104,18,11,10,5,77,111,110,116,111,18,2,16,50,18,99,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,83,50,81,10,17,10,5,65,108,105,97,115,18,8,138,1,5,77,97,114,99,104,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,155,251,159,6,10,14,10,2,116,111,18,8,82,6,8,192,181,153,161,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,66,88,83,72,97,122,54,80,73,49,69,56,76,116,100,75,65,71,51,68,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,155,251,159,6,10,14,10,2,116,111,18,8,82,6,8,192,181,153,161,6,26,11,8,220,178,248,166,6,16,184,206,152,97,34,11,8,220,178,248,166,6,16,184,206,152,97,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"7a666204-089d-4937-b0a5-7f0cb4ac8f49\",\"subject\":\"documents/students/mrEePBhzCrCmcn1m7n7H/cuota_payments/4pVxjOPda7qLonEhjrNI\",\"time\":\"2023-08-17T13:00:37.907370800Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/mrEePBhzCrCmcn1m7n7H/cuota_payments/4pVxjOPda7qLonEhjrNI\",\"data\":{\"type\":\"Buffer\",\"data\":[10,141,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,52,112,86,120,106,79,80,100,97,55,113,76,111,110,69,104,106,114,78,73,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,17,10,5,65,108,105,97,115,18,8,138,1,5,77,97,114,99,104,18,11,10,5,77,111,110,116,111,18,2,16,50,18,99,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,83,50,81,10,17,10,5,65,108,105,97,115,18,8,138,1,5,77,97,114,99,104,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,155,251,159,6,10,14,10,2,116,111,18,8,82,6,8,192,181,153,161,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,66,88,83,72,97,122,54,80,73,49,69,56,76,116,100,75,65,71,51,68,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,155,251,159,6,10,14,10,2,116,111,18,8,82,6,8,192,181,153,161,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,35,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,15,18,28,10,10,108,97,115,116,85,112,100,97,116,101,18,14,82,12,8,244,179,248,166,6,16,128,164,250,247,1,26,11,8,220,178,248,166,6,16,184,206,152,97,34,12,8,244,179,248,166,6,16,192,189,173,249,1,18,221,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,52,112,86,120,106,79,80,100,97,55,113,76,111,110,69,104,106,114,78,73,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,17,10,5,65,108,105,97,115,18,8,138,1,5,77,97,114,99,104,18,11,10,5,77,111,110,116,111,18,2,16,50,18,99,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,83,50,81,10,17,10,5,65,108,105,97,115,18,8,138,1,5,77,97,114,99,104,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,155,251,159,6,10,14,10,2,116,111,18,8,82,6,8,192,181,153,161,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,66,88,83,72,97,122,54,80,73,49,69,56,76,116,100,75,65,71,51,68,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,155,251,159,6,10,14,10,2,116,111,18,8,82,6,8,192,181,153,161,6,26,11,8,220,178,248,166,6,16,184,206,152,97,34,11,8,220,178,248,166,6,16,184,206,152,97,26,0]}}"}}
[debug] [2023-08-17T13:00:37.986Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 66.0733ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 66.0733ms"}}
[debug] [2023-08-17T13:00:37.987Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T13:00:37.987Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T13:00:37.987Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T13:00:37.987Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T13:00:37.997Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T13:00:37.997Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T13:00:37.997Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T13:00:37.997Z"],"workRunningCount":1}
[debug] [2023-08-17T13:00:37.997Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T13:00:37.998Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T13:00:37.998Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T13:00:37.998Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T13:00:37.998Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T13:00:38.000Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"f9d1d84a-d8b7-4f4c-bd80-c4b29cf761c8","subject":"documents/students/r5S5DTMdpFCKbs5xNjMy/cuota_payments/LzMDKkh7yxFiEShWX864","time":"2023-08-17T13:00:37.986889600Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/r5S5DTMdpFCKbs5xNjMy/cuota_payments/LzMDKkh7yxFiEShWX864","data":{"type":"Buffer","data":[10,148,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,114,53,83,53,68,84,77,100,112,70,67,75,98,115,53,120,78,106,77,121,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,76,122,77,68,75,107,104,55,121,120,70,105,69,83,104,87,88,56,54,52,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,114,53,83,53,68,84,77,100,112,70,67,75,98,115,53,120,78,106,77,121,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,20,10,5,65,108,105,97,115,18,11,138,1,8,70,101,98,114,117,97,114,121,18,11,10,5,77,111,110,116,111,18,2,16,50,18,102,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,86,50,84,10,20,10,5,65,108,105,97,115,18,11,138,1,8,70,101,98,114,117,97,114,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,199,231,158,6,10,14,10,2,116,111,18,8,82,6,8,192,248,245,159,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,110,88,65,88,100,48,110,89,87,78,90,90,113,74,116,121,90,116,53,90,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,199,231,158,6,10,14,10,2,116,111,18,8,82,6,8,192,248,245,159,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,50,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,0,18,28,10,10,108,97,115,116,85,112,100,97,116,101,18,14,82,12,8,244,179,248,166,6,16,192,184,216,135,2,26,12,8,220,178,248,166,6,16,184,213,222,184,1,34,12,8,244,179,248,166,6,16,160,145,171,137,2,18,229,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,114,53,83,53,68,84,77,100,112,70,67,75,98,115,53,120,78,106,77,121,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,76,122,77,68,75,107,104,55,121,120,70,105,69,83,104,87,88,56,54,52,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,114,53,83,53,68,84,77,100,112,70,67,75,98,115,53,120,78,106,77,121,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,20,10,5,65,108,105,97,115,18,11,138,1,8,70,101,98,114,117,97,114,121,18,11,10,5,77,111,110,116,111,18,2,16,50,18,102,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,86,50,84,10,20,10,5,65,108,105,97,115,18,11,138,1,8,70,101,98,114,117,97,114,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,199,231,158,6,10,14,10,2,116,111,18,8,82,6,8,192,248,245,159,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,110,88,65,88,100,48,110,89,87,78,90,90,113,74,116,121,90,116,53,90,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,199,231,158,6,10,14,10,2,116,111,18,8,82,6,8,192,248,245,159,6,26,12,8,220,178,248,166,6,16,184,213,222,184,1,34,12,8,220,178,248,166,6,16,184,213,222,184,1,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"f9d1d84a-d8b7-4f4c-bd80-c4b29cf761c8\",\"subject\":\"documents/students/r5S5DTMdpFCKbs5xNjMy/cuota_payments/LzMDKkh7yxFiEShWX864\",\"time\":\"2023-08-17T13:00:37.986889600Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/r5S5DTMdpFCKbs5xNjMy/cuota_payments/LzMDKkh7yxFiEShWX864\",\"data\":{\"type\":\"Buffer\",\"data\":[10,148,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,114,53,83,53,68,84,77,100,112,70,67,75,98,115,53,120,78,106,77,121,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,76,122,77,68,75,107,104,55,121,120,70,105,69,83,104,87,88,56,54,52,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,114,53,83,53,68,84,77,100,112,70,67,75,98,115,53,120,78,106,77,121,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,20,10,5,65,108,105,97,115,18,11,138,1,8,70,101,98,114,117,97,114,121,18,11,10,5,77,111,110,116,111,18,2,16,50,18,102,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,86,50,84,10,20,10,5,65,108,105,97,115,18,11,138,1,8,70,101,98,114,117,97,114,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,199,231,158,6,10,14,10,2,116,111,18,8,82,6,8,192,248,245,159,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,110,88,65,88,100,48,110,89,87,78,90,90,113,74,116,121,90,116,53,90,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,199,231,158,6,10,14,10,2,116,111,18,8,82,6,8,192,248,245,159,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,50,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,0,18,28,10,10,108,97,115,116,85,112,100,97,116,101,18,14,82,12,8,244,179,248,166,6,16,192,184,216,135,2,26,12,8,220,178,248,166,6,16,184,213,222,184,1,34,12,8,244,179,248,166,6,16,160,145,171,137,2,18,229,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,114,53,83,53,68,84,77,100,112,70,67,75,98,115,53,120,78,106,77,121,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,76,122,77,68,75,107,104,55,121,120,70,105,69,83,104,87,88,56,54,52,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,114,53,83,53,68,84,77,100,112,70,67,75,98,115,53,120,78,106,77,121,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,20,10,5,65,108,105,97,115,18,11,138,1,8,70,101,98,114,117,97,114,121,18,11,10,5,77,111,110,116,111,18,2,16,50,18,102,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,86,50,84,10,20,10,5,65,108,105,97,115,18,11,138,1,8,70,101,98,114,117,97,114,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,199,231,158,6,10,14,10,2,116,111,18,8,82,6,8,192,248,245,159,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,110,88,65,88,100,48,110,89,87,78,90,90,113,74,116,121,90,116,53,90,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,199,231,158,6,10,14,10,2,116,111,18,8,82,6,8,192,248,245,159,6,26,12,8,220,178,248,166,6,16,184,213,222,184,1,34,12,8,220,178,248,166,6,16,184,213,222,184,1,26,0]}}"}}
[debug] [2023-08-17T13:00:38.067Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 68.9382ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 68.9382ms"}}
[debug] [2023-08-17T13:00:38.068Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T13:00:38.068Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T13:00:38.068Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T13:00:38.068Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T13:00:42.678Z] Aug 17, 2023 9:00:42 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:00:42 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:00:47.663Z] Aug 17, 2023 9:00:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:00:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:00:47.665Z] Aug 17, 2023 9:00:47 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:00:47 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T13:00:47.672Z] Aug 17, 2023 9:00:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:00:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:00:47.704Z] Aug 17, 2023 9:00:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:00:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:00:47.705Z] Aug 17, 2023 9:00:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:00:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:00:47.708Z] Aug 17, 2023 9:00:47 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:00:47 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T13:00:47.756Z] Aug 17, 2023 9:00:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:00:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:00:56.821Z] Aug 17, 2023 9:00:56 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:00:56 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:00:56.844Z] Aug 17, 2023 9:00:56 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:00:56 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:00:56.887Z] Aug 17, 2023 9:00:56 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:00:56 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:00:56.919Z] Aug 17, 2023 9:00:56 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:00:56 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:00:58.364Z] Aug 17, 2023 9:00:58 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:00:58 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:01:00.292Z] Aug 17, 2023 9:01:00 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:01:00 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:01:00.294Z] Aug 17, 2023 9:01:00 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:01:00 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T13:01:00.327Z] Aug 17, 2023 9:01:00 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:01:00 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:02:00.350Z] Aug 17, 2023 9:02:00 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:02:00 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:02:11.911Z] Aug 17, 2023 9:02:11 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:02:11 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:02:11.912Z] Aug 17, 2023 9:02:11 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:02:11 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:02:11.913Z] Aug 17, 2023 9:02:11 AM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreListenHandler onClose
INFO: channel closed
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:02:11 AM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreListenHandler onClose\r\nINFO: channel closed\r\n"}}
[debug] [2023-08-17T13:02:11.914Z] Aug 17, 2023 9:02:11 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:02:11 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T13:02:11.920Z] Aug 17, 2023 9:02:11 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:02:11 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:02:18.039Z] Aug 17, 2023 9:02:18 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:02:18 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:02:19.023Z] Aug 17, 2023 9:02:19 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:02:19 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:02:19.529Z] Aug 17, 2023 9:02:19 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:02:19 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:02:21.503Z] Aug 17, 2023 9:02:21 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:02:21 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:02:24.234Z] Aug 17, 2023 9:02:24 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:02:24 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:02:24.249Z] Aug 17, 2023 9:02:24 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:02:24 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:02:24.281Z] Aug 17, 2023 9:02:24 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:02:24 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:02:24.309Z] Aug 17, 2023 9:02:24 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:02:24 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:02:26.588Z] Aug 17, 2023 9:02:26 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:02:26 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:03:26.597Z] Aug 17, 2023 9:03:26 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:03:26 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:04:23.535Z] Aug 17, 2023 9:04:23 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:04:23 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:04:23.549Z] Aug 17, 2023 9:04:23 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:04:23 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:04:23.555Z] Aug 17, 2023 9:04:23 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:04:23 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:04:23.588Z] Aug 17, 2023 9:04:23 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:04:23 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:04:23.616Z] Aug 17, 2023 9:04:23 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:04:23 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:04:29.790Z] Aug 17, 2023 9:04:29 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:04:29 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:04:34.603Z] Aug 17, 2023 9:04:34 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:04:34 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:04:34.606Z] Aug 17, 2023 9:04:34 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:04:34 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T13:04:34.631Z] Aug 17, 2023 9:04:34 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:04:34 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:05:34.652Z] Aug 17, 2023 9:05:34 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:05:34 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:05:45.803Z] Aug 17, 2023 9:05:45 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:05:45 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:05:45.805Z] Aug 17, 2023 9:05:45 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:05:45 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T13:05:45.827Z] Aug 17, 2023 9:05:45 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:05:45 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:06:45.857Z] Aug 17, 2023 9:06:45 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:06:45 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:07:42.404Z] Aug 17, 2023 9:07:42 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:07:42 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:07:42.406Z] Aug 17, 2023 9:07:42 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:07:42 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T13:07:42.427Z] Aug 17, 2023 9:07:42 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:07:42 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:07:42.440Z] Aug 17, 2023 9:07:42 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:07:42 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:08:42.466Z] Aug 17, 2023 9:08:42 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:08:42 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:09:42.492Z] Aug 17, 2023 9:09:42 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:09:42 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:10:42.522Z] Aug 17, 2023 9:10:42 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:10:42 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:11:42.536Z] Aug 17, 2023 9:11:42 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:11:42 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:12:07.330Z] Aug 17, 2023 9:12:07 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:12:07 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:12:07.348Z] Aug 17, 2023 9:12:07 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:12:07 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:12:07.380Z] Aug 17, 2023 9:12:07 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:12:07 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:12:07.407Z] Aug 17, 2023 9:12:07 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:12:07 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:12:37.425Z] Aug 17, 2023 9:12:37 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:12:37 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:13:37.446Z] Aug 17, 2023 9:13:37 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:13:37 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:14:37.467Z] Aug 17, 2023 9:14:37 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:14:37 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:15:37.494Z] Aug 17, 2023 9:15:37 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:15:37 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:16:37.525Z] Aug 17, 2023 9:16:37 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:16:37 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:16:58.214Z] Aug 17, 2023 9:16:58 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:16:58 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:17:10.568Z] Aug 17, 2023 9:17:10 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:17:10 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:17:11.598Z] Aug 17, 2023 9:17:11 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:17:11 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:17:14.139Z] Aug 17, 2023 9:17:14 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:17:14 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:17:14.140Z] Aug 17, 2023 9:17:14 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:17:14 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:17:14.143Z] Aug 17, 2023 9:17:14 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:17:14 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T13:17:14.168Z] Aug 17, 2023 9:17:14 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:17:14 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:17:44.177Z] Aug 17, 2023 9:17:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:17:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:17:56.702Z] Aug 17, 2023 9:17:56 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:17:56 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:17:56.704Z] Aug 17, 2023 9:17:56 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:17:56 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T13:17:56.728Z] Aug 17, 2023 9:17:56 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:17:56 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:18:02.892Z] Aug 17, 2023 9:18:02 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:18:02 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:18:02.907Z] Aug 17, 2023 9:18:02 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:18:02 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:18:02.936Z] Aug 17, 2023 9:18:02 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:18:02 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:18:02.962Z] Aug 17, 2023 9:18:02 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:18:02 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:18:32.967Z] Aug 17, 2023 9:18:32 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:18:32 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:18:53.822Z] Aug 17, 2023 9:18:53 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:18:53 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:18:53.832Z] Aug 17, 2023 9:18:53 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:18:53 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:18:53.836Z] Aug 17, 2023 9:18:53 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:18:53 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:18:53.838Z] Aug 17, 2023 9:18:53 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:18:53 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T13:18:53.846Z] Aug 17, 2023 9:18:53 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:18:53 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T13:18:53.850Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T13:18:53.850Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T13:18:53.850Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T13:18:53.850Z"],"workRunningCount":1}
[debug] [2023-08-17T13:18:53.850Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T13:18:53.851Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T13:18:53.851Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T13:18:53.851Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T13:18:53.852Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T13:18:53.854Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"3fb5603a-9642-4435-abda-41764503903e","subject":"documents/students/mrEePBhzCrCmcn1m7n7H/cuota_payments/4pVxjOPda7qLonEhjrNI","time":"2023-08-17T13:18:53.849032400Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/mrEePBhzCrCmcn1m7n7H/cuota_payments/4pVxjOPda7qLonEhjrNI","data":{"type":"Buffer","data":[10,141,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,52,112,86,120,106,79,80,100,97,55,113,76,111,110,69,104,106,114,78,73,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,17,10,5,65,108,105,97,115,18,8,138,1,5,77,97,114,99,104,18,11,10,5,77,111,110,116,111,18,2,16,50,18,99,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,83,50,81,10,17,10,5,65,108,105,97,115,18,8,138,1,5,77,97,114,99,104,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,155,251,159,6,10,14,10,2,116,111,18,8,82,6,8,192,181,153,161,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,66,88,83,72,97,122,54,80,73,49,69,56,76,116,100,75,65,71,51,68,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,155,251,159,6,10,14,10,2,116,111,18,8,82,6,8,192,181,153,161,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,50,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,0,18,28,10,10,108,97,115,116,85,112,100,97,116,101,18,14,82,12,8,189,188,248,166,6,16,192,227,240,147,3,26,11,8,220,178,248,166,6,16,184,206,152,97,34,12,8,189,188,248,166,6,16,192,230,236,148,3,18,141,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,52,112,86,120,106,79,80,100,97,55,113,76,111,110,69,104,106,114,78,73,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,17,10,5,65,108,105,97,115,18,8,138,1,5,77,97,114,99,104,18,11,10,5,77,111,110,116,111,18,2,16,50,18,99,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,83,50,81,10,17,10,5,65,108,105,97,115,18,8,138,1,5,77,97,114,99,104,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,155,251,159,6,10,14,10,2,116,111,18,8,82,6,8,192,181,153,161,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,66,88,83,72,97,122,54,80,73,49,69,56,76,116,100,75,65,71,51,68,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,155,251,159,6,10,14,10,2,116,111,18,8,82,6,8,192,181,153,161,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,35,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,15,18,28,10,10,108,97,115,116,85,112,100,97,116,101,18,14,82,12,8,244,179,248,166,6,16,128,164,250,247,1,26,11,8,220,178,248,166,6,16,184,206,152,97,34,12,8,244,179,248,166,6,16,192,189,173,249,1,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"3fb5603a-9642-4435-abda-41764503903e\",\"subject\":\"documents/students/mrEePBhzCrCmcn1m7n7H/cuota_payments/4pVxjOPda7qLonEhjrNI\",\"time\":\"2023-08-17T13:18:53.849032400Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/mrEePBhzCrCmcn1m7n7H/cuota_payments/4pVxjOPda7qLonEhjrNI\",\"data\":{\"type\":\"Buffer\",\"data\":[10,141,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,52,112,86,120,106,79,80,100,97,55,113,76,111,110,69,104,106,114,78,73,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,17,10,5,65,108,105,97,115,18,8,138,1,5,77,97,114,99,104,18,11,10,5,77,111,110,116,111,18,2,16,50,18,99,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,83,50,81,10,17,10,5,65,108,105,97,115,18,8,138,1,5,77,97,114,99,104,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,155,251,159,6,10,14,10,2,116,111,18,8,82,6,8,192,181,153,161,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,66,88,83,72,97,122,54,80,73,49,69,56,76,116,100,75,65,71,51,68,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,155,251,159,6,10,14,10,2,116,111,18,8,82,6,8,192,181,153,161,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,50,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,0,18,28,10,10,108,97,115,116,85,112,100,97,116,101,18,14,82,12,8,189,188,248,166,6,16,192,227,240,147,3,26,11,8,220,178,248,166,6,16,184,206,152,97,34,12,8,189,188,248,166,6,16,192,230,236,148,3,18,141,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,52,112,86,120,106,79,80,100,97,55,113,76,111,110,69,104,106,114,78,73,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,17,10,5,65,108,105,97,115,18,8,138,1,5,77,97,114,99,104,18,11,10,5,77,111,110,116,111,18,2,16,50,18,99,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,83,50,81,10,17,10,5,65,108,105,97,115,18,8,138,1,5,77,97,114,99,104,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,155,251,159,6,10,14,10,2,116,111,18,8,82,6,8,192,181,153,161,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,66,88,83,72,97,122,54,80,73,49,69,56,76,116,100,75,65,71,51,68,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,155,251,159,6,10,14,10,2,116,111,18,8,82,6,8,192,181,153,161,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,35,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,15,18,28,10,10,108,97,115,116,85,112,100,97,116,101,18,14,82,12,8,244,179,248,166,6,16,128,164,250,247,1,26,11,8,220,178,248,166,6,16,184,206,152,97,34,12,8,244,179,248,166,6,16,192,189,173,249,1,26,0]}}"}}
[debug] [2023-08-17T13:18:53.856Z] Aug 17, 2023 9:18:53 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:18:53 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T13:18:53.859Z] Aug 17, 2023 9:18:53 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:18:53 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:18:53.863Z] Aug 17, 2023 9:18:53 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:18:53 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:18:53.871Z] Aug 17, 2023 9:18:53 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:18:53 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:18:53.873Z] Aug 17, 2023 9:18:53 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:18:53 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T13:18:53.879Z] Aug 17, 2023 9:18:53 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:18:53 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T13:18:53.893Z] Aug 17, 2023 9:18:53 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:18:53 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:18:53.895Z] Aug 17, 2023 9:18:53 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:18:53 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T13:18:53.901Z] Aug 17, 2023 9:18:53 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:18:53 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T13:18:53.915Z] Aug 17, 2023 9:18:53 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:18:53 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:18:53.917Z] Aug 17, 2023 9:18:53 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:18:53 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T13:18:53.923Z] Aug 17, 2023 9:18:53 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:18:53 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T13:18:53.940Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 88.8376ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 88.8376ms"}}
[debug] [2023-08-17T13:18:53.941Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T13:18:53.941Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T13:18:53.941Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T13:18:53.941Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T13:18:53.943Z] Aug 17, 2023 9:18:53 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:18:53 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:18:53.945Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T13:18:53.945Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T13:18:53.945Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T13:18:53.945Z"],"workRunningCount":1}
[debug] [2023-08-17T13:18:53.945Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T13:18:53.946Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T13:18:53.946Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T13:18:53.946Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T13:18:53.947Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T13:18:53.948Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"a2e9e256-9fbd-4283-868f-ce776afe208d","subject":"documents/students/mrEePBhzCrCmcn1m7n7H/cuota_payments/Rba1EG3x1V9RqhBf9APM","time":"2023-08-17T13:18:53.941555600Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/mrEePBhzCrCmcn1m7n7H/cuota_payments/Rba1EG3x1V9RqhBf9APM","data":{"type":"Buffer","data":[10,141,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,82,98,97,49,69,71,51,120,49,86,57,82,113,104,66,102,57,65,80,77,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,17,10,5,65,108,105,97,115,18,8,138,1,5,65,112,114,105,108,18,11,10,5,77,111,110,116,111,18,2,16,50,18,99,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,83,50,81,10,17,10,5,65,108,105,97,115,18,8,138,1,5,65,112,114,105,108,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,216,158,161,6,10,14,10,2,116,111,18,8,82,6,8,192,207,183,162,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,68,80,114,55,66,77,116,75,79,80,84,118,116,116,121,116,78,89,79,121,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,216,158,161,6,10,14,10,2,116,111,18,8,82,6,8,192,207,183,162,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,50,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,0,18,28,10,10,108,97,115,116,85,112,100,97,116,101,18,14,82,12,8,189,188,248,166,6,16,192,243,145,163,3,26,11,8,220,178,248,166,6,16,216,186,150,20,34,12,8,189,188,248,166,6,16,224,149,142,164,3,18,221,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,82,98,97,49,69,71,51,120,49,86,57,82,113,104,66,102,57,65,80,77,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,17,10,5,65,108,105,97,115,18,8,138,1,5,65,112,114,105,108,18,11,10,5,77,111,110,116,111,18,2,16,50,18,99,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,83,50,81,10,17,10,5,65,108,105,97,115,18,8,138,1,5,65,112,114,105,108,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,216,158,161,6,10,14,10,2,116,111,18,8,82,6,8,192,207,183,162,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,68,80,114,55,66,77,116,75,79,80,84,118,116,116,121,116,78,89,79,121,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,216,158,161,6,10,14,10,2,116,111,18,8,82,6,8,192,207,183,162,6,26,11,8,220,178,248,166,6,16,216,186,150,20,34,11,8,220,178,248,166,6,16,216,186,150,20,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"a2e9e256-9fbd-4283-868f-ce776afe208d\",\"subject\":\"documents/students/mrEePBhzCrCmcn1m7n7H/cuota_payments/Rba1EG3x1V9RqhBf9APM\",\"time\":\"2023-08-17T13:18:53.941555600Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/mrEePBhzCrCmcn1m7n7H/cuota_payments/Rba1EG3x1V9RqhBf9APM\",\"data\":{\"type\":\"Buffer\",\"data\":[10,141,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,82,98,97,49,69,71,51,120,49,86,57,82,113,104,66,102,57,65,80,77,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,17,10,5,65,108,105,97,115,18,8,138,1,5,65,112,114,105,108,18,11,10,5,77,111,110,116,111,18,2,16,50,18,99,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,83,50,81,10,17,10,5,65,108,105,97,115,18,8,138,1,5,65,112,114,105,108,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,216,158,161,6,10,14,10,2,116,111,18,8,82,6,8,192,207,183,162,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,68,80,114,55,66,77,116,75,79,80,84,118,116,116,121,116,78,89,79,121,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,216,158,161,6,10,14,10,2,116,111,18,8,82,6,8,192,207,183,162,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,50,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,0,18,28,10,10,108,97,115,116,85,112,100,97,116,101,18,14,82,12,8,189,188,248,166,6,16,192,243,145,163,3,26,11,8,220,178,248,166,6,16,216,186,150,20,34,12,8,189,188,248,166,6,16,224,149,142,164,3,18,221,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,82,98,97,49,69,71,51,120,49,86,57,82,113,104,66,102,57,65,80,77,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,17,10,5,65,108,105,97,115,18,8,138,1,5,65,112,114,105,108,18,11,10,5,77,111,110,116,111,18,2,16,50,18,99,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,83,50,81,10,17,10,5,65,108,105,97,115,18,8,138,1,5,65,112,114,105,108,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,216,158,161,6,10,14,10,2,116,111,18,8,82,6,8,192,207,183,162,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,68,80,114,55,66,77,116,75,79,80,84,118,116,116,121,116,78,89,79,121,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,216,158,161,6,10,14,10,2,116,111,18,8,82,6,8,192,207,183,162,6,26,11,8,220,178,248,166,6,16,216,186,150,20,34,11,8,220,178,248,166,6,16,216,186,150,20,26,0]}}"}}
[debug] [2023-08-17T13:18:53.973Z] Aug 17, 2023 9:18:53 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:18:53 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:18:54.000Z] Aug 17, 2023 9:18:54 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:18:54 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:18:54.023Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 76.6705ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 76.6705ms"}}
[debug] [2023-08-17T13:18:54.023Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T13:18:54.024Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T13:18:54.024Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T13:18:54.024Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T13:18:54.039Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T13:18:54.039Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T13:18:54.040Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T13:18:54.039Z"],"workRunningCount":1}
[debug] [2023-08-17T13:18:54.040Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T13:18:54.040Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T13:18:54.040Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T13:18:54.040Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T13:18:54.041Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T13:18:54.042Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"ecadef7d-cb92-476b-9686-1bd631668049","subject":"documents/students/r5S5DTMdpFCKbs5xNjMy/cuota_payments/MrslWptU3YST6YPiUoOX","time":"2023-08-17T13:18:54.023563Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/r5S5DTMdpFCKbs5xNjMy/cuota_payments/MrslWptU3YST6YPiUoOX","data":{"type":"Buffer","data":[10,142,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,114,53,83,53,68,84,77,100,112,70,67,75,98,115,53,120,78,106,77,121,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,77,114,115,108,87,112,116,85,51,89,83,84,54,89,80,105,85,111,79,88,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,114,53,83,53,68,84,77,100,112,70,67,75,98,115,53,120,78,106,77,121,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,17,10,5,65,108,105,97,115,18,8,138,1,5,65,112,114,105,108,18,11,10,5,77,111,110,116,111,18,2,16,50,18,99,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,83,50,81,10,17,10,5,65,108,105,97,115,18,8,138,1,5,65,112,114,105,108,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,216,158,161,6,10,14,10,2,116,111,18,8,82,6,8,192,207,183,162,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,68,80,114,55,66,77,116,75,79,80,84,118,116,116,121,116,78,89,79,121,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,216,158,161,6,10,14,10,2,116,111,18,8,82,6,8,192,207,183,162,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,35,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,15,18,28,10,10,108,97,115,116,85,112,100,97,116,101,18,14,82,12,8,189,188,248,166,6,16,128,219,141,174,3,26,12,8,220,178,248,166,6,16,184,213,222,184,1,34,12,8,189,188,248,166,6,16,184,245,137,175,3,18,223,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,114,53,83,53,68,84,77,100,112,70,67,75,98,115,53,120,78,106,77,121,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,77,114,115,108,87,112,116,85,51,89,83,84,54,89,80,105,85,111,79,88,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,114,53,83,53,68,84,77,100,112,70,67,75,98,115,53,120,78,106,77,121,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,17,10,5,65,108,105,97,115,18,8,138,1,5,65,112,114,105,108,18,11,10,5,77,111,110,116,111,18,2,16,50,18,99,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,83,50,81,10,17,10,5,65,108,105,97,115,18,8,138,1,5,65,112,114,105,108,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,216,158,161,6,10,14,10,2,116,111,18,8,82,6,8,192,207,183,162,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,68,80,114,55,66,77,116,75,79,80,84,118,116,116,121,116,78,89,79,121,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,216,158,161,6,10,14,10,2,116,111,18,8,82,6,8,192,207,183,162,6,26,12,8,220,178,248,166,6,16,184,213,222,184,1,34,12,8,220,178,248,166,6,16,184,213,222,184,1,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"ecadef7d-cb92-476b-9686-1bd631668049\",\"subject\":\"documents/students/r5S5DTMdpFCKbs5xNjMy/cuota_payments/MrslWptU3YST6YPiUoOX\",\"time\":\"2023-08-17T13:18:54.023563Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/r5S5DTMdpFCKbs5xNjMy/cuota_payments/MrslWptU3YST6YPiUoOX\",\"data\":{\"type\":\"Buffer\",\"data\":[10,142,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,114,53,83,53,68,84,77,100,112,70,67,75,98,115,53,120,78,106,77,121,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,77,114,115,108,87,112,116,85,51,89,83,84,54,89,80,105,85,111,79,88,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,114,53,83,53,68,84,77,100,112,70,67,75,98,115,53,120,78,106,77,121,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,17,10,5,65,108,105,97,115,18,8,138,1,5,65,112,114,105,108,18,11,10,5,77,111,110,116,111,18,2,16,50,18,99,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,83,50,81,10,17,10,5,65,108,105,97,115,18,8,138,1,5,65,112,114,105,108,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,216,158,161,6,10,14,10,2,116,111,18,8,82,6,8,192,207,183,162,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,68,80,114,55,66,77,116,75,79,80,84,118,116,116,121,116,78,89,79,121,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,216,158,161,6,10,14,10,2,116,111,18,8,82,6,8,192,207,183,162,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,35,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,15,18,28,10,10,108,97,115,116,85,112,100,97,116,101,18,14,82,12,8,189,188,248,166,6,16,128,219,141,174,3,26,12,8,220,178,248,166,6,16,184,213,222,184,1,34,12,8,189,188,248,166,6,16,184,245,137,175,3,18,223,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,114,53,83,53,68,84,77,100,112,70,67,75,98,115,53,120,78,106,77,121,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,77,114,115,108,87,112,116,85,51,89,83,84,54,89,80,105,85,111,79,88,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,114,53,83,53,68,84,77,100,112,70,67,75,98,115,53,120,78,106,77,121,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,17,10,5,65,108,105,97,115,18,8,138,1,5,65,112,114,105,108,18,11,10,5,77,111,110,116,111,18,2,16,50,18,99,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,83,50,81,10,17,10,5,65,108,105,97,115,18,8,138,1,5,65,112,114,105,108,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,216,158,161,6,10,14,10,2,116,111,18,8,82,6,8,192,207,183,162,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,68,80,114,55,66,77,116,75,79,80,84,118,116,116,121,116,78,89,79,121,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,216,158,161,6,10,14,10,2,116,111,18,8,82,6,8,192,207,183,162,6,26,12,8,220,178,248,166,6,16,184,213,222,184,1,34,12,8,220,178,248,166,6,16,184,213,222,184,1,26,0]}}"}}
[debug] [2023-08-17T13:18:54.107Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 66.6738ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 66.6738ms"}}
[debug] [2023-08-17T13:18:54.108Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T13:18:54.108Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T13:18:54.108Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T13:18:54.108Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T13:18:54.119Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T13:18:54.119Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T13:18:54.119Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T13:18:54.119Z"],"workRunningCount":1}
[debug] [2023-08-17T13:18:54.119Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T13:18:54.119Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T13:18:54.119Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T13:18:54.120Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T13:18:54.120Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T13:18:54.121Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"32e53390-68a0-4e26-be27-3118a172a56a","subject":"documents/students/r5S5DTMdpFCKbs5xNjMy/cuota_payments/tyT6RNjPZexzRQHddjE5","time":"2023-08-17T13:18:54.107874300Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/r5S5DTMdpFCKbs5xNjMy/cuota_payments/tyT6RNjPZexzRQHddjE5","data":{"type":"Buffer","data":[10,142,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,114,53,83,53,68,84,77,100,112,70,67,75,98,115,53,120,78,106,77,121,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,116,121,84,54,82,78,106,80,90,101,120,122,82,81,72,100,100,106,69,53,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,114,53,83,53,68,84,77,100,112,70,67,75,98,115,53,120,78,106,77,121,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,17,10,5,65,108,105,97,115,18,8,138,1,5,77,97,114,99,104,18,11,10,5,77,111,110,116,111,18,2,16,50,18,99,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,83,50,81,10,17,10,5,65,108,105,97,115,18,8,138,1,5,77,97,114,99,104,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,155,251,159,6,10,14,10,2,116,111,18,8,82,6,8,192,181,153,161,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,66,88,83,72,97,122,54,80,73,49,69,56,76,116,100,75,65,71,51,68,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,155,251,159,6,10,14,10,2,116,111,18,8,82,6,8,192,181,153,161,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,50,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,0,18,28,10,10,108,97,115,116,85,112,100,97,116,101,18,14,82,12,8,189,188,248,166,6,16,128,190,204,184,3,26,12,8,219,178,248,166,6,16,136,155,248,250,2,34,12,8,189,188,248,166,6,16,216,247,200,185,3,18,223,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,114,53,83,53,68,84,77,100,112,70,67,75,98,115,53,120,78,106,77,121,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,116,121,84,54,82,78,106,80,90,101,120,122,82,81,72,100,100,106,69,53,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,114,53,83,53,68,84,77,100,112,70,67,75,98,115,53,120,78,106,77,121,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,17,10,5,65,108,105,97,115,18,8,138,1,5,77,97,114,99,104,18,11,10,5,77,111,110,116,111,18,2,16,50,18,99,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,83,50,81,10,17,10,5,65,108,105,97,115,18,8,138,1,5,77,97,114,99,104,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,155,251,159,6,10,14,10,2,116,111,18,8,82,6,8,192,181,153,161,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,66,88,83,72,97,122,54,80,73,49,69,56,76,116,100,75,65,71,51,68,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,155,251,159,6,10,14,10,2,116,111,18,8,82,6,8,192,181,153,161,6,26,12,8,219,178,248,166,6,16,136,155,248,250,2,34,12,8,219,178,248,166,6,16,136,155,248,250,2,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"32e53390-68a0-4e26-be27-3118a172a56a\",\"subject\":\"documents/students/r5S5DTMdpFCKbs5xNjMy/cuota_payments/tyT6RNjPZexzRQHddjE5\",\"time\":\"2023-08-17T13:18:54.107874300Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/r5S5DTMdpFCKbs5xNjMy/cuota_payments/tyT6RNjPZexzRQHddjE5\",\"data\":{\"type\":\"Buffer\",\"data\":[10,142,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,114,53,83,53,68,84,77,100,112,70,67,75,98,115,53,120,78,106,77,121,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,116,121,84,54,82,78,106,80,90,101,120,122,82,81,72,100,100,106,69,53,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,114,53,83,53,68,84,77,100,112,70,67,75,98,115,53,120,78,106,77,121,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,17,10,5,65,108,105,97,115,18,8,138,1,5,77,97,114,99,104,18,11,10,5,77,111,110,116,111,18,2,16,50,18,99,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,83,50,81,10,17,10,5,65,108,105,97,115,18,8,138,1,5,77,97,114,99,104,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,155,251,159,6,10,14,10,2,116,111,18,8,82,6,8,192,181,153,161,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,66,88,83,72,97,122,54,80,73,49,69,56,76,116,100,75,65,71,51,68,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,155,251,159,6,10,14,10,2,116,111,18,8,82,6,8,192,181,153,161,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,50,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,0,18,28,10,10,108,97,115,116,85,112,100,97,116,101,18,14,82,12,8,189,188,248,166,6,16,128,190,204,184,3,26,12,8,219,178,248,166,6,16,136,155,248,250,2,34,12,8,189,188,248,166,6,16,216,247,200,185,3,18,223,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,114,53,83,53,68,84,77,100,112,70,67,75,98,115,53,120,78,106,77,121,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,116,121,84,54,82,78,106,80,90,101,120,122,82,81,72,100,100,106,69,53,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,114,53,83,53,68,84,77,100,112,70,67,75,98,115,53,120,78,106,77,121,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,17,10,5,65,108,105,97,115,18,8,138,1,5,77,97,114,99,104,18,11,10,5,77,111,110,116,111,18,2,16,50,18,99,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,83,50,81,10,17,10,5,65,108,105,97,115,18,8,138,1,5,77,97,114,99,104,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,155,251,159,6,10,14,10,2,116,111,18,8,82,6,8,192,181,153,161,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,66,88,83,72,97,122,54,80,73,49,69,56,76,116,100,75,65,71,51,68,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,155,251,159,6,10,14,10,2,116,111,18,8,82,6,8,192,181,153,161,6,26,12,8,219,178,248,166,6,16,136,155,248,250,2,34,12,8,219,178,248,166,6,16,136,155,248,250,2,26,0]}}"}}
[debug] [2023-08-17T13:18:54.176Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 56.4248ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 56.4248ms"}}
[debug] [2023-08-17T13:18:54.176Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T13:18:54.177Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T13:18:54.177Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T13:18:54.177Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T13:18:54.940Z] Aug 17, 2023 9:18:54 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:18:54 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:18:54.942Z] Aug 17, 2023 9:18:54 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:18:54 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T13:18:54.971Z] Aug 17, 2023 9:18:54 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:18:54 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:19:13.479Z] Aug 17, 2023 9:19:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:19:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:19:15.609Z] Aug 17, 2023 9:19:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:19:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:19:15.611Z] Aug 17, 2023 9:19:15 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:19:15 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T13:19:15.615Z] Aug 17, 2023 9:19:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:19:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:19:15.737Z] Aug 17, 2023 9:19:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:19:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:19:15.739Z] Aug 17, 2023 9:19:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:19:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:19:15.742Z] Aug 17, 2023 9:19:15 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:19:15 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T13:19:15.783Z] Aug 17, 2023 9:19:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:19:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:19:21.893Z] Aug 17, 2023 9:19:21 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:19:21 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:19:21.895Z] Aug 17, 2023 9:19:21 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:19:21 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T13:19:21.921Z] Aug 17, 2023 9:19:21 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:19:21 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:19:25.204Z] Aug 17, 2023 9:19:25 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:19:25 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:19:25.206Z] Aug 17, 2023 9:19:25 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:19:25 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T13:19:25.233Z] Aug 17, 2023 9:19:25 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:19:25 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:19:40.542Z] Aug 17, 2023 9:19:40 AM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler initChannel
INFO: Connected to new websocket client
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:19:40 AM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler initChannel\r\nINFO: Connected to new websocket client\r\n"}}
[debug] [2023-08-17T13:19:43.735Z] Aug 17, 2023 9:19:43 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:19:43 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:19:43.747Z] Aug 17, 2023 9:19:43 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:19:43 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:19:43.824Z] Aug 17, 2023 9:19:43 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:19:43 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:19:46.315Z] Aug 17, 2023 9:19:46 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:19:46 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:19:47.309Z] Aug 17, 2023 9:19:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:19:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:19:47.730Z] Aug 17, 2023 9:19:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:19:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:19:48.233Z] Aug 17, 2023 9:19:48 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:19:48 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:19:48.533Z] Aug 17, 2023 9:19:48 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:19:48 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:19:49.304Z] Aug 17, 2023 9:19:49 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:19:49 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:19:49.771Z] Aug 17, 2023 9:19:49 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:19:49 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:19:50.559Z] Aug 17, 2023 9:19:50 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:19:50 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:19:51.965Z] Aug 17, 2023 9:19:51 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:19:51 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:19:53.023Z] Aug 17, 2023 9:19:53 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:19:53 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:20:04.315Z] Aug 17, 2023 9:20:04 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:20:04 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:20:05.611Z] Aug 17, 2023 9:20:05 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:20:05 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:20:08.069Z] Aug 17, 2023 9:20:08 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:20:08 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:20:08.860Z] Aug 17, 2023 9:20:08 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:20:08 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:20:13.024Z] Aug 17, 2023 9:20:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:20:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:20:16.818Z] Aug 17, 2023 9:20:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:20:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:20:19.713Z] Aug 17, 2023 9:20:19 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:20:19 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:20:21.957Z] Aug 17, 2023 9:20:21 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:20:21 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:20:23.361Z] Aug 17, 2023 9:20:23 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:20:23 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:20:24.141Z] Aug 17, 2023 9:20:24 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:20:24 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:20:25.254Z] Aug 17, 2023 9:20:25 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:20:25 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:20:54.158Z] Aug 17, 2023 9:20:54 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:20:54 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:21:25.275Z] Aug 17, 2023 9:21:25 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:21:25 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:21:54.167Z] Aug 17, 2023 9:21:54 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:21:54 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:22:41.266Z] Aug 17, 2023 9:22:41 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:22:41 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:22:48.302Z] Aug 17, 2023 9:22:48 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:22:48 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:22:48.302Z] Aug 17, 2023 9:22:48 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
Aug 17, 2023 9:22:48 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
Aug 17, 2023 9:22:48 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:22:48 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\nAug 17, 2023 9:22:48 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\nAug 17, 2023 9:22:48 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:22:54.187Z] Aug 17, 2023 9:22:54 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:22:54 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:23:41.294Z] Aug 17, 2023 9:23:41 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:23:41 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:23:54.212Z] Aug 17, 2023 9:23:54 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:23:54 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:24:12.988Z] Aug 17, 2023 9:24:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:24:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:24:12.990Z] Aug 17, 2023 9:24:12 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:24:12 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T13:24:12.995Z] Aug 17, 2023 9:24:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:24:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:24:13.091Z] Aug 17, 2023 9:24:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:24:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:24:13.093Z] Aug 17, 2023 9:24:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:24:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:24:13.095Z] Aug 17, 2023 9:24:13 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:24:13 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T13:24:13.137Z] Aug 17, 2023 9:24:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:24:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:24:16.004Z] Aug 17, 2023 9:24:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:24:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:24:16.019Z] Aug 17, 2023 9:24:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:24:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:24:16.049Z] Aug 17, 2023 9:24:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:24:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:24:16.077Z] Aug 17, 2023 9:24:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:24:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:24:54.234Z] Aug 17, 2023 9:24:54 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:24:54 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:25:13.815Z] Aug 17, 2023 9:25:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:25:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:25:13.823Z] Aug 17, 2023 9:25:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:25:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:25:13.828Z] Aug 17, 2023 9:25:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:25:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:25:13.830Z] Aug 17, 2023 9:25:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:25:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:25:13.831Z] Aug 17, 2023 9:25:13 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:25:13 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T13:25:13.839Z] Aug 17, 2023 9:25:13 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:25:13 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T13:25:13.843Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T13:25:13.843Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T13:25:13.843Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T13:25:13.843Z"],"workRunningCount":1}
[debug] [2023-08-17T13:25:13.843Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T13:25:13.843Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T13:25:13.843Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T13:25:13.843Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T13:25:13.844Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T13:25:13.845Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"b934db60-f331-4356-9e72-101ee56aafb0","subject":"documents/students/mrEePBhzCrCmcn1m7n7H/cuota_payments/UYuWOp5qQfL981NCIfgI","time":"2023-08-17T13:25:13.841684700Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/mrEePBhzCrCmcn1m7n7H/cuota_payments/UYuWOp5qQfL981NCIfgI","data":{"type":"Buffer","data":[10,152,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,85,89,117,87,79,112,53,113,81,102,76,57,56,49,78,67,73,102,103,73,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,15,10,5,65,108,105,97,115,18,6,138,1,3,77,97,121,18,11,10,5,77,111,110,116,111,18,2,16,50,18,97,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,81,50,79,10,15,10,5,65,108,105,97,115,18,6,138,1,3,77,97,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,242,188,162,6,10,14,10,2,116,111,18,8,82,6,8,192,140,219,163,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,51,113,56,110,89,80,71,113,88,122,112,114,120,52,53,121,121,86,104,70,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,242,188,162,6,10,14,10,2,116,111,18,8,82,6,8,192,140,219,163,6,18,22,10,9,84,111,116,97,108,80,97,105,100,18,9,25,195,245,40,92,143,34,72,64,18,31,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,9,25,160,71,225,122,20,174,251,63,18,28,10,10,108,97,115,116,85,112,100,97,116,101,18,14,82,12,8,185,191,248,166,6,16,128,187,203,143,3,26,12,8,219,178,248,166,6,16,248,144,223,220,3,34,12,8,185,191,248,166,6,16,200,171,239,144,3,18,219,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,85,89,117,87,79,112,53,113,81,102,76,57,56,49,78,67,73,102,103,73,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,15,10,5,65,108,105,97,115,18,6,138,1,3,77,97,121,18,11,10,5,77,111,110,116,111,18,2,16,50,18,97,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,81,50,79,10,15,10,5,65,108,105,97,115,18,6,138,1,3,77,97,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,242,188,162,6,10,14,10,2,116,111,18,8,82,6,8,192,140,219,163,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,51,113,56,110,89,80,71,113,88,122,112,114,120,52,53,121,121,86,104,70,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,242,188,162,6,10,14,10,2,116,111,18,8,82,6,8,192,140,219,163,6,26,12,8,219,178,248,166,6,16,248,144,223,220,3,34,12,8,219,178,248,166,6,16,248,144,223,220,3,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"b934db60-f331-4356-9e72-101ee56aafb0\",\"subject\":\"documents/students/mrEePBhzCrCmcn1m7n7H/cuota_payments/UYuWOp5qQfL981NCIfgI\",\"time\":\"2023-08-17T13:25:13.841684700Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/mrEePBhzCrCmcn1m7n7H/cuota_payments/UYuWOp5qQfL981NCIfgI\",\"data\":{\"type\":\"Buffer\",\"data\":[10,152,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,85,89,117,87,79,112,53,113,81,102,76,57,56,49,78,67,73,102,103,73,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,15,10,5,65,108,105,97,115,18,6,138,1,3,77,97,121,18,11,10,5,77,111,110,116,111,18,2,16,50,18,97,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,81,50,79,10,15,10,5,65,108,105,97,115,18,6,138,1,3,77,97,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,242,188,162,6,10,14,10,2,116,111,18,8,82,6,8,192,140,219,163,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,51,113,56,110,89,80,71,113,88,122,112,114,120,52,53,121,121,86,104,70,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,242,188,162,6,10,14,10,2,116,111,18,8,82,6,8,192,140,219,163,6,18,22,10,9,84,111,116,97,108,80,97,105,100,18,9,25,195,245,40,92,143,34,72,64,18,31,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,9,25,160,71,225,122,20,174,251,63,18,28,10,10,108,97,115,116,85,112,100,97,116,101,18,14,82,12,8,185,191,248,166,6,16,128,187,203,143,3,26,12,8,219,178,248,166,6,16,248,144,223,220,3,34,12,8,185,191,248,166,6,16,200,171,239,144,3,18,219,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,85,89,117,87,79,112,53,113,81,102,76,57,56,49,78,67,73,102,103,73,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,15,10,5,65,108,105,97,115,18,6,138,1,3,77,97,121,18,11,10,5,77,111,110,116,111,18,2,16,50,18,97,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,81,50,79,10,15,10,5,65,108,105,97,115,18,6,138,1,3,77,97,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,242,188,162,6,10,14,10,2,116,111,18,8,82,6,8,192,140,219,163,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,51,113,56,110,89,80,71,113,88,122,112,114,120,52,53,121,121,86,104,70,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,242,188,162,6,10,14,10,2,116,111,18,8,82,6,8,192,140,219,163,6,26,12,8,219,178,248,166,6,16,248,144,223,220,3,34,12,8,219,178,248,166,6,16,248,144,223,220,3,26,0]}}"}}
[debug] [2023-08-17T13:25:13.849Z] Aug 17, 2023 9:25:13 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:25:13 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T13:25:13.852Z] Aug 17, 2023 9:25:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:25:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:25:13.855Z] Aug 17, 2023 9:25:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:25:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:25:13.868Z] Aug 17, 2023 9:25:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:25:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:25:13.869Z] Aug 17, 2023 9:25:13 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:25:13 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T13:25:13.875Z] Aug 17, 2023 9:25:13 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:25:13 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T13:25:13.903Z] Aug 17, 2023 9:25:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:25:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:25:13.935Z] Aug 17, 2023 9:25:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:25:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:25:14.002Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 158.5238ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 158.5238ms"}}
[debug] [2023-08-17T13:25:14.003Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T13:25:14.003Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T13:25:14.003Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T13:25:14.003Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T13:25:14.015Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T13:25:14.015Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T13:25:14.015Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T13:25:14.015Z"],"workRunningCount":1}
[debug] [2023-08-17T13:25:14.016Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T13:25:14.016Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T13:25:14.016Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T13:25:14.017Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T13:25:14.017Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T13:25:14.019Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"8c554b9c-109a-46bb-89bc-f8dcd4a1fa70","subject":"documents/students/r5S5DTMdpFCKbs5xNjMy/cuota_payments/MrslWptU3YST6YPiUoOX","time":"2023-08-17T13:25:14.002845700Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/r5S5DTMdpFCKbs5xNjMy/cuota_payments/MrslWptU3YST6YPiUoOX","data":{"type":"Buffer","data":[10,142,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,114,53,83,53,68,84,77,100,112,70,67,75,98,115,53,120,78,106,77,121,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,77,114,115,108,87,112,116,85,51,89,83,84,54,89,80,105,85,111,79,88,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,114,53,83,53,68,84,77,100,112,70,67,75,98,115,53,120,78,106,77,121,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,17,10,5,65,108,105,97,115,18,8,138,1,5,65,112,114,105,108,18,11,10,5,77,111,110,116,111,18,2,16,50,18,99,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,83,50,81,10,17,10,5,65,108,105,97,115,18,8,138,1,5,65,112,114,105,108,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,216,158,161,6,10,14,10,2,116,111,18,8,82,6,8,192,207,183,162,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,68,80,114,55,66,77,116,75,79,80,84,118,116,116,121,116,78,89,79,121,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,216,158,161,6,10,14,10,2,116,111,18,8,82,6,8,192,207,183,162,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,50,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,0,18,28,10,10,108,97,115,116,85,112,100,97,116,101,18,14,82,12,8,185,191,248,166,6,16,128,221,224,160,3,26,12,8,220,178,248,166,6,16,184,213,222,184,1,34,12,8,185,191,248,166,6,16,184,252,132,162,3,18,142,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,114,53,83,53,68,84,77,100,112,70,67,75,98,115,53,120,78,106,77,121,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,77,114,115,108,87,112,116,85,51,89,83,84,54,89,80,105,85,111,79,88,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,114,53,83,53,68,84,77,100,112,70,67,75,98,115,53,120,78,106,77,121,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,17,10,5,65,108,105,97,115,18,8,138,1,5,65,112,114,105,108,18,11,10,5,77,111,110,116,111,18,2,16,50,18,99,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,83,50,81,10,17,10,5,65,108,105,97,115,18,8,138,1,5,65,112,114,105,108,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,216,158,161,6,10,14,10,2,116,111,18,8,82,6,8,192,207,183,162,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,68,80,114,55,66,77,116,75,79,80,84,118,116,116,121,116,78,89,79,121,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,216,158,161,6,10,14,10,2,116,111,18,8,82,6,8,192,207,183,162,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,35,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,15,18,28,10,10,108,97,115,116,85,112,100,97,116,101,18,14,82,12,8,189,188,248,166,6,16,128,219,141,174,3,26,12,8,220,178,248,166,6,16,184,213,222,184,1,34,12,8,189,188,248,166,6,16,184,245,137,175,3,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"8c554b9c-109a-46bb-89bc-f8dcd4a1fa70\",\"subject\":\"documents/students/r5S5DTMdpFCKbs5xNjMy/cuota_payments/MrslWptU3YST6YPiUoOX\",\"time\":\"2023-08-17T13:25:14.002845700Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/r5S5DTMdpFCKbs5xNjMy/cuota_payments/MrslWptU3YST6YPiUoOX\",\"data\":{\"type\":\"Buffer\",\"data\":[10,142,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,114,53,83,53,68,84,77,100,112,70,67,75,98,115,53,120,78,106,77,121,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,77,114,115,108,87,112,116,85,51,89,83,84,54,89,80,105,85,111,79,88,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,114,53,83,53,68,84,77,100,112,70,67,75,98,115,53,120,78,106,77,121,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,17,10,5,65,108,105,97,115,18,8,138,1,5,65,112,114,105,108,18,11,10,5,77,111,110,116,111,18,2,16,50,18,99,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,83,50,81,10,17,10,5,65,108,105,97,115,18,8,138,1,5,65,112,114,105,108,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,216,158,161,6,10,14,10,2,116,111,18,8,82,6,8,192,207,183,162,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,68,80,114,55,66,77,116,75,79,80,84,118,116,116,121,116,78,89,79,121,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,216,158,161,6,10,14,10,2,116,111,18,8,82,6,8,192,207,183,162,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,50,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,0,18,28,10,10,108,97,115,116,85,112,100,97,116,101,18,14,82,12,8,185,191,248,166,6,16,128,221,224,160,3,26,12,8,220,178,248,166,6,16,184,213,222,184,1,34,12,8,185,191,248,166,6,16,184,252,132,162,3,18,142,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,114,53,83,53,68,84,77,100,112,70,67,75,98,115,53,120,78,106,77,121,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,77,114,115,108,87,112,116,85,51,89,83,84,54,89,80,105,85,111,79,88,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,114,53,83,53,68,84,77,100,112,70,67,75,98,115,53,120,78,106,77,121,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,17,10,5,65,108,105,97,115,18,8,138,1,5,65,112,114,105,108,18,11,10,5,77,111,110,116,111,18,2,16,50,18,99,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,83,50,81,10,17,10,5,65,108,105,97,115,18,8,138,1,5,65,112,114,105,108,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,216,158,161,6,10,14,10,2,116,111,18,8,82,6,8,192,207,183,162,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,68,80,114,55,66,77,116,75,79,80,84,118,116,116,121,116,78,89,79,121,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,216,158,161,6,10,14,10,2,116,111,18,8,82,6,8,192,207,183,162,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,35,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,15,18,28,10,10,108,97,115,116,85,112,100,97,116,101,18,14,82,12,8,189,188,248,166,6,16,128,219,141,174,3,26,12,8,220,178,248,166,6,16,184,213,222,184,1,34,12,8,189,188,248,166,6,16,184,245,137,175,3,26,0]}}"}}
[debug] [2023-08-17T13:25:14.038Z] Aug 17, 2023 9:25:14 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:25:14 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:25:14.177Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 160.3545ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 160.3545ms"}}
[debug] [2023-08-17T13:25:14.178Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T13:25:14.178Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T13:25:14.178Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T13:25:14.178Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T13:25:14.899Z] Aug 17, 2023 9:25:14 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:25:14 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:25:14.901Z] Aug 17, 2023 9:25:14 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:25:14 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T13:25:14.934Z] Aug 17, 2023 9:25:14 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:25:14 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:25:19.045Z] Aug 17, 2023 9:25:19 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:25:19 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:25:21.878Z] Aug 17, 2023 9:25:21 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:25:21 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:25:21.879Z] Aug 17, 2023 9:25:21 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:25:21 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T13:25:21.905Z] Aug 17, 2023 9:25:21 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:25:21 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:25:28.415Z] Aug 17, 2023 9:25:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:25:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:25:28.417Z] Aug 17, 2023 9:25:28 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:25:28 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T13:25:28.444Z] Aug 17, 2023 9:25:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:25:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:25:44.182Z] Aug 17, 2023 9:25:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:25:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:26:13.904Z] Aug 17, 2023 9:26:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:26:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:26:13.905Z] Aug 17, 2023 9:26:13 AM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler onClose
INFO: channel closed
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:26:13 AM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler onClose\r\nINFO: channel closed\r\n"}}
[debug] [2023-08-17T13:26:28.469Z] Aug 17, 2023 9:26:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:26:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:26:44.196Z] Aug 17, 2023 9:26:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:26:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:27:28.478Z] Aug 17, 2023 9:27:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:27:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:27:44.207Z] Aug 17, 2023 9:27:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:27:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:28:28.509Z] Aug 17, 2023 9:28:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:28:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:28:44.233Z] Aug 17, 2023 9:28:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:28:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:29:28.525Z] Aug 17, 2023 9:29:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:29:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:29:44.254Z] Aug 17, 2023 9:29:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:29:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:29:57.591Z] Aug 17, 2023 9:29:57 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:29:57 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:29:57.593Z] Aug 17, 2023 9:29:57 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:29:57 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T13:29:57.620Z] Aug 17, 2023 9:29:57 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:29:57 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:30:27.640Z] Aug 17, 2023 9:30:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:30:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:30:44.275Z] Aug 17, 2023 9:30:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:30:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:31:27.649Z] Aug 17, 2023 9:31:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:31:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:31:44.294Z] Aug 17, 2023 9:31:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:31:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:32:27.680Z] Aug 17, 2023 9:32:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:32:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:32:44.318Z] Aug 17, 2023 9:32:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:32:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:33:27.701Z] Aug 17, 2023 9:33:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:33:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:33:44.347Z] Aug 17, 2023 9:33:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:33:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:34:27.727Z] Aug 17, 2023 9:34:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:34:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:34:44.367Z] Aug 17, 2023 9:34:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:34:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:35:27.747Z] Aug 17, 2023 9:35:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:35:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:35:44.397Z] Aug 17, 2023 9:35:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:35:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:36:27.770Z] Aug 17, 2023 9:36:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:36:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:36:44.413Z] Aug 17, 2023 9:36:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:36:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:37:27.795Z] Aug 17, 2023 9:37:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:37:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:37:44.435Z] Aug 17, 2023 9:37:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:37:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:38:27.809Z] Aug 17, 2023 9:38:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:38:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:38:44.450Z] Aug 17, 2023 9:38:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:38:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:39:27.841Z] Aug 17, 2023 9:39:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:39:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:39:44.471Z] Aug 17, 2023 9:39:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:39:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:40:27.865Z] Aug 17, 2023 9:40:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:40:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:40:44.482Z] Aug 17, 2023 9:40:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:40:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:41:27.893Z] Aug 17, 2023 9:41:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:41:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:41:44.503Z] Aug 17, 2023 9:41:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:41:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:42:27.915Z] Aug 17, 2023 9:42:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:42:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:42:44.522Z] Aug 17, 2023 9:42:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:42:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:43:27.934Z] Aug 17, 2023 9:43:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:43:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:43:44.533Z] Aug 17, 2023 9:43:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:43:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:44:27.953Z] Aug 17, 2023 9:44:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:44:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:44:29.399Z] Aug 17, 2023 9:44:29 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:44:29 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:44:29.400Z] Aug 17, 2023 9:44:29 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:44:29 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T13:44:29.406Z] Aug 17, 2023 9:44:29 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:44:29 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:44:29.548Z] Aug 17, 2023 9:44:29 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:44:29 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:44:29.548Z] Aug 17, 2023 9:44:29 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:44:29 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:44:29.549Z] Aug 17, 2023 9:44:29 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:44:29 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:44:29.552Z] Aug 17, 2023 9:44:29 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:44:29 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T13:44:29.596Z] Aug 17, 2023 9:44:29 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:44:29 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:44:44.552Z] Aug 17, 2023 9:44:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:44:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:45:15.263Z] Aug 17, 2023 9:45:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:45:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:45:44.561Z] Aug 17, 2023 9:45:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:45:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:45:52.976Z] Aug 17, 2023 9:45:52 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:45:52 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:45:52.978Z] Aug 17, 2023 9:45:52 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:45:52 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T13:45:52.986Z] Aug 17, 2023 9:45:52 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:45:52 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:45:53.116Z] Aug 17, 2023 9:45:53 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:45:53 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:45:53.118Z] Aug 17, 2023 9:45:53 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:45:53 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:45:53.120Z] Aug 17, 2023 9:45:53 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:45:53 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T13:45:53.169Z] Aug 17, 2023 9:45:53 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:45:53 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:45:55.089Z] Aug 17, 2023 9:45:55 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:45:55 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:45:55.108Z] Aug 17, 2023 9:45:55 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:45:55 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:45:55.143Z] Aug 17, 2023 9:45:55 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:45:55 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:45:55.177Z] Aug 17, 2023 9:45:55 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:45:55 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:45:56.966Z] Aug 17, 2023 9:45:56 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:45:56 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:45:58.208Z] Aug 17, 2023 9:45:58 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:45:58 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:45:58.210Z] Aug 17, 2023 9:45:58 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:45:58 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T13:45:58.242Z] Aug 17, 2023 9:45:58 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:45:58 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:46:44.580Z] Aug 17, 2023 9:46:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:46:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:46:58.269Z] Aug 17, 2023 9:46:58 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:46:58 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:47:44.598Z] Aug 17, 2023 9:47:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:47:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:47:58.285Z] Aug 17, 2023 9:47:58 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:47:58 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:48:44.616Z] Aug 17, 2023 9:48:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:48:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:48:58.304Z] Aug 17, 2023 9:48:58 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:48:58 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:49:44.646Z] Aug 17, 2023 9:49:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:49:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:49:58.326Z] Aug 17, 2023 9:49:58 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:49:58 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:50:44.663Z] Aug 17, 2023 9:50:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:50:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:50:58.337Z] Aug 17, 2023 9:50:58 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:50:58 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:51:44.680Z] Aug 17, 2023 9:51:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:51:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:51:58.351Z] Aug 17, 2023 9:51:58 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:51:58 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:52:44.705Z] Aug 17, 2023 9:52:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:52:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:52:58.368Z] Aug 17, 2023 9:52:58 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:52:58 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:53:12.041Z] Aug 17, 2023 9:53:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:53:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:53:12.043Z] Aug 17, 2023 9:53:12 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:53:12 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T13:53:12.050Z] Aug 17, 2023 9:53:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:53:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:53:12.153Z] Aug 17, 2023 9:53:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:53:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:53:12.154Z] Aug 17, 2023 9:53:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:53:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:53:12.154Z] Aug 17, 2023 9:53:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:53:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:53:12.158Z] Aug 17, 2023 9:53:12 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:53:12 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T13:53:12.212Z] Aug 17, 2023 9:53:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:53:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:53:15.236Z] Aug 17, 2023 9:53:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:53:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:53:15.237Z] Aug 17, 2023 9:53:15 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:53:15 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T13:53:15.268Z] Aug 17, 2023 9:53:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:53:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:53:44.716Z] Aug 17, 2023 9:53:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:53:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:54:15.289Z] Aug 17, 2023 9:54:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:54:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:54:44.731Z] Aug 17, 2023 9:54:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:54:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:55:15.306Z] Aug 17, 2023 9:55:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:55:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:55:44.749Z] Aug 17, 2023 9:55:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:55:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:56:15.329Z] Aug 17, 2023 9:56:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:56:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:56:44.773Z] Aug 17, 2023 9:56:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:56:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:57:01.032Z] Aug 17, 2023 9:57:01 AM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler channelClosed
INFO: Websocket client disconnected
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:57:01 AM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler channelClosed\r\nINFO: Websocket client disconnected\r\n"}}
[debug] [2023-08-17T13:57:01.032Z] Aug 17, 2023 9:57:01 AM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler initChannel
INFO: Connected to new websocket client
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:57:01 AM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler initChannel\r\nINFO: Connected to new websocket client\r\n"}}
[debug] [2023-08-17T13:57:10.324Z] Aug 17, 2023 9:57:10 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:57:10 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:57:10.325Z] Aug 17, 2023 9:57:10 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:57:10 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T13:57:10.332Z] Aug 17, 2023 9:57:10 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:57:10 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:57:10.430Z] Aug 17, 2023 9:57:10 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:57:10 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:57:10.431Z] Aug 17, 2023 9:57:10 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:57:10 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:57:10.435Z] Aug 17, 2023 9:57:10 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:57:10 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T13:57:10.488Z] Aug 17, 2023 9:57:10 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:57:10 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:57:12.133Z] Aug 17, 2023 9:57:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:57:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:57:12.134Z] Aug 17, 2023 9:57:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:57:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:57:12.135Z] Aug 17, 2023 9:57:12 AM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreListenHandler onClose
INFO: channel closed
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:57:12 AM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreListenHandler onClose\r\nINFO: channel closed\r\n"}}
[debug] [2023-08-17T13:57:12.136Z] Aug 17, 2023 9:57:12 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:57:12 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T13:57:12.142Z] Aug 17, 2023 9:57:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:57:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:57:12.591Z] Aug 17, 2023 9:57:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:57:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:57:12.592Z] Aug 17, 2023 9:57:12 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:57:12 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T13:57:12.626Z] Aug 17, 2023 9:57:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:57:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:57:44.781Z] Aug 17, 2023 9:57:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:57:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:58:12.645Z] Aug 17, 2023 9:58:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:58:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:58:44.798Z] Aug 17, 2023 9:58:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:58:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:59:12.653Z] Aug 17, 2023 9:59:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:59:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T13:59:44.820Z] Aug 17, 2023 9:59:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 9:59:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:00:12.677Z] Aug 17, 2023 10:00:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:00:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:00:44.833Z] Aug 17, 2023 10:00:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:00:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:01:12.695Z] Aug 17, 2023 10:01:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:01:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:01:44.848Z] Aug 17, 2023 10:01:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:01:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:02:12.724Z] Aug 17, 2023 10:02:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:02:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:02:44.872Z] Aug 17, 2023 10:02:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:02:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:03:12.744Z] Aug 17, 2023 10:03:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:03:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:03:44.890Z] Aug 17, 2023 10:03:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:03:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:04:12.770Z] Aug 17, 2023 10:04:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:04:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:04:44.908Z] Aug 17, 2023 10:04:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:04:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:05:12.789Z] Aug 17, 2023 10:05:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:05:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:05:44.921Z] Aug 17, 2023 10:05:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:05:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:06:12.800Z] Aug 17, 2023 10:06:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:06:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:06:44.944Z] Aug 17, 2023 10:06:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:06:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:07:12.829Z] Aug 17, 2023 10:07:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:07:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:07:44.968Z] Aug 17, 2023 10:07:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:07:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:08:12.855Z] Aug 17, 2023 10:08:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:08:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:08:44.992Z] Aug 17, 2023 10:08:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:08:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:09:12.880Z] Aug 17, 2023 10:09:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:09:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:09:45.015Z] Aug 17, 2023 10:09:45 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:09:45 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:10:12.904Z] Aug 17, 2023 10:10:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:10:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:10:45.033Z] Aug 17, 2023 10:10:45 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:10:45 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:11:12.931Z] Aug 17, 2023 10:11:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:11:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:11:45.057Z] Aug 17, 2023 10:11:45 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:11:45 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:12:12.952Z] Aug 17, 2023 10:12:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:12:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:12:45.080Z] Aug 17, 2023 10:12:45 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:12:45 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:13:12.963Z] Aug 17, 2023 10:13:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:13:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:14:00.275Z] Aug 17, 2023 10:14:00 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:14:00 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:14:12.987Z] Aug 17, 2023 10:14:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:14:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:15:00.307Z] Aug 17, 2023 10:15:00 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:15:00 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:15:13.007Z] Aug 17, 2023 10:15:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:15:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:16:00.326Z] Aug 17, 2023 10:16:00 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:16:00 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:16:01.244Z] Aug 17, 2023 10:16:01 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:16:01 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:16:01.244Z] Aug 17, 2023 10:16:01 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
Aug 17, 2023 10:16:01 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
Aug 17, 2023 10:16:01 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:16:01 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\nAug 17, 2023 10:16:01 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\nAug 17, 2023 10:16:01 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:16:01.244Z] Aug 17, 2023 10:16:01 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:16:01 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:16:13.033Z] Aug 17, 2023 10:16:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:16:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:17:00.358Z] Aug 17, 2023 10:17:00 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:17:00 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:17:13.037Z] Aug 17, 2023 10:17:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:17:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:18:00.372Z] Aug 17, 2023 10:18:00 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:18:00 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:18:13.052Z] Aug 17, 2023 10:18:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:18:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:19:13.074Z] Aug 17, 2023 10:19:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:19:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:19:16.267Z] Aug 17, 2023 10:19:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:19:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:20:13.088Z] Aug 17, 2023 10:20:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:20:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:20:16.281Z] Aug 17, 2023 10:20:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:20:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:21:16.303Z] Aug 17, 2023 10:21:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:21:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:21:28.265Z] Aug 17, 2023 10:21:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:21:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:22:16.321Z] Aug 17, 2023 10:22:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:22:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:22:28.294Z] Aug 17, 2023 10:22:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:22:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:23:16.350Z] Aug 17, 2023 10:23:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:23:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:23:28.320Z] Aug 17, 2023 10:23:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:23:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:24:16.369Z] Aug 17, 2023 10:24:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:24:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:24:28.339Z] Aug 17, 2023 10:24:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:24:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:25:16.390Z] Aug 17, 2023 10:25:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:25:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:25:28.360Z] Aug 17, 2023 10:25:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:25:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:26:16.408Z] Aug 17, 2023 10:26:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:26:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:26:28.367Z] Aug 17, 2023 10:26:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:26:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:27:16.438Z] Aug 17, 2023 10:27:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:27:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:27:28.386Z] Aug 17, 2023 10:27:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:27:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:28:16.456Z] Aug 17, 2023 10:28:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:28:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:28:28.415Z] Aug 17, 2023 10:28:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:28:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:29:16.471Z] Aug 17, 2023 10:29:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:29:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:29:28.436Z] Aug 17, 2023 10:29:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:29:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:30:16.481Z] Aug 17, 2023 10:30:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:30:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:30:28.453Z] Aug 17, 2023 10:30:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:30:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:31:16.499Z] Aug 17, 2023 10:31:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:31:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:31:28.473Z] Aug 17, 2023 10:31:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:31:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:32:16.516Z] Aug 17, 2023 10:32:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:32:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:32:28.500Z] Aug 17, 2023 10:32:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:32:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:33:16.538Z] Aug 17, 2023 10:33:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:33:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:33:28.515Z] Aug 17, 2023 10:33:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:33:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:34:16.562Z] Aug 17, 2023 10:34:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:34:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:34:28.520Z] Aug 17, 2023 10:34:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:34:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:35:16.575Z] Aug 17, 2023 10:35:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:35:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:35:28.525Z] Aug 17, 2023 10:35:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:35:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:36:16.590Z] Aug 17, 2023 10:36:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:36:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:36:28.543Z] Aug 17, 2023 10:36:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:36:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:37:16.603Z] Aug 17, 2023 10:37:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:37:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:37:28.572Z] Aug 17, 2023 10:37:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:37:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:38:16.624Z] Aug 17, 2023 10:38:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:38:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:38:28.599Z] Aug 17, 2023 10:38:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:38:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:39:16.634Z] Aug 17, 2023 10:39:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:39:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:39:28.615Z] Aug 17, 2023 10:39:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:39:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:40:16.648Z] Aug 17, 2023 10:40:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:40:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:40:28.630Z] Aug 17, 2023 10:40:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:40:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:41:16.668Z] Aug 17, 2023 10:41:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:41:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:41:28.640Z] Aug 17, 2023 10:41:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:41:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:42:16.695Z] Aug 17, 2023 10:42:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:42:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:42:28.663Z] Aug 17, 2023 10:42:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:42:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:43:16.717Z] Aug 17, 2023 10:43:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:43:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:43:28.682Z] Aug 17, 2023 10:43:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:43:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:44:16.734Z] Aug 17, 2023 10:44:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:44:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:44:28.710Z] Aug 17, 2023 10:44:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:44:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:45:16.764Z] Aug 17, 2023 10:45:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:45:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:45:28.734Z] Aug 17, 2023 10:45:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:45:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:46:16.789Z] Aug 17, 2023 10:46:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:46:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:46:28.749Z] Aug 17, 2023 10:46:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:46:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:47:16.805Z] Aug 17, 2023 10:47:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:47:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:47:28.776Z] Aug 17, 2023 10:47:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:47:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:48:16.816Z] Aug 17, 2023 10:48:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:48:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:48:24.186Z] Aug 17, 2023 10:48:24 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:48:24 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:48:24.203Z] Aug 17, 2023 10:48:24 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:48:24 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:48:24.212Z] Aug 17, 2023 10:48:24 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:48:24 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:48:24.249Z] Aug 17, 2023 10:48:24 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:48:24 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:48:24.279Z] Aug 17, 2023 10:48:24 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:48:24 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:49:16.833Z] Aug 17, 2023 10:49:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:49:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:49:24.304Z] Aug 17, 2023 10:49:24 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:49:24 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:50:15.084Z] Aug 17, 2023 10:50:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:50:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:50:15.092Z] Aug 17, 2023 10:50:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:50:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:50:15.096Z] Aug 17, 2023 10:50:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:50:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:50:15.098Z] Aug 17, 2023 10:50:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:50:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:50:15.099Z] Aug 17, 2023 10:50:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:50:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:50:15.101Z] Aug 17, 2023 10:50:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:50:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:50:15.102Z] Aug 17, 2023 10:50:15 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:50:15 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T14:50:15.110Z] Aug 17, 2023 10:50:15 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:50:15 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T14:50:15.114Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T14:50:15.114Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T14:50:15.114Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T14:50:15.114Z"],"workRunningCount":1}
[debug] [2023-08-17T14:50:15.114Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T14:50:15.114Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T14:50:15.114Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T14:50:15.114Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T14:50:15.115Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T14:50:15.116Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"a83c03c4-9e4f-4cf5-a440-cd4a57252f59","subject":"documents/students/mrEePBhzCrCmcn1m7n7H/cuota_payments/UYuWOp5qQfL981NCIfgI","time":"2023-08-17T14:50:15.113217700Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/mrEePBhzCrCmcn1m7n7H/cuota_payments/UYuWOp5qQfL981NCIfgI","data":{"type":"Buffer","data":[10,136,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,85,89,117,87,79,112,53,113,81,102,76,57,56,49,78,67,73,102,103,73,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,15,10,5,65,108,105,97,115,18,6,138,1,3,77,97,121,18,11,10,5,77,111,110,116,111,18,2,16,50,18,97,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,81,50,79,10,15,10,5,65,108,105,97,115,18,6,138,1,3,77,97,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,242,188,162,6,10,14,10,2,116,111,18,8,82,6,8,192,140,219,163,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,51,113,56,110,89,80,71,113,88,122,112,114,120,52,53,121,121,86,104,70,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,242,188,162,6,10,14,10,2,116,111,18,8,82,6,8,192,140,219,163,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,50,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,0,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,167,231,248,166,6,16,128,239,185,52,26,12,8,219,178,248,166,6,16,248,144,223,220,3,34,11,8,167,231,248,166,6,16,144,159,193,53,18,152,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,85,89,117,87,79,112,53,113,81,102,76,57,56,49,78,67,73,102,103,73,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,15,10,5,65,108,105,97,115,18,6,138,1,3,77,97,121,18,11,10,5,77,111,110,116,111,18,2,16,50,18,97,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,81,50,79,10,15,10,5,65,108,105,97,115,18,6,138,1,3,77,97,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,242,188,162,6,10,14,10,2,116,111,18,8,82,6,8,192,140,219,163,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,51,113,56,110,89,80,71,113,88,122,112,114,120,52,53,121,121,86,104,70,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,242,188,162,6,10,14,10,2,116,111,18,8,82,6,8,192,140,219,163,6,18,22,10,9,84,111,116,97,108,80,97,105,100,18,9,25,195,245,40,92,143,34,72,64,18,31,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,9,25,160,71,225,122,20,174,251,63,18,28,10,10,108,97,115,116,85,112,100,97,116,101,18,14,82,12,8,185,191,248,166,6,16,128,187,203,143,3,26,12,8,219,178,248,166,6,16,248,144,223,220,3,34,12,8,185,191,248,166,6,16,200,171,239,144,3,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"a83c03c4-9e4f-4cf5-a440-cd4a57252f59\",\"subject\":\"documents/students/mrEePBhzCrCmcn1m7n7H/cuota_payments/UYuWOp5qQfL981NCIfgI\",\"time\":\"2023-08-17T14:50:15.113217700Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/mrEePBhzCrCmcn1m7n7H/cuota_payments/UYuWOp5qQfL981NCIfgI\",\"data\":{\"type\":\"Buffer\",\"data\":[10,136,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,85,89,117,87,79,112,53,113,81,102,76,57,56,49,78,67,73,102,103,73,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,15,10,5,65,108,105,97,115,18,6,138,1,3,77,97,121,18,11,10,5,77,111,110,116,111,18,2,16,50,18,97,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,81,50,79,10,15,10,5,65,108,105,97,115,18,6,138,1,3,77,97,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,242,188,162,6,10,14,10,2,116,111,18,8,82,6,8,192,140,219,163,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,51,113,56,110,89,80,71,113,88,122,112,114,120,52,53,121,121,86,104,70,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,242,188,162,6,10,14,10,2,116,111,18,8,82,6,8,192,140,219,163,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,50,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,0,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,167,231,248,166,6,16,128,239,185,52,26,12,8,219,178,248,166,6,16,248,144,223,220,3,34,11,8,167,231,248,166,6,16,144,159,193,53,18,152,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,85,89,117,87,79,112,53,113,81,102,76,57,56,49,78,67,73,102,103,73,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,15,10,5,65,108,105,97,115,18,6,138,1,3,77,97,121,18,11,10,5,77,111,110,116,111,18,2,16,50,18,97,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,81,50,79,10,15,10,5,65,108,105,97,115,18,6,138,1,3,77,97,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,242,188,162,6,10,14,10,2,116,111,18,8,82,6,8,192,140,219,163,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,51,113,56,110,89,80,71,113,88,122,112,114,120,52,53,121,121,86,104,70,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,242,188,162,6,10,14,10,2,116,111,18,8,82,6,8,192,140,219,163,6,18,22,10,9,84,111,116,97,108,80,97,105,100,18,9,25,195,245,40,92,143,34,72,64,18,31,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,9,25,160,71,225,122,20,174,251,63,18,28,10,10,108,97,115,116,85,112,100,97,116,101,18,14,82,12,8,185,191,248,166,6,16,128,187,203,143,3,26,12,8,219,178,248,166,6,16,248,144,223,220,3,34,12,8,185,191,248,166,6,16,200,171,239,144,3,26,0]}}"}}
[debug] [2023-08-17T14:50:15.122Z] Aug 17, 2023 10:50:15 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:50:15 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T14:50:15.126Z] Aug 17, 2023 10:50:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:50:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:50:15.130Z] Aug 17, 2023 10:50:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:50:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:50:15.142Z] Aug 17, 2023 10:50:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:50:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:50:15.143Z] Aug 17, 2023 10:50:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:50:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:50:15.144Z] Aug 17, 2023 10:50:15 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:50:15 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T14:50:15.151Z] Aug 17, 2023 10:50:15 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:50:15 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T14:50:15.170Z] Aug 17, 2023 10:50:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:50:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:50:15.171Z] Aug 17, 2023 10:50:15 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:50:15 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T14:50:15.176Z] Aug 17, 2023 10:50:15 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:50:15 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T14:50:15.195Z] Aug 17, 2023 10:50:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:50:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:50:15.196Z] Aug 17, 2023 10:50:15 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:50:15 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T14:50:15.202Z] Aug 17, 2023 10:50:15 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:50:15 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T14:50:15.274Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 159.4011ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 159.4011ms"}}
[debug] [2023-08-17T14:50:15.275Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T14:50:15.275Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T14:50:15.275Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T14:50:15.275Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T14:50:15.287Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T14:50:15.287Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T14:50:15.287Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T14:50:15.287Z"],"workRunningCount":1}
[debug] [2023-08-17T14:50:15.287Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T14:50:15.288Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T14:50:15.288Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T14:50:15.288Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T14:50:15.289Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T14:50:15.290Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"608c4f08-b01d-4034-a648-30d92ba6faa5","subject":"documents/students/mrEePBhzCrCmcn1m7n7H/cuota_payments/lVfZelc49p0S2L7KHj4q","time":"2023-08-17T14:50:15.274736300Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/mrEePBhzCrCmcn1m7n7H/cuota_payments/lVfZelc49p0S2L7KHj4q","data":{"type":"Buffer","data":[10,138,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,108,86,102,90,101,108,99,52,57,112,48,83,50,76,55,75,72,106,52,113,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,110,101,18,11,10,5,77,111,110,116,111,18,2,16,50,18,98,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,82,50,80,10,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,110,101,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,175,224,163,6,10,14,10,2,116,111,18,8,82,6,8,192,166,249,164,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,67,66,74,74,105,67,104,83,77,112,113,86,120,103,110,75,113,51,103,75,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,175,224,163,6,10,14,10,2,116,111,18,8,82,6,8,192,166,249,164,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,50,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,0,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,167,231,248,166,6,16,192,167,128,72,26,12,8,219,178,248,166,6,16,200,131,221,210,3,34,11,8,167,231,248,166,6,16,184,223,135,73,18,221,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,108,86,102,90,101,108,99,52,57,112,48,83,50,76,55,75,72,106,52,113,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,110,101,18,11,10,5,77,111,110,116,111,18,2,16,50,18,98,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,82,50,80,10,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,110,101,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,175,224,163,6,10,14,10,2,116,111,18,8,82,6,8,192,166,249,164,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,67,66,74,74,105,67,104,83,77,112,113,86,120,103,110,75,113,51,103,75,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,175,224,163,6,10,14,10,2,116,111,18,8,82,6,8,192,166,249,164,6,26,12,8,219,178,248,166,6,16,200,131,221,210,3,34,12,8,219,178,248,166,6,16,200,131,221,210,3,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"608c4f08-b01d-4034-a648-30d92ba6faa5\",\"subject\":\"documents/students/mrEePBhzCrCmcn1m7n7H/cuota_payments/lVfZelc49p0S2L7KHj4q\",\"time\":\"2023-08-17T14:50:15.274736300Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/mrEePBhzCrCmcn1m7n7H/cuota_payments/lVfZelc49p0S2L7KHj4q\",\"data\":{\"type\":\"Buffer\",\"data\":[10,138,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,108,86,102,90,101,108,99,52,57,112,48,83,50,76,55,75,72,106,52,113,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,110,101,18,11,10,5,77,111,110,116,111,18,2,16,50,18,98,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,82,50,80,10,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,110,101,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,175,224,163,6,10,14,10,2,116,111,18,8,82,6,8,192,166,249,164,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,67,66,74,74,105,67,104,83,77,112,113,86,120,103,110,75,113,51,103,75,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,175,224,163,6,10,14,10,2,116,111,18,8,82,6,8,192,166,249,164,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,50,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,0,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,167,231,248,166,6,16,192,167,128,72,26,12,8,219,178,248,166,6,16,200,131,221,210,3,34,11,8,167,231,248,166,6,16,184,223,135,73,18,221,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,108,86,102,90,101,108,99,52,57,112,48,83,50,76,55,75,72,106,52,113,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,110,101,18,11,10,5,77,111,110,116,111,18,2,16,50,18,98,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,82,50,80,10,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,110,101,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,175,224,163,6,10,14,10,2,116,111,18,8,82,6,8,192,166,249,164,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,67,66,74,74,105,67,104,83,77,112,113,86,120,103,110,75,113,51,103,75,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,175,224,163,6,10,14,10,2,116,111,18,8,82,6,8,192,166,249,164,6,26,12,8,219,178,248,166,6,16,200,131,221,210,3,34,12,8,219,178,248,166,6,16,200,131,221,210,3,26,0]}}"}}
[debug] [2023-08-17T14:50:15.299Z] Aug 17, 2023 10:50:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:50:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:50:15.337Z] Aug 17, 2023 10:50:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:50:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:50:15.368Z] Aug 17, 2023 10:50:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:50:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:50:15.427Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 138.798ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 138.798ms"}}
[debug] [2023-08-17T14:50:15.429Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T14:50:15.429Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T14:50:15.429Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T14:50:15.429Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T14:50:15.429Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T14:50:15.429Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T14:50:15.429Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T14:50:15.429Z"],"workRunningCount":1}
[debug] [2023-08-17T14:50:15.429Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T14:50:15.430Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T14:50:15.430Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T14:50:15.430Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T14:50:15.431Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T14:50:15.432Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"bddf9718-0181-42be-8bd7-177039f7637d","subject":"documents/students/r5S5DTMdpFCKbs5xNjMy/cuota_payments/36xwviOu0nHp9rwFTmB3","time":"2023-08-17T14:50:15.427777100Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/r5S5DTMdpFCKbs5xNjMy/cuota_payments/36xwviOu0nHp9rwFTmB3","data":{"type":"Buffer","data":[10,136,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,114,53,83,53,68,84,77,100,112,70,67,75,98,115,53,120,78,106,77,121,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,51,54,120,119,118,105,79,117,48,110,72,112,57,114,119,70,84,109,66,51,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,114,53,83,53,68,84,77,100,112,70,67,75,98,115,53,120,78,106,77,121,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,15,10,5,65,108,105,97,115,18,6,138,1,3,77,97,121,18,11,10,5,77,111,110,116,111,18,2,16,50,18,97,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,81,50,79,10,15,10,5,65,108,105,97,115,18,6,138,1,3,77,97,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,242,188,162,6,10,14,10,2,116,111,18,8,82,6,8,192,140,219,163,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,51,113,56,110,89,80,71,113,88,122,112,114,120,52,53,121,121,86,104,70,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,242,188,162,6,10,14,10,2,116,111,18,8,82,6,8,192,140,219,163,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,50,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,0,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,167,231,248,166,6,16,192,156,179,84,26,12,8,219,178,248,166,6,16,136,176,168,188,3,34,11,8,167,231,248,166,6,16,152,181,186,85,18,219,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,114,53,83,53,68,84,77,100,112,70,67,75,98,115,53,120,78,106,77,121,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,51,54,120,119,118,105,79,117,48,110,72,112,57,114,119,70,84,109,66,51,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,114,53,83,53,68,84,77,100,112,70,67,75,98,115,53,120,78,106,77,121,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,15,10,5,65,108,105,97,115,18,6,138,1,3,77,97,121,18,11,10,5,77,111,110,116,111,18,2,16,50,18,97,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,81,50,79,10,15,10,5,65,108,105,97,115,18,6,138,1,3,77,97,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,242,188,162,6,10,14,10,2,116,111,18,8,82,6,8,192,140,219,163,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,51,113,56,110,89,80,71,113,88,122,112,114,120,52,53,121,121,86,104,70,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,242,188,162,6,10,14,10,2,116,111,18,8,82,6,8,192,140,219,163,6,26,12,8,219,178,248,166,6,16,136,176,168,188,3,34,12,8,219,178,248,166,6,16,136,176,168,188,3,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"bddf9718-0181-42be-8bd7-177039f7637d\",\"subject\":\"documents/students/r5S5DTMdpFCKbs5xNjMy/cuota_payments/36xwviOu0nHp9rwFTmB3\",\"time\":\"2023-08-17T14:50:15.427777100Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/r5S5DTMdpFCKbs5xNjMy/cuota_payments/36xwviOu0nHp9rwFTmB3\",\"data\":{\"type\":\"Buffer\",\"data\":[10,136,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,114,53,83,53,68,84,77,100,112,70,67,75,98,115,53,120,78,106,77,121,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,51,54,120,119,118,105,79,117,48,110,72,112,57,114,119,70,84,109,66,51,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,114,53,83,53,68,84,77,100,112,70,67,75,98,115,53,120,78,106,77,121,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,15,10,5,65,108,105,97,115,18,6,138,1,3,77,97,121,18,11,10,5,77,111,110,116,111,18,2,16,50,18,97,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,81,50,79,10,15,10,5,65,108,105,97,115,18,6,138,1,3,77,97,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,242,188,162,6,10,14,10,2,116,111,18,8,82,6,8,192,140,219,163,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,51,113,56,110,89,80,71,113,88,122,112,114,120,52,53,121,121,86,104,70,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,242,188,162,6,10,14,10,2,116,111,18,8,82,6,8,192,140,219,163,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,50,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,0,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,167,231,248,166,6,16,192,156,179,84,26,12,8,219,178,248,166,6,16,136,176,168,188,3,34,11,8,167,231,248,166,6,16,152,181,186,85,18,219,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,114,53,83,53,68,84,77,100,112,70,67,75,98,115,53,120,78,106,77,121,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,51,54,120,119,118,105,79,117,48,110,72,112,57,114,119,70,84,109,66,51,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,114,53,83,53,68,84,77,100,112,70,67,75,98,115,53,120,78,106,77,121,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,15,10,5,65,108,105,97,115,18,6,138,1,3,77,97,121,18,11,10,5,77,111,110,116,111,18,2,16,50,18,97,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,81,50,79,10,15,10,5,65,108,105,97,115,18,6,138,1,3,77,97,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,242,188,162,6,10,14,10,2,116,111,18,8,82,6,8,192,140,219,163,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,51,113,56,110,89,80,71,113,88,122,112,114,120,52,53,121,121,86,104,70,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,242,188,162,6,10,14,10,2,116,111,18,8,82,6,8,192,140,219,163,6,26,12,8,219,178,248,166,6,16,136,176,168,188,3,34,12,8,219,178,248,166,6,16,136,176,168,188,3,26,0]}}"}}
[debug] [2023-08-17T14:50:15.585Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 154.3217ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 154.3217ms"}}
[debug] [2023-08-17T14:50:15.585Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T14:50:15.585Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T14:50:15.585Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T14:50:15.586Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T14:50:15.589Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T14:50:15.589Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T14:50:15.589Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T14:50:15.589Z"],"workRunningCount":1}
[debug] [2023-08-17T14:50:15.589Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T14:50:15.590Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T14:50:15.590Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T14:50:15.590Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T14:50:15.591Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T14:50:15.593Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"7357be96-e506-4822-893a-6809ea2a5713","subject":"documents/students/r5S5DTMdpFCKbs5xNjMy/cuota_payments/WtfJ4AULbqTtsXVEONRq","time":"2023-08-17T14:50:15.585298600Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/r5S5DTMdpFCKbs5xNjMy/cuota_payments/WtfJ4AULbqTtsXVEONRq","data":{"type":"Buffer","data":[10,152,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,114,53,83,53,68,84,77,100,112,70,67,75,98,115,53,120,78,106,77,121,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,87,116,102,74,52,65,85,76,98,113,84,116,115,88,86,69,79,78,82,113,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,114,53,83,53,68,84,77,100,112,70,67,75,98,115,53,120,78,106,77,121,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,110,101,18,11,10,5,77,111,110,116,111,18,2,16,50,18,98,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,82,50,80,10,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,110,101,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,175,224,163,6,10,14,10,2,116,111,18,8,82,6,8,192,166,249,164,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,67,66,74,74,105,67,104,83,77,112,113,86,120,103,110,75,113,51,103,75,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,175,224,163,6,10,14,10,2,116,111,18,8,82,6,8,192,166,249,164,6,18,22,10,9,84,111,116,97,108,80,97,105,100,18,9,25,196,245,40,92,143,34,72,64,18,31,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,9,25,128,71,225,122,20,174,251,63,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,167,231,248,166,6,16,192,136,236,95,26,12,8,220,178,248,166,6,16,192,199,162,193,2,34,11,8,167,231,248,166,6,16,144,151,147,97,18,221,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,114,53,83,53,68,84,77,100,112,70,67,75,98,115,53,120,78,106,77,121,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,87,116,102,74,52,65,85,76,98,113,84,116,115,88,86,69,79,78,82,113,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,114,53,83,53,68,84,77,100,112,70,67,75,98,115,53,120,78,106,77,121,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,110,101,18,11,10,5,77,111,110,116,111,18,2,16,50,18,98,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,82,50,80,10,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,110,101,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,175,224,163,6,10,14,10,2,116,111,18,8,82,6,8,192,166,249,164,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,67,66,74,74,105,67,104,83,77,112,113,86,120,103,110,75,113,51,103,75,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,175,224,163,6,10,14,10,2,116,111,18,8,82,6,8,192,166,249,164,6,26,12,8,220,178,248,166,6,16,192,199,162,193,2,34,12,8,220,178,248,166,6,16,192,199,162,193,2,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"7357be96-e506-4822-893a-6809ea2a5713\",\"subject\":\"documents/students/r5S5DTMdpFCKbs5xNjMy/cuota_payments/WtfJ4AULbqTtsXVEONRq\",\"time\":\"2023-08-17T14:50:15.585298600Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/r5S5DTMdpFCKbs5xNjMy/cuota_payments/WtfJ4AULbqTtsXVEONRq\",\"data\":{\"type\":\"Buffer\",\"data\":[10,152,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,114,53,83,53,68,84,77,100,112,70,67,75,98,115,53,120,78,106,77,121,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,87,116,102,74,52,65,85,76,98,113,84,116,115,88,86,69,79,78,82,113,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,114,53,83,53,68,84,77,100,112,70,67,75,98,115,53,120,78,106,77,121,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,110,101,18,11,10,5,77,111,110,116,111,18,2,16,50,18,98,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,82,50,80,10,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,110,101,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,175,224,163,6,10,14,10,2,116,111,18,8,82,6,8,192,166,249,164,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,67,66,74,74,105,67,104,83,77,112,113,86,120,103,110,75,113,51,103,75,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,175,224,163,6,10,14,10,2,116,111,18,8,82,6,8,192,166,249,164,6,18,22,10,9,84,111,116,97,108,80,97,105,100,18,9,25,196,245,40,92,143,34,72,64,18,31,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,9,25,128,71,225,122,20,174,251,63,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,167,231,248,166,6,16,192,136,236,95,26,12,8,220,178,248,166,6,16,192,199,162,193,2,34,11,8,167,231,248,166,6,16,144,151,147,97,18,221,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,114,53,83,53,68,84,77,100,112,70,67,75,98,115,53,120,78,106,77,121,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,87,116,102,74,52,65,85,76,98,113,84,116,115,88,86,69,79,78,82,113,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,114,53,83,53,68,84,77,100,112,70,67,75,98,115,53,120,78,106,77,121,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,110,101,18,11,10,5,77,111,110,116,111,18,2,16,50,18,98,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,82,50,80,10,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,110,101,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,175,224,163,6,10,14,10,2,116,111,18,8,82,6,8,192,166,249,164,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,67,66,74,74,105,67,104,83,77,112,113,86,120,103,110,75,113,51,103,75,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,175,224,163,6,10,14,10,2,116,111,18,8,82,6,8,192,166,249,164,6,26,12,8,220,178,248,166,6,16,192,199,162,193,2,34,12,8,220,178,248,166,6,16,192,199,162,193,2,26,0]}}"}}
[debug] [2023-08-17T14:50:15.740Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 148.825ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 148.825ms"}}
[debug] [2023-08-17T14:50:15.740Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T14:50:15.740Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T14:50:15.740Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T14:50:15.740Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T14:50:16.295Z] Aug 17, 2023 10:50:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:50:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:50:16.296Z] Aug 17, 2023 10:50:16 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:50:16 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T14:50:16.330Z] Aug 17, 2023 10:50:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:50:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:50:21.625Z] Aug 17, 2023 10:50:21 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:50:21 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:50:40.261Z] Aug 17, 2023 10:50:40 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:50:40 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:50:40.263Z] Aug 17, 2023 10:50:40 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:50:40 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T14:50:40.291Z] Aug 17, 2023 10:50:40 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:50:40 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:50:43.862Z] Aug 17, 2023 10:50:43 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:50:43 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:50:43.863Z] Aug 17, 2023 10:50:43 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:50:43 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T14:50:43.894Z] Aug 17, 2023 10:50:43 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:50:43 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:51:13.911Z] Aug 17, 2023 10:51:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:51:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:51:15.308Z] Aug 17, 2023 10:51:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:51:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:51:15.309Z] Aug 17, 2023 10:51:15 AM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler onClose
INFO: channel closed
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:51:15 AM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler onClose\r\nINFO: channel closed\r\n"}}
[debug] [2023-08-17T14:51:15.771Z] Aug 17, 2023 10:51:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:51:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:52:12.346Z] Aug 17, 2023 10:52:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:52:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:52:12.347Z] Aug 17, 2023 10:52:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:52:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:52:12.347Z] Aug 17, 2023 10:52:12 AM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreListenHandler onClose
INFO: channel closed
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:52:12 AM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreListenHandler onClose\r\nINFO: channel closed\r\n"}}
[debug] [2023-08-17T14:52:12.348Z] Aug 17, 2023 10:52:12 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:52:12 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T14:52:12.354Z] Aug 17, 2023 10:52:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:52:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:52:15.785Z] Aug 17, 2023 10:52:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:52:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:53:12.381Z] Aug 17, 2023 10:53:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:53:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:53:15.819Z] Aug 17, 2023 10:53:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:53:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:54:12.406Z] Aug 17, 2023 10:54:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:54:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:54:15.844Z] Aug 17, 2023 10:54:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:54:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:55:12.425Z] Aug 17, 2023 10:55:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:55:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:55:15.856Z] Aug 17, 2023 10:55:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:55:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:56:12.439Z] Aug 17, 2023 10:56:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:56:12 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:56:15.877Z] Aug 17, 2023 10:56:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:56:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:57:15.900Z] Aug 17, 2023 10:57:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:57:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:57:27.455Z] Aug 17, 2023 10:57:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:57:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:58:15.907Z] Aug 17, 2023 10:58:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:58:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:58:27.484Z] Aug 17, 2023 10:58:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:58:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:59:15.925Z] Aug 17, 2023 10:59:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:59:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T14:59:27.504Z] Aug 17, 2023 10:59:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 10:59:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:00:15.952Z] Aug 17, 2023 11:00:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:00:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:00:27.519Z] Aug 17, 2023 11:00:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:00:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:01:15.967Z] Aug 17, 2023 11:01:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:01:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:01:27.539Z] Aug 17, 2023 11:01:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:01:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:02:15.988Z] Aug 17, 2023 11:02:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:02:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:02:27.564Z] Aug 17, 2023 11:02:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:02:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:03:15.993Z] Aug 17, 2023 11:03:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:03:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:03:27.590Z] Aug 17, 2023 11:03:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:03:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:04:16.020Z] Aug 17, 2023 11:04:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:04:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:04:27.606Z] Aug 17, 2023 11:04:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:04:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:05:16.047Z] Aug 17, 2023 11:05:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:05:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:05:27.621Z] Aug 17, 2023 11:05:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:05:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:06:16.063Z] Aug 17, 2023 11:06:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:06:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:06:27.642Z] Aug 17, 2023 11:06:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:06:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:07:16.091Z] Aug 17, 2023 11:07:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:07:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:07:27.662Z] Aug 17, 2023 11:07:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:07:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:08:16.109Z] Aug 17, 2023 11:08:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:08:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:08:27.683Z] Aug 17, 2023 11:08:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:08:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:09:16.122Z] Aug 17, 2023 11:09:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:09:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:09:27.698Z] Aug 17, 2023 11:09:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:09:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:10:16.140Z] Aug 17, 2023 11:10:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:10:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:10:27.728Z] Aug 17, 2023 11:10:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:10:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:11:16.148Z] Aug 17, 2023 11:11:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:11:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:11:27.761Z] Aug 17, 2023 11:11:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:11:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:12:16.169Z] Aug 17, 2023 11:12:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:12:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:12:27.779Z] Aug 17, 2023 11:12:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:12:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:13:16.184Z] Aug 17, 2023 11:13:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:13:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:13:27.800Z] Aug 17, 2023 11:13:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:13:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:14:01.266Z] Aug 17, 2023 11:14:01 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:14:01 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:14:27.814Z] Aug 17, 2023 11:14:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:14:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:15:01.286Z] Aug 17, 2023 11:15:01 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:15:01 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:15:27.829Z] Aug 17, 2023 11:15:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:15:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:16:01.311Z] Aug 17, 2023 11:16:01 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:16:01 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:16:27.855Z] Aug 17, 2023 11:16:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:16:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:16:47.263Z] Aug 17, 2023 11:16:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:16:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:17:27.883Z] Aug 17, 2023 11:17:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:17:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:17:47.292Z] Aug 17, 2023 11:17:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:17:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:18:27.909Z] Aug 17, 2023 11:18:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:18:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:18:47.302Z] Aug 17, 2023 11:18:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:18:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:19:27.925Z] Aug 17, 2023 11:19:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:19:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:19:47.311Z] Aug 17, 2023 11:19:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:19:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:20:27.955Z] Aug 17, 2023 11:20:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:20:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:20:47.337Z] Aug 17, 2023 11:20:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:20:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:21:27.974Z] Aug 17, 2023 11:21:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:21:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:21:47.352Z] Aug 17, 2023 11:21:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:21:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:22:27.984Z] Aug 17, 2023 11:22:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:22:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:22:47.369Z] Aug 17, 2023 11:22:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:22:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:23:28.012Z] Aug 17, 2023 11:23:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:23:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:23:47.383Z] Aug 17, 2023 11:23:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:23:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:24:28.019Z] Aug 17, 2023 11:24:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:24:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:24:47.399Z] Aug 17, 2023 11:24:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:24:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:25:28.043Z] Aug 17, 2023 11:25:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:25:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:25:47.418Z] Aug 17, 2023 11:25:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:25:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:26:28.072Z] Aug 17, 2023 11:26:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:26:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:26:47.430Z] Aug 17, 2023 11:26:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:26:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:27:28.082Z] Aug 17, 2023 11:27:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:27:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:27:47.437Z] Aug 17, 2023 11:27:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:27:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:28:28.098Z] Aug 17, 2023 11:28:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:28:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:28:47.451Z] Aug 17, 2023 11:28:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:28:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:29:28.120Z] Aug 17, 2023 11:29:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:29:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:29:47.471Z] Aug 17, 2023 11:29:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:29:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:30:28.139Z] Aug 17, 2023 11:30:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:30:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:30:47.493Z] Aug 17, 2023 11:30:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:30:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:31:28.162Z] Aug 17, 2023 11:31:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:31:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:31:47.516Z] Aug 17, 2023 11:31:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:31:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:32:28.170Z] Aug 17, 2023 11:32:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:32:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:32:47.530Z] Aug 17, 2023 11:32:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:32:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:33:28.191Z] Aug 17, 2023 11:33:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:33:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:33:47.544Z] Aug 17, 2023 11:33:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:33:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:34:28.219Z] Aug 17, 2023 11:34:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:34:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:34:47.558Z] Aug 17, 2023 11:34:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:34:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:35:28.235Z] Aug 17, 2023 11:35:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:35:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:35:47.563Z] Aug 17, 2023 11:35:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:35:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:36:17.383Z] Aug 17, 2023 11:36:17 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:36:17 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:36:17.384Z] Aug 17, 2023 11:36:17 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:36:17 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T15:36:17.390Z] Aug 17, 2023 11:36:17 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:36:17 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:36:17.511Z] Aug 17, 2023 11:36:17 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:36:17 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:36:17.512Z] Aug 17, 2023 11:36:17 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:36:17 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:36:17.513Z] Aug 17, 2023 11:36:17 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:36:17 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:36:17.516Z] Aug 17, 2023 11:36:17 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:36:17 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:36:17.519Z] Aug 17, 2023 11:36:17 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:36:17 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T15:36:17.568Z] Aug 17, 2023 11:36:17 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:36:17 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:36:20.373Z] Aug 17, 2023 11:36:20 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:36:20 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:36:20.374Z] Aug 17, 2023 11:36:20 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:36:20 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T15:36:20.403Z] Aug 17, 2023 11:36:20 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:36:20 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:36:23.383Z] Aug 17, 2023 11:36:23 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:36:23 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:36:23.385Z] Aug 17, 2023 11:36:23 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:36:23 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T15:36:23.418Z] Aug 17, 2023 11:36:23 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:36:23 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:36:47.578Z] Aug 17, 2023 11:36:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:36:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:37:23.435Z] Aug 17, 2023 11:37:23 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:37:23 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:37:47.599Z] Aug 17, 2023 11:37:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:37:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:38:23.450Z] Aug 17, 2023 11:38:23 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:38:23 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:38:47.615Z] Aug 17, 2023 11:38:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:38:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:39:23.467Z] Aug 17, 2023 11:39:23 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:39:23 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:39:47.640Z] Aug 17, 2023 11:39:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:39:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:40:23.477Z] Aug 17, 2023 11:40:23 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:40:23 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:40:47.661Z] Aug 17, 2023 11:40:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:40:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:41:23.492Z] Aug 17, 2023 11:41:23 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:41:23 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:41:47.679Z] Aug 17, 2023 11:41:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:41:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:42:23.515Z] Aug 17, 2023 11:42:23 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:42:23 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:42:47.708Z] Aug 17, 2023 11:42:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:42:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:43:23.543Z] Aug 17, 2023 11:43:23 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:43:23 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:43:47.736Z] Aug 17, 2023 11:43:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:43:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:44:23.561Z] Aug 17, 2023 11:44:23 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:44:23 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:45:03.272Z] Aug 17, 2023 11:45:03 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:45:03 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:45:23.580Z] Aug 17, 2023 11:45:23 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:45:23 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:46:03.288Z] Aug 17, 2023 11:46:03 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:46:03 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:46:23.595Z] Aug 17, 2023 11:46:23 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:46:23 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:47:03.314Z] Aug 17, 2023 11:47:03 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:47:03 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:47:13.498Z] Aug 17, 2023 11:47:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:47:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:47:13.499Z] Aug 17, 2023 11:47:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:47:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:47:13.500Z] Aug 17, 2023 11:47:13 AM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreListenHandler onClose
INFO: channel closed
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:47:13 AM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreListenHandler onClose\r\nINFO: channel closed\r\n"}}
[debug] [2023-08-17T15:47:13.501Z] Aug 17, 2023 11:47:13 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:47:13 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T15:47:13.508Z] Aug 17, 2023 11:47:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:47:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:48:03.328Z] Aug 17, 2023 11:48:03 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:48:03 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:48:29.265Z] Aug 17, 2023 11:48:29 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:48:29 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:49:03.348Z] Aug 17, 2023 11:49:03 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:49:03 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:49:29.280Z] Aug 17, 2023 11:49:29 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:49:29 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:50:03.371Z] Aug 17, 2023 11:50:03 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:50:03 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:50:29.288Z] Aug 17, 2023 11:50:29 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:50:29 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:51:03.390Z] Aug 17, 2023 11:51:03 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:51:03 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:51:15.261Z] Aug 17, 2023 11:51:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:51:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:52:03.419Z] Aug 17, 2023 11:52:03 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:52:03 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:52:15.287Z] Aug 17, 2023 11:52:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:52:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:52:25.872Z] Aug 17, 2023 11:52:25 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:52:25 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:52:25.895Z] Aug 17, 2023 11:52:25 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:52:25 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:52:25.934Z] Aug 17, 2023 11:52:25 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:52:25 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:52:25.939Z] Aug 17, 2023 11:52:25 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:52:25 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:52:25.975Z] Aug 17, 2023 11:52:25 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:52:25 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:52:45.982Z] Aug 17, 2023 11:52:45 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:52:45 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:52:45.993Z] Aug 17, 2023 11:52:45 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:52:45 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:52:45.995Z] Aug 17, 2023 11:52:45 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:52:45 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:52:45.996Z] Aug 17, 2023 11:52:45 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:52:45 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:52:45.997Z] Aug 17, 2023 11:52:45 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:52:45 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T15:52:46.005Z] Aug 17, 2023 11:52:46 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:52:46 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T15:52:46.009Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T15:52:46.009Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T15:52:46.009Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T15:52:46.009Z"],"workRunningCount":1}
[debug] [2023-08-17T15:52:46.009Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T15:52:46.010Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T15:52:46.010Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T15:52:46.010Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T15:52:46.011Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T15:52:46.013Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"5c7e3d8b-051c-42ab-ab59-9fbee2bcb31e","subject":"documents/students/mrEePBhzCrCmcn1m7n7H/cuota_payments/7ChCxUUNXoSU7IIxDTRU","time":"2023-08-17T15:52:46.008114100Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/mrEePBhzCrCmcn1m7n7H/cuota_payments/7ChCxUUNXoSU7IIxDTRU","data":{"type":"Buffer","data":[10,156,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,55,67,104,67,120,85,85,78,88,111,83,85,55,73,73,120,68,84,82,85,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,18,10,5,65,108,105,97,115,18,9,138,1,6,65,117,103,117,115,116,18,11,10,5,77,111,110,116,111,18,2,16,50,18,100,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,84,50,82,10,18,10,5,65,108,105,97,115,18,9,138,1,6,65,117,103,117,115,116,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,134,162,166,6,10,14,10,2,116,111,18,8,82,6,8,192,160,192,167,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,114,80,119,120,85,117,102,112,79,87,100,105,98,115,108,110,88,56,48,86,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,134,162,166,6,10,14,10,2,116,111,18,8,82,6,8,192,160,192,167,6,18,22,10,9,84,111,116,97,108,80,97,105,100,18,9,25,136,235,81,184,30,69,60,64,18,31,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,9,25,120,20,174,71,225,186,53,64,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,206,132,249,166,6,16,128,155,238,2,26,12,8,220,178,248,166,6,16,128,131,174,151,1,34,11,8,206,132,249,166,6,16,184,166,239,3,18,225,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,55,67,104,67,120,85,85,78,88,111,83,85,55,73,73,120,68,84,82,85,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,18,10,5,65,108,105,97,115,18,9,138,1,6,65,117,103,117,115,116,18,11,10,5,77,111,110,116,111,18,2,16,50,18,100,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,84,50,82,10,18,10,5,65,108,105,97,115,18,9,138,1,6,65,117,103,117,115,116,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,134,162,166,6,10,14,10,2,116,111,18,8,82,6,8,192,160,192,167,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,114,80,119,120,85,117,102,112,79,87,100,105,98,115,108,110,88,56,48,86,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,134,162,166,6,10,14,10,2,116,111,18,8,82,6,8,192,160,192,167,6,26,12,8,220,178,248,166,6,16,128,131,174,151,1,34,12,8,220,178,248,166,6,16,128,131,174,151,1,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"5c7e3d8b-051c-42ab-ab59-9fbee2bcb31e\",\"subject\":\"documents/students/mrEePBhzCrCmcn1m7n7H/cuota_payments/7ChCxUUNXoSU7IIxDTRU\",\"time\":\"2023-08-17T15:52:46.008114100Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/mrEePBhzCrCmcn1m7n7H/cuota_payments/7ChCxUUNXoSU7IIxDTRU\",\"data\":{\"type\":\"Buffer\",\"data\":[10,156,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,55,67,104,67,120,85,85,78,88,111,83,85,55,73,73,120,68,84,82,85,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,18,10,5,65,108,105,97,115,18,9,138,1,6,65,117,103,117,115,116,18,11,10,5,77,111,110,116,111,18,2,16,50,18,100,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,84,50,82,10,18,10,5,65,108,105,97,115,18,9,138,1,6,65,117,103,117,115,116,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,134,162,166,6,10,14,10,2,116,111,18,8,82,6,8,192,160,192,167,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,114,80,119,120,85,117,102,112,79,87,100,105,98,115,108,110,88,56,48,86,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,134,162,166,6,10,14,10,2,116,111,18,8,82,6,8,192,160,192,167,6,18,22,10,9,84,111,116,97,108,80,97,105,100,18,9,25,136,235,81,184,30,69,60,64,18,31,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,9,25,120,20,174,71,225,186,53,64,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,206,132,249,166,6,16,128,155,238,2,26,12,8,220,178,248,166,6,16,128,131,174,151,1,34,11,8,206,132,249,166,6,16,184,166,239,3,18,225,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,55,67,104,67,120,85,85,78,88,111,83,85,55,73,73,120,68,84,82,85,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,18,10,5,65,108,105,97,115,18,9,138,1,6,65,117,103,117,115,116,18,11,10,5,77,111,110,116,111,18,2,16,50,18,100,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,84,50,82,10,18,10,5,65,108,105,97,115,18,9,138,1,6,65,117,103,117,115,116,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,134,162,166,6,10,14,10,2,116,111,18,8,82,6,8,192,160,192,167,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,114,80,119,120,85,117,102,112,79,87,100,105,98,115,108,110,88,56,48,86,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,134,162,166,6,10,14,10,2,116,111,18,8,82,6,8,192,160,192,167,6,26,12,8,220,178,248,166,6,16,128,131,174,151,1,34,12,8,220,178,248,166,6,16,128,131,174,151,1,26,0]}}"}}
[debug] [2023-08-17T15:52:46.016Z] Aug 17, 2023 11:52:46 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:52:46 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T15:52:46.019Z] Aug 17, 2023 11:52:46 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:52:46 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:52:46.026Z] Aug 17, 2023 11:52:46 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:52:46 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:52:46.039Z] Aug 17, 2023 11:52:46 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:52:46 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:52:46.040Z] Aug 17, 2023 11:52:46 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:52:46 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T15:52:46.047Z] Aug 17, 2023 11:52:46 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:52:46 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T15:52:46.066Z] Aug 17, 2023 11:52:46 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:52:46 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:52:46.067Z] Aug 17, 2023 11:52:46 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:52:46 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T15:52:46.075Z] Aug 17, 2023 11:52:46 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:52:46 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T15:52:46.095Z] Aug 17, 2023 11:52:46 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:52:46 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:52:46.097Z] Aug 17, 2023 11:52:46 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:52:46 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T15:52:46.103Z] Aug 17, 2023 11:52:46 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:52:46 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T15:52:46.155Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 144.4126ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 144.4126ms"}}
[debug] [2023-08-17T15:52:46.156Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T15:52:46.156Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T15:52:46.156Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T15:52:46.156Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T15:52:46.160Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T15:52:46.160Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T15:52:46.160Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T15:52:46.160Z"],"workRunningCount":1}
[debug] [2023-08-17T15:52:46.160Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T15:52:46.161Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T15:52:46.161Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T15:52:46.161Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T15:52:46.162Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T15:52:46.164Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"6393d912-0b7d-467c-a078-2f5a586312e3","subject":"documents/students/mrEePBhzCrCmcn1m7n7H/cuota_payments/BIZSalOdg0AOhXTaFgf5","time":"2023-08-17T15:52:46.156635900Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/mrEePBhzCrCmcn1m7n7H/cuota_payments/BIZSalOdg0AOhXTaFgf5","data":{"type":"Buffer","data":[10,138,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,66,73,90,83,97,108,79,100,103,48,65,79,104,88,84,97,70,103,102,53,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,108,121,18,11,10,5,77,111,110,116,111,18,2,16,50,18,98,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,82,50,80,10,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,108,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,201,254,164,6,10,14,10,2,116,111,18,8,82,6,8,192,227,156,166,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,110,81,74,83,113,119,106,57,48,104,111,49,49,97,117,72,51,55,69,83,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,201,254,164,6,10,14,10,2,116,111,18,8,82,6,8,192,227,156,166,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,50,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,0,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,206,132,249,166,6,16,192,211,180,22,26,12,8,220,178,248,166,6,16,176,231,154,242,1,34,11,8,206,132,249,166,6,16,224,230,181,23,18,221,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,66,73,90,83,97,108,79,100,103,48,65,79,104,88,84,97,70,103,102,53,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,108,121,18,11,10,5,77,111,110,116,111,18,2,16,50,18,98,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,82,50,80,10,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,108,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,201,254,164,6,10,14,10,2,116,111,18,8,82,6,8,192,227,156,166,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,110,81,74,83,113,119,106,57,48,104,111,49,49,97,117,72,51,55,69,83,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,201,254,164,6,10,14,10,2,116,111,18,8,82,6,8,192,227,156,166,6,26,12,8,220,178,248,166,6,16,176,231,154,242,1,34,12,8,220,178,248,166,6,16,176,231,154,242,1,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"6393d912-0b7d-467c-a078-2f5a586312e3\",\"subject\":\"documents/students/mrEePBhzCrCmcn1m7n7H/cuota_payments/BIZSalOdg0AOhXTaFgf5\",\"time\":\"2023-08-17T15:52:46.156635900Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/mrEePBhzCrCmcn1m7n7H/cuota_payments/BIZSalOdg0AOhXTaFgf5\",\"data\":{\"type\":\"Buffer\",\"data\":[10,138,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,66,73,90,83,97,108,79,100,103,48,65,79,104,88,84,97,70,103,102,53,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,108,121,18,11,10,5,77,111,110,116,111,18,2,16,50,18,98,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,82,50,80,10,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,108,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,201,254,164,6,10,14,10,2,116,111,18,8,82,6,8,192,227,156,166,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,110,81,74,83,113,119,106,57,48,104,111,49,49,97,117,72,51,55,69,83,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,201,254,164,6,10,14,10,2,116,111,18,8,82,6,8,192,227,156,166,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,50,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,0,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,206,132,249,166,6,16,192,211,180,22,26,12,8,220,178,248,166,6,16,176,231,154,242,1,34,11,8,206,132,249,166,6,16,224,230,181,23,18,221,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,66,73,90,83,97,108,79,100,103,48,65,79,104,88,84,97,70,103,102,53,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,109,114,69,101,80,66,104,122,67,114,67,109,99,110,49,109,55,110,55,72,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,108,121,18,11,10,5,77,111,110,116,111,18,2,16,50,18,98,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,82,50,80,10,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,108,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,201,254,164,6,10,14,10,2,116,111,18,8,82,6,8,192,227,156,166,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,110,81,74,83,113,119,106,57,48,104,111,49,49,97,117,72,51,55,69,83,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,201,254,164,6,10,14,10,2,116,111,18,8,82,6,8,192,227,156,166,6,26,12,8,220,178,248,166,6,16,176,231,154,242,1,34,12,8,220,178,248,166,6,16,176,231,154,242,1,26,0]}}"}}
[debug] [2023-08-17T15:52:46.304Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 142.2974ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 142.2974ms"}}
[debug] [2023-08-17T15:52:46.305Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T15:52:46.305Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T15:52:46.305Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T15:52:46.305Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T15:52:46.318Z] Aug 17, 2023 11:52:46 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:52:46 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:52:46.319Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T15:52:46.319Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T15:52:46.319Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T15:52:46.319Z"],"workRunningCount":1}
[debug] [2023-08-17T15:52:46.319Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T15:52:46.320Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T15:52:46.320Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T15:52:46.320Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T15:52:46.320Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T15:52:46.323Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"123d19f0-3bf0-406e-ad33-979fa7421284","subject":"documents/students/r5S5DTMdpFCKbs5xNjMy/cuota_payments/WtfJ4AULbqTtsXVEONRq","time":"2023-08-17T15:52:46.304666900Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/r5S5DTMdpFCKbs5xNjMy/cuota_payments/WtfJ4AULbqTtsXVEONRq","data":{"type":"Buffer","data":[10,138,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,114,53,83,53,68,84,77,100,112,70,67,75,98,115,53,120,78,106,77,121,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,87,116,102,74,52,65,85,76,98,113,84,116,115,88,86,69,79,78,82,113,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,114,53,83,53,68,84,77,100,112,70,67,75,98,115,53,120,78,106,77,121,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,110,101,18,11,10,5,77,111,110,116,111,18,2,16,50,18,98,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,82,50,80,10,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,110,101,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,175,224,163,6,10,14,10,2,116,111,18,8,82,6,8,192,166,249,164,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,67,66,74,74,105,67,104,83,77,112,113,86,120,103,110,75,113,51,103,75,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,175,224,163,6,10,14,10,2,116,111,18,8,82,6,8,192,166,249,164,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,50,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,0,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,206,132,249,166,6,16,192,209,225,35,26,12,8,220,178,248,166,6,16,192,199,162,193,2,34,11,8,206,132,249,166,6,16,200,236,226,36,18,152,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,114,53,83,53,68,84,77,100,112,70,67,75,98,115,53,120,78,106,77,121,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,87,116,102,74,52,65,85,76,98,113,84,116,115,88,86,69,79,78,82,113,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,114,53,83,53,68,84,77,100,112,70,67,75,98,115,53,120,78,106,77,121,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,110,101,18,11,10,5,77,111,110,116,111,18,2,16,50,18,98,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,82,50,80,10,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,110,101,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,175,224,163,6,10,14,10,2,116,111,18,8,82,6,8,192,166,249,164,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,67,66,74,74,105,67,104,83,77,112,113,86,120,103,110,75,113,51,103,75,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,175,224,163,6,10,14,10,2,116,111,18,8,82,6,8,192,166,249,164,6,18,22,10,9,84,111,116,97,108,80,97,105,100,18,9,25,196,245,40,92,143,34,72,64,18,31,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,9,25,128,71,225,122,20,174,251,63,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,167,231,248,166,6,16,192,136,236,95,26,12,8,220,178,248,166,6,16,192,199,162,193,2,34,11,8,167,231,248,166,6,16,144,151,147,97,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"123d19f0-3bf0-406e-ad33-979fa7421284\",\"subject\":\"documents/students/r5S5DTMdpFCKbs5xNjMy/cuota_payments/WtfJ4AULbqTtsXVEONRq\",\"time\":\"2023-08-17T15:52:46.304666900Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/r5S5DTMdpFCKbs5xNjMy/cuota_payments/WtfJ4AULbqTtsXVEONRq\",\"data\":{\"type\":\"Buffer\",\"data\":[10,138,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,114,53,83,53,68,84,77,100,112,70,67,75,98,115,53,120,78,106,77,121,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,87,116,102,74,52,65,85,76,98,113,84,116,115,88,86,69,79,78,82,113,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,114,53,83,53,68,84,77,100,112,70,67,75,98,115,53,120,78,106,77,121,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,110,101,18,11,10,5,77,111,110,116,111,18,2,16,50,18,98,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,82,50,80,10,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,110,101,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,175,224,163,6,10,14,10,2,116,111,18,8,82,6,8,192,166,249,164,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,67,66,74,74,105,67,104,83,77,112,113,86,120,103,110,75,113,51,103,75,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,175,224,163,6,10,14,10,2,116,111,18,8,82,6,8,192,166,249,164,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,50,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,0,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,206,132,249,166,6,16,192,209,225,35,26,12,8,220,178,248,166,6,16,192,199,162,193,2,34,11,8,206,132,249,166,6,16,200,236,226,36,18,152,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,114,53,83,53,68,84,77,100,112,70,67,75,98,115,53,120,78,106,77,121,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,87,116,102,74,52,65,85,76,98,113,84,116,115,88,86,69,79,78,82,113,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,114,53,83,53,68,84,77,100,112,70,67,75,98,115,53,120,78,106,77,121,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,110,101,18,11,10,5,77,111,110,116,111,18,2,16,50,18,98,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,82,50,80,10,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,110,101,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,175,224,163,6,10,14,10,2,116,111,18,8,82,6,8,192,166,249,164,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,67,66,74,74,105,67,104,83,77,112,113,86,120,103,110,75,113,51,103,75,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,175,224,163,6,10,14,10,2,116,111,18,8,82,6,8,192,166,249,164,6,18,22,10,9,84,111,116,97,108,80,97,105,100,18,9,25,196,245,40,92,143,34,72,64,18,31,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,9,25,128,71,225,122,20,174,251,63,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,167,231,248,166,6,16,192,136,236,95,26,12,8,220,178,248,166,6,16,192,199,162,193,2,34,11,8,167,231,248,166,6,16,144,151,147,97,26,0]}}"}}
[debug] [2023-08-17T15:52:46.351Z] Aug 17, 2023 11:52:46 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:52:46 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:52:46.392Z] Aug 17, 2023 11:52:46 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:52:46 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:52:46.474Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 153.6397ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 153.6397ms"}}
[debug] [2023-08-17T15:52:46.474Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T15:52:46.475Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T15:52:46.475Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T15:52:46.475Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T15:52:46.493Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T15:52:46.493Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T15:52:46.493Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T15:52:46.493Z"],"workRunningCount":1}
[debug] [2023-08-17T15:52:46.493Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T15:52:46.494Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T15:52:46.494Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T15:52:46.494Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T15:52:46.495Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T15:52:46.496Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"3a9a27b1-4eab-4cd0-80e2-10208dd2f30a","subject":"documents/students/r5S5DTMdpFCKbs5xNjMy/cuota_payments/jYxLgQ7FSe4nDFN6kGXF","time":"2023-08-17T15:52:46.478187500Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/r5S5DTMdpFCKbs5xNjMy/cuota_payments/jYxLgQ7FSe4nDFN6kGXF","data":{"type":"Buffer","data":[10,138,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,114,53,83,53,68,84,77,100,112,70,67,75,98,115,53,120,78,106,77,121,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,106,89,120,76,103,81,55,70,83,101,52,110,68,70,78,54,107,71,88,70,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,114,53,83,53,68,84,77,100,112,70,67,75,98,115,53,120,78,106,77,121,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,108,121,18,11,10,5,77,111,110,116,111,18,2,16,50,18,98,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,82,50,80,10,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,108,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,201,254,164,6,10,14,10,2,116,111,18,8,82,6,8,192,227,156,166,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,110,81,74,83,113,119,106,57,48,104,111,49,49,97,117,72,51,55,69,83,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,201,254,164,6,10,14,10,2,116,111,18,8,82,6,8,192,227,156,166,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,50,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,0,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,206,132,249,166,6,16,192,207,142,49,26,12,8,220,178,248,166,6,16,128,186,172,212,2,34,11,8,206,132,249,166,6,16,160,193,175,50,18,221,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,114,53,83,53,68,84,77,100,112,70,67,75,98,115,53,120,78,106,77,121,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,106,89,120,76,103,81,55,70,83,101,52,110,68,70,78,54,107,71,88,70,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,114,53,83,53,68,84,77,100,112,70,67,75,98,115,53,120,78,106,77,121,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,108,121,18,11,10,5,77,111,110,116,111,18,2,16,50,18,98,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,82,50,80,10,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,108,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,201,254,164,6,10,14,10,2,116,111,18,8,82,6,8,192,227,156,166,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,110,81,74,83,113,119,106,57,48,104,111,49,49,97,117,72,51,55,69,83,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,201,254,164,6,10,14,10,2,116,111,18,8,82,6,8,192,227,156,166,6,26,12,8,220,178,248,166,6,16,128,186,172,212,2,34,12,8,220,178,248,166,6,16,128,186,172,212,2,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"3a9a27b1-4eab-4cd0-80e2-10208dd2f30a\",\"subject\":\"documents/students/r5S5DTMdpFCKbs5xNjMy/cuota_payments/jYxLgQ7FSe4nDFN6kGXF\",\"time\":\"2023-08-17T15:52:46.478187500Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/r5S5DTMdpFCKbs5xNjMy/cuota_payments/jYxLgQ7FSe4nDFN6kGXF\",\"data\":{\"type\":\"Buffer\",\"data\":[10,138,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,114,53,83,53,68,84,77,100,112,70,67,75,98,115,53,120,78,106,77,121,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,106,89,120,76,103,81,55,70,83,101,52,110,68,70,78,54,107,71,88,70,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,114,53,83,53,68,84,77,100,112,70,67,75,98,115,53,120,78,106,77,121,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,108,121,18,11,10,5,77,111,110,116,111,18,2,16,50,18,98,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,82,50,80,10,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,108,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,201,254,164,6,10,14,10,2,116,111,18,8,82,6,8,192,227,156,166,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,110,81,74,83,113,119,106,57,48,104,111,49,49,97,117,72,51,55,69,83,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,201,254,164,6,10,14,10,2,116,111,18,8,82,6,8,192,227,156,166,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,50,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,0,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,206,132,249,166,6,16,192,207,142,49,26,12,8,220,178,248,166,6,16,128,186,172,212,2,34,11,8,206,132,249,166,6,16,160,193,175,50,18,221,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,114,53,83,53,68,84,77,100,112,70,67,75,98,115,53,120,78,106,77,121,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,106,89,120,76,103,81,55,70,83,101,52,110,68,70,78,54,107,71,88,70,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,114,53,83,53,68,84,77,100,112,70,67,75,98,115,53,120,78,106,77,121,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,108,121,18,11,10,5,77,111,110,116,111,18,2,16,50,18,98,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,82,50,80,10,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,108,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,201,254,164,6,10,14,10,2,116,111,18,8,82,6,8,192,227,156,166,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,110,81,74,83,113,119,106,57,48,104,111,49,49,97,117,72,51,55,69,83,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,57,84,110,108,100,73,103,89,100,70,121,73,115,114,80,82,70,107,82,99,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,201,254,164,6,10,14,10,2,116,111,18,8,82,6,8,192,227,156,166,6,26,12,8,220,178,248,166,6,16,128,186,172,212,2,34,12,8,220,178,248,166,6,16,128,186,172,212,2,26,0]}}"}}
[debug] [2023-08-17T15:52:46.624Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 129.8106ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 129.8106ms"}}
[debug] [2023-08-17T15:52:46.625Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T15:52:46.625Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T15:52:46.625Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T15:52:46.625Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T15:52:47.312Z] Aug 17, 2023 11:52:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:52:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:52:47.314Z] Aug 17, 2023 11:52:47 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:52:47 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T15:52:47.350Z] Aug 17, 2023 11:52:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:52:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:52:49.079Z] Aug 17, 2023 11:52:49 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:52:49 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:52:51.544Z] Aug 17, 2023 11:52:51 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:52:51 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:52:51.564Z] Aug 17, 2023 11:52:51 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:52:51 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:52:51.597Z] Aug 17, 2023 11:52:51 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:52:51 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:52:51.624Z] Aug 17, 2023 11:52:51 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:52:51 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:52:53.215Z] Aug 17, 2023 11:52:53 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:52:53 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:52:54.999Z] Aug 17, 2023 11:52:55 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:52:55 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:52:55.001Z] Aug 17, 2023 11:52:55 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:52:55 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T15:52:55.032Z] Aug 17, 2023 11:52:55 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:52:55 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:52:59.092Z] Aug 17, 2023 11:52:59 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:52:59 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:52:59.093Z] Aug 17, 2023 11:52:59 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:52:59 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T15:52:59.130Z] Aug 17, 2023 11:52:59 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:52:59 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:53:01.417Z] Aug 17, 2023 11:53:01 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:53:01 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:53:01.418Z] Aug 17, 2023 11:53:01 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:53:01 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T15:53:01.441Z] Aug 17, 2023 11:53:01 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:53:01 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:53:01.450Z] Aug 17, 2023 11:53:01 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:53:01 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:53:03.170Z] Aug 17, 2023 11:53:03 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:53:03 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:53:03.171Z] Aug 17, 2023 11:53:03 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:53:03 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T15:53:03.192Z] Aug 17, 2023 11:53:03 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:53:03 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:53:04.111Z] Aug 17, 2023 11:53:04 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:53:04 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:53:04.112Z] Aug 17, 2023 11:53:04 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:53:04 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T15:53:04.133Z] Aug 17, 2023 11:53:04 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:53:04 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:53:04.819Z] Aug 17, 2023 11:53:04 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:53:04 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:53:04.820Z] Aug 17, 2023 11:53:04 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:53:04 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T15:53:04.842Z] Aug 17, 2023 11:53:04 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:53:04 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:53:05.398Z] Aug 17, 2023 11:53:05 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:53:05 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:53:05.400Z] Aug 17, 2023 11:53:05 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:53:05 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T15:53:05.439Z] Aug 17, 2023 11:53:05 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:53:05 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:53:08.274Z] Aug 17, 2023 11:53:08 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:53:08 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:53:08.276Z] Aug 17, 2023 11:53:08 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:53:08 AM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T15:53:08.307Z] Aug 17, 2023 11:53:08 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:53:08 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:53:16.640Z] Aug 17, 2023 11:53:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:53:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:53:46.318Z] Aug 17, 2023 11:53:46 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:53:46 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:53:46.319Z] Aug 17, 2023 11:53:46 AM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler onClose
INFO: channel closed
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:53:46 AM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler onClose\r\nINFO: channel closed\r\n"}}
[debug] [2023-08-17T15:54:08.323Z] Aug 17, 2023 11:54:08 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:54:08 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:54:16.654Z] Aug 17, 2023 11:54:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:54:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:55:08.338Z] Aug 17, 2023 11:55:08 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:55:08 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:55:16.671Z] Aug 17, 2023 11:55:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:55:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:56:08.357Z] Aug 17, 2023 11:56:08 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:56:08 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:56:16.686Z] Aug 17, 2023 11:56:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:56:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:57:08.373Z] Aug 17, 2023 11:57:08 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:57:08 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:57:16.705Z] Aug 17, 2023 11:57:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:57:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:58:08.394Z] Aug 17, 2023 11:58:08 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:58:08 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:58:16.721Z] Aug 17, 2023 11:58:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:58:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:59:08.422Z] Aug 17, 2023 11:59:08 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:59:08 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T15:59:16.740Z] Aug 17, 2023 11:59:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 11:59:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:00:08.438Z] Aug 17, 2023 12:00:08 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:00:08 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:00:16.754Z] Aug 17, 2023 12:00:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:00:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:01:08.456Z] Aug 17, 2023 12:01:08 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:01:08 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:01:16.770Z] Aug 17, 2023 12:01:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:01:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:02:08.477Z] Aug 17, 2023 12:02:08 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:02:08 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:02:16.792Z] Aug 17, 2023 12:02:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:02:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:03:08.496Z] Aug 17, 2023 12:03:08 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:03:08 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:03:16.808Z] Aug 17, 2023 12:03:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:03:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:04:08.506Z] Aug 17, 2023 12:04:08 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:04:08 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:04:16.823Z] Aug 17, 2023 12:04:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:04:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:05:08.517Z] Aug 17, 2023 12:05:08 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:05:08 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:05:16.842Z] Aug 17, 2023 12:05:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:05:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:06:08.535Z] Aug 17, 2023 12:06:08 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:06:08 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:06:16.859Z] Aug 17, 2023 12:06:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:06:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:07:08.567Z] Aug 17, 2023 12:07:08 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:07:08 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:07:16.880Z] Aug 17, 2023 12:07:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:07:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:08:08.578Z] Aug 17, 2023 12:08:08 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:08:08 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:08:16.897Z] Aug 17, 2023 12:08:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:08:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:09:08.598Z] Aug 17, 2023 12:09:08 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:09:08 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:09:16.920Z] Aug 17, 2023 12:09:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:09:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:10:08.624Z] Aug 17, 2023 12:10:08 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:10:08 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:10:16.928Z] Aug 17, 2023 12:10:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:10:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:11:02.271Z] Aug 17, 2023 12:11:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:11:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:11:08.644Z] Aug 17, 2023 12:11:08 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:11:08 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:12:02.285Z] Aug 17, 2023 12:12:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:12:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:12:08.663Z] Aug 17, 2023 12:12:08 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:12:08 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:13:02.309Z] Aug 17, 2023 12:13:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:13:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:13:08.685Z] Aug 17, 2023 12:13:08 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:13:08 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:14:02.329Z] Aug 17, 2023 12:14:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:14:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:14:08.706Z] Aug 17, 2023 12:14:08 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:14:08 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:15:02.343Z] Aug 17, 2023 12:15:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:15:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:15:08.728Z] Aug 17, 2023 12:15:08 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:15:08 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:16:02.356Z] Aug 17, 2023 12:16:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:16:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:16:08.740Z] Aug 17, 2023 12:16:08 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:16:08 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:17:02.375Z] Aug 17, 2023 12:17:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:17:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:17:08.759Z] Aug 17, 2023 12:17:08 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:17:08 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:18:02.385Z] Aug 17, 2023 12:18:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:18:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:18:08.778Z] Aug 17, 2023 12:18:08 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:18:08 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:19:02.404Z] Aug 17, 2023 12:19:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:19:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:19:08.792Z] Aug 17, 2023 12:19:08 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:19:08 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:20:02.432Z] Aug 17, 2023 12:20:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:20:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:20:08.815Z] Aug 17, 2023 12:20:08 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:20:08 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:20:14.480Z] Aug 17, 2023 12:20:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:20:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:20:14.481Z] Aug 17, 2023 12:20:14 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:20:14 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T16:20:14.487Z] Aug 17, 2023 12:20:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:20:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:20:14.585Z] Aug 17, 2023 12:20:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:20:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:20:14.586Z] Aug 17, 2023 12:20:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:20:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:20:14.595Z] Aug 17, 2023 12:20:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:20:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:20:14.597Z] Aug 17, 2023 12:20:14 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:20:14 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T16:20:14.641Z] Aug 17, 2023 12:20:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:20:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:20:20.760Z] Aug 17, 2023 12:20:20 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:20:20 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:20:20.762Z] Aug 17, 2023 12:20:20 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:20:20 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T16:20:20.793Z] Aug 17, 2023 12:20:20 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:20:20 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:20:25.185Z] Aug 17, 2023 12:20:25 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:20:25 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:20:25.187Z] Aug 17, 2023 12:20:25 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:20:25 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T16:20:25.235Z] Aug 17, 2023 12:20:25 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:20:25 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:21:02.446Z] Aug 17, 2023 12:21:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:21:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:21:25.242Z] Aug 17, 2023 12:21:25 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:21:25 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:22:02.458Z] Aug 17, 2023 12:22:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:22:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:22:25.259Z] Aug 17, 2023 12:22:25 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:22:25 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:23:02.484Z] Aug 17, 2023 12:23:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:23:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:23:25.285Z] Aug 17, 2023 12:23:25 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:23:25 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:24:02.507Z] Aug 17, 2023 12:24:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:24:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:24:25.300Z] Aug 17, 2023 12:24:25 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:24:25 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:25:02.532Z] Aug 17, 2023 12:25:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:25:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:25:25.327Z] Aug 17, 2023 12:25:25 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:25:25 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:26:02.553Z] Aug 17, 2023 12:26:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:26:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:26:25.360Z] Aug 17, 2023 12:26:25 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:26:25 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:27:02.581Z] Aug 17, 2023 12:27:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:27:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:27:25.383Z] Aug 17, 2023 12:27:25 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:27:25 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:28:02.599Z] Aug 17, 2023 12:28:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:28:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:28:25.395Z] Aug 17, 2023 12:28:25 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:28:25 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:29:02.603Z] Aug 17, 2023 12:29:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:29:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:29:25.413Z] Aug 17, 2023 12:29:25 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:29:25 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:30:18.269Z] Aug 17, 2023 12:30:18 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:30:18 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:30:25.425Z] Aug 17, 2023 12:30:25 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:30:25 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:31:18.295Z] Aug 17, 2023 12:31:18 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:31:18 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:31:25.440Z] Aug 17, 2023 12:31:25 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:31:25 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:32:18.318Z] Aug 17, 2023 12:32:18 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:32:18 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:32:25.466Z] Aug 17, 2023 12:32:25 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:32:25 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:33:18.340Z] Aug 17, 2023 12:33:18 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:33:18 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:33:25.481Z] Aug 17, 2023 12:33:25 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:33:25 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:34:18.355Z] Aug 17, 2023 12:34:18 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:34:18 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:34:25.513Z] Aug 17, 2023 12:34:25 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:34:25 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:35:18.366Z] Aug 17, 2023 12:35:18 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:35:18 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:35:25.532Z] Aug 17, 2023 12:35:25 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:35:25 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:36:18.380Z] Aug 17, 2023 12:36:18 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:36:18 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:36:25.560Z] Aug 17, 2023 12:36:25 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:36:25 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:37:18.387Z] Aug 17, 2023 12:37:18 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:37:18 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:37:25.586Z] Aug 17, 2023 12:37:25 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:37:25 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:38:04.269Z] Aug 17, 2023 12:38:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:38:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:38:25.605Z] Aug 17, 2023 12:38:25 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:38:25 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:39:04.289Z] Aug 17, 2023 12:39:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:39:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:39:25.623Z] Aug 17, 2023 12:39:25 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:39:25 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:40:04.302Z] Aug 17, 2023 12:40:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:40:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:40:25.646Z] Aug 17, 2023 12:40:25 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:40:25 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:41:04.319Z] Aug 17, 2023 12:41:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:41:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:41:25.669Z] Aug 17, 2023 12:41:25 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:41:25 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:42:04.338Z] Aug 17, 2023 12:42:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:42:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:42:13.694Z] Aug 17, 2023 12:42:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:42:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:42:13.695Z] Aug 17, 2023 12:42:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:42:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:42:13.695Z] Aug 17, 2023 12:42:13 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreListenHandler onClose
INFO: channel closed
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:42:13 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreListenHandler onClose\r\nINFO: channel closed\r\n"}}
[debug] [2023-08-17T16:42:13.695Z] Aug 17, 2023 12:42:13 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:42:13 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T16:42:13.700Z] Aug 17, 2023 12:42:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:42:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:43:04.354Z] Aug 17, 2023 12:43:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:43:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:43:13.715Z] Aug 17, 2023 12:43:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:43:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:44:04.380Z] Aug 17, 2023 12:44:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:44:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:44:13.726Z] Aug 17, 2023 12:44:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:44:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:45:04.410Z] Aug 17, 2023 12:45:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:45:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:45:13.748Z] Aug 17, 2023 12:45:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:45:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:46:04.434Z] Aug 17, 2023 12:46:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:46:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:46:13.768Z] Aug 17, 2023 12:46:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:46:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:47:04.451Z] Aug 17, 2023 12:47:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:47:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:47:13.792Z] Aug 17, 2023 12:47:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:47:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:48:04.460Z] Aug 17, 2023 12:48:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:48:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:48:13.815Z] Aug 17, 2023 12:48:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:48:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:49:04.478Z] Aug 17, 2023 12:49:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:49:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:49:13.832Z] Aug 17, 2023 12:49:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:49:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:50:04.497Z] Aug 17, 2023 12:50:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:50:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:50:13.848Z] Aug 17, 2023 12:50:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:50:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:51:04.517Z] Aug 17, 2023 12:51:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:51:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:51:13.861Z] Aug 17, 2023 12:51:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:51:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:52:04.543Z] Aug 17, 2023 12:52:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:52:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:52:13.873Z] Aug 17, 2023 12:52:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:52:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:53:04.572Z] Aug 17, 2023 12:53:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:53:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:53:13.884Z] Aug 17, 2023 12:53:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:53:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:54:04.580Z] Aug 17, 2023 12:54:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:54:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:54:13.898Z] Aug 17, 2023 12:54:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:54:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:55:04.599Z] Aug 17, 2023 12:55:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:55:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:55:13.915Z] Aug 17, 2023 12:55:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:55:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:56:04.607Z] Aug 17, 2023 12:56:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:56:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:56:13.940Z] Aug 17, 2023 12:56:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:56:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:57:04.627Z] Aug 17, 2023 12:57:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:57:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:57:13.957Z] Aug 17, 2023 12:57:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:57:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:58:04.646Z] Aug 17, 2023 12:58:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:58:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:58:13.968Z] Aug 17, 2023 12:58:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:58:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:59:04.671Z] Aug 17, 2023 12:59:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:59:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T16:59:13.994Z] Aug 17, 2023 12:59:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 12:59:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:00:04.691Z] Aug 17, 2023 1:00:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:00:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:00:14.020Z] Aug 17, 2023 1:00:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:00:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:01:04.710Z] Aug 17, 2023 1:01:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:01:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:01:14.052Z] Aug 17, 2023 1:01:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:01:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:02:04.723Z] Aug 17, 2023 1:02:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:02:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:02:14.061Z] Aug 17, 2023 1:02:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:02:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:03:04.736Z] Aug 17, 2023 1:03:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:03:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:03:14.084Z] Aug 17, 2023 1:03:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:03:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:04:04.754Z] Aug 17, 2023 1:04:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:04:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:04:14.101Z] Aug 17, 2023 1:04:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:04:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:05:04.766Z] Aug 17, 2023 1:05:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:05:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:05:14.111Z] Aug 17, 2023 1:05:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:05:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:06:04.779Z] Aug 17, 2023 1:06:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:06:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:06:14.132Z] Aug 17, 2023 1:06:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:06:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:07:04.805Z] Aug 17, 2023 1:07:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:07:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:07:14.153Z] Aug 17, 2023 1:07:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:07:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:08:04.820Z] Aug 17, 2023 1:08:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:08:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:08:14.166Z] Aug 17, 2023 1:08:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:08:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:09:04.825Z] Aug 17, 2023 1:09:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:09:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:09:14.183Z] Aug 17, 2023 1:09:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:09:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:10:04.832Z] Aug 17, 2023 1:10:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:10:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:10:14.203Z] Aug 17, 2023 1:10:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:10:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:11:04.854Z] Aug 17, 2023 1:11:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:11:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:11:14.225Z] Aug 17, 2023 1:11:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:11:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:12:04.862Z] Aug 17, 2023 1:12:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:12:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:12:14.254Z] Aug 17, 2023 1:12:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:12:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:13:04.887Z] Aug 17, 2023 1:13:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:13:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:13:14.260Z] Aug 17, 2023 1:13:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:13:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:14:04.906Z] Aug 17, 2023 1:14:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:14:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:14:14.281Z] Aug 17, 2023 1:14:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:14:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:15:04.924Z] Aug 17, 2023 1:15:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:15:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:15:14.293Z] Aug 17, 2023 1:15:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:15:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:16:04.948Z] Aug 17, 2023 1:16:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:16:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:16:14.324Z] Aug 17, 2023 1:16:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:16:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:17:04.968Z] Aug 17, 2023 1:17:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:17:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:17:14.340Z] Aug 17, 2023 1:17:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:17:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:18:04.986Z] Aug 17, 2023 1:18:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:18:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:18:14.354Z] Aug 17, 2023 1:18:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:18:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:19:05.015Z] Aug 17, 2023 1:19:05 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:19:05 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:19:14.372Z] Aug 17, 2023 1:19:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:19:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:20:05.032Z] Aug 17, 2023 1:20:05 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:20:05 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:20:14.393Z] Aug 17, 2023 1:20:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:20:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:21:05.047Z] Aug 17, 2023 1:21:05 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:21:05 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:21:14.403Z] Aug 17, 2023 1:21:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:21:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:22:05.060Z] Aug 17, 2023 1:22:05 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:22:05 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:22:14.422Z] Aug 17, 2023 1:22:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:22:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:23:05.081Z] Aug 17, 2023 1:23:05 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:23:05 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:23:14.451Z] Aug 17, 2023 1:23:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:23:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:24:05.088Z] Aug 17, 2023 1:24:05 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:24:05 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:24:14.482Z] Aug 17, 2023 1:24:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:24:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:25:05.111Z] Aug 17, 2023 1:25:05 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:25:05 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:25:14.493Z] Aug 17, 2023 1:25:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:25:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:26:05.124Z] Aug 17, 2023 1:26:05 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:26:05 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:26:14.514Z] Aug 17, 2023 1:26:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:26:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:27:05.144Z] Aug 17, 2023 1:27:05 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:27:05 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:27:14.533Z] Aug 17, 2023 1:27:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:27:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:28:05.172Z] Aug 17, 2023 1:28:05 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:28:05 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:28:14.560Z] Aug 17, 2023 1:28:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:28:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:29:05.197Z] Aug 17, 2023 1:29:05 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:29:05 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:29:14.578Z] Aug 17, 2023 1:29:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:29:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:30:05.217Z] Aug 17, 2023 1:30:05 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:30:05 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:30:14.595Z] Aug 17, 2023 1:30:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:30:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:31:05.233Z] Aug 17, 2023 1:31:05 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:31:05 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:31:14.620Z] Aug 17, 2023 1:31:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:31:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:32:05.253Z] Aug 17, 2023 1:32:05 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:32:05 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:32:14.644Z] Aug 17, 2023 1:32:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:32:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:33:05.266Z] Aug 17, 2023 1:33:05 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:33:05 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:33:14.651Z] Aug 17, 2023 1:33:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:33:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:34:05.288Z] Aug 17, 2023 1:34:05 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:34:05 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:34:14.656Z] Aug 17, 2023 1:34:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:34:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:35:05.311Z] Aug 17, 2023 1:35:05 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:35:05 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:35:14.670Z] Aug 17, 2023 1:35:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:35:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:36:05.340Z] Aug 17, 2023 1:36:05 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:36:05 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:36:14.694Z] Aug 17, 2023 1:36:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:36:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:37:05.360Z] Aug 17, 2023 1:37:05 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:37:05 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:37:13.942Z] Aug 17, 2023 1:37:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:37:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:37:13.942Z] Aug 17, 2023 1:37:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:37:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:37:13.943Z] Aug 17, 2023 1:37:13 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreListenHandler onClose
INFO: channel closed
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:37:13 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreListenHandler onClose\r\nINFO: channel closed\r\n"}}
[debug] [2023-08-17T17:37:13.943Z] Aug 17, 2023 1:37:13 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:37:13 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T17:37:13.949Z] Aug 17, 2023 1:37:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:37:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:38:05.378Z] Aug 17, 2023 1:38:05 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:38:05 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:38:13.974Z] Aug 17, 2023 1:38:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:38:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:39:13.985Z] Aug 17, 2023 1:39:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:39:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:39:21.263Z] Aug 17, 2023 1:39:21 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:39:21 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:40:14.003Z] Aug 17, 2023 1:40:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:40:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:40:21.274Z] Aug 17, 2023 1:40:21 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:40:21 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:41:14.023Z] Aug 17, 2023 1:41:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:41:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:41:21.298Z] Aug 17, 2023 1:41:21 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:41:21 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:42:14.043Z] Aug 17, 2023 1:42:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:42:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:42:21.326Z] Aug 17, 2023 1:42:21 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:42:21 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:43:14.058Z] Aug 17, 2023 1:43:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:43:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:43:21.353Z] Aug 17, 2023 1:43:21 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:43:21 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:44:14.069Z] Aug 17, 2023 1:44:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:44:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:44:21.381Z] Aug 17, 2023 1:44:21 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:44:21 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:45:14.096Z] Aug 17, 2023 1:45:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:45:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:45:21.391Z] Aug 17, 2023 1:45:21 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:45:21 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:46:14.115Z] Aug 17, 2023 1:46:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:46:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:46:21.416Z] Aug 17, 2023 1:46:21 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:46:21 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:47:03.398Z] Aug 17, 2023 1:47:03 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:47:03 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:47:03.398Z] Aug 17, 2023 1:47:03 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:47:03 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:47:03.400Z] Aug 17, 2023 1:47:03 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:47:03 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:47:03.402Z] Aug 17, 2023 1:47:03 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:47:03 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T17:47:03.434Z] Aug 17, 2023 1:47:03 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:47:03 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:47:03.511Z] Aug 17, 2023 1:47:03 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:47:03 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:47:15.947Z] Aug 17, 2023 1:47:15 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:47:15 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:47:15.968Z] Aug 17, 2023 1:47:15 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:47:15 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:47:16.001Z] Aug 17, 2023 1:47:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:47:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:47:21.436Z] Aug 17, 2023 1:47:21 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:47:21 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:47:21.613Z] Aug 17, 2023 1:47:21 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:47:21 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:47:26.719Z] Aug 17, 2023 1:47:26 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:47:26 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:47:26.720Z] Aug 17, 2023 1:47:26 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:47:26 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:47:26.727Z] Aug 17, 2023 1:47:26 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:47:26 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T17:47:26.768Z] Aug 17, 2023 1:47:26 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:47:26 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:47:43.414Z] Aug 17, 2023 1:47:43 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:47:43 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:47:43.415Z] Aug 17, 2023 1:47:43 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:47:43 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:47:43.416Z] Aug 17, 2023 1:47:43 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:47:43 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T17:47:43.449Z] Aug 17, 2023 1:47:43 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:47:43 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:48:02.704Z] Aug 17, 2023 1:48:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:48:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:48:02.716Z] Aug 17, 2023 1:48:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:48:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:48:14.411Z] Aug 17, 2023 1:48:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:48:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:48:21.451Z] Aug 17, 2023 1:48:21 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:48:21 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:48:32.661Z] [work-queue] {"queuedWork":["/ecrphmsb/us-central1/calculateAmountOwedByAllHouseholds-2023-08-17T17:48:32.661Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T17:48:32.661Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/ecrphmsb/us-central1/calculateAmountOwedByAllHouseholds-2023-08-17T17:48:32.661Z"],"workRunningCount":1}
[debug] [2023-08-17T17:48:32.661Z] Accepted request OPTIONS /ecrphmsb/us-central1/calculateAmountOwedByAllHouseholds --> us-central1-calculateAmountOwedByAllHouseholds
[debug] [2023-08-17T17:48:32.667Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T17:48:32.667Z] [functions] Got req.url=/ecrphmsb/us-central1/calculateAmountOwedByAllHouseholds, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/ecrphmsb/us-central1/calculateAmountOwedByAllHouseholds, mapping to path=/"}}
[debug] [2023-08-17T17:48:32.667Z] [worker-pool] submitRequest(triggerId=us-central1-calculateAmountOwedByAllHouseholds) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-calculateAmountOwedByAllHouseholds)"}}
[info] i  functions: Beginning execution of "us-central1-calculateAmountOwedByAllHouseholds" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"Beginning execution of \"us-central1-calculateAmountOwedByAllHouseholds\""}}
[debug] [2023-08-17T17:48:32.667Z] [worker-us-central1-calculateAmountOwedByAllHouseholds-adb4eb03-d51f-4437-a528-edaea58500cb]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"[worker-us-central1-calculateAmountOwedByAllHouseholds-adb4eb03-d51f-4437-a528-edaea58500cb]: BUSY"}}
[debug] [2023-08-17T17:48:32.672Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-calculateAmountOwedByAllHouseholds" in 5.1555ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"Finished \"us-central1-calculateAmountOwedByAllHouseholds\" in 5.1555ms"}}
[debug] [2023-08-17T17:48:32.673Z] [worker-us-central1-calculateAmountOwedByAllHouseholds-adb4eb03-d51f-4437-a528-edaea58500cb]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"[worker-us-central1-calculateAmountOwedByAllHouseholds-adb4eb03-d51f-4437-a528-edaea58500cb]: IDLE"}}
[debug] [2023-08-17T17:48:32.673Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T17:48:32.673Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T17:48:32.673Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T17:48:32.673Z] [work-queue] {"queuedWork":["/ecrphmsb/us-central1/calculateAmountOwedByAllHouseholds-2023-08-17T17:48:32.673Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T17:48:32.673Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/ecrphmsb/us-central1/calculateAmountOwedByAllHouseholds-2023-08-17T17:48:32.673Z"],"workRunningCount":1}
[debug] [2023-08-17T17:48:32.673Z] Accepted request POST /ecrphmsb/us-central1/calculateAmountOwedByAllHouseholds --> us-central1-calculateAmountOwedByAllHouseholds
[debug] [2023-08-17T17:48:32.674Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T17:48:32.674Z] [functions] Got req.url=/ecrphmsb/us-central1/calculateAmountOwedByAllHouseholds, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/ecrphmsb/us-central1/calculateAmountOwedByAllHouseholds, mapping to path=/"}}
[debug] [2023-08-17T17:48:32.674Z] [worker-pool] submitRequest(triggerId=us-central1-calculateAmountOwedByAllHouseholds) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-calculateAmountOwedByAllHouseholds)"}}
[info] i  functions: Beginning execution of "us-central1-calculateAmountOwedByAllHouseholds" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"Beginning execution of \"us-central1-calculateAmountOwedByAllHouseholds\""}}
[debug] [2023-08-17T17:48:32.674Z] [worker-us-central1-calculateAmountOwedByAllHouseholds-adb4eb03-d51f-4437-a528-edaea58500cb]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"[worker-us-central1-calculateAmountOwedByAllHouseholds-adb4eb03-d51f-4437-a528-edaea58500cb]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  Starting the call {"user":"Starting the call","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"\u001b[90m> \u001b[39m Starting the call"}}
[debug] [2023-08-17T17:48:36.791Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-calculateAmountOwedByAllHouseholds" in 4116.8608ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"Finished \"us-central1-calculateAmountOwedByAllHouseholds\" in 4116.8608ms"}}
[debug] [2023-08-17T17:48:36.791Z] [worker-us-central1-calculateAmountOwedByAllHouseholds-adb4eb03-d51f-4437-a528-edaea58500cb]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"[worker-us-central1-calculateAmountOwedByAllHouseholds-adb4eb03-d51f-4437-a528-edaea58500cb]: IDLE"}}
[debug] [2023-08-17T17:48:36.792Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T17:48:36.792Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-calculateAmountOwedByAllHouseholds"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T17:48:36.792Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T17:49:06.809Z] Aug 17, 2023 1:49:06 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:49:06 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:49:06.809Z] Aug 17, 2023 1:49:06 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:49:06 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:49:51.826Z] Aug 17, 2023 1:49:51 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:49:51 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:49:52.272Z] Aug 17, 2023 1:49:52 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:49:52 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:50:51.846Z] Aug 17, 2023 1:50:51 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:50:51 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:50:52.288Z] Aug 17, 2023 1:50:52 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:50:52 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:51:51.862Z] Aug 17, 2023 1:51:51 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:51:51 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:51:52.309Z] Aug 17, 2023 1:51:52 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:51:52 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:52:51.868Z] Aug 17, 2023 1:52:51 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:52:51 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:52:52.329Z] Aug 17, 2023 1:52:52 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:52:52 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:53:51.885Z] Aug 17, 2023 1:53:51 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:53:51 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:53:52.341Z] Aug 17, 2023 1:53:52 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:53:52 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:54:51.911Z] Aug 17, 2023 1:54:51 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:54:51 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:54:52.372Z] Aug 17, 2023 1:54:52 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:54:52 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:55:51.937Z] Aug 17, 2023 1:55:51 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:55:51 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:55:52.384Z] Aug 17, 2023 1:55:52 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:55:52 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:56:51.953Z] Aug 17, 2023 1:56:51 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:56:51 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:56:52.396Z] Aug 17, 2023 1:56:52 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:56:52 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:57:51.978Z] Aug 17, 2023 1:57:51 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:57:51 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:57:52.408Z] Aug 17, 2023 1:57:52 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:57:52 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:58:51.996Z] Aug 17, 2023 1:58:51 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:58:51 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:58:52.423Z] Aug 17, 2023 1:58:52 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:58:52 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:59:52.007Z] Aug 17, 2023 1:59:52 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:59:52 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T17:59:52.431Z] Aug 17, 2023 1:59:52 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 1:59:52 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:00:52.026Z] Aug 17, 2023 2:00:52 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:00:52 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:00:52.454Z] Aug 17, 2023 2:00:52 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:00:52 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:01:02.010Z] Aug 17, 2023 2:01:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:01:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:01:02.025Z] Aug 17, 2023 2:01:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:01:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:01:02.053Z] Aug 17, 2023 2:01:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:01:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:01:02.080Z] Aug 17, 2023 2:01:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:01:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:01:04.084Z] Aug 17, 2023 2:01:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:01:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:01:06.594Z] Aug 17, 2023 2:01:06 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:01:06 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:01:06.607Z] Aug 17, 2023 2:01:06 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:01:06 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:01:06.636Z] Aug 17, 2023 2:01:06 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:01:06 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:01:52.467Z] Aug 17, 2023 2:01:52 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:01:52 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:02:06.651Z] Aug 17, 2023 2:02:06 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:02:06 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:02:47.351Z] Aug 17, 2023 2:02:47 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:02:47 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:02:47.363Z] Aug 17, 2023 2:02:47 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:02:47 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:02:47.363Z] Aug 17, 2023 2:02:47 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:02:47 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:02:47.363Z] Aug 17, 2023 2:02:47 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:02:47 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:02:47.365Z] Aug 17, 2023 2:02:47 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:02:47 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T18:02:47.372Z] Aug 17, 2023 2:02:47 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:02:47 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T18:02:47.376Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:02:47.376Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:02:47.376Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:02:47.376Z"],"workRunningCount":1}
[debug] [2023-08-17T18:02:47.376Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T18:02:47.377Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T18:02:47.377Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T18:02:47.377Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T18:02:47.378Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T18:02:47.379Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"4149c8b7-ddd8-4e98-996a-f84c16ef479b","subject":"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/60nZA87H1yBOFvFqxJAz","time":"2023-08-17T18:02:47.374999100Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/3dJExGFTPEJtxm0peFNG/cuota_payments/60nZA87H1yBOFvFqxJAz","data":{"type":"Buffer","data":[10,148,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,54,48,110,90,65,56,55,72,49,121,66,79,70,118,70,113,120,74,65,122,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,20,10,5,65,108,105,97,115,18,11,138,1,8,70,101,98,114,117,97,114,121,18,11,10,5,77,111,110,116,111,18,2,16,50,18,102,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,86,50,84,10,20,10,5,65,108,105,97,115,18,11,138,1,8,70,101,98,114,117,97,114,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,199,231,158,6,10,14,10,2,116,111,18,8,82,6,8,192,248,245,159,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,110,88,65,88,100,48,110,89,87,78,90,90,113,74,116,121,90,116,53,90,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,199,231,158,6,10,14,10,2,116,111,18,8,82,6,8,192,248,245,159,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,15,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,35,18,28,10,10,108,97,115,116,85,112,100,97,116,101,18,14,82,12,8,199,193,249,166,6,16,128,138,177,177,1,26,12,8,220,178,248,166,6,16,128,131,174,151,1,34,12,8,199,193,249,166,6,16,232,154,171,178,1,18,229,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,54,48,110,90,65,56,55,72,49,121,66,79,70,118,70,113,120,74,65,122,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,20,10,5,65,108,105,97,115,18,11,138,1,8,70,101,98,114,117,97,114,121,18,11,10,5,77,111,110,116,111,18,2,16,50,18,102,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,86,50,84,10,20,10,5,65,108,105,97,115,18,11,138,1,8,70,101,98,114,117,97,114,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,199,231,158,6,10,14,10,2,116,111,18,8,82,6,8,192,248,245,159,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,110,88,65,88,100,48,110,89,87,78,90,90,113,74,116,121,90,116,53,90,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,199,231,158,6,10,14,10,2,116,111,18,8,82,6,8,192,248,245,159,6,26,12,8,220,178,248,166,6,16,128,131,174,151,1,34,12,8,220,178,248,166,6,16,128,131,174,151,1,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"4149c8b7-ddd8-4e98-996a-f84c16ef479b\",\"subject\":\"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/60nZA87H1yBOFvFqxJAz\",\"time\":\"2023-08-17T18:02:47.374999100Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/3dJExGFTPEJtxm0peFNG/cuota_payments/60nZA87H1yBOFvFqxJAz\",\"data\":{\"type\":\"Buffer\",\"data\":[10,148,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,54,48,110,90,65,56,55,72,49,121,66,79,70,118,70,113,120,74,65,122,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,20,10,5,65,108,105,97,115,18,11,138,1,8,70,101,98,114,117,97,114,121,18,11,10,5,77,111,110,116,111,18,2,16,50,18,102,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,86,50,84,10,20,10,5,65,108,105,97,115,18,11,138,1,8,70,101,98,114,117,97,114,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,199,231,158,6,10,14,10,2,116,111,18,8,82,6,8,192,248,245,159,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,110,88,65,88,100,48,110,89,87,78,90,90,113,74,116,121,90,116,53,90,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,199,231,158,6,10,14,10,2,116,111,18,8,82,6,8,192,248,245,159,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,15,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,35,18,28,10,10,108,97,115,116,85,112,100,97,116,101,18,14,82,12,8,199,193,249,166,6,16,128,138,177,177,1,26,12,8,220,178,248,166,6,16,128,131,174,151,1,34,12,8,199,193,249,166,6,16,232,154,171,178,1,18,229,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,54,48,110,90,65,56,55,72,49,121,66,79,70,118,70,113,120,74,65,122,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,20,10,5,65,108,105,97,115,18,11,138,1,8,70,101,98,114,117,97,114,121,18,11,10,5,77,111,110,116,111,18,2,16,50,18,102,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,86,50,84,10,20,10,5,65,108,105,97,115,18,11,138,1,8,70,101,98,114,117,97,114,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,199,231,158,6,10,14,10,2,116,111,18,8,82,6,8,192,248,245,159,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,110,88,65,88,100,48,110,89,87,78,90,90,113,74,116,121,90,116,53,90,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,199,231,158,6,10,14,10,2,116,111,18,8,82,6,8,192,248,245,159,6,26,12,8,220,178,248,166,6,16,128,131,174,151,1,34,12,8,220,178,248,166,6,16,128,131,174,151,1,26,0]}}"}}
[debug] [2023-08-17T18:02:47.381Z] Aug 17, 2023 2:02:47 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:02:47 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T18:02:47.383Z] Aug 17, 2023 2:02:47 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:02:47 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:02:47.387Z] Aug 17, 2023 2:02:47 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:02:47 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:02:47.402Z] Aug 17, 2023 2:02:47 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:02:47 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:02:47.438Z] Aug 17, 2023 2:02:47 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:02:47 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:02:47.445Z] Aug 17, 2023 2:02:47 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:02:47 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:02:47.491Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 114.079ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 114.079ms"}}
[debug] [2023-08-17T18:02:47.492Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T18:02:47.492Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T18:02:47.492Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T18:02:47.492Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:02:48.399Z] Aug 17, 2023 2:02:48 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:02:48 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:02:48.400Z] Aug 17, 2023 2:02:48 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:02:48 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T18:02:48.432Z] Aug 17, 2023 2:02:48 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:02:48 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:02:56.627Z] Aug 17, 2023 2:02:56 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:02:56 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:02:56.650Z] Aug 17, 2023 2:02:56 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:02:56 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:03:47.411Z] Aug 17, 2023 2:03:47 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:03:47 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:03:47.412Z] Aug 17, 2023 2:03:47 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler onClose
INFO: channel closed
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:03:47 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler onClose\r\nINFO: channel closed\r\n"}}
[debug] [2023-08-17T18:03:47.510Z] Aug 17, 2023 2:03:47 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:03:47 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:03:48.135Z] Aug 17, 2023 2:03:48 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:03:48 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:03:48.135Z] Aug 17, 2023 2:03:48 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:03:48 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:03:48.137Z] Aug 17, 2023 2:03:48 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:03:48 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T18:03:48.140Z] Aug 17, 2023 2:03:48 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:03:48 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:03:48.143Z] Aug 17, 2023 2:03:48 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:03:48 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:03:48.161Z] Aug 17, 2023 2:03:48 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:03:48 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:03:48.179Z] Aug 17, 2023 2:03:48 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:03:48 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:03:48.214Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handleNewDiscount-0-2023-08-17T18:03:48.214Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:03:48.214Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handleNewDiscount-0-2023-08-17T18:03:48.214Z"],"workRunningCount":1}
[debug] [2023-08-17T18:03:48.214Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handleNewDiscount-0 --> us-central1-handleNewDiscount-0
[debug] [2023-08-17T18:03:48.215Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T18:03:48.215Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handleNewDiscount-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handleNewDiscount-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T18:03:48.231Z] [worker-pool] addWorker(us-central1-handleNewDiscount) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-handleNewDiscount)"}}
[debug] [2023-08-17T18:03:48.231Z] [worker-pool] Adding worker with key us-central1-handleNewDiscount, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-handleNewDiscount, total=1"}}
[debug] [2023-08-17T18:03:48.262Z] Aug 17, 2023 2:03:48 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:03:48 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:03:48.293Z] Aug 17, 2023 2:03:48 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:03:48 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:03:49.221Z] Aug 17, 2023 2:03:49 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:03:49 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:03:49.222Z] Aug 17, 2023 2:03:49 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:03:49 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T18:03:49.253Z] Aug 17, 2023 2:03:49 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:03:49 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:03:58.478Z] Aug 17, 2023 2:03:58 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:03:58 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:03:58.519Z] [runtime-status] [17904] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"C:\\Users\\danie\\Documents\\GitHub\\PagosColegio\\colegio\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleNewDiscount"},"extension":{},"message":"[runtime-status] [17904] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"C:\\\\Users\\\\danie\\\\Documents\\\\GitHub\\\\PagosColegio\\\\colegio\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2023-08-17T18:03:58.520Z] [runtime-status] [17904] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"C:\\Users\\danie\\Documents\\GitHub\\PagosColegio\\colegio\\node_modules\\firebase-functions\\lib\\v1\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleNewDiscount"},"extension":{},"message":"[runtime-status] [17904] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"C:\\\\Users\\\\danie\\\\Documents\\\\GitHub\\\\PagosColegio\\\\colegio\\\\node_modules\\\\firebase-functions\\\\lib\\\\v1\\\\index.js\"}"}}
[debug] [2023-08-17T18:03:58.520Z] [runtime-status] [17904] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleNewDiscount"},"extension":{},"message":"[runtime-status] [17904] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-08-17T18:03:58.521Z] [runtime-status] [17904] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"C:\\Users\\danie\\Documents\\GitHub\\PagosColegio\\colegio\\node_modules\\firebase-functions\\lib\\v1\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleNewDiscount"},"extension":{},"message":"[runtime-status] [17904] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"C:\\\\Users\\\\danie\\\\Documents\\\\GitHub\\\\PagosColegio\\\\colegio\\\\node_modules\\\\firebase-functions\\\\lib\\\\v1\\\\index.js\"}"}}
[debug] [2023-08-17T18:04:00.766Z] [runtime-status] [17904] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleNewDiscount"},"extension":{},"message":"[runtime-status] [17904] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-08-17T18:04:00.766Z] [runtime-status] [17904] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"C:\\Users\\danie\\Documents\\GitHub\\PagosColegio\\colegio\\node_modules\\firebase-functions\\lib\\v1\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleNewDiscount"},"extension":{},"message":"[runtime-status] [17904] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"C:\\\\Users\\\\danie\\\\Documents\\\\GitHub\\\\PagosColegio\\\\colegio\\\\node_modules\\\\firebase-functions\\\\lib\\\\v1\\\\index.js\"}}"}}
[debug] [2023-08-17T18:04:00.766Z] [runtime-status] [17904] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"C:\\Users\\danie\\Documents\\GitHub\\PagosColegio\\colegio\\node_modules\\firebase-functions\\lib\\v1\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleNewDiscount"},"extension":{},"message":"[runtime-status] [17904] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"C:\\\\Users\\\\danie\\\\Documents\\\\GitHub\\\\PagosColegio\\\\colegio\\\\node_modules\\\\firebase-functions\\\\lib\\\\v1\\\\index.js\"}"}}
[debug] [2023-08-17T18:04:00.767Z] [runtime-status] [17904] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"C:\\Users\\danie\\Documents\\GitHub\\PagosColegio\\colegio\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleNewDiscount"},"extension":{},"message":"[runtime-status] [17904] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"C:\\\\Users\\\\danie\\\\Documents\\\\GitHub\\\\PagosColegio\\\\colegio\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2023-08-17T18:04:00.793Z] [runtime-status] [17904] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"C:\\Users\\danie\\Documents\\GitHub\\PagosColegio\\colegio\\node_modules\\firebase-functions\\lib\\v1\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleNewDiscount"},"extension":{},"message":"[runtime-status] [17904] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"C:\\\\Users\\\\danie\\\\Documents\\\\GitHub\\\\PagosColegio\\\\colegio\\\\node_modules\\\\firebase-functions\\\\lib\\\\v1\\\\index.js\"}"}}
[debug] [2023-08-17T18:04:00.793Z] [runtime-status] [17904] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.10.1","resolution":"C:\\Users\\danie\\Documents\\GitHub\\PagosColegio\\colegio\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleNewDiscount"},"extension":{},"message":"[runtime-status] [17904] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"C:\\\\Users\\\\danie\\\\Documents\\\\GitHub\\\\PagosColegio\\\\colegio\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[debug] [2023-08-17T18:04:00.870Z] Aug 17, 2023 2:04:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:04:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:04:00.872Z] Aug 17, 2023 2:04:00 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:04:00 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T18:04:00.877Z] Aug 17, 2023 2:04:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:04:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:04:00.997Z] [runtime-status] [17904] Functions runtime initialized. {"cwd":"C:\\Users\\danie\\Documents\\GitHub\\PagosColegio\\colegio","node_version":"18.17.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleNewDiscount"},"extension":{},"message":"[runtime-status] [17904] Functions runtime initialized. {\"cwd\":\"C:\\\\Users\\\\danie\\\\Documents\\\\GitHub\\\\PagosColegio\\\\colegio\",\"node_version\":\"18.17.0\"}"}}
[debug] [2023-08-17T18:04:00.998Z] [runtime-status] [17904] Listening to port: \\?\pipe\fire_emu_464349ef2a763303 {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleNewDiscount"},"extension":{},"message":"[runtime-status] [17904] Listening to port: \\\\?\\pipe\\fire_emu_464349ef2a763303"}}
[debug] [2023-08-17T18:04:01.081Z] [worker-us-central1-handleNewDiscount-cd3ee0a7-0dfd-4ee4-a793-4f76adb9bd64]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleNewDiscount"},"extension":{},"message":"[worker-us-central1-handleNewDiscount-cd3ee0a7-0dfd-4ee4-a793-4f76adb9bd64]: IDLE"}}
[debug] [2023-08-17T18:04:01.081Z] [worker-pool] submitRequest(triggerId=us-central1-handleNewDiscount) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleNewDiscount)"}}
[info] i  functions: Beginning execution of "us-central1-handleNewDiscount" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleNewDiscount"},"extension":{},"message":"Beginning execution of \"us-central1-handleNewDiscount\""}}
[debug] [2023-08-17T18:04:01.081Z] [worker-us-central1-handleNewDiscount-cd3ee0a7-0dfd-4ee4-a793-4f76adb9bd64]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleNewDiscount"},"extension":{},"message":"[worker-us-central1-handleNewDiscount-cd3ee0a7-0dfd-4ee4-a793-4f76adb9bd64]: BUSY"}}
[debug] [2023-08-17T18:04:01.085Z] Aug 17, 2023 2:04:01 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:04:01 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:04:01.085Z] [runtime-status] [17904] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.updated","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"035e1ddc-5261-4cb1-8f78-8260daf9c271","subject":"documents/students/3dJExGFTPEJtxm0peFNG","time":"2023-08-17T18:03:48.212982600Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/3dJExGFTPEJtxm0peFNG","data":{"type":"Buffer","data":[10,255,2,10,77,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,30,10,6,78,111,109,98,114,101,18,20,138,1,17,73,86,69,82,83,79,78,32,65,76,69,88,65,78,68,69,82,18,16,10,8,83,101,99,99,105,195,179,110,18,4,138,1,1,65,18,37,10,20,67,195,169,100,117,108,97,32,100,101,32,105,100,101,110,116,105,100,97,100,18,13,138,1,10,86,45,51,49,50,56,56,49,55,48,18,20,10,3,99,101,100,18,13,138,1,10,86,45,51,49,50,56,56,49,55,48,18,26,10,16,70,101,99,104,97,73,110,105,99,105,111,67,117,111,116,97,18,6,82,4,16,192,132,61,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,30,10,8,65,112,101,108,108,105,100,111,18,18,138,1,15,65,67,69,73,84,85,78,79,32,80,69,82,65,90,65,18,11,10,5,71,114,97,100,111,18,2,16,13,18,21,10,8,68,105,115,99,111,117,110,116,18,9,25,0,0,0,0,0,0,224,63,18,30,10,18,110,101,119,65,109,111,117,110,116,83,116,97,114,116,68,97,116,101,18,8,82,6,8,192,136,173,151,6,26,12,8,220,178,248,166,6,16,184,213,222,184,1,34,11,8,132,194,249,166,6,16,176,141,200,70,18,217,2,10,77,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,30,10,6,78,111,109,98,114,101,18,20,138,1,17,73,86,69,82,83,79,78,32,65,76,69,88,65,78,68,69,82,18,16,10,8,83,101,99,99,105,195,179,110,18,4,138,1,1,65,18,37,10,20,67,195,169,100,117,108,97,32,100,101,32,105,100,101,110,116,105,100,97,100,18,13,138,1,10,86,45,51,49,50,56,56,49,55,48,18,20,10,3,99,101,100,18,13,138,1,10,86,45,51,49,50,56,56,49,55,48,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,26,10,16,70,101,99,104,97,73,110,105,99,105,111,67,117,111,116,97,18,6,82,4,16,192,132,61,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,30,10,8,65,112,101,108,108,105,100,111,18,18,138,1,15,65,67,69,73,84,85,78,79,32,80,69,82,65,90,65,18,11,10,5,71,114,97,100,111,18,2,16,13,26,12,8,220,178,248,166,6,16,184,213,222,184,1,34,12,8,220,178,248,166,6,16,184,213,222,184,1,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleNewDiscount"},"extension":{},"message":"[runtime-status] [17904] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.updated\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"035e1ddc-5261-4cb1-8f78-8260daf9c271\",\"subject\":\"documents/students/3dJExGFTPEJtxm0peFNG\",\"time\":\"2023-08-17T18:03:48.212982600Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/3dJExGFTPEJtxm0peFNG\",\"data\":{\"type\":\"Buffer\",\"data\":[10,255,2,10,77,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,30,10,6,78,111,109,98,114,101,18,20,138,1,17,73,86,69,82,83,79,78,32,65,76,69,88,65,78,68,69,82,18,16,10,8,83,101,99,99,105,195,179,110,18,4,138,1,1,65,18,37,10,20,67,195,169,100,117,108,97,32,100,101,32,105,100,101,110,116,105,100,97,100,18,13,138,1,10,86,45,51,49,50,56,56,49,55,48,18,20,10,3,99,101,100,18,13,138,1,10,86,45,51,49,50,56,56,49,55,48,18,26,10,16,70,101,99,104,97,73,110,105,99,105,111,67,117,111,116,97,18,6,82,4,16,192,132,61,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,30,10,8,65,112,101,108,108,105,100,111,18,18,138,1,15,65,67,69,73,84,85,78,79,32,80,69,82,65,90,65,18,11,10,5,71,114,97,100,111,18,2,16,13,18,21,10,8,68,105,115,99,111,117,110,116,18,9,25,0,0,0,0,0,0,224,63,18,30,10,18,110,101,119,65,109,111,117,110,116,83,116,97,114,116,68,97,116,101,18,8,82,6,8,192,136,173,151,6,26,12,8,220,178,248,166,6,16,184,213,222,184,1,34,11,8,132,194,249,166,6,16,176,141,200,70,18,217,2,10,77,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,30,10,6,78,111,109,98,114,101,18,20,138,1,17,73,86,69,82,83,79,78,32,65,76,69,88,65,78,68,69,82,18,16,10,8,83,101,99,99,105,195,179,110,18,4,138,1,1,65,18,37,10,20,67,195,169,100,117,108,97,32,100,101,32,105,100,101,110,116,105,100,97,100,18,13,138,1,10,86,45,51,49,50,56,56,49,55,48,18,20,10,3,99,101,100,18,13,138,1,10,86,45,51,49,50,56,56,49,55,48,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,26,10,16,70,101,99,104,97,73,110,105,99,105,111,67,117,111,116,97,18,6,82,4,16,192,132,61,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,30,10,8,65,112,101,108,108,105,100,111,18,18,138,1,15,65,67,69,73,84,85,78,79,32,80,69,82,65,90,65,18,11,10,5,71,114,97,100,111,18,2,16,13,26,12,8,220,178,248,166,6,16,184,213,222,184,1,34,12,8,220,178,248,166,6,16,184,213,222,184,1,26,0]}}"}}
[debug] [2023-08-17T18:04:01.086Z] Aug 17, 2023 2:04:01 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:04:01 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:04:01.088Z] Aug 17, 2023 2:04:01 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:04:01 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T18:04:01.134Z] Aug 17, 2023 2:04:01 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:04:01 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:04:03.305Z] Aug 17, 2023 2:04:03 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:04:03 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:04:03.388Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleNewDiscount"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleNewDiscount" in 2307.0839ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleNewDiscount"},"extension":{},"message":"Finished \"us-central1-handleNewDiscount\" in 2307.0839ms"}}
[debug] [2023-08-17T18:04:03.389Z] [worker-us-central1-handleNewDiscount-cd3ee0a7-0dfd-4ee4-a793-4f76adb9bd64]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleNewDiscount"},"extension":{},"message":"[worker-us-central1-handleNewDiscount-cd3ee0a7-0dfd-4ee4-a793-4f76adb9bd64]: IDLE"}}
[debug] [2023-08-17T18:04:03.389Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleNewDiscount"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T18:04:03.389Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleNewDiscount"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T18:04:03.389Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:04:03.405Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:04:03.405Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:04:03.405Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:04:03.405Z"],"workRunningCount":1}
[debug] [2023-08-17T18:04:03.405Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T18:04:03.406Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T18:04:03.406Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T18:04:03.406Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T18:04:03.406Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T18:04:03.407Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"5aa75cf5-58a9-46dd-9320-b3e1ec9d59b9","subject":"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/60nZA87H1yBOFvFqxJAz","time":"2023-08-17T18:04:03.389493Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/3dJExGFTPEJtxm0peFNG/cuota_payments/60nZA87H1yBOFvFqxJAz","data":{"type":"Buffer","data":[10,148,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,54,48,110,90,65,56,55,72,49,121,66,79,70,118,70,113,120,74,65,122,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,20,10,5,65,108,105,97,115,18,11,138,1,8,70,101,98,114,117,97,114,121,18,102,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,86,50,84,10,20,10,5,65,108,105,97,115,18,11,138,1,8,70,101,98,114,117,97,114,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,199,231,158,6,10,14,10,2,116,111,18,8,82,6,8,192,248,245,159,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,110,88,65,88,100,48,110,89,87,78,90,90,113,74,116,121,90,116,53,90,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,199,231,158,6,10,14,10,2,116,111,18,8,82,6,8,192,248,245,159,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,15,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,35,18,28,10,10,108,97,115,116,85,112,100,97,116,101,18,14,82,12,8,199,193,249,166,6,16,128,138,177,177,1,18,11,10,5,77,111,110,116,111,18,2,16,25,26,12,8,220,178,248,166,6,16,128,131,174,151,1,34,12,8,147,194,249,166,6,16,240,145,235,162,1,18,148,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,54,48,110,90,65,56,55,72,49,121,66,79,70,118,70,113,120,74,65,122,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,20,10,5,65,108,105,97,115,18,11,138,1,8,70,101,98,114,117,97,114,121,18,11,10,5,77,111,110,116,111,18,2,16,50,18,102,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,86,50,84,10,20,10,5,65,108,105,97,115,18,11,138,1,8,70,101,98,114,117,97,114,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,199,231,158,6,10,14,10,2,116,111,18,8,82,6,8,192,248,245,159,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,110,88,65,88,100,48,110,89,87,78,90,90,113,74,116,121,90,116,53,90,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,199,231,158,6,10,14,10,2,116,111,18,8,82,6,8,192,248,245,159,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,15,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,35,18,28,10,10,108,97,115,116,85,112,100,97,116,101,18,14,82,12,8,199,193,249,166,6,16,128,138,177,177,1,26,12,8,220,178,248,166,6,16,128,131,174,151,1,34,12,8,199,193,249,166,6,16,232,154,171,178,1,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"5aa75cf5-58a9-46dd-9320-b3e1ec9d59b9\",\"subject\":\"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/60nZA87H1yBOFvFqxJAz\",\"time\":\"2023-08-17T18:04:03.389493Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/3dJExGFTPEJtxm0peFNG/cuota_payments/60nZA87H1yBOFvFqxJAz\",\"data\":{\"type\":\"Buffer\",\"data\":[10,148,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,54,48,110,90,65,56,55,72,49,121,66,79,70,118,70,113,120,74,65,122,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,20,10,5,65,108,105,97,115,18,11,138,1,8,70,101,98,114,117,97,114,121,18,102,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,86,50,84,10,20,10,5,65,108,105,97,115,18,11,138,1,8,70,101,98,114,117,97,114,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,199,231,158,6,10,14,10,2,116,111,18,8,82,6,8,192,248,245,159,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,110,88,65,88,100,48,110,89,87,78,90,90,113,74,116,121,90,116,53,90,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,199,231,158,6,10,14,10,2,116,111,18,8,82,6,8,192,248,245,159,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,15,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,35,18,28,10,10,108,97,115,116,85,112,100,97,116,101,18,14,82,12,8,199,193,249,166,6,16,128,138,177,177,1,18,11,10,5,77,111,110,116,111,18,2,16,25,26,12,8,220,178,248,166,6,16,128,131,174,151,1,34,12,8,147,194,249,166,6,16,240,145,235,162,1,18,148,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,54,48,110,90,65,56,55,72,49,121,66,79,70,118,70,113,120,74,65,122,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,20,10,5,65,108,105,97,115,18,11,138,1,8,70,101,98,114,117,97,114,121,18,11,10,5,77,111,110,116,111,18,2,16,50,18,102,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,86,50,84,10,20,10,5,65,108,105,97,115,18,11,138,1,8,70,101,98,114,117,97,114,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,199,231,158,6,10,14,10,2,116,111,18,8,82,6,8,192,248,245,159,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,110,88,65,88,100,48,110,89,87,78,90,90,113,74,116,121,90,116,53,90,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,199,231,158,6,10,14,10,2,116,111,18,8,82,6,8,192,248,245,159,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,15,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,35,18,28,10,10,108,97,115,116,85,112,100,97,116,101,18,14,82,12,8,199,193,249,166,6,16,128,138,177,177,1,26,12,8,220,178,248,166,6,16,128,131,174,151,1,34,12,8,199,193,249,166,6,16,232,154,171,178,1,26,0]}}"}}
[debug] [2023-08-17T18:04:03.408Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 1.6343ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 1.6343ms"}}
[debug] [2023-08-17T18:04:03.408Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T18:04:03.408Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T18:04:03.408Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T18:04:03.408Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:04:03.420Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:04:03.420Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:04:03.420Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:04:03.420Z"],"workRunningCount":1}
[debug] [2023-08-17T18:04:03.420Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T18:04:03.420Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T18:04:03.420Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T18:04:03.421Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T18:04:03.421Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T18:04:03.422Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"8a37c574-6d88-46c1-8656-9f488014a904","subject":"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/60nZA87H1yBOFvFqxJAz","time":"2023-08-17T18:04:03.408242300Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/3dJExGFTPEJtxm0peFNG/cuota_payments/60nZA87H1yBOFvFqxJAz","data":{"type":"Buffer","data":[10,148,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,54,48,110,90,65,56,55,72,49,121,66,79,70,118,70,113,120,74,65,122,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,20,10,5,65,108,105,97,115,18,11,138,1,8,70,101,98,114,117,97,114,121,18,102,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,86,50,84,10,20,10,5,65,108,105,97,115,18,11,138,1,8,70,101,98,114,117,97,114,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,199,231,158,6,10,14,10,2,116,111,18,8,82,6,8,192,248,245,159,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,110,88,65,88,100,48,110,89,87,78,90,90,113,74,116,121,90,116,53,90,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,199,231,158,6,10,14,10,2,116,111,18,8,82,6,8,192,248,245,159,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,15,18,28,10,10,108,97,115,116,85,112,100,97,116,101,18,14,82,12,8,199,193,249,166,6,16,128,138,177,177,1,18,11,10,5,77,111,110,116,111,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,10,26,12,8,220,178,248,166,6,16,128,131,174,151,1,34,12,8,147,194,249,166,6,16,224,210,223,164,1,18,148,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,54,48,110,90,65,56,55,72,49,121,66,79,70,118,70,113,120,74,65,122,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,20,10,5,65,108,105,97,115,18,11,138,1,8,70,101,98,114,117,97,114,121,18,102,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,86,50,84,10,20,10,5,65,108,105,97,115,18,11,138,1,8,70,101,98,114,117,97,114,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,199,231,158,6,10,14,10,2,116,111,18,8,82,6,8,192,248,245,159,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,110,88,65,88,100,48,110,89,87,78,90,90,113,74,116,121,90,116,53,90,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,199,231,158,6,10,14,10,2,116,111,18,8,82,6,8,192,248,245,159,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,15,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,35,18,28,10,10,108,97,115,116,85,112,100,97,116,101,18,14,82,12,8,199,193,249,166,6,16,128,138,177,177,1,18,11,10,5,77,111,110,116,111,18,2,16,25,26,12,8,220,178,248,166,6,16,128,131,174,151,1,34,12,8,147,194,249,166,6,16,240,145,235,162,1,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"8a37c574-6d88-46c1-8656-9f488014a904\",\"subject\":\"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/60nZA87H1yBOFvFqxJAz\",\"time\":\"2023-08-17T18:04:03.408242300Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/3dJExGFTPEJtxm0peFNG/cuota_payments/60nZA87H1yBOFvFqxJAz\",\"data\":{\"type\":\"Buffer\",\"data\":[10,148,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,54,48,110,90,65,56,55,72,49,121,66,79,70,118,70,113,120,74,65,122,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,20,10,5,65,108,105,97,115,18,11,138,1,8,70,101,98,114,117,97,114,121,18,102,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,86,50,84,10,20,10,5,65,108,105,97,115,18,11,138,1,8,70,101,98,114,117,97,114,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,199,231,158,6,10,14,10,2,116,111,18,8,82,6,8,192,248,245,159,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,110,88,65,88,100,48,110,89,87,78,90,90,113,74,116,121,90,116,53,90,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,199,231,158,6,10,14,10,2,116,111,18,8,82,6,8,192,248,245,159,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,15,18,28,10,10,108,97,115,116,85,112,100,97,116,101,18,14,82,12,8,199,193,249,166,6,16,128,138,177,177,1,18,11,10,5,77,111,110,116,111,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,10,26,12,8,220,178,248,166,6,16,128,131,174,151,1,34,12,8,147,194,249,166,6,16,224,210,223,164,1,18,148,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,54,48,110,90,65,56,55,72,49,121,66,79,70,118,70,113,120,74,65,122,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,20,10,5,65,108,105,97,115,18,11,138,1,8,70,101,98,114,117,97,114,121,18,102,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,86,50,84,10,20,10,5,65,108,105,97,115,18,11,138,1,8,70,101,98,114,117,97,114,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,199,231,158,6,10,14,10,2,116,111,18,8,82,6,8,192,248,245,159,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,110,88,65,88,100,48,110,89,87,78,90,90,113,74,116,121,90,116,53,90,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,199,231,158,6,10,14,10,2,116,111,18,8,82,6,8,192,248,245,159,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,15,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,35,18,28,10,10,108,97,115,116,85,112,100,97,116,101,18,14,82,12,8,199,193,249,166,6,16,128,138,177,177,1,18,11,10,5,77,111,110,116,111,18,2,16,25,26,12,8,220,178,248,166,6,16,128,131,174,151,1,34,12,8,147,194,249,166,6,16,240,145,235,162,1,26,0]}}"}}
[debug] [2023-08-17T18:04:03.527Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 105.9075ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 105.9075ms"}}
[debug] [2023-08-17T18:04:03.527Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T18:04:03.527Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T18:04:03.527Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T18:04:03.527Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:04:03.531Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:04:03.531Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:04:03.531Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:04:03.531Z"],"workRunningCount":1}
[debug] [2023-08-17T18:04:03.531Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T18:04:03.531Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T18:04:03.531Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T18:04:03.532Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T18:04:03.532Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T18:04:03.533Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"4e7f2a78-af89-45b8-ba69-4e4f08e92fc5","subject":"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/SrVGYJzHDW93vZ6fyJ7u","time":"2023-08-17T18:04:03.527277100Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/3dJExGFTPEJtxm0peFNG/cuota_payments/SrVGYJzHDW93vZ6fyJ7u","data":{"type":"Buffer","data":[10,223,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,83,114,86,71,89,74,122,72,68,87,57,51,118,90,54,102,121,74,55,117,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,17,10,5,65,108,105,97,115,18,8,138,1,5,77,97,114,99,104,18,99,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,83,50,81,10,17,10,5,65,108,105,97,115,18,8,138,1,5,77,97,114,99,104,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,155,251,159,6,10,14,10,2,116,111,18,8,82,6,8,192,181,153,161,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,66,88,83,72,97,122,54,80,73,49,69,56,76,116,100,75,65,71,51,68,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,155,251,159,6,10,14,10,2,116,111,18,8,82,6,8,192,181,153,161,6,18,11,10,5,77,111,110,116,111,18,2,16,25,26,12,8,220,178,248,166,6,16,184,213,222,184,1,34,12,8,147,194,249,166,6,16,208,208,150,166,1,18,223,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,83,114,86,71,89,74,122,72,68,87,57,51,118,90,54,102,121,74,55,117,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,17,10,5,65,108,105,97,115,18,8,138,1,5,77,97,114,99,104,18,11,10,5,77,111,110,116,111,18,2,16,50,18,99,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,83,50,81,10,17,10,5,65,108,105,97,115,18,8,138,1,5,77,97,114,99,104,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,155,251,159,6,10,14,10,2,116,111,18,8,82,6,8,192,181,153,161,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,66,88,83,72,97,122,54,80,73,49,69,56,76,116,100,75,65,71,51,68,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,155,251,159,6,10,14,10,2,116,111,18,8,82,6,8,192,181,153,161,6,26,12,8,220,178,248,166,6,16,184,213,222,184,1,34,12,8,220,178,248,166,6,16,184,213,222,184,1,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"4e7f2a78-af89-45b8-ba69-4e4f08e92fc5\",\"subject\":\"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/SrVGYJzHDW93vZ6fyJ7u\",\"time\":\"2023-08-17T18:04:03.527277100Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/3dJExGFTPEJtxm0peFNG/cuota_payments/SrVGYJzHDW93vZ6fyJ7u\",\"data\":{\"type\":\"Buffer\",\"data\":[10,223,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,83,114,86,71,89,74,122,72,68,87,57,51,118,90,54,102,121,74,55,117,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,17,10,5,65,108,105,97,115,18,8,138,1,5,77,97,114,99,104,18,99,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,83,50,81,10,17,10,5,65,108,105,97,115,18,8,138,1,5,77,97,114,99,104,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,155,251,159,6,10,14,10,2,116,111,18,8,82,6,8,192,181,153,161,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,66,88,83,72,97,122,54,80,73,49,69,56,76,116,100,75,65,71,51,68,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,155,251,159,6,10,14,10,2,116,111,18,8,82,6,8,192,181,153,161,6,18,11,10,5,77,111,110,116,111,18,2,16,25,26,12,8,220,178,248,166,6,16,184,213,222,184,1,34,12,8,147,194,249,166,6,16,208,208,150,166,1,18,223,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,83,114,86,71,89,74,122,72,68,87,57,51,118,90,54,102,121,74,55,117,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,17,10,5,65,108,105,97,115,18,8,138,1,5,77,97,114,99,104,18,11,10,5,77,111,110,116,111,18,2,16,50,18,99,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,83,50,81,10,17,10,5,65,108,105,97,115,18,8,138,1,5,77,97,114,99,104,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,155,251,159,6,10,14,10,2,116,111,18,8,82,6,8,192,181,153,161,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,66,88,83,72,97,122,54,80,73,49,69,56,76,116,100,75,65,71,51,68,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,155,251,159,6,10,14,10,2,116,111,18,8,82,6,8,192,181,153,161,6,26,12,8,220,178,248,166,6,16,184,213,222,184,1,34,12,8,220,178,248,166,6,16,184,213,222,184,1,26,0]}}"}}
[debug] [2023-08-17T18:04:03.533Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 1.4786ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 1.4786ms"}}
[debug] [2023-08-17T18:04:03.534Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T18:04:03.534Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T18:04:03.534Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T18:04:03.534Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:04:03.547Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:04:03.547Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:04:03.547Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:04:03.547Z"],"workRunningCount":1}
[debug] [2023-08-17T18:04:03.547Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T18:04:03.548Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T18:04:03.548Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T18:04:03.548Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T18:04:03.548Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T18:04:03.551Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"1d7ccff3-4405-4bc5-9bf1-52e8bab400a5","subject":"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/SrVGYJzHDW93vZ6fyJ7u","time":"2023-08-17T18:04:03.534276500Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/3dJExGFTPEJtxm0peFNG/cuota_payments/SrVGYJzHDW93vZ6fyJ7u","data":{"type":"Buffer","data":[10,223,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,83,114,86,71,89,74,122,72,68,87,57,51,118,90,54,102,121,74,55,117,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,17,10,5,65,108,105,97,115,18,8,138,1,5,77,97,114,99,104,18,99,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,83,50,81,10,17,10,5,65,108,105,97,115,18,8,138,1,5,77,97,114,99,104,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,155,251,159,6,10,14,10,2,116,111,18,8,82,6,8,192,181,153,161,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,66,88,83,72,97,122,54,80,73,49,69,56,76,116,100,75,65,71,51,68,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,155,251,159,6,10,14,10,2,116,111,18,8,82,6,8,192,181,153,161,6,18,11,10,5,77,111,110,116,111,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,26,12,8,220,178,248,166,6,16,184,213,222,184,1,34,12,8,147,194,249,166,6,16,192,206,205,167,1,18,223,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,83,114,86,71,89,74,122,72,68,87,57,51,118,90,54,102,121,74,55,117,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,17,10,5,65,108,105,97,115,18,8,138,1,5,77,97,114,99,104,18,99,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,83,50,81,10,17,10,5,65,108,105,97,115,18,8,138,1,5,77,97,114,99,104,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,155,251,159,6,10,14,10,2,116,111,18,8,82,6,8,192,181,153,161,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,66,88,83,72,97,122,54,80,73,49,69,56,76,116,100,75,65,71,51,68,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,155,251,159,6,10,14,10,2,116,111,18,8,82,6,8,192,181,153,161,6,18,11,10,5,77,111,110,116,111,18,2,16,25,26,12,8,220,178,248,166,6,16,184,213,222,184,1,34,12,8,147,194,249,166,6,16,208,208,150,166,1,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"1d7ccff3-4405-4bc5-9bf1-52e8bab400a5\",\"subject\":\"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/SrVGYJzHDW93vZ6fyJ7u\",\"time\":\"2023-08-17T18:04:03.534276500Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/3dJExGFTPEJtxm0peFNG/cuota_payments/SrVGYJzHDW93vZ6fyJ7u\",\"data\":{\"type\":\"Buffer\",\"data\":[10,223,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,83,114,86,71,89,74,122,72,68,87,57,51,118,90,54,102,121,74,55,117,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,17,10,5,65,108,105,97,115,18,8,138,1,5,77,97,114,99,104,18,99,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,83,50,81,10,17,10,5,65,108,105,97,115,18,8,138,1,5,77,97,114,99,104,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,155,251,159,6,10,14,10,2,116,111,18,8,82,6,8,192,181,153,161,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,66,88,83,72,97,122,54,80,73,49,69,56,76,116,100,75,65,71,51,68,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,155,251,159,6,10,14,10,2,116,111,18,8,82,6,8,192,181,153,161,6,18,11,10,5,77,111,110,116,111,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,26,12,8,220,178,248,166,6,16,184,213,222,184,1,34,12,8,147,194,249,166,6,16,192,206,205,167,1,18,223,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,83,114,86,71,89,74,122,72,68,87,57,51,118,90,54,102,121,74,55,117,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,17,10,5,65,108,105,97,115,18,8,138,1,5,77,97,114,99,104,18,99,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,83,50,81,10,17,10,5,65,108,105,97,115,18,8,138,1,5,77,97,114,99,104,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,155,251,159,6,10,14,10,2,116,111,18,8,82,6,8,192,181,153,161,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,66,88,83,72,97,122,54,80,73,49,69,56,76,116,100,75,65,71,51,68,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,155,251,159,6,10,14,10,2,116,111,18,8,82,6,8,192,181,153,161,6,18,11,10,5,77,111,110,116,111,18,2,16,25,26,12,8,220,178,248,166,6,16,184,213,222,184,1,34,12,8,147,194,249,166,6,16,208,208,150,166,1,26,0]}}"}}
[debug] [2023-08-17T18:04:03.669Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 120.6658ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 120.6658ms"}}
[debug] [2023-08-17T18:04:03.669Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T18:04:03.669Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T18:04:03.670Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T18:04:03.670Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:04:03.674Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:04:03.674Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:04:03.674Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:04:03.674Z"],"workRunningCount":1}
[debug] [2023-08-17T18:04:03.674Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T18:04:03.675Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T18:04:03.675Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T18:04:03.675Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T18:04:03.675Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T18:04:03.678Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"fbadda42-670c-45fa-bdb5-2464ca633ca8","subject":"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/owopsBVetECWsGcV21kJ","time":"2023-08-17T18:04:03.669276600Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/3dJExGFTPEJtxm0peFNG/cuota_payments/owopsBVetECWsGcV21kJ","data":{"type":"Buffer","data":[10,223,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,111,119,111,112,115,66,86,101,116,69,67,87,115,71,99,86,50,49,107,74,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,17,10,5,65,108,105,97,115,18,8,138,1,5,65,112,114,105,108,18,99,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,83,50,81,10,17,10,5,65,108,105,97,115,18,8,138,1,5,65,112,114,105,108,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,216,158,161,6,10,14,10,2,116,111,18,8,82,6,8,192,207,183,162,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,68,80,114,55,66,77,116,75,79,80,84,118,116,116,121,116,78,89,79,121,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,216,158,161,6,10,14,10,2,116,111,18,8,82,6,8,192,207,183,162,6,18,11,10,5,77,111,110,116,111,18,2,16,25,26,12,8,220,178,248,166,6,16,144,237,206,162,2,34,12,8,147,194,249,166,6,16,232,218,138,168,1,18,223,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,111,119,111,112,115,66,86,101,116,69,67,87,115,71,99,86,50,49,107,74,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,17,10,5,65,108,105,97,115,18,8,138,1,5,65,112,114,105,108,18,11,10,5,77,111,110,116,111,18,2,16,50,18,99,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,83,50,81,10,17,10,5,65,108,105,97,115,18,8,138,1,5,65,112,114,105,108,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,216,158,161,6,10,14,10,2,116,111,18,8,82,6,8,192,207,183,162,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,68,80,114,55,66,77,116,75,79,80,84,118,116,116,121,116,78,89,79,121,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,216,158,161,6,10,14,10,2,116,111,18,8,82,6,8,192,207,183,162,6,26,12,8,220,178,248,166,6,16,144,237,206,162,2,34,12,8,220,178,248,166,6,16,144,237,206,162,2,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"fbadda42-670c-45fa-bdb5-2464ca633ca8\",\"subject\":\"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/owopsBVetECWsGcV21kJ\",\"time\":\"2023-08-17T18:04:03.669276600Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/3dJExGFTPEJtxm0peFNG/cuota_payments/owopsBVetECWsGcV21kJ\",\"data\":{\"type\":\"Buffer\",\"data\":[10,223,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,111,119,111,112,115,66,86,101,116,69,67,87,115,71,99,86,50,49,107,74,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,17,10,5,65,108,105,97,115,18,8,138,1,5,65,112,114,105,108,18,99,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,83,50,81,10,17,10,5,65,108,105,97,115,18,8,138,1,5,65,112,114,105,108,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,216,158,161,6,10,14,10,2,116,111,18,8,82,6,8,192,207,183,162,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,68,80,114,55,66,77,116,75,79,80,84,118,116,116,121,116,78,89,79,121,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,216,158,161,6,10,14,10,2,116,111,18,8,82,6,8,192,207,183,162,6,18,11,10,5,77,111,110,116,111,18,2,16,25,26,12,8,220,178,248,166,6,16,144,237,206,162,2,34,12,8,147,194,249,166,6,16,232,218,138,168,1,18,223,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,111,119,111,112,115,66,86,101,116,69,67,87,115,71,99,86,50,49,107,74,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,17,10,5,65,108,105,97,115,18,8,138,1,5,65,112,114,105,108,18,11,10,5,77,111,110,116,111,18,2,16,50,18,99,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,83,50,81,10,17,10,5,65,108,105,97,115,18,8,138,1,5,65,112,114,105,108,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,216,158,161,6,10,14,10,2,116,111,18,8,82,6,8,192,207,183,162,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,68,80,114,55,66,77,116,75,79,80,84,118,116,116,121,116,78,89,79,121,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,216,158,161,6,10,14,10,2,116,111,18,8,82,6,8,192,207,183,162,6,26,12,8,220,178,248,166,6,16,144,237,206,162,2,34,12,8,220,178,248,166,6,16,144,237,206,162,2,26,0]}}"}}
[debug] [2023-08-17T18:04:03.678Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 3.2627ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 3.2627ms"}}
[debug] [2023-08-17T18:04:03.679Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T18:04:03.679Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T18:04:03.679Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T18:04:03.679Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:04:03.690Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:04:03.690Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:04:03.690Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:04:03.690Z"],"workRunningCount":1}
[debug] [2023-08-17T18:04:03.690Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T18:04:03.691Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T18:04:03.691Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T18:04:03.691Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T18:04:03.692Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T18:04:03.693Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"76677213-bca9-4417-8459-f66b27ad7c8e","subject":"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/owopsBVetECWsGcV21kJ","time":"2023-08-17T18:04:03.679276200Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/3dJExGFTPEJtxm0peFNG/cuota_payments/owopsBVetECWsGcV21kJ","data":{"type":"Buffer","data":[10,223,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,111,119,111,112,115,66,86,101,116,69,67,87,115,71,99,86,50,49,107,74,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,17,10,5,65,108,105,97,115,18,8,138,1,5,65,112,114,105,108,18,99,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,83,50,81,10,17,10,5,65,108,105,97,115,18,8,138,1,5,65,112,114,105,108,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,216,158,161,6,10,14,10,2,116,111,18,8,82,6,8,192,207,183,162,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,68,80,114,55,66,77,116,75,79,80,84,118,116,116,121,116,78,89,79,121,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,216,158,161,6,10,14,10,2,116,111,18,8,82,6,8,192,207,183,162,6,18,11,10,5,77,111,110,116,111,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,26,12,8,220,178,248,166,6,16,144,237,206,162,2,34,12,8,147,194,249,166,6,16,232,227,132,169,1,18,223,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,111,119,111,112,115,66,86,101,116,69,67,87,115,71,99,86,50,49,107,74,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,17,10,5,65,108,105,97,115,18,8,138,1,5,65,112,114,105,108,18,99,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,83,50,81,10,17,10,5,65,108,105,97,115,18,8,138,1,5,65,112,114,105,108,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,216,158,161,6,10,14,10,2,116,111,18,8,82,6,8,192,207,183,162,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,68,80,114,55,66,77,116,75,79,80,84,118,116,116,121,116,78,89,79,121,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,216,158,161,6,10,14,10,2,116,111,18,8,82,6,8,192,207,183,162,6,18,11,10,5,77,111,110,116,111,18,2,16,25,26,12,8,220,178,248,166,6,16,144,237,206,162,2,34,12,8,147,194,249,166,6,16,232,218,138,168,1,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"76677213-bca9-4417-8459-f66b27ad7c8e\",\"subject\":\"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/owopsBVetECWsGcV21kJ\",\"time\":\"2023-08-17T18:04:03.679276200Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/3dJExGFTPEJtxm0peFNG/cuota_payments/owopsBVetECWsGcV21kJ\",\"data\":{\"type\":\"Buffer\",\"data\":[10,223,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,111,119,111,112,115,66,86,101,116,69,67,87,115,71,99,86,50,49,107,74,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,17,10,5,65,108,105,97,115,18,8,138,1,5,65,112,114,105,108,18,99,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,83,50,81,10,17,10,5,65,108,105,97,115,18,8,138,1,5,65,112,114,105,108,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,216,158,161,6,10,14,10,2,116,111,18,8,82,6,8,192,207,183,162,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,68,80,114,55,66,77,116,75,79,80,84,118,116,116,121,116,78,89,79,121,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,216,158,161,6,10,14,10,2,116,111,18,8,82,6,8,192,207,183,162,6,18,11,10,5,77,111,110,116,111,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,26,12,8,220,178,248,166,6,16,144,237,206,162,2,34,12,8,147,194,249,166,6,16,232,227,132,169,1,18,223,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,111,119,111,112,115,66,86,101,116,69,67,87,115,71,99,86,50,49,107,74,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,17,10,5,65,108,105,97,115,18,8,138,1,5,65,112,114,105,108,18,99,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,83,50,81,10,17,10,5,65,108,105,97,115,18,8,138,1,5,65,112,114,105,108,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,216,158,161,6,10,14,10,2,116,111,18,8,82,6,8,192,207,183,162,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,68,80,114,55,66,77,116,75,79,80,84,118,116,116,121,116,78,89,79,121,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,216,158,161,6,10,14,10,2,116,111,18,8,82,6,8,192,207,183,162,6,18,11,10,5,77,111,110,116,111,18,2,16,25,26,12,8,220,178,248,166,6,16,144,237,206,162,2,34,12,8,147,194,249,166,6,16,232,218,138,168,1,26,0]}}"}}
[debug] [2023-08-17T18:04:03.796Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 105.0577ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 105.0577ms"}}
[debug] [2023-08-17T18:04:03.797Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T18:04:03.797Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T18:04:03.797Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T18:04:03.797Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:04:03.802Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:04:03.802Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:04:03.802Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:04:03.802Z"],"workRunningCount":1}
[debug] [2023-08-17T18:04:03.802Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T18:04:03.803Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T18:04:03.803Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T18:04:03.803Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T18:04:03.803Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T18:04:03.804Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"9f07946e-9a26-45ae-a4ed-4c7aa9135c19","subject":"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/KzQYIeAvLgc2XaKStz9n","time":"2023-08-17T18:04:03.797274400Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/3dJExGFTPEJtxm0peFNG/cuota_payments/KzQYIeAvLgc2XaKStz9n","data":{"type":"Buffer","data":[10,219,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,75,122,81,89,73,101,65,118,76,103,99,50,88,97,75,83,116,122,57,110,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,15,10,5,65,108,105,97,115,18,6,138,1,3,77,97,121,18,97,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,81,50,79,10,15,10,5,65,108,105,97,115,18,6,138,1,3,77,97,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,242,188,162,6,10,14,10,2,116,111,18,8,82,6,8,192,140,219,163,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,51,113,56,110,89,80,71,113,88,122,112,114,120,52,53,121,121,86,104,70,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,242,188,162,6,10,14,10,2,116,111,18,8,82,6,8,192,140,219,163,6,18,11,10,5,77,111,110,116,111,18,2,16,25,26,12,8,220,178,248,166,6,16,240,154,173,140,1,34,12,8,147,194,249,166,6,16,184,252,254,169,1,18,219,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,75,122,81,89,73,101,65,118,76,103,99,50,88,97,75,83,116,122,57,110,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,15,10,5,65,108,105,97,115,18,6,138,1,3,77,97,121,18,11,10,5,77,111,110,116,111,18,2,16,50,18,97,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,81,50,79,10,15,10,5,65,108,105,97,115,18,6,138,1,3,77,97,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,242,188,162,6,10,14,10,2,116,111,18,8,82,6,8,192,140,219,163,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,51,113,56,110,89,80,71,113,88,122,112,114,120,52,53,121,121,86,104,70,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,242,188,162,6,10,14,10,2,116,111,18,8,82,6,8,192,140,219,163,6,26,12,8,220,178,248,166,6,16,240,154,173,140,1,34,12,8,220,178,248,166,6,16,240,154,173,140,1,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"9f07946e-9a26-45ae-a4ed-4c7aa9135c19\",\"subject\":\"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/KzQYIeAvLgc2XaKStz9n\",\"time\":\"2023-08-17T18:04:03.797274400Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/3dJExGFTPEJtxm0peFNG/cuota_payments/KzQYIeAvLgc2XaKStz9n\",\"data\":{\"type\":\"Buffer\",\"data\":[10,219,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,75,122,81,89,73,101,65,118,76,103,99,50,88,97,75,83,116,122,57,110,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,15,10,5,65,108,105,97,115,18,6,138,1,3,77,97,121,18,97,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,81,50,79,10,15,10,5,65,108,105,97,115,18,6,138,1,3,77,97,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,242,188,162,6,10,14,10,2,116,111,18,8,82,6,8,192,140,219,163,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,51,113,56,110,89,80,71,113,88,122,112,114,120,52,53,121,121,86,104,70,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,242,188,162,6,10,14,10,2,116,111,18,8,82,6,8,192,140,219,163,6,18,11,10,5,77,111,110,116,111,18,2,16,25,26,12,8,220,178,248,166,6,16,240,154,173,140,1,34,12,8,147,194,249,166,6,16,184,252,254,169,1,18,219,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,75,122,81,89,73,101,65,118,76,103,99,50,88,97,75,83,116,122,57,110,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,15,10,5,65,108,105,97,115,18,6,138,1,3,77,97,121,18,11,10,5,77,111,110,116,111,18,2,16,50,18,97,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,81,50,79,10,15,10,5,65,108,105,97,115,18,6,138,1,3,77,97,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,242,188,162,6,10,14,10,2,116,111,18,8,82,6,8,192,140,219,163,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,51,113,56,110,89,80,71,113,88,122,112,114,120,52,53,121,121,86,104,70,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,242,188,162,6,10,14,10,2,116,111,18,8,82,6,8,192,140,219,163,6,26,12,8,220,178,248,166,6,16,240,154,173,140,1,34,12,8,220,178,248,166,6,16,240,154,173,140,1,26,0]}}"}}
[debug] [2023-08-17T18:04:03.805Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 1.6061ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 1.6061ms"}}
[debug] [2023-08-17T18:04:03.805Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T18:04:03.805Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T18:04:03.805Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T18:04:03.806Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:04:03.817Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:04:03.817Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:04:03.817Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:04:03.817Z"],"workRunningCount":1}
[debug] [2023-08-17T18:04:03.817Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T18:04:03.818Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T18:04:03.818Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T18:04:03.818Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T18:04:03.818Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T18:04:03.820Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"dca8fe2c-b580-4e6b-8117-b251665e1b40","subject":"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/KzQYIeAvLgc2XaKStz9n","time":"2023-08-17T18:04:03.805275400Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/3dJExGFTPEJtxm0peFNG/cuota_payments/KzQYIeAvLgc2XaKStz9n","data":{"type":"Buffer","data":[10,219,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,75,122,81,89,73,101,65,118,76,103,99,50,88,97,75,83,116,122,57,110,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,15,10,5,65,108,105,97,115,18,6,138,1,3,77,97,121,18,97,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,81,50,79,10,15,10,5,65,108,105,97,115,18,6,138,1,3,77,97,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,242,188,162,6,10,14,10,2,116,111,18,8,82,6,8,192,140,219,163,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,51,113,56,110,89,80,71,113,88,122,112,114,120,52,53,121,121,86,104,70,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,242,188,162,6,10,14,10,2,116,111,18,8,82,6,8,192,140,219,163,6,18,11,10,5,77,111,110,116,111,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,26,12,8,220,178,248,166,6,16,240,154,173,140,1,34,12,8,147,194,249,166,6,16,240,156,249,170,1,18,219,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,75,122,81,89,73,101,65,118,76,103,99,50,88,97,75,83,116,122,57,110,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,15,10,5,65,108,105,97,115,18,6,138,1,3,77,97,121,18,97,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,81,50,79,10,15,10,5,65,108,105,97,115,18,6,138,1,3,77,97,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,242,188,162,6,10,14,10,2,116,111,18,8,82,6,8,192,140,219,163,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,51,113,56,110,89,80,71,113,88,122,112,114,120,52,53,121,121,86,104,70,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,242,188,162,6,10,14,10,2,116,111,18,8,82,6,8,192,140,219,163,6,18,11,10,5,77,111,110,116,111,18,2,16,25,26,12,8,220,178,248,166,6,16,240,154,173,140,1,34,12,8,147,194,249,166,6,16,184,252,254,169,1,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"dca8fe2c-b580-4e6b-8117-b251665e1b40\",\"subject\":\"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/KzQYIeAvLgc2XaKStz9n\",\"time\":\"2023-08-17T18:04:03.805275400Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/3dJExGFTPEJtxm0peFNG/cuota_payments/KzQYIeAvLgc2XaKStz9n\",\"data\":{\"type\":\"Buffer\",\"data\":[10,219,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,75,122,81,89,73,101,65,118,76,103,99,50,88,97,75,83,116,122,57,110,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,15,10,5,65,108,105,97,115,18,6,138,1,3,77,97,121,18,97,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,81,50,79,10,15,10,5,65,108,105,97,115,18,6,138,1,3,77,97,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,242,188,162,6,10,14,10,2,116,111,18,8,82,6,8,192,140,219,163,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,51,113,56,110,89,80,71,113,88,122,112,114,120,52,53,121,121,86,104,70,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,242,188,162,6,10,14,10,2,116,111,18,8,82,6,8,192,140,219,163,6,18,11,10,5,77,111,110,116,111,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,26,12,8,220,178,248,166,6,16,240,154,173,140,1,34,12,8,147,194,249,166,6,16,240,156,249,170,1,18,219,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,75,122,81,89,73,101,65,118,76,103,99,50,88,97,75,83,116,122,57,110,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,15,10,5,65,108,105,97,115,18,6,138,1,3,77,97,121,18,97,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,81,50,79,10,15,10,5,65,108,105,97,115,18,6,138,1,3,77,97,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,242,188,162,6,10,14,10,2,116,111,18,8,82,6,8,192,140,219,163,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,51,113,56,110,89,80,71,113,88,122,112,114,120,52,53,121,121,86,104,70,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,242,188,162,6,10,14,10,2,116,111,18,8,82,6,8,192,140,219,163,6,18,11,10,5,77,111,110,116,111,18,2,16,25,26,12,8,220,178,248,166,6,16,240,154,173,140,1,34,12,8,147,194,249,166,6,16,184,252,254,169,1,26,0]}}"}}
[debug] [2023-08-17T18:04:03.926Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 107.9202ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 107.9202ms"}}
[debug] [2023-08-17T18:04:03.927Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T18:04:03.927Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T18:04:03.927Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T18:04:03.927Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:04:03.929Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:04:03.929Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:04:03.929Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:04:03.929Z"],"workRunningCount":1}
[debug] [2023-08-17T18:04:03.929Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T18:04:03.930Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T18:04:03.930Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T18:04:03.930Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T18:04:03.930Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T18:04:03.931Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"c5c03705-899a-4d94-a668-21b2e75d9b97","subject":"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/lRV4eQr4TJ5GKX2pMaS8","time":"2023-08-17T18:04:03.927275Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/3dJExGFTPEJtxm0peFNG/cuota_payments/lRV4eQr4TJ5GKX2pMaS8","data":{"type":"Buffer","data":[10,221,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,108,82,86,52,101,81,114,52,84,74,53,71,75,88,50,112,77,97,83,56,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,110,101,18,98,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,82,50,80,10,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,110,101,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,175,224,163,6,10,14,10,2,116,111,18,8,82,6,8,192,166,249,164,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,67,66,74,74,105,67,104,83,77,112,113,86,120,103,110,75,113,51,103,75,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,175,224,163,6,10,14,10,2,116,111,18,8,82,6,8,192,166,249,164,6,18,11,10,5,77,111,110,116,111,18,2,16,25,26,12,8,219,178,248,166,6,16,192,234,196,147,3,34,12,8,147,194,249,166,6,16,144,139,176,172,1,18,221,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,108,82,86,52,101,81,114,52,84,74,53,71,75,88,50,112,77,97,83,56,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,110,101,18,11,10,5,77,111,110,116,111,18,2,16,50,18,98,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,82,50,80,10,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,110,101,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,175,224,163,6,10,14,10,2,116,111,18,8,82,6,8,192,166,249,164,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,67,66,74,74,105,67,104,83,77,112,113,86,120,103,110,75,113,51,103,75,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,175,224,163,6,10,14,10,2,116,111,18,8,82,6,8,192,166,249,164,6,26,12,8,219,178,248,166,6,16,192,234,196,147,3,34,12,8,219,178,248,166,6,16,192,234,196,147,3,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"c5c03705-899a-4d94-a668-21b2e75d9b97\",\"subject\":\"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/lRV4eQr4TJ5GKX2pMaS8\",\"time\":\"2023-08-17T18:04:03.927275Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/3dJExGFTPEJtxm0peFNG/cuota_payments/lRV4eQr4TJ5GKX2pMaS8\",\"data\":{\"type\":\"Buffer\",\"data\":[10,221,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,108,82,86,52,101,81,114,52,84,74,53,71,75,88,50,112,77,97,83,56,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,110,101,18,98,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,82,50,80,10,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,110,101,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,175,224,163,6,10,14,10,2,116,111,18,8,82,6,8,192,166,249,164,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,67,66,74,74,105,67,104,83,77,112,113,86,120,103,110,75,113,51,103,75,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,175,224,163,6,10,14,10,2,116,111,18,8,82,6,8,192,166,249,164,6,18,11,10,5,77,111,110,116,111,18,2,16,25,26,12,8,219,178,248,166,6,16,192,234,196,147,3,34,12,8,147,194,249,166,6,16,144,139,176,172,1,18,221,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,108,82,86,52,101,81,114,52,84,74,53,71,75,88,50,112,77,97,83,56,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,110,101,18,11,10,5,77,111,110,116,111,18,2,16,50,18,98,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,82,50,80,10,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,110,101,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,175,224,163,6,10,14,10,2,116,111,18,8,82,6,8,192,166,249,164,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,67,66,74,74,105,67,104,83,77,112,113,86,120,103,110,75,113,51,103,75,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,175,224,163,6,10,14,10,2,116,111,18,8,82,6,8,192,166,249,164,6,26,12,8,219,178,248,166,6,16,192,234,196,147,3,34,12,8,219,178,248,166,6,16,192,234,196,147,3,26,0]}}"}}
[debug] [2023-08-17T18:04:03.932Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 1.9304ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 1.9304ms"}}
[debug] [2023-08-17T18:04:03.932Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T18:04:03.932Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T18:04:03.932Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T18:04:03.932Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:04:03.945Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:04:03.945Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:04:03.945Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:04:03.945Z"],"workRunningCount":1}
[debug] [2023-08-17T18:04:03.945Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T18:04:03.946Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T18:04:03.946Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T18:04:03.946Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T18:04:03.946Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T18:04:03.947Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"511a90da-e5ae-4995-ad0b-dd7d24667867","subject":"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/lRV4eQr4TJ5GKX2pMaS8","time":"2023-08-17T18:04:03.932275500Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/3dJExGFTPEJtxm0peFNG/cuota_payments/lRV4eQr4TJ5GKX2pMaS8","data":{"type":"Buffer","data":[10,221,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,108,82,86,52,101,81,114,52,84,74,53,71,75,88,50,112,77,97,83,56,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,110,101,18,98,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,82,50,80,10,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,110,101,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,175,224,163,6,10,14,10,2,116,111,18,8,82,6,8,192,166,249,164,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,67,66,74,74,105,67,104,83,77,112,113,86,120,103,110,75,113,51,103,75,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,175,224,163,6,10,14,10,2,116,111,18,8,82,6,8,192,166,249,164,6,18,11,10,5,77,111,110,116,111,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,26,12,8,219,178,248,166,6,16,192,234,196,147,3,34,12,8,147,194,249,166,6,16,168,140,170,173,1,18,221,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,108,82,86,52,101,81,114,52,84,74,53,71,75,88,50,112,77,97,83,56,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,110,101,18,98,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,82,50,80,10,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,110,101,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,175,224,163,6,10,14,10,2,116,111,18,8,82,6,8,192,166,249,164,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,67,66,74,74,105,67,104,83,77,112,113,86,120,103,110,75,113,51,103,75,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,175,224,163,6,10,14,10,2,116,111,18,8,82,6,8,192,166,249,164,6,18,11,10,5,77,111,110,116,111,18,2,16,25,26,12,8,219,178,248,166,6,16,192,234,196,147,3,34,12,8,147,194,249,166,6,16,144,139,176,172,1,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"511a90da-e5ae-4995-ad0b-dd7d24667867\",\"subject\":\"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/lRV4eQr4TJ5GKX2pMaS8\",\"time\":\"2023-08-17T18:04:03.932275500Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/3dJExGFTPEJtxm0peFNG/cuota_payments/lRV4eQr4TJ5GKX2pMaS8\",\"data\":{\"type\":\"Buffer\",\"data\":[10,221,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,108,82,86,52,101,81,114,52,84,74,53,71,75,88,50,112,77,97,83,56,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,110,101,18,98,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,82,50,80,10,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,110,101,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,175,224,163,6,10,14,10,2,116,111,18,8,82,6,8,192,166,249,164,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,67,66,74,74,105,67,104,83,77,112,113,86,120,103,110,75,113,51,103,75,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,175,224,163,6,10,14,10,2,116,111,18,8,82,6,8,192,166,249,164,6,18,11,10,5,77,111,110,116,111,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,26,12,8,219,178,248,166,6,16,192,234,196,147,3,34,12,8,147,194,249,166,6,16,168,140,170,173,1,18,221,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,108,82,86,52,101,81,114,52,84,74,53,71,75,88,50,112,77,97,83,56,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,110,101,18,98,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,82,50,80,10,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,110,101,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,175,224,163,6,10,14,10,2,116,111,18,8,82,6,8,192,166,249,164,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,67,66,74,74,105,67,104,83,77,112,113,86,120,103,110,75,113,51,103,75,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,175,224,163,6,10,14,10,2,116,111,18,8,82,6,8,192,166,249,164,6,18,11,10,5,77,111,110,116,111,18,2,16,25,26,12,8,219,178,248,166,6,16,192,234,196,147,3,34,12,8,147,194,249,166,6,16,144,139,176,172,1,26,0]}}"}}
[debug] [2023-08-17T18:04:04.072Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 126.4301ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 126.4301ms"}}
[debug] [2023-08-17T18:04:04.073Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T18:04:04.073Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T18:04:04.073Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T18:04:04.073Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:04:04.088Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:04:04.088Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:04:04.088Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:04:04.088Z"],"workRunningCount":1}
[debug] [2023-08-17T18:04:04.088Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T18:04:04.089Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T18:04:04.089Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T18:04:04.089Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T18:04:04.089Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T18:04:04.090Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"51e2e431-1cbf-4dfb-9840-a772bd7bf88f","subject":"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/Fm5lfv2lTvwLbcHuNYTZ","time":"2023-08-17T18:04:04.073278300Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/3dJExGFTPEJtxm0peFNG/cuota_payments/Fm5lfv2lTvwLbcHuNYTZ","data":{"type":"Buffer","data":[10,220,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,70,109,53,108,102,118,50,108,84,118,119,76,98,99,72,117,78,89,84,90,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,108,121,18,98,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,82,50,80,10,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,108,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,201,254,164,6,10,14,10,2,116,111,18,8,82,6,8,192,227,156,166,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,110,81,74,83,113,119,106,57,48,104,111,49,49,97,117,72,51,55,69,83,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,201,254,164,6,10,14,10,2,116,111,18,8,82,6,8,192,227,156,166,6,18,11,10,5,77,111,110,116,111,18,2,16,25,26,11,8,220,178,248,166,6,16,136,184,156,86,34,12,8,147,194,249,166,6,16,216,133,164,174,1,18,219,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,70,109,53,108,102,118,50,108,84,118,119,76,98,99,72,117,78,89,84,90,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,108,121,18,11,10,5,77,111,110,116,111,18,2,16,50,18,98,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,82,50,80,10,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,108,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,201,254,164,6,10,14,10,2,116,111,18,8,82,6,8,192,227,156,166,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,110,81,74,83,113,119,106,57,48,104,111,49,49,97,117,72,51,55,69,83,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,201,254,164,6,10,14,10,2,116,111,18,8,82,6,8,192,227,156,166,6,26,11,8,220,178,248,166,6,16,136,184,156,86,34,11,8,220,178,248,166,6,16,136,184,156,86,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"51e2e431-1cbf-4dfb-9840-a772bd7bf88f\",\"subject\":\"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/Fm5lfv2lTvwLbcHuNYTZ\",\"time\":\"2023-08-17T18:04:04.073278300Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/3dJExGFTPEJtxm0peFNG/cuota_payments/Fm5lfv2lTvwLbcHuNYTZ\",\"data\":{\"type\":\"Buffer\",\"data\":[10,220,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,70,109,53,108,102,118,50,108,84,118,119,76,98,99,72,117,78,89,84,90,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,108,121,18,98,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,82,50,80,10,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,108,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,201,254,164,6,10,14,10,2,116,111,18,8,82,6,8,192,227,156,166,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,110,81,74,83,113,119,106,57,48,104,111,49,49,97,117,72,51,55,69,83,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,201,254,164,6,10,14,10,2,116,111,18,8,82,6,8,192,227,156,166,6,18,11,10,5,77,111,110,116,111,18,2,16,25,26,11,8,220,178,248,166,6,16,136,184,156,86,34,12,8,147,194,249,166,6,16,216,133,164,174,1,18,219,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,70,109,53,108,102,118,50,108,84,118,119,76,98,99,72,117,78,89,84,90,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,108,121,18,11,10,5,77,111,110,116,111,18,2,16,50,18,98,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,82,50,80,10,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,108,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,201,254,164,6,10,14,10,2,116,111,18,8,82,6,8,192,227,156,166,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,110,81,74,83,113,119,106,57,48,104,111,49,49,97,117,72,51,55,69,83,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,201,254,164,6,10,14,10,2,116,111,18,8,82,6,8,192,227,156,166,6,26,11,8,220,178,248,166,6,16,136,184,156,86,34,11,8,220,178,248,166,6,16,136,184,156,86,26,0]}}"}}
[debug] [2023-08-17T18:04:04.091Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 1.9816ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 1.9816ms"}}
[debug] [2023-08-17T18:04:04.092Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T18:04:04.092Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T18:04:04.092Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T18:04:04.092Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:04:04.104Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:04:04.104Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:04:04.104Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:04:04.104Z"],"workRunningCount":1}
[debug] [2023-08-17T18:04:04.104Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T18:04:04.105Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T18:04:04.105Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T18:04:04.105Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T18:04:04.105Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T18:04:04.106Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"f5a61976-1df2-43c6-a847-c01e6f0c9919","subject":"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/Fm5lfv2lTvwLbcHuNYTZ","time":"2023-08-17T18:04:04.092276300Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/3dJExGFTPEJtxm0peFNG/cuota_payments/Fm5lfv2lTvwLbcHuNYTZ","data":{"type":"Buffer","data":[10,220,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,70,109,53,108,102,118,50,108,84,118,119,76,98,99,72,117,78,89,84,90,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,108,121,18,98,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,82,50,80,10,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,108,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,201,254,164,6,10,14,10,2,116,111,18,8,82,6,8,192,227,156,166,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,110,81,74,83,113,119,106,57,48,104,111,49,49,97,117,72,51,55,69,83,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,201,254,164,6,10,14,10,2,116,111,18,8,82,6,8,192,227,156,166,6,18,11,10,5,77,111,110,116,111,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,26,11,8,220,178,248,166,6,16,136,184,156,86,34,12,8,147,194,249,166,6,16,168,158,158,175,1,18,220,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,70,109,53,108,102,118,50,108,84,118,119,76,98,99,72,117,78,89,84,90,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,108,121,18,98,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,82,50,80,10,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,108,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,201,254,164,6,10,14,10,2,116,111,18,8,82,6,8,192,227,156,166,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,110,81,74,83,113,119,106,57,48,104,111,49,49,97,117,72,51,55,69,83,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,201,254,164,6,10,14,10,2,116,111,18,8,82,6,8,192,227,156,166,6,18,11,10,5,77,111,110,116,111,18,2,16,25,26,11,8,220,178,248,166,6,16,136,184,156,86,34,12,8,147,194,249,166,6,16,216,133,164,174,1,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"f5a61976-1df2-43c6-a847-c01e6f0c9919\",\"subject\":\"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/Fm5lfv2lTvwLbcHuNYTZ\",\"time\":\"2023-08-17T18:04:04.092276300Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/3dJExGFTPEJtxm0peFNG/cuota_payments/Fm5lfv2lTvwLbcHuNYTZ\",\"data\":{\"type\":\"Buffer\",\"data\":[10,220,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,70,109,53,108,102,118,50,108,84,118,119,76,98,99,72,117,78,89,84,90,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,108,121,18,98,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,82,50,80,10,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,108,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,201,254,164,6,10,14,10,2,116,111,18,8,82,6,8,192,227,156,166,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,110,81,74,83,113,119,106,57,48,104,111,49,49,97,117,72,51,55,69,83,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,201,254,164,6,10,14,10,2,116,111,18,8,82,6,8,192,227,156,166,6,18,11,10,5,77,111,110,116,111,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,26,11,8,220,178,248,166,6,16,136,184,156,86,34,12,8,147,194,249,166,6,16,168,158,158,175,1,18,220,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,70,109,53,108,102,118,50,108,84,118,119,76,98,99,72,117,78,89,84,90,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,108,121,18,98,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,82,50,80,10,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,108,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,201,254,164,6,10,14,10,2,116,111,18,8,82,6,8,192,227,156,166,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,110,81,74,83,113,119,106,57,48,104,111,49,49,97,117,72,51,55,69,83,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,201,254,164,6,10,14,10,2,116,111,18,8,82,6,8,192,227,156,166,6,18,11,10,5,77,111,110,116,111,18,2,16,25,26,11,8,220,178,248,166,6,16,136,184,156,86,34,12,8,147,194,249,166,6,16,216,133,164,174,1,26,0]}}"}}
[debug] [2023-08-17T18:04:04.218Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 113.1423ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 113.1423ms"}}
[debug] [2023-08-17T18:04:04.219Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T18:04:04.219Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T18:04:04.219Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T18:04:04.219Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:04:04.232Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:04:04.232Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:04:04.232Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:04:04.232Z"],"workRunningCount":1}
[debug] [2023-08-17T18:04:04.232Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T18:04:04.233Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T18:04:04.233Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T18:04:04.233Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T18:04:04.233Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T18:04:04.234Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"64b2706a-ad6d-44e0-a7a8-9cd3b39ae40b","subject":"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/NQzYvfDp9jHBZ2G5GrgC","time":"2023-08-17T18:04:04.219275200Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/3dJExGFTPEJtxm0peFNG/cuota_payments/NQzYvfDp9jHBZ2G5GrgC","data":{"type":"Buffer","data":[10,225,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,78,81,122,89,118,102,68,112,57,106,72,66,90,50,71,53,71,114,103,67,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,18,10,5,65,108,105,97,115,18,9,138,1,6,65,117,103,117,115,116,18,100,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,84,50,82,10,18,10,5,65,108,105,97,115,18,9,138,1,6,65,117,103,117,115,116,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,134,162,166,6,10,14,10,2,116,111,18,8,82,6,8,192,160,192,167,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,114,80,119,120,85,117,102,112,79,87,100,105,98,115,108,110,88,56,48,86,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,134,162,166,6,10,14,10,2,116,111,18,8,82,6,8,192,160,192,167,6,18,11,10,5,77,111,110,116,111,18,2,16,25,26,12,8,220,178,248,166,6,16,192,199,162,193,2,34,12,8,147,194,249,166,6,16,208,170,219,175,1,18,225,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,78,81,122,89,118,102,68,112,57,106,72,66,90,50,71,53,71,114,103,67,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,18,10,5,65,108,105,97,115,18,9,138,1,6,65,117,103,117,115,116,18,11,10,5,77,111,110,116,111,18,2,16,50,18,100,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,84,50,82,10,18,10,5,65,108,105,97,115,18,9,138,1,6,65,117,103,117,115,116,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,134,162,166,6,10,14,10,2,116,111,18,8,82,6,8,192,160,192,167,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,114,80,119,120,85,117,102,112,79,87,100,105,98,115,108,110,88,56,48,86,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,134,162,166,6,10,14,10,2,116,111,18,8,82,6,8,192,160,192,167,6,26,12,8,220,178,248,166,6,16,192,199,162,193,2,34,12,8,220,178,248,166,6,16,192,199,162,193,2,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"64b2706a-ad6d-44e0-a7a8-9cd3b39ae40b\",\"subject\":\"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/NQzYvfDp9jHBZ2G5GrgC\",\"time\":\"2023-08-17T18:04:04.219275200Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/3dJExGFTPEJtxm0peFNG/cuota_payments/NQzYvfDp9jHBZ2G5GrgC\",\"data\":{\"type\":\"Buffer\",\"data\":[10,225,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,78,81,122,89,118,102,68,112,57,106,72,66,90,50,71,53,71,114,103,67,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,18,10,5,65,108,105,97,115,18,9,138,1,6,65,117,103,117,115,116,18,100,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,84,50,82,10,18,10,5,65,108,105,97,115,18,9,138,1,6,65,117,103,117,115,116,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,134,162,166,6,10,14,10,2,116,111,18,8,82,6,8,192,160,192,167,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,114,80,119,120,85,117,102,112,79,87,100,105,98,115,108,110,88,56,48,86,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,134,162,166,6,10,14,10,2,116,111,18,8,82,6,8,192,160,192,167,6,18,11,10,5,77,111,110,116,111,18,2,16,25,26,12,8,220,178,248,166,6,16,192,199,162,193,2,34,12,8,147,194,249,166,6,16,208,170,219,175,1,18,225,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,78,81,122,89,118,102,68,112,57,106,72,66,90,50,71,53,71,114,103,67,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,18,10,5,65,108,105,97,115,18,9,138,1,6,65,117,103,117,115,116,18,11,10,5,77,111,110,116,111,18,2,16,50,18,100,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,84,50,82,10,18,10,5,65,108,105,97,115,18,9,138,1,6,65,117,103,117,115,116,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,134,162,166,6,10,14,10,2,116,111,18,8,82,6,8,192,160,192,167,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,114,80,119,120,85,117,102,112,79,87,100,105,98,115,108,110,88,56,48,86,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,134,162,166,6,10,14,10,2,116,111,18,8,82,6,8,192,160,192,167,6,26,12,8,220,178,248,166,6,16,192,199,162,193,2,34,12,8,220,178,248,166,6,16,192,199,162,193,2,26,0]}}"}}
[debug] [2023-08-17T18:04:04.235Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 1.6972ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 1.6972ms"}}
[debug] [2023-08-17T18:04:04.235Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T18:04:04.236Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T18:04:04.236Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T18:04:04.236Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:04:04.248Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:04:04.248Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:04:04.249Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:04:04.248Z"],"workRunningCount":1}
[debug] [2023-08-17T18:04:04.249Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T18:04:04.249Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T18:04:04.249Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T18:04:04.249Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T18:04:04.250Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T18:04:04.251Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"8f782def-e374-40c2-a878-c13df28ab6b0","subject":"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/NQzYvfDp9jHBZ2G5GrgC","time":"2023-08-17T18:04:04.236274400Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/3dJExGFTPEJtxm0peFNG/cuota_payments/NQzYvfDp9jHBZ2G5GrgC","data":{"type":"Buffer","data":[10,225,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,78,81,122,89,118,102,68,112,57,106,72,66,90,50,71,53,71,114,103,67,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,18,10,5,65,108,105,97,115,18,9,138,1,6,65,117,103,117,115,116,18,100,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,84,50,82,10,18,10,5,65,108,105,97,115,18,9,138,1,6,65,117,103,117,115,116,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,134,162,166,6,10,14,10,2,116,111,18,8,82,6,8,192,160,192,167,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,114,80,119,120,85,117,102,112,79,87,100,105,98,115,108,110,88,56,48,86,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,134,162,166,6,10,14,10,2,116,111,18,8,82,6,8,192,160,192,167,6,18,11,10,5,77,111,110,116,111,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,26,12,8,220,178,248,166,6,16,192,199,162,193,2,34,12,8,147,194,249,166,6,16,208,179,213,176,1,18,225,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,78,81,122,89,118,102,68,112,57,106,72,66,90,50,71,53,71,114,103,67,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,18,10,5,65,108,105,97,115,18,9,138,1,6,65,117,103,117,115,116,18,100,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,84,50,82,10,18,10,5,65,108,105,97,115,18,9,138,1,6,65,117,103,117,115,116,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,134,162,166,6,10,14,10,2,116,111,18,8,82,6,8,192,160,192,167,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,114,80,119,120,85,117,102,112,79,87,100,105,98,115,108,110,88,56,48,86,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,134,162,166,6,10,14,10,2,116,111,18,8,82,6,8,192,160,192,167,6,18,11,10,5,77,111,110,116,111,18,2,16,25,26,12,8,220,178,248,166,6,16,192,199,162,193,2,34,12,8,147,194,249,166,6,16,208,170,219,175,1,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"8f782def-e374-40c2-a878-c13df28ab6b0\",\"subject\":\"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/NQzYvfDp9jHBZ2G5GrgC\",\"time\":\"2023-08-17T18:04:04.236274400Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/3dJExGFTPEJtxm0peFNG/cuota_payments/NQzYvfDp9jHBZ2G5GrgC\",\"data\":{\"type\":\"Buffer\",\"data\":[10,225,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,78,81,122,89,118,102,68,112,57,106,72,66,90,50,71,53,71,114,103,67,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,18,10,5,65,108,105,97,115,18,9,138,1,6,65,117,103,117,115,116,18,100,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,84,50,82,10,18,10,5,65,108,105,97,115,18,9,138,1,6,65,117,103,117,115,116,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,134,162,166,6,10,14,10,2,116,111,18,8,82,6,8,192,160,192,167,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,114,80,119,120,85,117,102,112,79,87,100,105,98,115,108,110,88,56,48,86,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,134,162,166,6,10,14,10,2,116,111,18,8,82,6,8,192,160,192,167,6,18,11,10,5,77,111,110,116,111,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,26,12,8,220,178,248,166,6,16,192,199,162,193,2,34,12,8,147,194,249,166,6,16,208,179,213,176,1,18,225,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,78,81,122,89,118,102,68,112,57,106,72,66,90,50,71,53,71,114,103,67,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,18,10,5,65,108,105,97,115,18,9,138,1,6,65,117,103,117,115,116,18,100,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,84,50,82,10,18,10,5,65,108,105,97,115,18,9,138,1,6,65,117,103,117,115,116,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,134,162,166,6,10,14,10,2,116,111,18,8,82,6,8,192,160,192,167,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,114,80,119,120,85,117,102,112,79,87,100,105,98,115,108,110,88,56,48,86,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,134,162,166,6,10,14,10,2,116,111,18,8,82,6,8,192,160,192,167,6,18,11,10,5,77,111,110,116,111,18,2,16,25,26,12,8,220,178,248,166,6,16,192,199,162,193,2,34,12,8,147,194,249,166,6,16,208,170,219,175,1,26,0]}}"}}
[debug] [2023-08-17T18:04:04.352Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 102.6775ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 102.6775ms"}}
[debug] [2023-08-17T18:04:04.353Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T18:04:04.353Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T18:04:04.353Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T18:04:04.353Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:04:04.360Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:04:04.360Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:04:04.360Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:04:04.360Z"],"workRunningCount":1}
[debug] [2023-08-17T18:04:04.360Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T18:04:04.361Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T18:04:04.361Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T18:04:04.361Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T18:04:04.361Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T18:04:04.362Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"bc2a8801-1963-4ed8-80eb-5a82adad64fc","subject":"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/9ySA6jANvJJ2noM4L0Yu","time":"2023-08-17T18:04:04.353274Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/3dJExGFTPEJtxm0peFNG/cuota_payments/9ySA6jANvJJ2noM4L0Yu","data":{"type":"Buffer","data":[10,231,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,57,121,83,65,54,106,65,78,118,74,74,50,110,111,77,52,76,48,89,117,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,21,10,5,65,108,105,97,115,18,12,138,1,9,83,101,112,116,101,109,98,101,114,18,103,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,87,50,85,10,21,10,5,65,108,105,97,115,18,12,138,1,9,83,101,112,116,101,109,98,101,114,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,195,197,167,6,10,14,10,2,116,111,18,8,82,6,8,192,186,222,168,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,101,110,48,106,76,82,79,119,111,116,74,113,85,83,56,101,71,75,109,120,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,195,197,167,6,10,14,10,2,116,111,18,8,82,6,8,192,186,222,168,6,18,11,10,5,77,111,110,116,111,18,2,16,25,26,12,8,219,178,248,166,6,16,176,167,147,176,3,34,12,8,147,194,249,166,6,16,248,191,146,177,1,18,231,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,57,121,83,65,54,106,65,78,118,74,74,50,110,111,77,52,76,48,89,117,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,21,10,5,65,108,105,97,115,18,12,138,1,9,83,101,112,116,101,109,98,101,114,18,11,10,5,77,111,110,116,111,18,2,16,50,18,103,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,87,50,85,10,21,10,5,65,108,105,97,115,18,12,138,1,9,83,101,112,116,101,109,98,101,114,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,195,197,167,6,10,14,10,2,116,111,18,8,82,6,8,192,186,222,168,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,101,110,48,106,76,82,79,119,111,116,74,113,85,83,56,101,71,75,109,120,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,195,197,167,6,10,14,10,2,116,111,18,8,82,6,8,192,186,222,168,6,26,12,8,219,178,248,166,6,16,176,167,147,176,3,34,12,8,219,178,248,166,6,16,176,167,147,176,3,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"bc2a8801-1963-4ed8-80eb-5a82adad64fc\",\"subject\":\"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/9ySA6jANvJJ2noM4L0Yu\",\"time\":\"2023-08-17T18:04:04.353274Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/3dJExGFTPEJtxm0peFNG/cuota_payments/9ySA6jANvJJ2noM4L0Yu\",\"data\":{\"type\":\"Buffer\",\"data\":[10,231,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,57,121,83,65,54,106,65,78,118,74,74,50,110,111,77,52,76,48,89,117,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,21,10,5,65,108,105,97,115,18,12,138,1,9,83,101,112,116,101,109,98,101,114,18,103,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,87,50,85,10,21,10,5,65,108,105,97,115,18,12,138,1,9,83,101,112,116,101,109,98,101,114,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,195,197,167,6,10,14,10,2,116,111,18,8,82,6,8,192,186,222,168,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,101,110,48,106,76,82,79,119,111,116,74,113,85,83,56,101,71,75,109,120,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,195,197,167,6,10,14,10,2,116,111,18,8,82,6,8,192,186,222,168,6,18,11,10,5,77,111,110,116,111,18,2,16,25,26,12,8,219,178,248,166,6,16,176,167,147,176,3,34,12,8,147,194,249,166,6,16,248,191,146,177,1,18,231,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,57,121,83,65,54,106,65,78,118,74,74,50,110,111,77,52,76,48,89,117,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,21,10,5,65,108,105,97,115,18,12,138,1,9,83,101,112,116,101,109,98,101,114,18,11,10,5,77,111,110,116,111,18,2,16,50,18,103,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,87,50,85,10,21,10,5,65,108,105,97,115,18,12,138,1,9,83,101,112,116,101,109,98,101,114,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,195,197,167,6,10,14,10,2,116,111,18,8,82,6,8,192,186,222,168,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,101,110,48,106,76,82,79,119,111,116,74,113,85,83,56,101,71,75,109,120,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,195,197,167,6,10,14,10,2,116,111,18,8,82,6,8,192,186,222,168,6,26,12,8,219,178,248,166,6,16,176,167,147,176,3,34,12,8,219,178,248,166,6,16,176,167,147,176,3,26,0]}}"}}
[debug] [2023-08-17T18:04:04.363Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 1.8465ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 1.8465ms"}}
[debug] [2023-08-17T18:04:04.363Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T18:04:04.363Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T18:04:04.363Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T18:04:04.363Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:04:04.376Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:04:04.376Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:04:04.376Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:04:04.376Z"],"workRunningCount":1}
[debug] [2023-08-17T18:04:04.376Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T18:04:04.377Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T18:04:04.377Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T18:04:04.377Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T18:04:04.377Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T18:04:04.379Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"1dc57465-0f7f-4065-893f-6cbf48d6b280","subject":"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/9ySA6jANvJJ2noM4L0Yu","time":"2023-08-17T18:04:04.363274900Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/3dJExGFTPEJtxm0peFNG/cuota_payments/9ySA6jANvJJ2noM4L0Yu","data":{"type":"Buffer","data":[10,231,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,57,121,83,65,54,106,65,78,118,74,74,50,110,111,77,52,76,48,89,117,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,21,10,5,65,108,105,97,115,18,12,138,1,9,83,101,112,116,101,109,98,101,114,18,103,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,87,50,85,10,21,10,5,65,108,105,97,115,18,12,138,1,9,83,101,112,116,101,109,98,101,114,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,195,197,167,6,10,14,10,2,116,111,18,8,82,6,8,192,186,222,168,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,101,110,48,106,76,82,79,119,111,116,74,113,85,83,56,101,71,75,109,120,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,195,197,167,6,10,14,10,2,116,111,18,8,82,6,8,192,186,222,168,6,18,11,10,5,77,111,110,116,111,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,26,12,8,219,178,248,166,6,16,176,167,147,176,3,34,12,8,147,194,249,166,6,16,176,224,140,178,1,18,231,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,57,121,83,65,54,106,65,78,118,74,74,50,110,111,77,52,76,48,89,117,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,21,10,5,65,108,105,97,115,18,12,138,1,9,83,101,112,116,101,109,98,101,114,18,103,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,87,50,85,10,21,10,5,65,108,105,97,115,18,12,138,1,9,83,101,112,116,101,109,98,101,114,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,195,197,167,6,10,14,10,2,116,111,18,8,82,6,8,192,186,222,168,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,101,110,48,106,76,82,79,119,111,116,74,113,85,83,56,101,71,75,109,120,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,195,197,167,6,10,14,10,2,116,111,18,8,82,6,8,192,186,222,168,6,18,11,10,5,77,111,110,116,111,18,2,16,25,26,12,8,219,178,248,166,6,16,176,167,147,176,3,34,12,8,147,194,249,166,6,16,248,191,146,177,1,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"1dc57465-0f7f-4065-893f-6cbf48d6b280\",\"subject\":\"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/9ySA6jANvJJ2noM4L0Yu\",\"time\":\"2023-08-17T18:04:04.363274900Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/3dJExGFTPEJtxm0peFNG/cuota_payments/9ySA6jANvJJ2noM4L0Yu\",\"data\":{\"type\":\"Buffer\",\"data\":[10,231,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,57,121,83,65,54,106,65,78,118,74,74,50,110,111,77,52,76,48,89,117,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,21,10,5,65,108,105,97,115,18,12,138,1,9,83,101,112,116,101,109,98,101,114,18,103,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,87,50,85,10,21,10,5,65,108,105,97,115,18,12,138,1,9,83,101,112,116,101,109,98,101,114,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,195,197,167,6,10,14,10,2,116,111,18,8,82,6,8,192,186,222,168,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,101,110,48,106,76,82,79,119,111,116,74,113,85,83,56,101,71,75,109,120,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,195,197,167,6,10,14,10,2,116,111,18,8,82,6,8,192,186,222,168,6,18,11,10,5,77,111,110,116,111,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,26,12,8,219,178,248,166,6,16,176,167,147,176,3,34,12,8,147,194,249,166,6,16,176,224,140,178,1,18,231,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,57,121,83,65,54,106,65,78,118,74,74,50,110,111,77,52,76,48,89,117,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,21,10,5,65,108,105,97,115,18,12,138,1,9,83,101,112,116,101,109,98,101,114,18,103,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,87,50,85,10,21,10,5,65,108,105,97,115,18,12,138,1,9,83,101,112,116,101,109,98,101,114,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,195,197,167,6,10,14,10,2,116,111,18,8,82,6,8,192,186,222,168,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,101,110,48,106,76,82,79,119,111,116,74,113,85,83,56,101,71,75,109,120,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,195,197,167,6,10,14,10,2,116,111,18,8,82,6,8,192,186,222,168,6,18,11,10,5,77,111,110,116,111,18,2,16,25,26,12,8,219,178,248,166,6,16,176,167,147,176,3,34,12,8,147,194,249,166,6,16,248,191,146,177,1,26,0]}}"}}
[debug] [2023-08-17T18:04:04.486Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 108.5884ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 108.5884ms"}}
[debug] [2023-08-17T18:04:04.486Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T18:04:04.486Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T18:04:04.486Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T18:04:04.486Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:04:04.488Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:04:04.488Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:04:04.488Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:04:04.488Z"],"workRunningCount":1}
[debug] [2023-08-17T18:04:04.488Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T18:04:04.488Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T18:04:04.488Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T18:04:04.489Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T18:04:04.489Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T18:04:04.490Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"f7df9757-99f8-4300-b6fd-90aaf6efed74","subject":"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/qbL13FYVliP4cUxbBNSX","time":"2023-08-17T18:04:04.486275Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/3dJExGFTPEJtxm0peFNG/cuota_payments/qbL13FYVliP4cUxbBNSX","data":{"type":"Buffer","data":[10,227,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,113,98,76,49,51,70,89,86,108,105,80,52,99,85,120,98,66,78,83,88,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,19,10,5,65,108,105,97,115,18,10,138,1,7,79,99,116,111,98,101,114,18,101,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,85,50,83,10,19,10,5,65,108,105,97,115,18,10,138,1,7,79,99,116,111,98,101,114,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,221,227,168,6,10,14,10,2,116,111,18,8,82,6,8,192,247,129,170,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,68,108,101,52,102,116,81,114,54,80,101,67,103,70,99,50,105,81,74,117,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,221,227,168,6,10,14,10,2,116,111,18,8,82,6,8,192,247,129,170,6,18,11,10,5,77,111,110,116,111,18,2,16,25,26,12,8,220,178,248,166,6,16,216,235,232,137,2,34,12,8,147,194,249,166,6,16,184,205,201,178,1,18,227,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,113,98,76,49,51,70,89,86,108,105,80,52,99,85,120,98,66,78,83,88,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,19,10,5,65,108,105,97,115,18,10,138,1,7,79,99,116,111,98,101,114,18,11,10,5,77,111,110,116,111,18,2,16,50,18,101,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,85,50,83,10,19,10,5,65,108,105,97,115,18,10,138,1,7,79,99,116,111,98,101,114,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,221,227,168,6,10,14,10,2,116,111,18,8,82,6,8,192,247,129,170,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,68,108,101,52,102,116,81,114,54,80,101,67,103,70,99,50,105,81,74,117,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,221,227,168,6,10,14,10,2,116,111,18,8,82,6,8,192,247,129,170,6,26,12,8,220,178,248,166,6,16,216,235,232,137,2,34,12,8,220,178,248,166,6,16,216,235,232,137,2,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"f7df9757-99f8-4300-b6fd-90aaf6efed74\",\"subject\":\"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/qbL13FYVliP4cUxbBNSX\",\"time\":\"2023-08-17T18:04:04.486275Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/3dJExGFTPEJtxm0peFNG/cuota_payments/qbL13FYVliP4cUxbBNSX\",\"data\":{\"type\":\"Buffer\",\"data\":[10,227,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,113,98,76,49,51,70,89,86,108,105,80,52,99,85,120,98,66,78,83,88,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,19,10,5,65,108,105,97,115,18,10,138,1,7,79,99,116,111,98,101,114,18,101,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,85,50,83,10,19,10,5,65,108,105,97,115,18,10,138,1,7,79,99,116,111,98,101,114,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,221,227,168,6,10,14,10,2,116,111,18,8,82,6,8,192,247,129,170,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,68,108,101,52,102,116,81,114,54,80,101,67,103,70,99,50,105,81,74,117,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,221,227,168,6,10,14,10,2,116,111,18,8,82,6,8,192,247,129,170,6,18,11,10,5,77,111,110,116,111,18,2,16,25,26,12,8,220,178,248,166,6,16,216,235,232,137,2,34,12,8,147,194,249,166,6,16,184,205,201,178,1,18,227,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,113,98,76,49,51,70,89,86,108,105,80,52,99,85,120,98,66,78,83,88,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,19,10,5,65,108,105,97,115,18,10,138,1,7,79,99,116,111,98,101,114,18,11,10,5,77,111,110,116,111,18,2,16,50,18,101,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,85,50,83,10,19,10,5,65,108,105,97,115,18,10,138,1,7,79,99,116,111,98,101,114,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,221,227,168,6,10,14,10,2,116,111,18,8,82,6,8,192,247,129,170,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,68,108,101,52,102,116,81,114,54,80,101,67,103,70,99,50,105,81,74,117,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,221,227,168,6,10,14,10,2,116,111,18,8,82,6,8,192,247,129,170,6,26,12,8,220,178,248,166,6,16,216,235,232,137,2,34,12,8,220,178,248,166,6,16,216,235,232,137,2,26,0]}}"}}
[debug] [2023-08-17T18:04:04.490Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 1.4341ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 1.4341ms"}}
[debug] [2023-08-17T18:04:04.490Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T18:04:04.491Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T18:04:04.491Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T18:04:04.491Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:04:04.504Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:04:04.504Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:04:04.504Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:04:04.504Z"],"workRunningCount":1}
[debug] [2023-08-17T18:04:04.504Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T18:04:04.505Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T18:04:04.505Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T18:04:04.505Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T18:04:04.505Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T18:04:04.507Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"38a18c7d-2ff8-4569-bbd1-99a7a18cacc3","subject":"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/qbL13FYVliP4cUxbBNSX","time":"2023-08-17T18:04:04.491275500Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/3dJExGFTPEJtxm0peFNG/cuota_payments/qbL13FYVliP4cUxbBNSX","data":{"type":"Buffer","data":[10,227,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,113,98,76,49,51,70,89,86,108,105,80,52,99,85,120,98,66,78,83,88,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,19,10,5,65,108,105,97,115,18,10,138,1,7,79,99,116,111,98,101,114,18,101,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,85,50,83,10,19,10,5,65,108,105,97,115,18,10,138,1,7,79,99,116,111,98,101,114,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,221,227,168,6,10,14,10,2,116,111,18,8,82,6,8,192,247,129,170,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,68,108,101,52,102,116,81,114,54,80,101,67,103,70,99,50,105,81,74,117,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,221,227,168,6,10,14,10,2,116,111,18,8,82,6,8,192,247,129,170,6,18,11,10,5,77,111,110,116,111,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,26,12,8,220,178,248,166,6,16,216,235,232,137,2,34,12,8,147,194,249,166,6,16,184,214,195,179,1,18,227,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,113,98,76,49,51,70,89,86,108,105,80,52,99,85,120,98,66,78,83,88,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,19,10,5,65,108,105,97,115,18,10,138,1,7,79,99,116,111,98,101,114,18,101,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,85,50,83,10,19,10,5,65,108,105,97,115,18,10,138,1,7,79,99,116,111,98,101,114,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,221,227,168,6,10,14,10,2,116,111,18,8,82,6,8,192,247,129,170,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,68,108,101,52,102,116,81,114,54,80,101,67,103,70,99,50,105,81,74,117,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,221,227,168,6,10,14,10,2,116,111,18,8,82,6,8,192,247,129,170,6,18,11,10,5,77,111,110,116,111,18,2,16,25,26,12,8,220,178,248,166,6,16,216,235,232,137,2,34,12,8,147,194,249,166,6,16,184,205,201,178,1,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"38a18c7d-2ff8-4569-bbd1-99a7a18cacc3\",\"subject\":\"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/qbL13FYVliP4cUxbBNSX\",\"time\":\"2023-08-17T18:04:04.491275500Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/3dJExGFTPEJtxm0peFNG/cuota_payments/qbL13FYVliP4cUxbBNSX\",\"data\":{\"type\":\"Buffer\",\"data\":[10,227,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,113,98,76,49,51,70,89,86,108,105,80,52,99,85,120,98,66,78,83,88,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,19,10,5,65,108,105,97,115,18,10,138,1,7,79,99,116,111,98,101,114,18,101,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,85,50,83,10,19,10,5,65,108,105,97,115,18,10,138,1,7,79,99,116,111,98,101,114,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,221,227,168,6,10,14,10,2,116,111,18,8,82,6,8,192,247,129,170,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,68,108,101,52,102,116,81,114,54,80,101,67,103,70,99,50,105,81,74,117,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,221,227,168,6,10,14,10,2,116,111,18,8,82,6,8,192,247,129,170,6,18,11,10,5,77,111,110,116,111,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,26,12,8,220,178,248,166,6,16,216,235,232,137,2,34,12,8,147,194,249,166,6,16,184,214,195,179,1,18,227,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,113,98,76,49,51,70,89,86,108,105,80,52,99,85,120,98,66,78,83,88,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,19,10,5,65,108,105,97,115,18,10,138,1,7,79,99,116,111,98,101,114,18,101,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,85,50,83,10,19,10,5,65,108,105,97,115,18,10,138,1,7,79,99,116,111,98,101,114,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,221,227,168,6,10,14,10,2,116,111,18,8,82,6,8,192,247,129,170,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,68,108,101,52,102,116,81,114,54,80,101,67,103,70,99,50,105,81,74,117,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,221,227,168,6,10,14,10,2,116,111,18,8,82,6,8,192,247,129,170,6,18,11,10,5,77,111,110,116,111,18,2,16,25,26,12,8,220,178,248,166,6,16,216,235,232,137,2,34,12,8,147,194,249,166,6,16,184,205,201,178,1,26,0]}}"}}
[debug] [2023-08-17T18:04:04.606Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 100.2934ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 100.2934ms"}}
[debug] [2023-08-17T18:04:04.606Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T18:04:04.606Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T18:04:04.606Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T18:04:04.606Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:04:04.616Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:04:04.616Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:04:04.616Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:04:04.616Z"],"workRunningCount":1}
[debug] [2023-08-17T18:04:04.616Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T18:04:04.617Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T18:04:04.617Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T18:04:04.617Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T18:04:04.617Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T18:04:04.619Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"07a664f7-8d89-42fe-9f59-a784e0a20a92","subject":"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/GQGKz7ulbaPu5h7lFHhC","time":"2023-08-17T18:04:04.606276900Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/3dJExGFTPEJtxm0peFNG/cuota_payments/GQGKz7ulbaPu5h7lFHhC","data":{"type":"Buffer","data":[10,229,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,71,81,71,75,122,55,117,108,98,97,80,117,53,104,55,108,70,72,104,67,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,20,10,5,65,108,105,97,115,18,11,138,1,8,78,111,118,101,109,98,101,114,18,102,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,86,50,84,10,20,10,5,65,108,105,97,115,18,11,138,1,8,78,111,118,101,109,98,101,114,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,154,135,170,6,10,14,10,2,116,111,18,8,82,6,8,192,145,160,171,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,80,86,78,57,120,84,117,83,87,74,67,107,67,81,78,89,119,110,103,56,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,154,135,170,6,10,14,10,2,116,111,18,8,82,6,8,192,145,160,171,6,18,11,10,5,77,111,110,116,111,18,2,16,25,26,12,8,219,178,248,166,6,16,248,144,223,220,3,34,12,8,147,194,249,166,6,16,208,215,189,180,1,18,229,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,71,81,71,75,122,55,117,108,98,97,80,117,53,104,55,108,70,72,104,67,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,20,10,5,65,108,105,97,115,18,11,138,1,8,78,111,118,101,109,98,101,114,18,11,10,5,77,111,110,116,111,18,2,16,50,18,102,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,86,50,84,10,20,10,5,65,108,105,97,115,18,11,138,1,8,78,111,118,101,109,98,101,114,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,154,135,170,6,10,14,10,2,116,111,18,8,82,6,8,192,145,160,171,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,80,86,78,57,120,84,117,83,87,74,67,107,67,81,78,89,119,110,103,56,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,154,135,170,6,10,14,10,2,116,111,18,8,82,6,8,192,145,160,171,6,26,12,8,219,178,248,166,6,16,248,144,223,220,3,34,12,8,219,178,248,166,6,16,248,144,223,220,3,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"07a664f7-8d89-42fe-9f59-a784e0a20a92\",\"subject\":\"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/GQGKz7ulbaPu5h7lFHhC\",\"time\":\"2023-08-17T18:04:04.606276900Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/3dJExGFTPEJtxm0peFNG/cuota_payments/GQGKz7ulbaPu5h7lFHhC\",\"data\":{\"type\":\"Buffer\",\"data\":[10,229,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,71,81,71,75,122,55,117,108,98,97,80,117,53,104,55,108,70,72,104,67,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,20,10,5,65,108,105,97,115,18,11,138,1,8,78,111,118,101,109,98,101,114,18,102,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,86,50,84,10,20,10,5,65,108,105,97,115,18,11,138,1,8,78,111,118,101,109,98,101,114,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,154,135,170,6,10,14,10,2,116,111,18,8,82,6,8,192,145,160,171,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,80,86,78,57,120,84,117,83,87,74,67,107,67,81,78,89,119,110,103,56,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,154,135,170,6,10,14,10,2,116,111,18,8,82,6,8,192,145,160,171,6,18,11,10,5,77,111,110,116,111,18,2,16,25,26,12,8,219,178,248,166,6,16,248,144,223,220,3,34,12,8,147,194,249,166,6,16,208,215,189,180,1,18,229,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,71,81,71,75,122,55,117,108,98,97,80,117,53,104,55,108,70,72,104,67,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,20,10,5,65,108,105,97,115,18,11,138,1,8,78,111,118,101,109,98,101,114,18,11,10,5,77,111,110,116,111,18,2,16,50,18,102,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,86,50,84,10,20,10,5,65,108,105,97,115,18,11,138,1,8,78,111,118,101,109,98,101,114,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,154,135,170,6,10,14,10,2,116,111,18,8,82,6,8,192,145,160,171,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,80,86,78,57,120,84,117,83,87,74,67,107,67,81,78,89,119,110,103,56,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,154,135,170,6,10,14,10,2,116,111,18,8,82,6,8,192,145,160,171,6,26,12,8,219,178,248,166,6,16,248,144,223,220,3,34,12,8,219,178,248,166,6,16,248,144,223,220,3,26,0]}}"}}
[debug] [2023-08-17T18:04:04.619Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 1.8265ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 1.8265ms"}}
[debug] [2023-08-17T18:04:04.620Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T18:04:04.620Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T18:04:04.620Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T18:04:04.620Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:04:04.632Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:04:04.632Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:04:04.632Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:04:04.632Z"],"workRunningCount":1}
[debug] [2023-08-17T18:04:04.632Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T18:04:04.633Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T18:04:04.633Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T18:04:04.633Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T18:04:04.633Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T18:04:04.635Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"b9689c52-3cd8-4933-a788-834622d627ac","subject":"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/GQGKz7ulbaPu5h7lFHhC","time":"2023-08-17T18:04:04.620275100Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/3dJExGFTPEJtxm0peFNG/cuota_payments/GQGKz7ulbaPu5h7lFHhC","data":{"type":"Buffer","data":[10,229,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,71,81,71,75,122,55,117,108,98,97,80,117,53,104,55,108,70,72,104,67,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,20,10,5,65,108,105,97,115,18,11,138,1,8,78,111,118,101,109,98,101,114,18,102,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,86,50,84,10,20,10,5,65,108,105,97,115,18,11,138,1,8,78,111,118,101,109,98,101,114,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,154,135,170,6,10,14,10,2,116,111,18,8,82,6,8,192,145,160,171,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,80,86,78,57,120,84,117,83,87,74,67,107,67,81,78,89,119,110,103,56,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,154,135,170,6,10,14,10,2,116,111,18,8,82,6,8,192,145,160,171,6,18,11,10,5,77,111,110,116,111,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,26,12,8,219,178,248,166,6,16,248,144,223,220,3,34,12,8,147,194,249,166,6,16,144,220,250,180,1,18,229,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,71,81,71,75,122,55,117,108,98,97,80,117,53,104,55,108,70,72,104,67,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,20,10,5,65,108,105,97,115,18,11,138,1,8,78,111,118,101,109,98,101,114,18,102,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,86,50,84,10,20,10,5,65,108,105,97,115,18,11,138,1,8,78,111,118,101,109,98,101,114,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,154,135,170,6,10,14,10,2,116,111,18,8,82,6,8,192,145,160,171,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,80,86,78,57,120,84,117,83,87,74,67,107,67,81,78,89,119,110,103,56,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,154,135,170,6,10,14,10,2,116,111,18,8,82,6,8,192,145,160,171,6,18,11,10,5,77,111,110,116,111,18,2,16,25,26,12,8,219,178,248,166,6,16,248,144,223,220,3,34,12,8,147,194,249,166,6,16,208,215,189,180,1,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"b9689c52-3cd8-4933-a788-834622d627ac\",\"subject\":\"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/GQGKz7ulbaPu5h7lFHhC\",\"time\":\"2023-08-17T18:04:04.620275100Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/3dJExGFTPEJtxm0peFNG/cuota_payments/GQGKz7ulbaPu5h7lFHhC\",\"data\":{\"type\":\"Buffer\",\"data\":[10,229,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,71,81,71,75,122,55,117,108,98,97,80,117,53,104,55,108,70,72,104,67,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,20,10,5,65,108,105,97,115,18,11,138,1,8,78,111,118,101,109,98,101,114,18,102,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,86,50,84,10,20,10,5,65,108,105,97,115,18,11,138,1,8,78,111,118,101,109,98,101,114,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,154,135,170,6,10,14,10,2,116,111,18,8,82,6,8,192,145,160,171,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,80,86,78,57,120,84,117,83,87,74,67,107,67,81,78,89,119,110,103,56,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,154,135,170,6,10,14,10,2,116,111,18,8,82,6,8,192,145,160,171,6,18,11,10,5,77,111,110,116,111,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,26,12,8,219,178,248,166,6,16,248,144,223,220,3,34,12,8,147,194,249,166,6,16,144,220,250,180,1,18,229,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,71,81,71,75,122,55,117,108,98,97,80,117,53,104,55,108,70,72,104,67,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,20,10,5,65,108,105,97,115,18,11,138,1,8,78,111,118,101,109,98,101,114,18,102,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,86,50,84,10,20,10,5,65,108,105,97,115,18,11,138,1,8,78,111,118,101,109,98,101,114,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,154,135,170,6,10,14,10,2,116,111,18,8,82,6,8,192,145,160,171,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,80,86,78,57,120,84,117,83,87,74,67,107,67,81,78,89,119,110,103,56,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,154,135,170,6,10,14,10,2,116,111,18,8,82,6,8,192,145,160,171,6,18,11,10,5,77,111,110,116,111,18,2,16,25,26,12,8,219,178,248,166,6,16,248,144,223,220,3,34,12,8,147,194,249,166,6,16,208,215,189,180,1,26,0]}}"}}
[debug] [2023-08-17T18:04:04.745Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 112.0749ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 112.0749ms"}}
[debug] [2023-08-17T18:04:04.746Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T18:04:04.746Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T18:04:04.746Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T18:04:04.746Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:04:04.760Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:04:04.760Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:04:04.760Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:04:04.760Z"],"workRunningCount":1}
[debug] [2023-08-17T18:04:04.760Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T18:04:04.761Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T18:04:04.761Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T18:04:04.761Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T18:04:04.761Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T18:04:04.763Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"b9d6ea85-70ae-4a3b-837d-bc5544b2d3ec","subject":"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/c9Ryz4SA3WCQHNRULlvE","time":"2023-08-17T18:04:04.746276900Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/3dJExGFTPEJtxm0peFNG/cuota_payments/c9Ryz4SA3WCQHNRULlvE","data":{"type":"Buffer","data":[10,229,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,99,57,82,121,122,52,83,65,51,87,67,81,72,78,82,85,76,108,118,69,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,20,10,5,65,108,105,97,115,18,11,138,1,8,68,101,99,101,109,98,101,114,18,102,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,86,50,84,10,20,10,5,65,108,105,97,115,18,11,138,1,8,68,101,99,101,109,98,101,114,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,180,165,171,6,10,14,10,2,116,111,18,8,82,6,8,192,206,195,172,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,104,70,72,104,65,112,102,81,116,121,73,57,73,55,81,82,85,55,74,48,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,180,165,171,6,10,14,10,2,116,111,18,8,82,6,8,192,206,195,172,6,18,11,10,5,77,111,110,116,111,18,2,16,25,26,12,8,220,178,248,166,6,16,208,234,224,194,1,34,12,8,147,194,249,166,6,16,168,221,244,181,1,18,229,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,99,57,82,121,122,52,83,65,51,87,67,81,72,78,82,85,76,108,118,69,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,20,10,5,65,108,105,97,115,18,11,138,1,8,68,101,99,101,109,98,101,114,18,11,10,5,77,111,110,116,111,18,2,16,50,18,102,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,86,50,84,10,20,10,5,65,108,105,97,115,18,11,138,1,8,68,101,99,101,109,98,101,114,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,180,165,171,6,10,14,10,2,116,111,18,8,82,6,8,192,206,195,172,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,104,70,72,104,65,112,102,81,116,121,73,57,73,55,81,82,85,55,74,48,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,180,165,171,6,10,14,10,2,116,111,18,8,82,6,8,192,206,195,172,6,26,12,8,220,178,248,166,6,16,208,234,224,194,1,34,12,8,220,178,248,166,6,16,208,234,224,194,1,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"b9d6ea85-70ae-4a3b-837d-bc5544b2d3ec\",\"subject\":\"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/c9Ryz4SA3WCQHNRULlvE\",\"time\":\"2023-08-17T18:04:04.746276900Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/3dJExGFTPEJtxm0peFNG/cuota_payments/c9Ryz4SA3WCQHNRULlvE\",\"data\":{\"type\":\"Buffer\",\"data\":[10,229,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,99,57,82,121,122,52,83,65,51,87,67,81,72,78,82,85,76,108,118,69,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,20,10,5,65,108,105,97,115,18,11,138,1,8,68,101,99,101,109,98,101,114,18,102,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,86,50,84,10,20,10,5,65,108,105,97,115,18,11,138,1,8,68,101,99,101,109,98,101,114,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,180,165,171,6,10,14,10,2,116,111,18,8,82,6,8,192,206,195,172,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,104,70,72,104,65,112,102,81,116,121,73,57,73,55,81,82,85,55,74,48,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,180,165,171,6,10,14,10,2,116,111,18,8,82,6,8,192,206,195,172,6,18,11,10,5,77,111,110,116,111,18,2,16,25,26,12,8,220,178,248,166,6,16,208,234,224,194,1,34,12,8,147,194,249,166,6,16,168,221,244,181,1,18,229,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,99,57,82,121,122,52,83,65,51,87,67,81,72,78,82,85,76,108,118,69,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,20,10,5,65,108,105,97,115,18,11,138,1,8,68,101,99,101,109,98,101,114,18,11,10,5,77,111,110,116,111,18,2,16,50,18,102,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,86,50,84,10,20,10,5,65,108,105,97,115,18,11,138,1,8,68,101,99,101,109,98,101,114,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,180,165,171,6,10,14,10,2,116,111,18,8,82,6,8,192,206,195,172,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,104,70,72,104,65,112,102,81,116,121,73,57,73,55,81,82,85,55,74,48,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,180,165,171,6,10,14,10,2,116,111,18,8,82,6,8,192,206,195,172,6,26,12,8,220,178,248,166,6,16,208,234,224,194,1,34,12,8,220,178,248,166,6,16,208,234,224,194,1,26,0]}}"}}
[debug] [2023-08-17T18:04:04.763Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 2.4931ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 2.4931ms"}}
[debug] [2023-08-17T18:04:04.764Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T18:04:04.764Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T18:04:04.764Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T18:04:04.764Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:04:04.776Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:04:04.776Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:04:04.776Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:04:04.776Z"],"workRunningCount":1}
[debug] [2023-08-17T18:04:04.776Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T18:04:04.776Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T18:04:04.777Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T18:04:04.777Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T18:04:04.777Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T18:04:04.778Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"4a5b7726-83bd-4df2-950e-c91285f83093","subject":"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/c9Ryz4SA3WCQHNRULlvE","time":"2023-08-17T18:04:04.764275200Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/3dJExGFTPEJtxm0peFNG/cuota_payments/c9Ryz4SA3WCQHNRULlvE","data":{"type":"Buffer","data":[10,229,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,99,57,82,121,122,52,83,65,51,87,67,81,72,78,82,85,76,108,118,69,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,20,10,5,65,108,105,97,115,18,11,138,1,8,68,101,99,101,109,98,101,114,18,102,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,86,50,84,10,20,10,5,65,108,105,97,115,18,11,138,1,8,68,101,99,101,109,98,101,114,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,180,165,171,6,10,14,10,2,116,111,18,8,82,6,8,192,206,195,172,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,104,70,72,104,65,112,102,81,116,121,73,57,73,55,81,82,85,55,74,48,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,180,165,171,6,10,14,10,2,116,111,18,8,82,6,8,192,206,195,172,6,18,11,10,5,77,111,110,116,111,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,26,12,8,220,178,248,166,6,16,208,234,224,194,1,34,12,8,147,194,249,166,6,16,160,249,177,182,1,18,229,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,99,57,82,121,122,52,83,65,51,87,67,81,72,78,82,85,76,108,118,69,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,20,10,5,65,108,105,97,115,18,11,138,1,8,68,101,99,101,109,98,101,114,18,102,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,86,50,84,10,20,10,5,65,108,105,97,115,18,11,138,1,8,68,101,99,101,109,98,101,114,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,180,165,171,6,10,14,10,2,116,111,18,8,82,6,8,192,206,195,172,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,104,70,72,104,65,112,102,81,116,121,73,57,73,55,81,82,85,55,74,48,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,180,165,171,6,10,14,10,2,116,111,18,8,82,6,8,192,206,195,172,6,18,11,10,5,77,111,110,116,111,18,2,16,25,26,12,8,220,178,248,166,6,16,208,234,224,194,1,34,12,8,147,194,249,166,6,16,168,221,244,181,1,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"4a5b7726-83bd-4df2-950e-c91285f83093\",\"subject\":\"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/c9Ryz4SA3WCQHNRULlvE\",\"time\":\"2023-08-17T18:04:04.764275200Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/3dJExGFTPEJtxm0peFNG/cuota_payments/c9Ryz4SA3WCQHNRULlvE\",\"data\":{\"type\":\"Buffer\",\"data\":[10,229,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,99,57,82,121,122,52,83,65,51,87,67,81,72,78,82,85,76,108,118,69,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,20,10,5,65,108,105,97,115,18,11,138,1,8,68,101,99,101,109,98,101,114,18,102,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,86,50,84,10,20,10,5,65,108,105,97,115,18,11,138,1,8,68,101,99,101,109,98,101,114,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,180,165,171,6,10,14,10,2,116,111,18,8,82,6,8,192,206,195,172,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,104,70,72,104,65,112,102,81,116,121,73,57,73,55,81,82,85,55,74,48,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,180,165,171,6,10,14,10,2,116,111,18,8,82,6,8,192,206,195,172,6,18,11,10,5,77,111,110,116,111,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,26,12,8,220,178,248,166,6,16,208,234,224,194,1,34,12,8,147,194,249,166,6,16,160,249,177,182,1,18,229,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,99,57,82,121,122,52,83,65,51,87,67,81,72,78,82,85,76,108,118,69,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,20,10,5,65,108,105,97,115,18,11,138,1,8,68,101,99,101,109,98,101,114,18,102,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,86,50,84,10,20,10,5,65,108,105,97,115,18,11,138,1,8,68,101,99,101,109,98,101,114,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,180,165,171,6,10,14,10,2,116,111,18,8,82,6,8,192,206,195,172,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,104,70,72,104,65,112,102,81,116,121,73,57,73,55,81,82,85,55,74,48,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,180,165,171,6,10,14,10,2,116,111,18,8,82,6,8,192,206,195,172,6,18,11,10,5,77,111,110,116,111,18,2,16,25,26,12,8,220,178,248,166,6,16,208,234,224,194,1,34,12,8,147,194,249,166,6,16,168,221,244,181,1,26,0]}}"}}
[debug] [2023-08-17T18:04:04.882Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 105.2374ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 105.2374ms"}}
[debug] [2023-08-17T18:04:04.882Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T18:04:04.882Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T18:04:04.883Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T18:04:04.883Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:04:04.888Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:04:04.888Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:04:04.888Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:04:04.888Z"],"workRunningCount":1}
[debug] [2023-08-17T18:04:04.888Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T18:04:04.889Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T18:04:04.889Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T18:04:04.889Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T18:04:04.889Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T18:04:04.890Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"cd56d4f9-4170-48ff-9a8a-a93083e1d7d4","subject":"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/A1BqyP1rqkZc9iXozOzN","time":"2023-08-17T18:04:04.882277Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/3dJExGFTPEJtxm0peFNG/cuota_payments/A1BqyP1rqkZc9iXozOzN","data":{"type":"Buffer","data":[10,227,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,65,49,66,113,121,80,49,114,113,107,90,99,57,105,88,111,122,79,122,78,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,19,10,5,65,108,105,97,115,18,10,138,1,7,74,97,110,117,97,114,121,18,101,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,85,50,83,10,19,10,5,65,108,105,97,115,18,10,138,1,7,74,97,110,117,97,114,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,241,200,172,6,10,14,10,2,116,111,18,8,82,6,8,192,139,231,173,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,109,81,73,114,84,52,83,101,100,112,122,119,81,82,87,116,48,99,108,84,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,241,200,172,6,10,14,10,2,116,111,18,8,82,6,8,192,139,231,173,6,18,11,10,5,77,111,110,116,111,18,2,16,25,26,12,8,220,178,248,166,6,16,144,172,147,175,2,34,12,8,147,194,249,166,6,16,232,234,171,183,1,18,227,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,65,49,66,113,121,80,49,114,113,107,90,99,57,105,88,111,122,79,122,78,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,19,10,5,65,108,105,97,115,18,10,138,1,7,74,97,110,117,97,114,121,18,11,10,5,77,111,110,116,111,18,2,16,50,18,101,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,85,50,83,10,19,10,5,65,108,105,97,115,18,10,138,1,7,74,97,110,117,97,114,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,241,200,172,6,10,14,10,2,116,111,18,8,82,6,8,192,139,231,173,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,109,81,73,114,84,52,83,101,100,112,122,119,81,82,87,116,48,99,108,84,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,241,200,172,6,10,14,10,2,116,111,18,8,82,6,8,192,139,231,173,6,26,12,8,220,178,248,166,6,16,144,172,147,175,2,34,12,8,220,178,248,166,6,16,144,172,147,175,2,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"cd56d4f9-4170-48ff-9a8a-a93083e1d7d4\",\"subject\":\"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/A1BqyP1rqkZc9iXozOzN\",\"time\":\"2023-08-17T18:04:04.882277Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/3dJExGFTPEJtxm0peFNG/cuota_payments/A1BqyP1rqkZc9iXozOzN\",\"data\":{\"type\":\"Buffer\",\"data\":[10,227,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,65,49,66,113,121,80,49,114,113,107,90,99,57,105,88,111,122,79,122,78,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,19,10,5,65,108,105,97,115,18,10,138,1,7,74,97,110,117,97,114,121,18,101,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,85,50,83,10,19,10,5,65,108,105,97,115,18,10,138,1,7,74,97,110,117,97,114,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,241,200,172,6,10,14,10,2,116,111,18,8,82,6,8,192,139,231,173,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,109,81,73,114,84,52,83,101,100,112,122,119,81,82,87,116,48,99,108,84,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,241,200,172,6,10,14,10,2,116,111,18,8,82,6,8,192,139,231,173,6,18,11,10,5,77,111,110,116,111,18,2,16,25,26,12,8,220,178,248,166,6,16,144,172,147,175,2,34,12,8,147,194,249,166,6,16,232,234,171,183,1,18,227,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,65,49,66,113,121,80,49,114,113,107,90,99,57,105,88,111,122,79,122,78,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,19,10,5,65,108,105,97,115,18,10,138,1,7,74,97,110,117,97,114,121,18,11,10,5,77,111,110,116,111,18,2,16,50,18,101,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,85,50,83,10,19,10,5,65,108,105,97,115,18,10,138,1,7,74,97,110,117,97,114,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,241,200,172,6,10,14,10,2,116,111,18,8,82,6,8,192,139,231,173,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,109,81,73,114,84,52,83,101,100,112,122,119,81,82,87,116,48,99,108,84,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,241,200,172,6,10,14,10,2,116,111,18,8,82,6,8,192,139,231,173,6,26,12,8,220,178,248,166,6,16,144,172,147,175,2,34,12,8,220,178,248,166,6,16,144,172,147,175,2,26,0]}}"}}
[debug] [2023-08-17T18:04:04.891Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 1.8664ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 1.8664ms"}}
[debug] [2023-08-17T18:04:04.891Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T18:04:04.891Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T18:04:04.891Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T18:04:04.892Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:04:04.903Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:04:04.903Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:04:04.903Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:04:04.903Z"],"workRunningCount":1}
[debug] [2023-08-17T18:04:04.903Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T18:04:04.904Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T18:04:04.904Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T18:04:04.904Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T18:04:04.904Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T18:04:04.905Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"46eadd07-83f7-453f-97d2-e8f7e442f083","subject":"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/A1BqyP1rqkZc9iXozOzN","time":"2023-08-17T18:04:04.891276100Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/3dJExGFTPEJtxm0peFNG/cuota_payments/A1BqyP1rqkZc9iXozOzN","data":{"type":"Buffer","data":[10,227,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,65,49,66,113,121,80,49,114,113,107,90,99,57,105,88,111,122,79,122,78,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,19,10,5,65,108,105,97,115,18,10,138,1,7,74,97,110,117,97,114,121,18,101,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,85,50,83,10,19,10,5,65,108,105,97,115,18,10,138,1,7,74,97,110,117,97,114,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,241,200,172,6,10,14,10,2,116,111,18,8,82,6,8,192,139,231,173,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,109,81,73,114,84,52,83,101,100,112,122,119,81,82,87,116,48,99,108,84,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,241,200,172,6,10,14,10,2,116,111,18,8,82,6,8,192,139,231,173,6,18,11,10,5,77,111,110,116,111,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,26,12,8,220,178,248,166,6,16,144,172,147,175,2,34,12,8,147,194,249,166,6,16,144,247,232,183,1,18,227,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,65,49,66,113,121,80,49,114,113,107,90,99,57,105,88,111,122,79,122,78,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,19,10,5,65,108,105,97,115,18,10,138,1,7,74,97,110,117,97,114,121,18,101,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,85,50,83,10,19,10,5,65,108,105,97,115,18,10,138,1,7,74,97,110,117,97,114,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,241,200,172,6,10,14,10,2,116,111,18,8,82,6,8,192,139,231,173,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,109,81,73,114,84,52,83,101,100,112,122,119,81,82,87,116,48,99,108,84,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,241,200,172,6,10,14,10,2,116,111,18,8,82,6,8,192,139,231,173,6,18,11,10,5,77,111,110,116,111,18,2,16,25,26,12,8,220,178,248,166,6,16,144,172,147,175,2,34,12,8,147,194,249,166,6,16,232,234,171,183,1,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"46eadd07-83f7-453f-97d2-e8f7e442f083\",\"subject\":\"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/A1BqyP1rqkZc9iXozOzN\",\"time\":\"2023-08-17T18:04:04.891276100Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/3dJExGFTPEJtxm0peFNG/cuota_payments/A1BqyP1rqkZc9iXozOzN\",\"data\":{\"type\":\"Buffer\",\"data\":[10,227,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,65,49,66,113,121,80,49,114,113,107,90,99,57,105,88,111,122,79,122,78,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,19,10,5,65,108,105,97,115,18,10,138,1,7,74,97,110,117,97,114,121,18,101,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,85,50,83,10,19,10,5,65,108,105,97,115,18,10,138,1,7,74,97,110,117,97,114,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,241,200,172,6,10,14,10,2,116,111,18,8,82,6,8,192,139,231,173,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,109,81,73,114,84,52,83,101,100,112,122,119,81,82,87,116,48,99,108,84,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,241,200,172,6,10,14,10,2,116,111,18,8,82,6,8,192,139,231,173,6,18,11,10,5,77,111,110,116,111,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,26,12,8,220,178,248,166,6,16,144,172,147,175,2,34,12,8,147,194,249,166,6,16,144,247,232,183,1,18,227,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,65,49,66,113,121,80,49,114,113,107,90,99,57,105,88,111,122,79,122,78,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,19,10,5,65,108,105,97,115,18,10,138,1,7,74,97,110,117,97,114,121,18,101,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,85,50,83,10,19,10,5,65,108,105,97,115,18,10,138,1,7,74,97,110,117,97,114,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,241,200,172,6,10,14,10,2,116,111,18,8,82,6,8,192,139,231,173,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,109,81,73,114,84,52,83,101,100,112,122,119,81,82,87,116,48,99,108,84,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,241,200,172,6,10,14,10,2,116,111,18,8,82,6,8,192,139,231,173,6,18,11,10,5,77,111,110,116,111,18,2,16,25,26,12,8,220,178,248,166,6,16,144,172,147,175,2,34,12,8,147,194,249,166,6,16,232,234,171,183,1,26,0]}}"}}
[debug] [2023-08-17T18:04:05.009Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 105.4902ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 105.4902ms"}}
[debug] [2023-08-17T18:04:05.010Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T18:04:05.010Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T18:04:05.010Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T18:04:05.010Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:04:06.149Z] Aug 17, 2023 2:04:06 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:04:06 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:04:06.167Z] Aug 17, 2023 2:04:06 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:04:06 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:04:06.202Z] Aug 17, 2023 2:04:06 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:04:06 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:04:08.085Z] Aug 17, 2023 2:04:08 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:04:08 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:04:09.840Z] Aug 17, 2023 2:04:09 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:04:09 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:04:09.861Z] Aug 17, 2023 2:04:09 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:04:09 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:04:09.899Z] Aug 17, 2023 2:04:09 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:04:09 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:04:35.031Z] Aug 17, 2023 2:04:35 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:04:35 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:04:52.005Z] Aug 17, 2023 2:04:52 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:04:52 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:04:52.014Z] Aug 17, 2023 2:04:52 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:04:52 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:04:52.017Z] Aug 17, 2023 2:04:52 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:04:52 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:04:52.019Z] Aug 17, 2023 2:04:52 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:04:52 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:04:52.020Z] Aug 17, 2023 2:04:52 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:04:52 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T18:04:52.027Z] Aug 17, 2023 2:04:52 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:04:52 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T18:04:52.029Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:04:52.029Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:04:52.030Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:04:52.029Z"],"workRunningCount":1}
[debug] [2023-08-17T18:04:52.030Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T18:04:52.030Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T18:04:52.030Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T18:04:52.030Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T18:04:52.031Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T18:04:52.032Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"5a311176-8203-4c17-8ea2-0f2ef8b209b2","subject":"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/60nZA87H1yBOFvFqxJAz","time":"2023-08-17T18:04:52.028613900Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/3dJExGFTPEJtxm0peFNG/cuota_payments/60nZA87H1yBOFvFqxJAz","data":{"type":"Buffer","data":[10,146,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,54,48,110,90,65,56,55,72,49,121,66,79,70,118,70,113,120,74,65,122,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,20,10,5,65,108,105,97,115,18,11,138,1,8,70,101,98,114,117,97,114,121,18,102,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,86,50,84,10,20,10,5,65,108,105,97,115,18,11,138,1,8,70,101,98,114,117,97,114,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,199,231,158,6,10,14,10,2,116,111,18,8,82,6,8,192,248,245,159,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,110,88,65,88,100,48,110,89,87,78,90,90,113,74,116,121,90,116,53,90,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,199,231,158,6,10,14,10,2,116,111,18,8,82,6,8,192,248,245,159,6,18,11,10,5,77,111,110,116,111,18,2,16,25,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,0,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,196,194,249,166,6,16,128,245,178,12,26,12,8,220,178,248,166,6,16,128,131,174,151,1,34,11,8,196,194,249,166,6,16,240,186,210,13,18,148,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,54,48,110,90,65,56,55,72,49,121,66,79,70,118,70,113,120,74,65,122,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,20,10,5,65,108,105,97,115,18,11,138,1,8,70,101,98,114,117,97,114,121,18,102,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,86,50,84,10,20,10,5,65,108,105,97,115,18,11,138,1,8,70,101,98,114,117,97,114,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,199,231,158,6,10,14,10,2,116,111,18,8,82,6,8,192,248,245,159,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,110,88,65,88,100,48,110,89,87,78,90,90,113,74,116,121,90,116,53,90,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,199,231,158,6,10,14,10,2,116,111,18,8,82,6,8,192,248,245,159,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,15,18,28,10,10,108,97,115,116,85,112,100,97,116,101,18,14,82,12,8,199,193,249,166,6,16,128,138,177,177,1,18,11,10,5,77,111,110,116,111,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,10,26,12,8,220,178,248,166,6,16,128,131,174,151,1,34,12,8,147,194,249,166,6,16,224,210,223,164,1,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"5a311176-8203-4c17-8ea2-0f2ef8b209b2\",\"subject\":\"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/60nZA87H1yBOFvFqxJAz\",\"time\":\"2023-08-17T18:04:52.028613900Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/3dJExGFTPEJtxm0peFNG/cuota_payments/60nZA87H1yBOFvFqxJAz\",\"data\":{\"type\":\"Buffer\",\"data\":[10,146,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,54,48,110,90,65,56,55,72,49,121,66,79,70,118,70,113,120,74,65,122,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,20,10,5,65,108,105,97,115,18,11,138,1,8,70,101,98,114,117,97,114,121,18,102,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,86,50,84,10,20,10,5,65,108,105,97,115,18,11,138,1,8,70,101,98,114,117,97,114,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,199,231,158,6,10,14,10,2,116,111,18,8,82,6,8,192,248,245,159,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,110,88,65,88,100,48,110,89,87,78,90,90,113,74,116,121,90,116,53,90,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,199,231,158,6,10,14,10,2,116,111,18,8,82,6,8,192,248,245,159,6,18,11,10,5,77,111,110,116,111,18,2,16,25,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,0,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,196,194,249,166,6,16,128,245,178,12,26,12,8,220,178,248,166,6,16,128,131,174,151,1,34,11,8,196,194,249,166,6,16,240,186,210,13,18,148,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,54,48,110,90,65,56,55,72,49,121,66,79,70,118,70,113,120,74,65,122,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,20,10,5,65,108,105,97,115,18,11,138,1,8,70,101,98,114,117,97,114,121,18,102,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,86,50,84,10,20,10,5,65,108,105,97,115,18,11,138,1,8,70,101,98,114,117,97,114,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,199,231,158,6,10,14,10,2,116,111,18,8,82,6,8,192,248,245,159,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,110,88,65,88,100,48,110,89,87,78,90,90,113,74,116,121,90,116,53,90,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,199,231,158,6,10,14,10,2,116,111,18,8,82,6,8,192,248,245,159,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,15,18,28,10,10,108,97,115,116,85,112,100,97,116,101,18,14,82,12,8,199,193,249,166,6,16,128,138,177,177,1,18,11,10,5,77,111,110,116,111,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,10,26,12,8,220,178,248,166,6,16,128,131,174,151,1,34,12,8,147,194,249,166,6,16,224,210,223,164,1,26,0]}}"}}
[debug] [2023-08-17T18:04:52.036Z] Aug 17, 2023 2:04:52 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:04:52 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T18:04:52.038Z] Aug 17, 2023 2:04:52 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:04:52 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:04:52.041Z] Aug 17, 2023 2:04:52 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:04:52 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:04:52.048Z] Aug 17, 2023 2:04:52 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:04:52 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:04:52.049Z] Aug 17, 2023 2:04:52 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:04:52 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T18:04:52.054Z] Aug 17, 2023 2:04:52 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:04:52 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T18:04:52.067Z] Aug 17, 2023 2:04:52 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:04:52 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:04:52.068Z] Aug 17, 2023 2:04:52 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:04:52 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T18:04:52.074Z] Aug 17, 2023 2:04:52 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:04:52 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T18:04:52.137Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 106.0837ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 106.0837ms"}}
[debug] [2023-08-17T18:04:52.137Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T18:04:52.137Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T18:04:52.137Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T18:04:52.137Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:04:52.138Z] Aug 17, 2023 2:04:52 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:04:52 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:04:52.139Z] Aug 17, 2023 2:04:52 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:04:52 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T18:04:52.145Z] Aug 17, 2023 2:04:52 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:04:52 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T18:04:52.153Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:04:52.153Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:04:52.153Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:04:52.153Z"],"workRunningCount":1}
[debug] [2023-08-17T18:04:52.154Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T18:04:52.154Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T18:04:52.154Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T18:04:52.154Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T18:04:52.155Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T18:04:52.156Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"49b06287-a13c-4c26-9b0f-2252a908eaee","subject":"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/KzQYIeAvLgc2XaKStz9n","time":"2023-08-17T18:04:52.137615Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/3dJExGFTPEJtxm0peFNG/cuota_payments/KzQYIeAvLgc2XaKStz9n","data":{"type":"Buffer","data":[10,136,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,75,122,81,89,73,101,65,118,76,103,99,50,88,97,75,83,116,122,57,110,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,15,10,5,65,108,105,97,115,18,6,138,1,3,77,97,121,18,97,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,81,50,79,10,15,10,5,65,108,105,97,115,18,6,138,1,3,77,97,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,242,188,162,6,10,14,10,2,116,111,18,8,82,6,8,192,140,219,163,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,51,113,56,110,89,80,71,113,88,122,112,114,120,52,53,121,121,86,104,70,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,242,188,162,6,10,14,10,2,116,111,18,8,82,6,8,192,140,219,163,6,18,11,10,5,77,111,110,116,111,18,2,16,25,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,0,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,196,194,249,166,6,16,128,243,223,25,26,12,8,220,178,248,166,6,16,240,154,173,140,1,34,11,8,196,194,249,166,6,16,232,203,194,26,18,219,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,75,122,81,89,73,101,65,118,76,103,99,50,88,97,75,83,116,122,57,110,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,15,10,5,65,108,105,97,115,18,6,138,1,3,77,97,121,18,97,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,81,50,79,10,15,10,5,65,108,105,97,115,18,6,138,1,3,77,97,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,242,188,162,6,10,14,10,2,116,111,18,8,82,6,8,192,140,219,163,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,51,113,56,110,89,80,71,113,88,122,112,114,120,52,53,121,121,86,104,70,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,242,188,162,6,10,14,10,2,116,111,18,8,82,6,8,192,140,219,163,6,18,11,10,5,77,111,110,116,111,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,26,12,8,220,178,248,166,6,16,240,154,173,140,1,34,12,8,147,194,249,166,6,16,240,156,249,170,1,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"49b06287-a13c-4c26-9b0f-2252a908eaee\",\"subject\":\"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/KzQYIeAvLgc2XaKStz9n\",\"time\":\"2023-08-17T18:04:52.137615Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/3dJExGFTPEJtxm0peFNG/cuota_payments/KzQYIeAvLgc2XaKStz9n\",\"data\":{\"type\":\"Buffer\",\"data\":[10,136,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,75,122,81,89,73,101,65,118,76,103,99,50,88,97,75,83,116,122,57,110,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,15,10,5,65,108,105,97,115,18,6,138,1,3,77,97,121,18,97,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,81,50,79,10,15,10,5,65,108,105,97,115,18,6,138,1,3,77,97,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,242,188,162,6,10,14,10,2,116,111,18,8,82,6,8,192,140,219,163,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,51,113,56,110,89,80,71,113,88,122,112,114,120,52,53,121,121,86,104,70,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,242,188,162,6,10,14,10,2,116,111,18,8,82,6,8,192,140,219,163,6,18,11,10,5,77,111,110,116,111,18,2,16,25,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,0,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,196,194,249,166,6,16,128,243,223,25,26,12,8,220,178,248,166,6,16,240,154,173,140,1,34,11,8,196,194,249,166,6,16,232,203,194,26,18,219,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,75,122,81,89,73,101,65,118,76,103,99,50,88,97,75,83,116,122,57,110,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,15,10,5,65,108,105,97,115,18,6,138,1,3,77,97,121,18,97,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,81,50,79,10,15,10,5,65,108,105,97,115,18,6,138,1,3,77,97,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,242,188,162,6,10,14,10,2,116,111,18,8,82,6,8,192,140,219,163,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,51,113,56,110,89,80,71,113,88,122,112,114,120,52,53,121,121,86,104,70,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,242,188,162,6,10,14,10,2,116,111,18,8,82,6,8,192,140,219,163,6,18,11,10,5,77,111,110,116,111,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,26,12,8,220,178,248,166,6,16,240,154,173,140,1,34,12,8,147,194,249,166,6,16,240,156,249,170,1,26,0]}}"}}
[debug] [2023-08-17T18:04:52.157Z] Aug 17, 2023 2:04:52 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:04:52 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:04:52.158Z] Aug 17, 2023 2:04:52 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:04:52 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T18:04:52.166Z] Aug 17, 2023 2:04:52 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:04:52 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T18:04:52.187Z] Aug 17, 2023 2:04:52 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:04:52 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:04:52.217Z] Aug 17, 2023 2:04:52 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:04:52 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:04:52.267Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 112.3728ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 112.3728ms"}}
[debug] [2023-08-17T18:04:52.267Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T18:04:52.267Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T18:04:52.267Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T18:04:52.267Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:04:52.281Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:04:52.281Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:04:52.281Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:04:52.281Z"],"workRunningCount":1}
[debug] [2023-08-17T18:04:52.281Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T18:04:52.281Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T18:04:52.281Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T18:04:52.282Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T18:04:52.282Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T18:04:52.284Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"816425d7-a543-41b3-aef1-898ae43d5299","subject":"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/SrVGYJzHDW93vZ6fyJ7u","time":"2023-08-17T18:04:52.267614500Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/3dJExGFTPEJtxm0peFNG/cuota_payments/SrVGYJzHDW93vZ6fyJ7u","data":{"type":"Buffer","data":[10,140,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,83,114,86,71,89,74,122,72,68,87,57,51,118,90,54,102,121,74,55,117,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,17,10,5,65,108,105,97,115,18,8,138,1,5,77,97,114,99,104,18,99,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,83,50,81,10,17,10,5,65,108,105,97,115,18,8,138,1,5,77,97,114,99,104,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,155,251,159,6,10,14,10,2,116,111,18,8,82,6,8,192,181,153,161,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,66,88,83,72,97,122,54,80,73,49,69,56,76,116,100,75,65,71,51,68,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,155,251,159,6,10,14,10,2,116,111,18,8,82,6,8,192,181,153,161,6,18,11,10,5,77,111,110,116,111,18,2,16,25,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,0,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,196,194,249,166,6,16,192,200,231,34,26,12,8,220,178,248,166,6,16,184,213,222,184,1,34,11,8,196,194,249,166,6,16,152,150,135,36,18,223,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,83,114,86,71,89,74,122,72,68,87,57,51,118,90,54,102,121,74,55,117,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,17,10,5,65,108,105,97,115,18,8,138,1,5,77,97,114,99,104,18,99,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,83,50,81,10,17,10,5,65,108,105,97,115,18,8,138,1,5,77,97,114,99,104,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,155,251,159,6,10,14,10,2,116,111,18,8,82,6,8,192,181,153,161,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,66,88,83,72,97,122,54,80,73,49,69,56,76,116,100,75,65,71,51,68,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,155,251,159,6,10,14,10,2,116,111,18,8,82,6,8,192,181,153,161,6,18,11,10,5,77,111,110,116,111,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,26,12,8,220,178,248,166,6,16,184,213,222,184,1,34,12,8,147,194,249,166,6,16,192,206,205,167,1,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"816425d7-a543-41b3-aef1-898ae43d5299\",\"subject\":\"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/SrVGYJzHDW93vZ6fyJ7u\",\"time\":\"2023-08-17T18:04:52.267614500Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/3dJExGFTPEJtxm0peFNG/cuota_payments/SrVGYJzHDW93vZ6fyJ7u\",\"data\":{\"type\":\"Buffer\",\"data\":[10,140,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,83,114,86,71,89,74,122,72,68,87,57,51,118,90,54,102,121,74,55,117,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,17,10,5,65,108,105,97,115,18,8,138,1,5,77,97,114,99,104,18,99,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,83,50,81,10,17,10,5,65,108,105,97,115,18,8,138,1,5,77,97,114,99,104,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,155,251,159,6,10,14,10,2,116,111,18,8,82,6,8,192,181,153,161,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,66,88,83,72,97,122,54,80,73,49,69,56,76,116,100,75,65,71,51,68,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,155,251,159,6,10,14,10,2,116,111,18,8,82,6,8,192,181,153,161,6,18,11,10,5,77,111,110,116,111,18,2,16,25,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,0,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,196,194,249,166,6,16,192,200,231,34,26,12,8,220,178,248,166,6,16,184,213,222,184,1,34,11,8,196,194,249,166,6,16,152,150,135,36,18,223,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,83,114,86,71,89,74,122,72,68,87,57,51,118,90,54,102,121,74,55,117,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,17,10,5,65,108,105,97,115,18,8,138,1,5,77,97,114,99,104,18,99,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,83,50,81,10,17,10,5,65,108,105,97,115,18,8,138,1,5,77,97,114,99,104,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,155,251,159,6,10,14,10,2,116,111,18,8,82,6,8,192,181,153,161,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,66,88,83,72,97,122,54,80,73,49,69,56,76,116,100,75,65,71,51,68,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,155,251,159,6,10,14,10,2,116,111,18,8,82,6,8,192,181,153,161,6,18,11,10,5,77,111,110,116,111,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,26,12,8,220,178,248,166,6,16,184,213,222,184,1,34,12,8,147,194,249,166,6,16,192,206,205,167,1,26,0]}}"}}
[debug] [2023-08-17T18:04:52.393Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 110.8787ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 110.8787ms"}}
[debug] [2023-08-17T18:04:52.393Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T18:04:52.393Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T18:04:52.393Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T18:04:52.393Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:04:52.406Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:04:52.406Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:04:52.407Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:04:52.406Z"],"workRunningCount":1}
[debug] [2023-08-17T18:04:52.407Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T18:04:52.407Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T18:04:52.407Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T18:04:52.407Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T18:04:52.408Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T18:04:52.409Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"cedfe677-3877-462d-8c5b-75bd213e381a","subject":"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/lRV4eQr4TJ5GKX2pMaS8","time":"2023-08-17T18:04:52.393616Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/3dJExGFTPEJtxm0peFNG/cuota_payments/lRV4eQr4TJ5GKX2pMaS8","data":{"type":"Buffer","data":[10,138,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,108,82,86,52,101,81,114,52,84,74,53,71,75,88,50,112,77,97,83,56,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,110,101,18,98,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,82,50,80,10,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,110,101,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,175,224,163,6,10,14,10,2,116,111,18,8,82,6,8,192,166,249,164,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,67,66,74,74,105,67,104,83,77,112,113,86,120,103,110,75,113,51,103,75,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,175,224,163,6,10,14,10,2,116,111,18,8,82,6,8,192,166,249,164,6,18,11,10,5,77,111,110,116,111,18,2,16,25,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,15,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,10,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,196,194,249,166,6,16,128,136,213,68,26,12,8,219,178,248,166,6,16,192,234,196,147,3,34,11,8,196,194,249,166,6,16,216,213,244,69,18,221,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,108,82,86,52,101,81,114,52,84,74,53,71,75,88,50,112,77,97,83,56,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,110,101,18,98,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,82,50,80,10,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,110,101,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,175,224,163,6,10,14,10,2,116,111,18,8,82,6,8,192,166,249,164,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,67,66,74,74,105,67,104,83,77,112,113,86,120,103,110,75,113,51,103,75,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,175,224,163,6,10,14,10,2,116,111,18,8,82,6,8,192,166,249,164,6,18,11,10,5,77,111,110,116,111,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,26,12,8,219,178,248,166,6,16,192,234,196,147,3,34,12,8,147,194,249,166,6,16,168,140,170,173,1,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"cedfe677-3877-462d-8c5b-75bd213e381a\",\"subject\":\"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/lRV4eQr4TJ5GKX2pMaS8\",\"time\":\"2023-08-17T18:04:52.393616Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/3dJExGFTPEJtxm0peFNG/cuota_payments/lRV4eQr4TJ5GKX2pMaS8\",\"data\":{\"type\":\"Buffer\",\"data\":[10,138,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,108,82,86,52,101,81,114,52,84,74,53,71,75,88,50,112,77,97,83,56,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,110,101,18,98,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,82,50,80,10,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,110,101,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,175,224,163,6,10,14,10,2,116,111,18,8,82,6,8,192,166,249,164,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,67,66,74,74,105,67,104,83,77,112,113,86,120,103,110,75,113,51,103,75,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,175,224,163,6,10,14,10,2,116,111,18,8,82,6,8,192,166,249,164,6,18,11,10,5,77,111,110,116,111,18,2,16,25,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,15,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,10,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,196,194,249,166,6,16,128,136,213,68,26,12,8,219,178,248,166,6,16,192,234,196,147,3,34,11,8,196,194,249,166,6,16,216,213,244,69,18,221,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,108,82,86,52,101,81,114,52,84,74,53,71,75,88,50,112,77,97,83,56,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,110,101,18,98,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,82,50,80,10,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,110,101,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,175,224,163,6,10,14,10,2,116,111,18,8,82,6,8,192,166,249,164,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,67,66,74,74,105,67,104,83,77,112,113,86,120,103,110,75,113,51,103,75,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,175,224,163,6,10,14,10,2,116,111,18,8,82,6,8,192,166,249,164,6,18,11,10,5,77,111,110,116,111,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,26,12,8,219,178,248,166,6,16,192,234,196,147,3,34,12,8,147,194,249,166,6,16,168,140,170,173,1,26,0]}}"}}
[debug] [2023-08-17T18:04:52.506Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 98.2065ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 98.2065ms"}}
[debug] [2023-08-17T18:04:52.506Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T18:04:52.506Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T18:04:52.506Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T18:04:52.506Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:04:52.518Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:04:52.518Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:04:52.518Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:04:52.518Z"],"workRunningCount":1}
[debug] [2023-08-17T18:04:52.518Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T18:04:52.518Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T18:04:52.518Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T18:04:52.518Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T18:04:52.519Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T18:04:52.520Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"ca0df087-364f-4600-95ac-69de32cbd237","subject":"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/owopsBVetECWsGcV21kJ","time":"2023-08-17T18:04:52.506613Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/3dJExGFTPEJtxm0peFNG/cuota_payments/owopsBVetECWsGcV21kJ","data":{"type":"Buffer","data":[10,140,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,111,119,111,112,115,66,86,101,116,69,67,87,115,71,99,86,50,49,107,74,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,17,10,5,65,108,105,97,115,18,8,138,1,5,65,112,114,105,108,18,99,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,83,50,81,10,17,10,5,65,108,105,97,115,18,8,138,1,5,65,112,114,105,108,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,216,158,161,6,10,14,10,2,116,111,18,8,82,6,8,192,207,183,162,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,68,80,114,55,66,77,116,75,79,80,84,118,116,116,121,116,78,89,79,121,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,216,158,161,6,10,14,10,2,116,111,18,8,82,6,8,192,207,183,162,6,18,11,10,5,77,111,110,116,111,18,2,16,25,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,0,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,196,194,249,166,6,16,128,235,147,79,26,12,8,220,178,248,166,6,16,144,237,206,162,2,34,11,8,196,194,249,166,6,16,152,180,246,79,18,223,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,111,119,111,112,115,66,86,101,116,69,67,87,115,71,99,86,50,49,107,74,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,17,10,5,65,108,105,97,115,18,8,138,1,5,65,112,114,105,108,18,99,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,83,50,81,10,17,10,5,65,108,105,97,115,18,8,138,1,5,65,112,114,105,108,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,216,158,161,6,10,14,10,2,116,111,18,8,82,6,8,192,207,183,162,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,68,80,114,55,66,77,116,75,79,80,84,118,116,116,121,116,78,89,79,121,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,216,158,161,6,10,14,10,2,116,111,18,8,82,6,8,192,207,183,162,6,18,11,10,5,77,111,110,116,111,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,26,12,8,220,178,248,166,6,16,144,237,206,162,2,34,12,8,147,194,249,166,6,16,232,227,132,169,1,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"ca0df087-364f-4600-95ac-69de32cbd237\",\"subject\":\"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/owopsBVetECWsGcV21kJ\",\"time\":\"2023-08-17T18:04:52.506613Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/3dJExGFTPEJtxm0peFNG/cuota_payments/owopsBVetECWsGcV21kJ\",\"data\":{\"type\":\"Buffer\",\"data\":[10,140,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,111,119,111,112,115,66,86,101,116,69,67,87,115,71,99,86,50,49,107,74,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,17,10,5,65,108,105,97,115,18,8,138,1,5,65,112,114,105,108,18,99,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,83,50,81,10,17,10,5,65,108,105,97,115,18,8,138,1,5,65,112,114,105,108,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,216,158,161,6,10,14,10,2,116,111,18,8,82,6,8,192,207,183,162,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,68,80,114,55,66,77,116,75,79,80,84,118,116,116,121,116,78,89,79,121,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,216,158,161,6,10,14,10,2,116,111,18,8,82,6,8,192,207,183,162,6,18,11,10,5,77,111,110,116,111,18,2,16,25,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,0,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,196,194,249,166,6,16,128,235,147,79,26,12,8,220,178,248,166,6,16,144,237,206,162,2,34,11,8,196,194,249,166,6,16,152,180,246,79,18,223,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,111,119,111,112,115,66,86,101,116,69,67,87,115,71,99,86,50,49,107,74,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,17,10,5,65,108,105,97,115,18,8,138,1,5,65,112,114,105,108,18,99,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,83,50,81,10,17,10,5,65,108,105,97,115,18,8,138,1,5,65,112,114,105,108,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,216,158,161,6,10,14,10,2,116,111,18,8,82,6,8,192,207,183,162,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,68,80,114,55,66,77,116,75,79,80,84,118,116,116,121,116,78,89,79,121,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,216,158,161,6,10,14,10,2,116,111,18,8,82,6,8,192,207,183,162,6,18,11,10,5,77,111,110,116,111,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,26,12,8,220,178,248,166,6,16,144,237,206,162,2,34,12,8,147,194,249,166,6,16,232,227,132,169,1,26,0]}}"}}
[debug] [2023-08-17T18:04:52.626Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 107.3566ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 107.3566ms"}}
[debug] [2023-08-17T18:04:52.627Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T18:04:52.627Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T18:04:52.627Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T18:04:52.627Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:04:53.181Z] Aug 17, 2023 2:04:53 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:04:53 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:04:53.183Z] Aug 17, 2023 2:04:53 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:04:53 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T18:04:53.213Z] Aug 17, 2023 2:04:53 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:04:53 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:05:22.643Z] Aug 17, 2023 2:05:22 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:05:22 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:05:48.606Z] Aug 17, 2023 2:05:48 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:05:48 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:05:48.609Z] Aug 17, 2023 2:05:48 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:05:48 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:05:50.701Z] Aug 17, 2023 2:05:50 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:05:50 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:05:50.702Z] Aug 17, 2023 2:05:50 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:05:50 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T18:05:50.708Z] Aug 17, 2023 2:05:50 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:05:50 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:05:50.734Z] Aug 17, 2023 2:05:50 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:05:50 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:05:50.736Z] Aug 17, 2023 2:05:50 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:05:50 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:05:50.738Z] Aug 17, 2023 2:05:50 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:05:50 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T18:05:50.776Z] Aug 17, 2023 2:05:50 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:05:50 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:05:53.346Z] Aug 17, 2023 2:05:53 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:05:53 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:05:53.360Z] Aug 17, 2023 2:05:53 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:05:53 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:05:53.394Z] Aug 17, 2023 2:05:53 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:05:53 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:05:55.209Z] Aug 17, 2023 2:05:55 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:05:55 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:05:57.317Z] Aug 17, 2023 2:05:57 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:05:57 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:05:57.318Z] Aug 17, 2023 2:05:57 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:05:57 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T18:05:57.341Z] Aug 17, 2023 2:05:57 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:05:57 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:06:22.650Z] Aug 17, 2023 2:06:22 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:06:22 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:06:28.993Z] Aug 17, 2023 2:06:28 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:06:28 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:06:29.006Z] Aug 17, 2023 2:06:29 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:06:29 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:06:29.033Z] Aug 17, 2023 2:06:29 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:06:29 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:06:33.311Z] Aug 17, 2023 2:06:33 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:06:33 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:06:44.190Z] Aug 17, 2023 2:06:44 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:06:44 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:06:44.190Z] Aug 17, 2023 2:06:44 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:06:44 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:06:44.191Z] Aug 17, 2023 2:06:44 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:06:44 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T18:06:44.194Z] Aug 17, 2023 2:06:44 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:06:44 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:06:44.197Z] Aug 17, 2023 2:06:44 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:06:44 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:06:44.214Z] Aug 17, 2023 2:06:44 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:06:44 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:06:44.224Z] Aug 17, 2023 2:06:44 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:06:44 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:06:44.259Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handleNewDiscount-0-2023-08-17T18:06:44.259Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:06:44.260Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handleNewDiscount-0-2023-08-17T18:06:44.259Z"],"workRunningCount":1}
[debug] [2023-08-17T18:06:44.260Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handleNewDiscount-0 --> us-central1-handleNewDiscount-0
[debug] [2023-08-17T18:06:44.260Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T18:06:44.260Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handleNewDiscount-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handleNewDiscount-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T18:06:44.260Z] [worker-pool] submitRequest(triggerId=us-central1-handleNewDiscount) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleNewDiscount)"}}
[info] i  functions: Beginning execution of "us-central1-handleNewDiscount" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleNewDiscount"},"extension":{},"message":"Beginning execution of \"us-central1-handleNewDiscount\""}}
[debug] [2023-08-17T18:06:44.261Z] [worker-us-central1-handleNewDiscount-cd3ee0a7-0dfd-4ee4-a793-4f76adb9bd64]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleNewDiscount"},"extension":{},"message":"[worker-us-central1-handleNewDiscount-cd3ee0a7-0dfd-4ee4-a793-4f76adb9bd64]: BUSY"}}
[debug] [2023-08-17T18:06:44.263Z] [runtime-status] [17904] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.updated","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"524c711a-1204-4527-8668-d7279edf5796","subject":"documents/students/3dJExGFTPEJtxm0peFNG","time":"2023-08-17T18:06:44.257903800Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/3dJExGFTPEJtxm0peFNG","data":{"type":"Buffer","data":[10,248,2,10,77,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,30,10,6,78,111,109,98,114,101,18,20,138,1,17,73,86,69,82,83,79,78,32,65,76,69,88,65,78,68,69,82,18,16,10,8,83,101,99,99,105,195,179,110,18,4,138,1,1,65,18,37,10,20,67,195,169,100,117,108,97,32,100,101,32,105,100,101,110,116,105,100,97,100,18,13,138,1,10,86,45,51,49,50,56,56,49,55,48,18,20,10,3,99,101,100,18,13,138,1,10,86,45,51,49,50,56,56,49,55,48,18,26,10,16,70,101,99,104,97,73,110,105,99,105,111,67,117,111,116,97,18,6,82,4,16,192,132,61,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,30,10,8,65,112,101,108,108,105,100,111,18,18,138,1,15,65,67,69,73,84,85,78,79,32,80,69,82,65,90,65,18,11,10,5,71,114,97,100,111,18,2,16,13,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,30,10,18,110,101,119,65,109,111,117,110,116,83,116,97,114,116,68,97,116,101,18,8,82,6,8,192,159,157,151,6,26,12,8,220,178,248,166,6,16,184,213,222,184,1,34,11,8,180,195,249,166,6,16,192,154,230,95,18,255,2,10,77,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,30,10,6,78,111,109,98,114,101,18,20,138,1,17,73,86,69,82,83,79,78,32,65,76,69,88,65,78,68,69,82,18,16,10,8,83,101,99,99,105,195,179,110,18,4,138,1,1,65,18,37,10,20,67,195,169,100,117,108,97,32,100,101,32,105,100,101,110,116,105,100,97,100,18,13,138,1,10,86,45,51,49,50,56,56,49,55,48,18,20,10,3,99,101,100,18,13,138,1,10,86,45,51,49,50,56,56,49,55,48,18,26,10,16,70,101,99,104,97,73,110,105,99,105,111,67,117,111,116,97,18,6,82,4,16,192,132,61,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,30,10,8,65,112,101,108,108,105,100,111,18,18,138,1,15,65,67,69,73,84,85,78,79,32,80,69,82,65,90,65,18,11,10,5,71,114,97,100,111,18,2,16,13,18,21,10,8,68,105,115,99,111,117,110,116,18,9,25,0,0,0,0,0,0,224,63,18,30,10,18,110,101,119,65,109,111,117,110,116,83,116,97,114,116,68,97,116,101,18,8,82,6,8,192,136,173,151,6,26,12,8,220,178,248,166,6,16,184,213,222,184,1,34,11,8,132,194,249,166,6,16,176,141,200,70,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleNewDiscount"},"extension":{},"message":"[runtime-status] [17904] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.updated\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"524c711a-1204-4527-8668-d7279edf5796\",\"subject\":\"documents/students/3dJExGFTPEJtxm0peFNG\",\"time\":\"2023-08-17T18:06:44.257903800Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/3dJExGFTPEJtxm0peFNG\",\"data\":{\"type\":\"Buffer\",\"data\":[10,248,2,10,77,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,30,10,6,78,111,109,98,114,101,18,20,138,1,17,73,86,69,82,83,79,78,32,65,76,69,88,65,78,68,69,82,18,16,10,8,83,101,99,99,105,195,179,110,18,4,138,1,1,65,18,37,10,20,67,195,169,100,117,108,97,32,100,101,32,105,100,101,110,116,105,100,97,100,18,13,138,1,10,86,45,51,49,50,56,56,49,55,48,18,20,10,3,99,101,100,18,13,138,1,10,86,45,51,49,50,56,56,49,55,48,18,26,10,16,70,101,99,104,97,73,110,105,99,105,111,67,117,111,116,97,18,6,82,4,16,192,132,61,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,30,10,8,65,112,101,108,108,105,100,111,18,18,138,1,15,65,67,69,73,84,85,78,79,32,80,69,82,65,90,65,18,11,10,5,71,114,97,100,111,18,2,16,13,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,30,10,18,110,101,119,65,109,111,117,110,116,83,116,97,114,116,68,97,116,101,18,8,82,6,8,192,159,157,151,6,26,12,8,220,178,248,166,6,16,184,213,222,184,1,34,11,8,180,195,249,166,6,16,192,154,230,95,18,255,2,10,77,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,30,10,6,78,111,109,98,114,101,18,20,138,1,17,73,86,69,82,83,79,78,32,65,76,69,88,65,78,68,69,82,18,16,10,8,83,101,99,99,105,195,179,110,18,4,138,1,1,65,18,37,10,20,67,195,169,100,117,108,97,32,100,101,32,105,100,101,110,116,105,100,97,100,18,13,138,1,10,86,45,51,49,50,56,56,49,55,48,18,20,10,3,99,101,100,18,13,138,1,10,86,45,51,49,50,56,56,49,55,48,18,26,10,16,70,101,99,104,97,73,110,105,99,105,111,67,117,111,116,97,18,6,82,4,16,192,132,61,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,30,10,8,65,112,101,108,108,105,100,111,18,18,138,1,15,65,67,69,73,84,85,78,79,32,80,69,82,65,90,65,18,11,10,5,71,114,97,100,111,18,2,16,13,18,21,10,8,68,105,115,99,111,117,110,116,18,9,25,0,0,0,0,0,0,224,63,18,30,10,18,110,101,119,65,109,111,117,110,116,83,116,97,114,116,68,97,116,101,18,8,82,6,8,192,136,173,151,6,26,12,8,220,178,248,166,6,16,184,213,222,184,1,34,11,8,132,194,249,166,6,16,176,141,200,70,26,0]}}"}}
[debug] [2023-08-17T18:06:44.304Z] Aug 17, 2023 2:06:44 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:06:44 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:06:44.347Z] Aug 17, 2023 2:06:44 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:06:44 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:06:44.393Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleNewDiscount"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleNewDiscount" in 132.6191ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleNewDiscount"},"extension":{},"message":"Finished \"us-central1-handleNewDiscount\" in 132.6191ms"}}
[debug] [2023-08-17T18:06:44.394Z] [worker-us-central1-handleNewDiscount-cd3ee0a7-0dfd-4ee4-a793-4f76adb9bd64]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleNewDiscount"},"extension":{},"message":"[worker-us-central1-handleNewDiscount-cd3ee0a7-0dfd-4ee4-a793-4f76adb9bd64]: IDLE"}}
[debug] [2023-08-17T18:06:44.394Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleNewDiscount"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T18:06:44.394Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleNewDiscount"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T18:06:44.394Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:06:44.407Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:06:44.407Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:06:44.407Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:06:44.407Z"],"workRunningCount":1}
[debug] [2023-08-17T18:06:44.408Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T18:06:44.408Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T18:06:44.408Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T18:06:44.408Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T18:06:44.408Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T18:06:44.409Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"95e0b1c1-3510-4928-a314-d982f1da3caa","subject":"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/60nZA87H1yBOFvFqxJAz","time":"2023-08-17T18:06:44.393902500Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/3dJExGFTPEJtxm0peFNG/cuota_payments/60nZA87H1yBOFvFqxJAz","data":{"type":"Buffer","data":[10,147,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,54,48,110,90,65,56,55,72,49,121,66,79,70,118,70,113,120,74,65,122,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,20,10,5,65,108,105,97,115,18,11,138,1,8,70,101,98,114,117,97,114,121,18,102,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,86,50,84,10,20,10,5,65,108,105,97,115,18,11,138,1,8,70,101,98,114,117,97,114,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,199,231,158,6,10,14,10,2,116,111,18,8,82,6,8,192,248,245,159,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,110,88,65,88,100,48,110,89,87,78,90,90,113,74,116,121,90,116,53,90,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,199,231,158,6,10,14,10,2,116,111,18,8,82,6,8,192,248,245,159,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,0,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,196,194,249,166,6,16,128,245,178,12,18,11,10,5,77,111,110,116,111,18,2,16,50,26,12,8,220,178,248,166,6,16,128,131,174,151,1,34,12,8,180,195,249,166,6,16,232,214,134,142,1,18,146,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,54,48,110,90,65,56,55,72,49,121,66,79,70,118,70,113,120,74,65,122,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,20,10,5,65,108,105,97,115,18,11,138,1,8,70,101,98,114,117,97,114,121,18,102,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,86,50,84,10,20,10,5,65,108,105,97,115,18,11,138,1,8,70,101,98,114,117,97,114,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,199,231,158,6,10,14,10,2,116,111,18,8,82,6,8,192,248,245,159,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,110,88,65,88,100,48,110,89,87,78,90,90,113,74,116,121,90,116,53,90,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,199,231,158,6,10,14,10,2,116,111,18,8,82,6,8,192,248,245,159,6,18,11,10,5,77,111,110,116,111,18,2,16,25,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,0,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,196,194,249,166,6,16,128,245,178,12,26,12,8,220,178,248,166,6,16,128,131,174,151,1,34,11,8,196,194,249,166,6,16,240,186,210,13,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"95e0b1c1-3510-4928-a314-d982f1da3caa\",\"subject\":\"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/60nZA87H1yBOFvFqxJAz\",\"time\":\"2023-08-17T18:06:44.393902500Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/3dJExGFTPEJtxm0peFNG/cuota_payments/60nZA87H1yBOFvFqxJAz\",\"data\":{\"type\":\"Buffer\",\"data\":[10,147,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,54,48,110,90,65,56,55,72,49,121,66,79,70,118,70,113,120,74,65,122,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,20,10,5,65,108,105,97,115,18,11,138,1,8,70,101,98,114,117,97,114,121,18,102,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,86,50,84,10,20,10,5,65,108,105,97,115,18,11,138,1,8,70,101,98,114,117,97,114,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,199,231,158,6,10,14,10,2,116,111,18,8,82,6,8,192,248,245,159,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,110,88,65,88,100,48,110,89,87,78,90,90,113,74,116,121,90,116,53,90,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,199,231,158,6,10,14,10,2,116,111,18,8,82,6,8,192,248,245,159,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,0,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,196,194,249,166,6,16,128,245,178,12,18,11,10,5,77,111,110,116,111,18,2,16,50,26,12,8,220,178,248,166,6,16,128,131,174,151,1,34,12,8,180,195,249,166,6,16,232,214,134,142,1,18,146,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,54,48,110,90,65,56,55,72,49,121,66,79,70,118,70,113,120,74,65,122,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,20,10,5,65,108,105,97,115,18,11,138,1,8,70,101,98,114,117,97,114,121,18,102,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,86,50,84,10,20,10,5,65,108,105,97,115,18,11,138,1,8,70,101,98,114,117,97,114,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,199,231,158,6,10,14,10,2,116,111,18,8,82,6,8,192,248,245,159,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,110,88,65,88,100,48,110,89,87,78,90,90,113,74,116,121,90,116,53,90,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,199,231,158,6,10,14,10,2,116,111,18,8,82,6,8,192,248,245,159,6,18,11,10,5,77,111,110,116,111,18,2,16,25,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,0,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,196,194,249,166,6,16,128,245,178,12,26,12,8,220,178,248,166,6,16,128,131,174,151,1,34,11,8,196,194,249,166,6,16,240,186,210,13,26,0]}}"}}
[debug] [2023-08-17T18:06:44.411Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 2.3296ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 2.3296ms"}}
[debug] [2023-08-17T18:06:44.412Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T18:06:44.412Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T18:06:44.412Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T18:06:44.412Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:06:44.422Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:06:44.422Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:06:44.422Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:06:44.422Z"],"workRunningCount":1}
[debug] [2023-08-17T18:06:44.422Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T18:06:44.423Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T18:06:44.423Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T18:06:44.423Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T18:06:44.423Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T18:06:44.424Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"07e769f2-bc85-4cbb-96c2-5126fb0d67fb","subject":"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/60nZA87H1yBOFvFqxJAz","time":"2023-08-17T18:06:44.411902300Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/3dJExGFTPEJtxm0peFNG/cuota_payments/60nZA87H1yBOFvFqxJAz","data":{"type":"Buffer","data":[10,147,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,54,48,110,90,65,56,55,72,49,121,66,79,70,118,70,113,120,74,65,122,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,20,10,5,65,108,105,97,115,18,11,138,1,8,70,101,98,114,117,97,114,121,18,102,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,86,50,84,10,20,10,5,65,108,105,97,115,18,11,138,1,8,70,101,98,114,117,97,114,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,199,231,158,6,10,14,10,2,116,111,18,8,82,6,8,192,248,245,159,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,110,88,65,88,100,48,110,89,87,78,90,90,113,74,116,121,90,116,53,90,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,199,231,158,6,10,14,10,2,116,111,18,8,82,6,8,192,248,245,159,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,0,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,196,194,249,166,6,16,128,245,178,12,18,11,10,5,77,111,110,116,111,18,2,16,50,26,12,8,220,178,248,166,6,16,128,131,174,151,1,34,12,8,180,195,249,166,6,16,232,214,134,142,1,18,147,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,54,48,110,90,65,56,55,72,49,121,66,79,70,118,70,113,120,74,65,122,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,20,10,5,65,108,105,97,115,18,11,138,1,8,70,101,98,114,117,97,114,121,18,102,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,86,50,84,10,20,10,5,65,108,105,97,115,18,11,138,1,8,70,101,98,114,117,97,114,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,199,231,158,6,10,14,10,2,116,111,18,8,82,6,8,192,248,245,159,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,110,88,65,88,100,48,110,89,87,78,90,90,113,74,116,121,90,116,53,90,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,199,231,158,6,10,14,10,2,116,111,18,8,82,6,8,192,248,245,159,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,0,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,196,194,249,166,6,16,128,245,178,12,18,11,10,5,77,111,110,116,111,18,2,16,50,26,12,8,220,178,248,166,6,16,128,131,174,151,1,34,12,8,180,195,249,166,6,16,232,214,134,142,1,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"07e769f2-bc85-4cbb-96c2-5126fb0d67fb\",\"subject\":\"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/60nZA87H1yBOFvFqxJAz\",\"time\":\"2023-08-17T18:06:44.411902300Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/3dJExGFTPEJtxm0peFNG/cuota_payments/60nZA87H1yBOFvFqxJAz\",\"data\":{\"type\":\"Buffer\",\"data\":[10,147,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,54,48,110,90,65,56,55,72,49,121,66,79,70,118,70,113,120,74,65,122,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,20,10,5,65,108,105,97,115,18,11,138,1,8,70,101,98,114,117,97,114,121,18,102,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,86,50,84,10,20,10,5,65,108,105,97,115,18,11,138,1,8,70,101,98,114,117,97,114,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,199,231,158,6,10,14,10,2,116,111,18,8,82,6,8,192,248,245,159,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,110,88,65,88,100,48,110,89,87,78,90,90,113,74,116,121,90,116,53,90,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,199,231,158,6,10,14,10,2,116,111,18,8,82,6,8,192,248,245,159,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,0,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,196,194,249,166,6,16,128,245,178,12,18,11,10,5,77,111,110,116,111,18,2,16,50,26,12,8,220,178,248,166,6,16,128,131,174,151,1,34,12,8,180,195,249,166,6,16,232,214,134,142,1,18,147,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,54,48,110,90,65,56,55,72,49,121,66,79,70,118,70,113,120,74,65,122,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,20,10,5,65,108,105,97,115,18,11,138,1,8,70,101,98,114,117,97,114,121,18,102,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,86,50,84,10,20,10,5,65,108,105,97,115,18,11,138,1,8,70,101,98,114,117,97,114,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,199,231,158,6,10,14,10,2,116,111,18,8,82,6,8,192,248,245,159,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,110,88,65,88,100,48,110,89,87,78,90,90,113,74,116,121,90,116,53,90,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,199,231,158,6,10,14,10,2,116,111,18,8,82,6,8,192,248,245,159,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,0,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,196,194,249,166,6,16,128,245,178,12,18,11,10,5,77,111,110,116,111,18,2,16,50,26,12,8,220,178,248,166,6,16,128,131,174,151,1,34,12,8,180,195,249,166,6,16,232,214,134,142,1,26,0]}}"}}
[debug] [2023-08-17T18:06:44.424Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 1.303ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 1.303ms"}}
[debug] [2023-08-17T18:06:44.425Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T18:06:44.425Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T18:06:44.425Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T18:06:44.425Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:06:44.438Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:06:44.438Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:06:44.438Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:06:44.438Z"],"workRunningCount":1}
[debug] [2023-08-17T18:06:44.438Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T18:06:44.439Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T18:06:44.439Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T18:06:44.439Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T18:06:44.439Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T18:06:44.441Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"7bf484b2-2ce4-4f3b-ab51-1e114333a540","subject":"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/SrVGYJzHDW93vZ6fyJ7u","time":"2023-08-17T18:06:44.424902700Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/3dJExGFTPEJtxm0peFNG/cuota_payments/SrVGYJzHDW93vZ6fyJ7u","data":{"type":"Buffer","data":[10,141,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,83,114,86,71,89,74,122,72,68,87,57,51,118,90,54,102,121,74,55,117,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,17,10,5,65,108,105,97,115,18,8,138,1,5,77,97,114,99,104,18,99,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,83,50,81,10,17,10,5,65,108,105,97,115,18,8,138,1,5,77,97,114,99,104,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,155,251,159,6,10,14,10,2,116,111,18,8,82,6,8,192,181,153,161,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,66,88,83,72,97,122,54,80,73,49,69,56,76,116,100,75,65,71,51,68,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,155,251,159,6,10,14,10,2,116,111,18,8,82,6,8,192,181,153,161,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,0,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,196,194,249,166,6,16,192,200,231,34,18,11,10,5,77,111,110,116,111,18,2,16,50,26,12,8,220,178,248,166,6,16,184,213,222,184,1,34,12,8,180,195,249,166,6,16,216,154,247,144,1,18,140,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,83,114,86,71,89,74,122,72,68,87,57,51,118,90,54,102,121,74,55,117,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,17,10,5,65,108,105,97,115,18,8,138,1,5,77,97,114,99,104,18,99,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,83,50,81,10,17,10,5,65,108,105,97,115,18,8,138,1,5,77,97,114,99,104,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,155,251,159,6,10,14,10,2,116,111,18,8,82,6,8,192,181,153,161,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,66,88,83,72,97,122,54,80,73,49,69,56,76,116,100,75,65,71,51,68,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,155,251,159,6,10,14,10,2,116,111,18,8,82,6,8,192,181,153,161,6,18,11,10,5,77,111,110,116,111,18,2,16,25,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,0,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,196,194,249,166,6,16,192,200,231,34,26,12,8,220,178,248,166,6,16,184,213,222,184,1,34,11,8,196,194,249,166,6,16,152,150,135,36,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"7bf484b2-2ce4-4f3b-ab51-1e114333a540\",\"subject\":\"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/SrVGYJzHDW93vZ6fyJ7u\",\"time\":\"2023-08-17T18:06:44.424902700Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/3dJExGFTPEJtxm0peFNG/cuota_payments/SrVGYJzHDW93vZ6fyJ7u\",\"data\":{\"type\":\"Buffer\",\"data\":[10,141,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,83,114,86,71,89,74,122,72,68,87,57,51,118,90,54,102,121,74,55,117,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,17,10,5,65,108,105,97,115,18,8,138,1,5,77,97,114,99,104,18,99,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,83,50,81,10,17,10,5,65,108,105,97,115,18,8,138,1,5,77,97,114,99,104,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,155,251,159,6,10,14,10,2,116,111,18,8,82,6,8,192,181,153,161,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,66,88,83,72,97,122,54,80,73,49,69,56,76,116,100,75,65,71,51,68,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,155,251,159,6,10,14,10,2,116,111,18,8,82,6,8,192,181,153,161,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,0,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,196,194,249,166,6,16,192,200,231,34,18,11,10,5,77,111,110,116,111,18,2,16,50,26,12,8,220,178,248,166,6,16,184,213,222,184,1,34,12,8,180,195,249,166,6,16,216,154,247,144,1,18,140,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,83,114,86,71,89,74,122,72,68,87,57,51,118,90,54,102,121,74,55,117,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,17,10,5,65,108,105,97,115,18,8,138,1,5,77,97,114,99,104,18,99,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,83,50,81,10,17,10,5,65,108,105,97,115,18,8,138,1,5,77,97,114,99,104,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,155,251,159,6,10,14,10,2,116,111,18,8,82,6,8,192,181,153,161,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,66,88,83,72,97,122,54,80,73,49,69,56,76,116,100,75,65,71,51,68,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,155,251,159,6,10,14,10,2,116,111,18,8,82,6,8,192,181,153,161,6,18,11,10,5,77,111,110,116,111,18,2,16,25,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,0,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,196,194,249,166,6,16,192,200,231,34,26,12,8,220,178,248,166,6,16,184,213,222,184,1,34,11,8,196,194,249,166,6,16,152,150,135,36,26,0]}}"}}
[debug] [2023-08-17T18:06:44.442Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 2.8452ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 2.8452ms"}}
[debug] [2023-08-17T18:06:44.442Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T18:06:44.442Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T18:06:44.443Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T18:06:44.443Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:06:44.454Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:06:44.454Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:06:44.454Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:06:44.454Z"],"workRunningCount":1}
[debug] [2023-08-17T18:06:44.454Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T18:06:44.454Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T18:06:44.454Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T18:06:44.454Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T18:06:44.455Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T18:06:44.455Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"2ff47ccd-3ac2-496b-b67f-68a2f52affed","subject":"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/SrVGYJzHDW93vZ6fyJ7u","time":"2023-08-17T18:06:44.442930300Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/3dJExGFTPEJtxm0peFNG/cuota_payments/SrVGYJzHDW93vZ6fyJ7u","data":{"type":"Buffer","data":[10,141,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,83,114,86,71,89,74,122,72,68,87,57,51,118,90,54,102,121,74,55,117,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,17,10,5,65,108,105,97,115,18,8,138,1,5,77,97,114,99,104,18,99,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,83,50,81,10,17,10,5,65,108,105,97,115,18,8,138,1,5,77,97,114,99,104,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,155,251,159,6,10,14,10,2,116,111,18,8,82,6,8,192,181,153,161,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,66,88,83,72,97,122,54,80,73,49,69,56,76,116,100,75,65,71,51,68,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,155,251,159,6,10,14,10,2,116,111,18,8,82,6,8,192,181,153,161,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,0,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,196,194,249,166,6,16,192,200,231,34,18,11,10,5,77,111,110,116,111,18,2,16,50,26,12,8,220,178,248,166,6,16,184,213,222,184,1,34,12,8,180,195,249,166,6,16,216,154,247,144,1,18,141,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,83,114,86,71,89,74,122,72,68,87,57,51,118,90,54,102,121,74,55,117,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,17,10,5,65,108,105,97,115,18,8,138,1,5,77,97,114,99,104,18,99,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,83,50,81,10,17,10,5,65,108,105,97,115,18,8,138,1,5,77,97,114,99,104,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,155,251,159,6,10,14,10,2,116,111,18,8,82,6,8,192,181,153,161,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,66,88,83,72,97,122,54,80,73,49,69,56,76,116,100,75,65,71,51,68,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,155,251,159,6,10,14,10,2,116,111,18,8,82,6,8,192,181,153,161,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,0,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,196,194,249,166,6,16,192,200,231,34,18,11,10,5,77,111,110,116,111,18,2,16,50,26,12,8,220,178,248,166,6,16,184,213,222,184,1,34,12,8,180,195,249,166,6,16,216,154,247,144,1,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"2ff47ccd-3ac2-496b-b67f-68a2f52affed\",\"subject\":\"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/SrVGYJzHDW93vZ6fyJ7u\",\"time\":\"2023-08-17T18:06:44.442930300Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/3dJExGFTPEJtxm0peFNG/cuota_payments/SrVGYJzHDW93vZ6fyJ7u\",\"data\":{\"type\":\"Buffer\",\"data\":[10,141,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,83,114,86,71,89,74,122,72,68,87,57,51,118,90,54,102,121,74,55,117,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,17,10,5,65,108,105,97,115,18,8,138,1,5,77,97,114,99,104,18,99,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,83,50,81,10,17,10,5,65,108,105,97,115,18,8,138,1,5,77,97,114,99,104,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,155,251,159,6,10,14,10,2,116,111,18,8,82,6,8,192,181,153,161,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,66,88,83,72,97,122,54,80,73,49,69,56,76,116,100,75,65,71,51,68,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,155,251,159,6,10,14,10,2,116,111,18,8,82,6,8,192,181,153,161,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,0,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,196,194,249,166,6,16,192,200,231,34,18,11,10,5,77,111,110,116,111,18,2,16,50,26,12,8,220,178,248,166,6,16,184,213,222,184,1,34,12,8,180,195,249,166,6,16,216,154,247,144,1,18,141,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,83,114,86,71,89,74,122,72,68,87,57,51,118,90,54,102,121,74,55,117,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,17,10,5,65,108,105,97,115,18,8,138,1,5,77,97,114,99,104,18,99,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,83,50,81,10,17,10,5,65,108,105,97,115,18,8,138,1,5,77,97,114,99,104,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,155,251,159,6,10,14,10,2,116,111,18,8,82,6,8,192,181,153,161,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,66,88,83,72,97,122,54,80,73,49,69,56,76,116,100,75,65,71,51,68,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,155,251,159,6,10,14,10,2,116,111,18,8,82,6,8,192,181,153,161,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,0,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,196,194,249,166,6,16,192,200,231,34,18,11,10,5,77,111,110,116,111,18,2,16,50,26,12,8,220,178,248,166,6,16,184,213,222,184,1,34,12,8,180,195,249,166,6,16,216,154,247,144,1,26,0]}}"}}
[debug] [2023-08-17T18:06:44.456Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 1.5441ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 1.5441ms"}}
[debug] [2023-08-17T18:06:44.456Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T18:06:44.456Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T18:06:44.456Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T18:06:44.456Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:06:44.470Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:06:44.470Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:06:44.470Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:06:44.470Z"],"workRunningCount":1}
[debug] [2023-08-17T18:06:44.470Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T18:06:44.471Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T18:06:44.471Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T18:06:44.471Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T18:06:44.472Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T18:06:44.473Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"c542d1b5-1b59-491c-aed9-bf22613ceb87","subject":"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/owopsBVetECWsGcV21kJ","time":"2023-08-17T18:06:44.457195300Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/3dJExGFTPEJtxm0peFNG/cuota_payments/owopsBVetECWsGcV21kJ","data":{"type":"Buffer","data":[10,141,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,111,119,111,112,115,66,86,101,116,69,67,87,115,71,99,86,50,49,107,74,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,17,10,5,65,108,105,97,115,18,8,138,1,5,65,112,114,105,108,18,99,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,83,50,81,10,17,10,5,65,108,105,97,115,18,8,138,1,5,65,112,114,105,108,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,216,158,161,6,10,14,10,2,116,111,18,8,82,6,8,192,207,183,162,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,68,80,114,55,66,77,116,75,79,80,84,118,116,116,121,116,78,89,79,121,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,216,158,161,6,10,14,10,2,116,111,18,8,82,6,8,192,207,183,162,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,0,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,196,194,249,166,6,16,128,235,147,79,18,11,10,5,77,111,110,116,111,18,2,16,50,26,12,8,220,178,248,166,6,16,144,237,206,162,2,34,12,8,180,195,249,166,6,16,200,247,133,163,1,18,140,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,111,119,111,112,115,66,86,101,116,69,67,87,115,71,99,86,50,49,107,74,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,17,10,5,65,108,105,97,115,18,8,138,1,5,65,112,114,105,108,18,99,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,83,50,81,10,17,10,5,65,108,105,97,115,18,8,138,1,5,65,112,114,105,108,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,216,158,161,6,10,14,10,2,116,111,18,8,82,6,8,192,207,183,162,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,68,80,114,55,66,77,116,75,79,80,84,118,116,116,121,116,78,89,79,121,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,216,158,161,6,10,14,10,2,116,111,18,8,82,6,8,192,207,183,162,6,18,11,10,5,77,111,110,116,111,18,2,16,25,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,0,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,196,194,249,166,6,16,128,235,147,79,26,12,8,220,178,248,166,6,16,144,237,206,162,2,34,11,8,196,194,249,166,6,16,152,180,246,79,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"c542d1b5-1b59-491c-aed9-bf22613ceb87\",\"subject\":\"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/owopsBVetECWsGcV21kJ\",\"time\":\"2023-08-17T18:06:44.457195300Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/3dJExGFTPEJtxm0peFNG/cuota_payments/owopsBVetECWsGcV21kJ\",\"data\":{\"type\":\"Buffer\",\"data\":[10,141,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,111,119,111,112,115,66,86,101,116,69,67,87,115,71,99,86,50,49,107,74,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,17,10,5,65,108,105,97,115,18,8,138,1,5,65,112,114,105,108,18,99,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,83,50,81,10,17,10,5,65,108,105,97,115,18,8,138,1,5,65,112,114,105,108,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,216,158,161,6,10,14,10,2,116,111,18,8,82,6,8,192,207,183,162,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,68,80,114,55,66,77,116,75,79,80,84,118,116,116,121,116,78,89,79,121,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,216,158,161,6,10,14,10,2,116,111,18,8,82,6,8,192,207,183,162,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,0,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,196,194,249,166,6,16,128,235,147,79,18,11,10,5,77,111,110,116,111,18,2,16,50,26,12,8,220,178,248,166,6,16,144,237,206,162,2,34,12,8,180,195,249,166,6,16,200,247,133,163,1,18,140,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,111,119,111,112,115,66,86,101,116,69,67,87,115,71,99,86,50,49,107,74,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,17,10,5,65,108,105,97,115,18,8,138,1,5,65,112,114,105,108,18,99,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,83,50,81,10,17,10,5,65,108,105,97,115,18,8,138,1,5,65,112,114,105,108,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,216,158,161,6,10,14,10,2,116,111,18,8,82,6,8,192,207,183,162,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,68,80,114,55,66,77,116,75,79,80,84,118,116,116,121,116,78,89,79,121,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,216,158,161,6,10,14,10,2,116,111,18,8,82,6,8,192,207,183,162,6,18,11,10,5,77,111,110,116,111,18,2,16,25,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,0,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,196,194,249,166,6,16,128,235,147,79,26,12,8,220,178,248,166,6,16,144,237,206,162,2,34,11,8,196,194,249,166,6,16,152,180,246,79,26,0]}}"}}
[debug] [2023-08-17T18:06:44.473Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 1.5458ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 1.5458ms"}}
[debug] [2023-08-17T18:06:44.473Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T18:06:44.474Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T18:06:44.474Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T18:06:44.474Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:06:44.485Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:06:44.485Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:06:44.486Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:06:44.485Z"],"workRunningCount":1}
[debug] [2023-08-17T18:06:44.486Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T18:06:44.486Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T18:06:44.486Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T18:06:44.486Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T18:06:44.486Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T18:06:44.487Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"ffa07046-4e01-4a48-92bd-e6db74484084","subject":"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/owopsBVetECWsGcV21kJ","time":"2023-08-17T18:06:44.474020900Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/3dJExGFTPEJtxm0peFNG/cuota_payments/owopsBVetECWsGcV21kJ","data":{"type":"Buffer","data":[10,141,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,111,119,111,112,115,66,86,101,116,69,67,87,115,71,99,86,50,49,107,74,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,17,10,5,65,108,105,97,115,18,8,138,1,5,65,112,114,105,108,18,99,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,83,50,81,10,17,10,5,65,108,105,97,115,18,8,138,1,5,65,112,114,105,108,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,216,158,161,6,10,14,10,2,116,111,18,8,82,6,8,192,207,183,162,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,68,80,114,55,66,77,116,75,79,80,84,118,116,116,121,116,78,89,79,121,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,216,158,161,6,10,14,10,2,116,111,18,8,82,6,8,192,207,183,162,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,25,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,196,194,249,166,6,16,128,235,147,79,18,11,10,5,77,111,110,116,111,18,2,16,50,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,35,26,12,8,220,178,248,166,6,16,144,237,206,162,2,34,12,8,180,195,249,166,6,16,144,131,134,173,1,18,141,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,111,119,111,112,115,66,86,101,116,69,67,87,115,71,99,86,50,49,107,74,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,17,10,5,65,108,105,97,115,18,8,138,1,5,65,112,114,105,108,18,99,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,83,50,81,10,17,10,5,65,108,105,97,115,18,8,138,1,5,65,112,114,105,108,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,216,158,161,6,10,14,10,2,116,111,18,8,82,6,8,192,207,183,162,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,68,80,114,55,66,77,116,75,79,80,84,118,116,116,121,116,78,89,79,121,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,216,158,161,6,10,14,10,2,116,111,18,8,82,6,8,192,207,183,162,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,0,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,196,194,249,166,6,16,128,235,147,79,18,11,10,5,77,111,110,116,111,18,2,16,50,26,12,8,220,178,248,166,6,16,144,237,206,162,2,34,12,8,180,195,249,166,6,16,200,247,133,163,1,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"ffa07046-4e01-4a48-92bd-e6db74484084\",\"subject\":\"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/owopsBVetECWsGcV21kJ\",\"time\":\"2023-08-17T18:06:44.474020900Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/3dJExGFTPEJtxm0peFNG/cuota_payments/owopsBVetECWsGcV21kJ\",\"data\":{\"type\":\"Buffer\",\"data\":[10,141,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,111,119,111,112,115,66,86,101,116,69,67,87,115,71,99,86,50,49,107,74,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,17,10,5,65,108,105,97,115,18,8,138,1,5,65,112,114,105,108,18,99,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,83,50,81,10,17,10,5,65,108,105,97,115,18,8,138,1,5,65,112,114,105,108,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,216,158,161,6,10,14,10,2,116,111,18,8,82,6,8,192,207,183,162,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,68,80,114,55,66,77,116,75,79,80,84,118,116,116,121,116,78,89,79,121,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,216,158,161,6,10,14,10,2,116,111,18,8,82,6,8,192,207,183,162,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,25,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,196,194,249,166,6,16,128,235,147,79,18,11,10,5,77,111,110,116,111,18,2,16,50,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,35,26,12,8,220,178,248,166,6,16,144,237,206,162,2,34,12,8,180,195,249,166,6,16,144,131,134,173,1,18,141,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,111,119,111,112,115,66,86,101,116,69,67,87,115,71,99,86,50,49,107,74,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,17,10,5,65,108,105,97,115,18,8,138,1,5,65,112,114,105,108,18,99,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,83,50,81,10,17,10,5,65,108,105,97,115,18,8,138,1,5,65,112,114,105,108,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,216,158,161,6,10,14,10,2,116,111,18,8,82,6,8,192,207,183,162,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,68,80,114,55,66,77,116,75,79,80,84,118,116,116,121,116,78,89,79,121,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,216,158,161,6,10,14,10,2,116,111,18,8,82,6,8,192,207,183,162,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,0,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,196,194,249,166,6,16,128,235,147,79,18,11,10,5,77,111,110,116,111,18,2,16,50,26,12,8,220,178,248,166,6,16,144,237,206,162,2,34,12,8,180,195,249,166,6,16,200,247,133,163,1,26,0]}}"}}
[debug] [2023-08-17T18:06:44.588Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 102.2762ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 102.2762ms"}}
[debug] [2023-08-17T18:06:44.589Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T18:06:44.589Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T18:06:44.589Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T18:06:44.589Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:06:44.598Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:06:44.598Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:06:44.598Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:06:44.598Z"],"workRunningCount":1}
[debug] [2023-08-17T18:06:44.598Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T18:06:44.598Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T18:06:44.598Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T18:06:44.598Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T18:06:44.599Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T18:06:44.600Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"3f2ae29f-c1ce-414b-a682-fc7c23b2a28b","subject":"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/KzQYIeAvLgc2XaKStz9n","time":"2023-08-17T18:06:44.589031700Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/3dJExGFTPEJtxm0peFNG/cuota_payments/KzQYIeAvLgc2XaKStz9n","data":{"type":"Buffer","data":[10,137,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,75,122,81,89,73,101,65,118,76,103,99,50,88,97,75,83,116,122,57,110,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,15,10,5,65,108,105,97,115,18,6,138,1,3,77,97,121,18,97,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,81,50,79,10,15,10,5,65,108,105,97,115,18,6,138,1,3,77,97,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,242,188,162,6,10,14,10,2,116,111,18,8,82,6,8,192,140,219,163,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,51,113,56,110,89,80,71,113,88,122,112,114,120,52,53,121,121,86,104,70,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,242,188,162,6,10,14,10,2,116,111,18,8,82,6,8,192,140,219,163,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,0,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,196,194,249,166,6,16,128,243,223,25,18,11,10,5,77,111,110,116,111,18,2,16,50,26,12,8,220,178,248,166,6,16,240,154,173,140,1,34,12,8,180,195,249,166,6,16,248,147,128,174,1,18,136,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,75,122,81,89,73,101,65,118,76,103,99,50,88,97,75,83,116,122,57,110,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,15,10,5,65,108,105,97,115,18,6,138,1,3,77,97,121,18,97,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,81,50,79,10,15,10,5,65,108,105,97,115,18,6,138,1,3,77,97,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,242,188,162,6,10,14,10,2,116,111,18,8,82,6,8,192,140,219,163,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,51,113,56,110,89,80,71,113,88,122,112,114,120,52,53,121,121,86,104,70,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,242,188,162,6,10,14,10,2,116,111,18,8,82,6,8,192,140,219,163,6,18,11,10,5,77,111,110,116,111,18,2,16,25,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,0,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,196,194,249,166,6,16,128,243,223,25,26,12,8,220,178,248,166,6,16,240,154,173,140,1,34,11,8,196,194,249,166,6,16,232,203,194,26,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"3f2ae29f-c1ce-414b-a682-fc7c23b2a28b\",\"subject\":\"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/KzQYIeAvLgc2XaKStz9n\",\"time\":\"2023-08-17T18:06:44.589031700Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/3dJExGFTPEJtxm0peFNG/cuota_payments/KzQYIeAvLgc2XaKStz9n\",\"data\":{\"type\":\"Buffer\",\"data\":[10,137,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,75,122,81,89,73,101,65,118,76,103,99,50,88,97,75,83,116,122,57,110,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,15,10,5,65,108,105,97,115,18,6,138,1,3,77,97,121,18,97,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,81,50,79,10,15,10,5,65,108,105,97,115,18,6,138,1,3,77,97,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,242,188,162,6,10,14,10,2,116,111,18,8,82,6,8,192,140,219,163,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,51,113,56,110,89,80,71,113,88,122,112,114,120,52,53,121,121,86,104,70,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,242,188,162,6,10,14,10,2,116,111,18,8,82,6,8,192,140,219,163,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,0,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,196,194,249,166,6,16,128,243,223,25,18,11,10,5,77,111,110,116,111,18,2,16,50,26,12,8,220,178,248,166,6,16,240,154,173,140,1,34,12,8,180,195,249,166,6,16,248,147,128,174,1,18,136,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,75,122,81,89,73,101,65,118,76,103,99,50,88,97,75,83,116,122,57,110,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,15,10,5,65,108,105,97,115,18,6,138,1,3,77,97,121,18,97,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,81,50,79,10,15,10,5,65,108,105,97,115,18,6,138,1,3,77,97,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,242,188,162,6,10,14,10,2,116,111,18,8,82,6,8,192,140,219,163,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,51,113,56,110,89,80,71,113,88,122,112,114,120,52,53,121,121,86,104,70,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,242,188,162,6,10,14,10,2,116,111,18,8,82,6,8,192,140,219,163,6,18,11,10,5,77,111,110,116,111,18,2,16,25,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,0,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,196,194,249,166,6,16,128,243,223,25,26,12,8,220,178,248,166,6,16,240,154,173,140,1,34,11,8,196,194,249,166,6,16,232,203,194,26,26,0]}}"}}
[debug] [2023-08-17T18:06:44.601Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 2.3215ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 2.3215ms"}}
[debug] [2023-08-17T18:06:44.601Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T18:06:44.602Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T18:06:44.602Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T18:06:44.602Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:06:44.614Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:06:44.614Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:06:44.614Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:06:44.614Z"],"workRunningCount":1}
[debug] [2023-08-17T18:06:44.614Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T18:06:44.614Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T18:06:44.614Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T18:06:44.615Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T18:06:44.615Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T18:06:44.616Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"6c005ebd-83be-4630-80fc-fb016dda2fd9","subject":"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/KzQYIeAvLgc2XaKStz9n","time":"2023-08-17T18:06:44.602030900Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/3dJExGFTPEJtxm0peFNG/cuota_payments/KzQYIeAvLgc2XaKStz9n","data":{"type":"Buffer","data":[10,137,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,75,122,81,89,73,101,65,118,76,103,99,50,88,97,75,83,116,122,57,110,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,15,10,5,65,108,105,97,115,18,6,138,1,3,77,97,121,18,97,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,81,50,79,10,15,10,5,65,108,105,97,115,18,6,138,1,3,77,97,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,242,188,162,6,10,14,10,2,116,111,18,8,82,6,8,192,140,219,163,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,51,113,56,110,89,80,71,113,88,122,112,114,120,52,53,121,121,86,104,70,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,242,188,162,6,10,14,10,2,116,111,18,8,82,6,8,192,140,219,163,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,25,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,196,194,249,166,6,16,128,243,223,25,18,11,10,5,77,111,110,116,111,18,2,16,50,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,26,12,8,220,178,248,166,6,16,240,154,173,140,1,34,12,8,180,195,249,166,6,16,184,152,189,174,1,18,137,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,75,122,81,89,73,101,65,118,76,103,99,50,88,97,75,83,116,122,57,110,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,15,10,5,65,108,105,97,115,18,6,138,1,3,77,97,121,18,97,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,81,50,79,10,15,10,5,65,108,105,97,115,18,6,138,1,3,77,97,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,242,188,162,6,10,14,10,2,116,111,18,8,82,6,8,192,140,219,163,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,51,113,56,110,89,80,71,113,88,122,112,114,120,52,53,121,121,86,104,70,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,242,188,162,6,10,14,10,2,116,111,18,8,82,6,8,192,140,219,163,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,0,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,196,194,249,166,6,16,128,243,223,25,18,11,10,5,77,111,110,116,111,18,2,16,50,26,12,8,220,178,248,166,6,16,240,154,173,140,1,34,12,8,180,195,249,166,6,16,248,147,128,174,1,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"6c005ebd-83be-4630-80fc-fb016dda2fd9\",\"subject\":\"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/KzQYIeAvLgc2XaKStz9n\",\"time\":\"2023-08-17T18:06:44.602030900Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/3dJExGFTPEJtxm0peFNG/cuota_payments/KzQYIeAvLgc2XaKStz9n\",\"data\":{\"type\":\"Buffer\",\"data\":[10,137,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,75,122,81,89,73,101,65,118,76,103,99,50,88,97,75,83,116,122,57,110,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,15,10,5,65,108,105,97,115,18,6,138,1,3,77,97,121,18,97,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,81,50,79,10,15,10,5,65,108,105,97,115,18,6,138,1,3,77,97,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,242,188,162,6,10,14,10,2,116,111,18,8,82,6,8,192,140,219,163,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,51,113,56,110,89,80,71,113,88,122,112,114,120,52,53,121,121,86,104,70,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,242,188,162,6,10,14,10,2,116,111,18,8,82,6,8,192,140,219,163,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,25,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,196,194,249,166,6,16,128,243,223,25,18,11,10,5,77,111,110,116,111,18,2,16,50,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,26,12,8,220,178,248,166,6,16,240,154,173,140,1,34,12,8,180,195,249,166,6,16,184,152,189,174,1,18,137,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,75,122,81,89,73,101,65,118,76,103,99,50,88,97,75,83,116,122,57,110,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,15,10,5,65,108,105,97,115,18,6,138,1,3,77,97,121,18,97,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,81,50,79,10,15,10,5,65,108,105,97,115,18,6,138,1,3,77,97,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,242,188,162,6,10,14,10,2,116,111,18,8,82,6,8,192,140,219,163,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,51,113,56,110,89,80,71,113,88,122,112,114,120,52,53,121,121,86,104,70,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,242,188,162,6,10,14,10,2,116,111,18,8,82,6,8,192,140,219,163,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,0,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,196,194,249,166,6,16,128,243,223,25,18,11,10,5,77,111,110,116,111,18,2,16,50,26,12,8,220,178,248,166,6,16,240,154,173,140,1,34,12,8,180,195,249,166,6,16,248,147,128,174,1,26,0]}}"}}
[debug] [2023-08-17T18:06:44.728Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 113.1995ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 113.1995ms"}}
[debug] [2023-08-17T18:06:44.729Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T18:06:44.729Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T18:06:44.729Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T18:06:44.729Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:06:44.742Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:06:44.742Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:06:44.742Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:06:44.742Z"],"workRunningCount":1}
[debug] [2023-08-17T18:06:44.742Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T18:06:44.742Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T18:06:44.742Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T18:06:44.742Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T18:06:44.743Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T18:06:44.744Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"425e98fd-a0a9-402a-9296-624406c91b8e","subject":"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/lRV4eQr4TJ5GKX2pMaS8","time":"2023-08-17T18:06:44.729031500Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/3dJExGFTPEJtxm0peFNG/cuota_payments/lRV4eQr4TJ5GKX2pMaS8","data":{"type":"Buffer","data":[10,139,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,108,82,86,52,101,81,114,52,84,74,53,71,75,88,50,112,77,97,83,56,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,110,101,18,98,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,82,50,80,10,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,110,101,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,175,224,163,6,10,14,10,2,116,111,18,8,82,6,8,192,166,249,164,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,67,66,74,74,105,67,104,83,77,112,113,86,120,103,110,75,113,51,103,75,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,175,224,163,6,10,14,10,2,116,111,18,8,82,6,8,192,166,249,164,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,15,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,10,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,196,194,249,166,6,16,128,136,213,68,18,11,10,5,77,111,110,116,111,18,2,16,50,26,12,8,219,178,248,166,6,16,192,234,196,147,3,34,12,8,180,195,249,166,6,16,232,145,183,175,1,18,138,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,108,82,86,52,101,81,114,52,84,74,53,71,75,88,50,112,77,97,83,56,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,110,101,18,98,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,82,50,80,10,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,110,101,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,175,224,163,6,10,14,10,2,116,111,18,8,82,6,8,192,166,249,164,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,67,66,74,74,105,67,104,83,77,112,113,86,120,103,110,75,113,51,103,75,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,175,224,163,6,10,14,10,2,116,111,18,8,82,6,8,192,166,249,164,6,18,11,10,5,77,111,110,116,111,18,2,16,25,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,15,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,10,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,196,194,249,166,6,16,128,136,213,68,26,12,8,219,178,248,166,6,16,192,234,196,147,3,34,11,8,196,194,249,166,6,16,216,213,244,69,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"425e98fd-a0a9-402a-9296-624406c91b8e\",\"subject\":\"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/lRV4eQr4TJ5GKX2pMaS8\",\"time\":\"2023-08-17T18:06:44.729031500Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/3dJExGFTPEJtxm0peFNG/cuota_payments/lRV4eQr4TJ5GKX2pMaS8\",\"data\":{\"type\":\"Buffer\",\"data\":[10,139,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,108,82,86,52,101,81,114,52,84,74,53,71,75,88,50,112,77,97,83,56,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,110,101,18,98,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,82,50,80,10,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,110,101,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,175,224,163,6,10,14,10,2,116,111,18,8,82,6,8,192,166,249,164,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,67,66,74,74,105,67,104,83,77,112,113,86,120,103,110,75,113,51,103,75,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,175,224,163,6,10,14,10,2,116,111,18,8,82,6,8,192,166,249,164,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,15,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,10,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,196,194,249,166,6,16,128,136,213,68,18,11,10,5,77,111,110,116,111,18,2,16,50,26,12,8,219,178,248,166,6,16,192,234,196,147,3,34,12,8,180,195,249,166,6,16,232,145,183,175,1,18,138,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,108,82,86,52,101,81,114,52,84,74,53,71,75,88,50,112,77,97,83,56,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,110,101,18,98,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,82,50,80,10,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,110,101,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,175,224,163,6,10,14,10,2,116,111,18,8,82,6,8,192,166,249,164,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,67,66,74,74,105,67,104,83,77,112,113,86,120,103,110,75,113,51,103,75,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,175,224,163,6,10,14,10,2,116,111,18,8,82,6,8,192,166,249,164,6,18,11,10,5,77,111,110,116,111,18,2,16,25,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,15,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,10,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,196,194,249,166,6,16,128,136,213,68,26,12,8,219,178,248,166,6,16,192,234,196,147,3,34,11,8,196,194,249,166,6,16,216,213,244,69,26,0]}}"}}
[debug] [2023-08-17T18:06:44.744Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 1.6457ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 1.6457ms"}}
[debug] [2023-08-17T18:06:44.745Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T18:06:44.745Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T18:06:44.745Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T18:06:44.745Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:06:44.758Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:06:44.758Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:06:44.758Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:06:44.758Z"],"workRunningCount":1}
[debug] [2023-08-17T18:06:44.758Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T18:06:44.758Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T18:06:44.758Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T18:06:44.758Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T18:06:44.759Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T18:06:44.760Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"61c24fd3-7d4b-46af-b138-caa6e0001554","subject":"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/lRV4eQr4TJ5GKX2pMaS8","time":"2023-08-17T18:06:44.745033900Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/3dJExGFTPEJtxm0peFNG/cuota_payments/lRV4eQr4TJ5GKX2pMaS8","data":{"type":"Buffer","data":[10,139,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,108,82,86,52,101,81,114,52,84,74,53,71,75,88,50,112,77,97,83,56,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,110,101,18,98,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,82,50,80,10,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,110,101,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,175,224,163,6,10,14,10,2,116,111,18,8,82,6,8,192,166,249,164,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,67,66,74,74,105,67,104,83,77,112,113,86,120,103,110,75,113,51,103,75,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,175,224,163,6,10,14,10,2,116,111,18,8,82,6,8,192,166,249,164,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,15,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,196,194,249,166,6,16,128,136,213,68,18,11,10,5,77,111,110,116,111,18,2,16,50,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,26,12,8,219,178,248,166,6,16,192,234,196,147,3,34,12,8,180,195,249,166,6,16,168,150,244,175,1,18,139,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,108,82,86,52,101,81,114,52,84,74,53,71,75,88,50,112,77,97,83,56,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,110,101,18,98,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,82,50,80,10,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,110,101,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,175,224,163,6,10,14,10,2,116,111,18,8,82,6,8,192,166,249,164,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,67,66,74,74,105,67,104,83,77,112,113,86,120,103,110,75,113,51,103,75,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,175,224,163,6,10,14,10,2,116,111,18,8,82,6,8,192,166,249,164,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,15,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,10,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,196,194,249,166,6,16,128,136,213,68,18,11,10,5,77,111,110,116,111,18,2,16,50,26,12,8,219,178,248,166,6,16,192,234,196,147,3,34,12,8,180,195,249,166,6,16,232,145,183,175,1,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"61c24fd3-7d4b-46af-b138-caa6e0001554\",\"subject\":\"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/lRV4eQr4TJ5GKX2pMaS8\",\"time\":\"2023-08-17T18:06:44.745033900Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/3dJExGFTPEJtxm0peFNG/cuota_payments/lRV4eQr4TJ5GKX2pMaS8\",\"data\":{\"type\":\"Buffer\",\"data\":[10,139,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,108,82,86,52,101,81,114,52,84,74,53,71,75,88,50,112,77,97,83,56,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,110,101,18,98,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,82,50,80,10,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,110,101,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,175,224,163,6,10,14,10,2,116,111,18,8,82,6,8,192,166,249,164,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,67,66,74,74,105,67,104,83,77,112,113,86,120,103,110,75,113,51,103,75,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,175,224,163,6,10,14,10,2,116,111,18,8,82,6,8,192,166,249,164,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,15,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,196,194,249,166,6,16,128,136,213,68,18,11,10,5,77,111,110,116,111,18,2,16,50,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,26,12,8,219,178,248,166,6,16,192,234,196,147,3,34,12,8,180,195,249,166,6,16,168,150,244,175,1,18,139,4,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,108,82,86,52,101,81,114,52,84,74,53,71,75,88,50,112,77,97,83,56,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,110,101,18,98,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,82,50,80,10,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,110,101,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,175,224,163,6,10,14,10,2,116,111,18,8,82,6,8,192,166,249,164,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,67,66,74,74,105,67,104,83,77,112,113,86,120,103,110,75,113,51,103,75,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,175,224,163,6,10,14,10,2,116,111,18,8,82,6,8,192,166,249,164,6,18,15,10,9,84,111,116,97,108,80,97,105,100,18,2,16,15,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,10,18,27,10,10,108,97,115,116,85,112,100,97,116,101,18,13,82,11,8,196,194,249,166,6,16,128,136,213,68,18,11,10,5,77,111,110,116,111,18,2,16,50,26,12,8,219,178,248,166,6,16,192,234,196,147,3,34,12,8,180,195,249,166,6,16,232,145,183,175,1,26,0]}}"}}
[debug] [2023-08-17T18:06:44.868Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 109.7893ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 109.7893ms"}}
[debug] [2023-08-17T18:06:44.869Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T18:06:44.869Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T18:06:44.869Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T18:06:44.869Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:06:44.885Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:06:44.885Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:06:44.885Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:06:44.885Z"],"workRunningCount":1}
[debug] [2023-08-17T18:06:44.885Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T18:06:44.885Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T18:06:44.885Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T18:06:44.885Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T18:06:44.886Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T18:06:44.887Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"7fa366e0-2df1-414f-b96d-1b055eee029c","subject":"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/Fm5lfv2lTvwLbcHuNYTZ","time":"2023-08-17T18:06:44.869031400Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/3dJExGFTPEJtxm0peFNG/cuota_payments/Fm5lfv2lTvwLbcHuNYTZ","data":{"type":"Buffer","data":[10,220,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,70,109,53,108,102,118,50,108,84,118,119,76,98,99,72,117,78,89,84,90,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,108,121,18,98,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,82,50,80,10,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,108,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,201,254,164,6,10,14,10,2,116,111,18,8,82,6,8,192,227,156,166,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,110,81,74,83,113,119,106,57,48,104,111,49,49,97,117,72,51,55,69,83,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,201,254,164,6,10,14,10,2,116,111,18,8,82,6,8,192,227,156,166,6,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,18,11,10,5,77,111,110,116,111,18,2,16,50,26,11,8,220,178,248,166,6,16,136,184,156,86,34,12,8,180,195,249,166,6,16,144,167,238,176,1,18,220,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,70,109,53,108,102,118,50,108,84,118,119,76,98,99,72,117,78,89,84,90,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,108,121,18,98,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,82,50,80,10,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,108,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,201,254,164,6,10,14,10,2,116,111,18,8,82,6,8,192,227,156,166,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,110,81,74,83,113,119,106,57,48,104,111,49,49,97,117,72,51,55,69,83,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,201,254,164,6,10,14,10,2,116,111,18,8,82,6,8,192,227,156,166,6,18,11,10,5,77,111,110,116,111,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,26,11,8,220,178,248,166,6,16,136,184,156,86,34,12,8,147,194,249,166,6,16,168,158,158,175,1,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"7fa366e0-2df1-414f-b96d-1b055eee029c\",\"subject\":\"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/Fm5lfv2lTvwLbcHuNYTZ\",\"time\":\"2023-08-17T18:06:44.869031400Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/3dJExGFTPEJtxm0peFNG/cuota_payments/Fm5lfv2lTvwLbcHuNYTZ\",\"data\":{\"type\":\"Buffer\",\"data\":[10,220,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,70,109,53,108,102,118,50,108,84,118,119,76,98,99,72,117,78,89,84,90,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,108,121,18,98,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,82,50,80,10,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,108,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,201,254,164,6,10,14,10,2,116,111,18,8,82,6,8,192,227,156,166,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,110,81,74,83,113,119,106,57,48,104,111,49,49,97,117,72,51,55,69,83,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,201,254,164,6,10,14,10,2,116,111,18,8,82,6,8,192,227,156,166,6,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,18,11,10,5,77,111,110,116,111,18,2,16,50,26,11,8,220,178,248,166,6,16,136,184,156,86,34,12,8,180,195,249,166,6,16,144,167,238,176,1,18,220,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,70,109,53,108,102,118,50,108,84,118,119,76,98,99,72,117,78,89,84,90,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,108,121,18,98,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,82,50,80,10,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,108,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,201,254,164,6,10,14,10,2,116,111,18,8,82,6,8,192,227,156,166,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,110,81,74,83,113,119,106,57,48,104,111,49,49,97,117,72,51,55,69,83,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,201,254,164,6,10,14,10,2,116,111,18,8,82,6,8,192,227,156,166,6,18,11,10,5,77,111,110,116,111,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,26,11,8,220,178,248,166,6,16,136,184,156,86,34,12,8,147,194,249,166,6,16,168,158,158,175,1,26,0]}}"}}
[debug] [2023-08-17T18:06:44.887Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 1.5079ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 1.5079ms"}}
[debug] [2023-08-17T18:06:44.887Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T18:06:44.887Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T18:06:44.888Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T18:06:44.888Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:06:44.901Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:06:44.901Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:06:44.901Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:06:44.901Z"],"workRunningCount":1}
[debug] [2023-08-17T18:06:44.901Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T18:06:44.902Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T18:06:44.902Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T18:06:44.902Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T18:06:44.902Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T18:06:44.903Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"1343d093-77c2-41b2-8551-5095fbfd9827","subject":"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/Fm5lfv2lTvwLbcHuNYTZ","time":"2023-08-17T18:06:44.888030800Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/3dJExGFTPEJtxm0peFNG/cuota_payments/Fm5lfv2lTvwLbcHuNYTZ","data":{"type":"Buffer","data":[10,220,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,70,109,53,108,102,118,50,108,84,118,119,76,98,99,72,117,78,89,84,90,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,108,121,18,98,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,82,50,80,10,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,108,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,201,254,164,6,10,14,10,2,116,111,18,8,82,6,8,192,227,156,166,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,110,81,74,83,113,119,106,57,48,104,111,49,49,97,117,72,51,55,69,83,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,201,254,164,6,10,14,10,2,116,111,18,8,82,6,8,192,227,156,166,6,18,11,10,5,77,111,110,116,111,18,2,16,50,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,26,11,8,220,178,248,166,6,16,136,184,156,86,34,12,8,180,195,249,166,6,16,144,176,232,177,1,18,220,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,70,109,53,108,102,118,50,108,84,118,119,76,98,99,72,117,78,89,84,90,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,108,121,18,98,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,82,50,80,10,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,108,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,201,254,164,6,10,14,10,2,116,111,18,8,82,6,8,192,227,156,166,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,110,81,74,83,113,119,106,57,48,104,111,49,49,97,117,72,51,55,69,83,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,201,254,164,6,10,14,10,2,116,111,18,8,82,6,8,192,227,156,166,6,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,18,11,10,5,77,111,110,116,111,18,2,16,50,26,11,8,220,178,248,166,6,16,136,184,156,86,34,12,8,180,195,249,166,6,16,144,167,238,176,1,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"1343d093-77c2-41b2-8551-5095fbfd9827\",\"subject\":\"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/Fm5lfv2lTvwLbcHuNYTZ\",\"time\":\"2023-08-17T18:06:44.888030800Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/3dJExGFTPEJtxm0peFNG/cuota_payments/Fm5lfv2lTvwLbcHuNYTZ\",\"data\":{\"type\":\"Buffer\",\"data\":[10,220,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,70,109,53,108,102,118,50,108,84,118,119,76,98,99,72,117,78,89,84,90,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,108,121,18,98,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,82,50,80,10,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,108,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,201,254,164,6,10,14,10,2,116,111,18,8,82,6,8,192,227,156,166,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,110,81,74,83,113,119,106,57,48,104,111,49,49,97,117,72,51,55,69,83,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,201,254,164,6,10,14,10,2,116,111,18,8,82,6,8,192,227,156,166,6,18,11,10,5,77,111,110,116,111,18,2,16,50,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,26,11,8,220,178,248,166,6,16,136,184,156,86,34,12,8,180,195,249,166,6,16,144,176,232,177,1,18,220,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,70,109,53,108,102,118,50,108,84,118,119,76,98,99,72,117,78,89,84,90,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,108,121,18,98,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,82,50,80,10,16,10,5,65,108,105,97,115,18,7,138,1,4,74,117,108,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,201,254,164,6,10,14,10,2,116,111,18,8,82,6,8,192,227,156,166,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,110,81,74,83,113,119,106,57,48,104,111,49,49,97,117,72,51,55,69,83,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,201,254,164,6,10,14,10,2,116,111,18,8,82,6,8,192,227,156,166,6,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,18,11,10,5,77,111,110,116,111,18,2,16,50,26,11,8,220,178,248,166,6,16,136,184,156,86,34,12,8,180,195,249,166,6,16,144,167,238,176,1,26,0]}}"}}
[debug] [2023-08-17T18:06:44.998Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 96.1868ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 96.1868ms"}}
[debug] [2023-08-17T18:06:44.999Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T18:06:44.999Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T18:06:44.999Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T18:06:44.999Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:06:45.013Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:06:45.013Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:06:45.013Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:06:45.013Z"],"workRunningCount":1}
[debug] [2023-08-17T18:06:45.013Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T18:06:45.013Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T18:06:45.013Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T18:06:45.013Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T18:06:45.014Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T18:06:45.015Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"8015a6d2-bd30-4588-8cea-a18f25c8d63e","subject":"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/NQzYvfDp9jHBZ2G5GrgC","time":"2023-08-17T18:06:44.999031200Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/3dJExGFTPEJtxm0peFNG/cuota_payments/NQzYvfDp9jHBZ2G5GrgC","data":{"type":"Buffer","data":[10,225,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,78,81,122,89,118,102,68,112,57,106,72,66,90,50,71,53,71,114,103,67,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,18,10,5,65,108,105,97,115,18,9,138,1,6,65,117,103,117,115,116,18,100,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,84,50,82,10,18,10,5,65,108,105,97,115,18,9,138,1,6,65,117,103,117,115,116,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,134,162,166,6,10,14,10,2,116,111,18,8,82,6,8,192,160,192,167,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,114,80,119,120,85,117,102,112,79,87,100,105,98,115,108,110,88,56,48,86,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,134,162,166,6,10,14,10,2,116,111,18,8,82,6,8,192,160,192,167,6,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,18,11,10,5,77,111,110,116,111,18,2,16,50,26,12,8,220,178,248,166,6,16,192,199,162,193,2,34,12,8,180,195,249,166,6,16,160,196,165,178,1,18,225,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,78,81,122,89,118,102,68,112,57,106,72,66,90,50,71,53,71,114,103,67,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,18,10,5,65,108,105,97,115,18,9,138,1,6,65,117,103,117,115,116,18,100,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,84,50,82,10,18,10,5,65,108,105,97,115,18,9,138,1,6,65,117,103,117,115,116,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,134,162,166,6,10,14,10,2,116,111,18,8,82,6,8,192,160,192,167,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,114,80,119,120,85,117,102,112,79,87,100,105,98,115,108,110,88,56,48,86,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,134,162,166,6,10,14,10,2,116,111,18,8,82,6,8,192,160,192,167,6,18,11,10,5,77,111,110,116,111,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,26,12,8,220,178,248,166,6,16,192,199,162,193,2,34,12,8,147,194,249,166,6,16,208,179,213,176,1,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"8015a6d2-bd30-4588-8cea-a18f25c8d63e\",\"subject\":\"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/NQzYvfDp9jHBZ2G5GrgC\",\"time\":\"2023-08-17T18:06:44.999031200Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/3dJExGFTPEJtxm0peFNG/cuota_payments/NQzYvfDp9jHBZ2G5GrgC\",\"data\":{\"type\":\"Buffer\",\"data\":[10,225,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,78,81,122,89,118,102,68,112,57,106,72,66,90,50,71,53,71,114,103,67,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,18,10,5,65,108,105,97,115,18,9,138,1,6,65,117,103,117,115,116,18,100,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,84,50,82,10,18,10,5,65,108,105,97,115,18,9,138,1,6,65,117,103,117,115,116,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,134,162,166,6,10,14,10,2,116,111,18,8,82,6,8,192,160,192,167,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,114,80,119,120,85,117,102,112,79,87,100,105,98,115,108,110,88,56,48,86,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,134,162,166,6,10,14,10,2,116,111,18,8,82,6,8,192,160,192,167,6,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,18,11,10,5,77,111,110,116,111,18,2,16,50,26,12,8,220,178,248,166,6,16,192,199,162,193,2,34,12,8,180,195,249,166,6,16,160,196,165,178,1,18,225,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,78,81,122,89,118,102,68,112,57,106,72,66,90,50,71,53,71,114,103,67,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,18,10,5,65,108,105,97,115,18,9,138,1,6,65,117,103,117,115,116,18,100,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,84,50,82,10,18,10,5,65,108,105,97,115,18,9,138,1,6,65,117,103,117,115,116,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,134,162,166,6,10,14,10,2,116,111,18,8,82,6,8,192,160,192,167,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,114,80,119,120,85,117,102,112,79,87,100,105,98,115,108,110,88,56,48,86,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,134,162,166,6,10,14,10,2,116,111,18,8,82,6,8,192,160,192,167,6,18,11,10,5,77,111,110,116,111,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,26,12,8,220,178,248,166,6,16,192,199,162,193,2,34,12,8,147,194,249,166,6,16,208,179,213,176,1,26,0]}}"}}
[debug] [2023-08-17T18:06:45.015Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 1.5466ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 1.5466ms"}}
[debug] [2023-08-17T18:06:45.015Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T18:06:45.015Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T18:06:45.015Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T18:06:45.015Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:06:45.029Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:06:45.029Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:06:45.029Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:06:45.029Z"],"workRunningCount":1}
[debug] [2023-08-17T18:06:45.029Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T18:06:45.029Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T18:06:45.029Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T18:06:45.029Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T18:06:45.029Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T18:06:45.031Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"9263ba88-3780-43e9-8d40-c3536e9d1051","subject":"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/NQzYvfDp9jHBZ2G5GrgC","time":"2023-08-17T18:06:45.016030600Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/3dJExGFTPEJtxm0peFNG/cuota_payments/NQzYvfDp9jHBZ2G5GrgC","data":{"type":"Buffer","data":[10,225,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,78,81,122,89,118,102,68,112,57,106,72,66,90,50,71,53,71,114,103,67,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,18,10,5,65,108,105,97,115,18,9,138,1,6,65,117,103,117,115,116,18,100,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,84,50,82,10,18,10,5,65,108,105,97,115,18,9,138,1,6,65,117,103,117,115,116,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,134,162,166,6,10,14,10,2,116,111,18,8,82,6,8,192,160,192,167,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,114,80,119,120,85,117,102,112,79,87,100,105,98,115,108,110,88,56,48,86,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,134,162,166,6,10,14,10,2,116,111,18,8,82,6,8,192,160,192,167,6,18,11,10,5,77,111,110,116,111,18,2,16,50,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,26,12,8,220,178,248,166,6,16,192,199,162,193,2,34,12,8,180,195,249,166,6,16,224,200,226,178,1,18,225,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,78,81,122,89,118,102,68,112,57,106,72,66,90,50,71,53,71,114,103,67,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,18,10,5,65,108,105,97,115,18,9,138,1,6,65,117,103,117,115,116,18,100,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,84,50,82,10,18,10,5,65,108,105,97,115,18,9,138,1,6,65,117,103,117,115,116,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,134,162,166,6,10,14,10,2,116,111,18,8,82,6,8,192,160,192,167,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,114,80,119,120,85,117,102,112,79,87,100,105,98,115,108,110,88,56,48,86,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,134,162,166,6,10,14,10,2,116,111,18,8,82,6,8,192,160,192,167,6,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,18,11,10,5,77,111,110,116,111,18,2,16,50,26,12,8,220,178,248,166,6,16,192,199,162,193,2,34,12,8,180,195,249,166,6,16,160,196,165,178,1,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"9263ba88-3780-43e9-8d40-c3536e9d1051\",\"subject\":\"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/NQzYvfDp9jHBZ2G5GrgC\",\"time\":\"2023-08-17T18:06:45.016030600Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/3dJExGFTPEJtxm0peFNG/cuota_payments/NQzYvfDp9jHBZ2G5GrgC\",\"data\":{\"type\":\"Buffer\",\"data\":[10,225,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,78,81,122,89,118,102,68,112,57,106,72,66,90,50,71,53,71,114,103,67,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,18,10,5,65,108,105,97,115,18,9,138,1,6,65,117,103,117,115,116,18,100,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,84,50,82,10,18,10,5,65,108,105,97,115,18,9,138,1,6,65,117,103,117,115,116,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,134,162,166,6,10,14,10,2,116,111,18,8,82,6,8,192,160,192,167,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,114,80,119,120,85,117,102,112,79,87,100,105,98,115,108,110,88,56,48,86,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,134,162,166,6,10,14,10,2,116,111,18,8,82,6,8,192,160,192,167,6,18,11,10,5,77,111,110,116,111,18,2,16,50,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,26,12,8,220,178,248,166,6,16,192,199,162,193,2,34,12,8,180,195,249,166,6,16,224,200,226,178,1,18,225,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,78,81,122,89,118,102,68,112,57,106,72,66,90,50,71,53,71,114,103,67,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,18,10,5,65,108,105,97,115,18,9,138,1,6,65,117,103,117,115,116,18,100,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,84,50,82,10,18,10,5,65,108,105,97,115,18,9,138,1,6,65,117,103,117,115,116,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,134,162,166,6,10,14,10,2,116,111,18,8,82,6,8,192,160,192,167,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,114,80,119,120,85,117,102,112,79,87,100,105,98,115,108,110,88,56,48,86,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,134,162,166,6,10,14,10,2,116,111,18,8,82,6,8,192,160,192,167,6,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,18,11,10,5,77,111,110,116,111,18,2,16,50,26,12,8,220,178,248,166,6,16,192,199,162,193,2,34,12,8,180,195,249,166,6,16,160,196,165,178,1,26,0]}}"}}
[debug] [2023-08-17T18:06:45.132Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 102.835ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 102.835ms"}}
[debug] [2023-08-17T18:06:45.133Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T18:06:45.133Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T18:06:45.133Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T18:06:45.133Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:06:45.139Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:06:45.139Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:06:45.140Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:06:45.139Z"],"workRunningCount":1}
[debug] [2023-08-17T18:06:45.140Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T18:06:45.140Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T18:06:45.140Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T18:06:45.140Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T18:06:45.141Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T18:06:45.142Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"1f1ec648-d9b4-4df5-98c2-9d83767cf502","subject":"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/9ySA6jANvJJ2noM4L0Yu","time":"2023-08-17T18:06:45.133030800Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/3dJExGFTPEJtxm0peFNG/cuota_payments/9ySA6jANvJJ2noM4L0Yu","data":{"type":"Buffer","data":[10,231,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,57,121,83,65,54,106,65,78,118,74,74,50,110,111,77,52,76,48,89,117,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,21,10,5,65,108,105,97,115,18,12,138,1,9,83,101,112,116,101,109,98,101,114,18,103,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,87,50,85,10,21,10,5,65,108,105,97,115,18,12,138,1,9,83,101,112,116,101,109,98,101,114,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,195,197,167,6,10,14,10,2,116,111,18,8,82,6,8,192,186,222,168,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,101,110,48,106,76,82,79,119,111,116,74,113,85,83,56,101,71,75,109,120,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,195,197,167,6,10,14,10,2,116,111,18,8,82,6,8,192,186,222,168,6,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,18,11,10,5,77,111,110,116,111,18,2,16,50,26,12,8,219,178,248,166,6,16,176,167,147,176,3,34,12,8,180,195,249,166,6,16,248,201,220,179,1,18,231,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,57,121,83,65,54,106,65,78,118,74,74,50,110,111,77,52,76,48,89,117,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,21,10,5,65,108,105,97,115,18,12,138,1,9,83,101,112,116,101,109,98,101,114,18,103,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,87,50,85,10,21,10,5,65,108,105,97,115,18,12,138,1,9,83,101,112,116,101,109,98,101,114,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,195,197,167,6,10,14,10,2,116,111,18,8,82,6,8,192,186,222,168,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,101,110,48,106,76,82,79,119,111,116,74,113,85,83,56,101,71,75,109,120,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,195,197,167,6,10,14,10,2,116,111,18,8,82,6,8,192,186,222,168,6,18,11,10,5,77,111,110,116,111,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,26,12,8,219,178,248,166,6,16,176,167,147,176,3,34,12,8,147,194,249,166,6,16,176,224,140,178,1,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"1f1ec648-d9b4-4df5-98c2-9d83767cf502\",\"subject\":\"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/9ySA6jANvJJ2noM4L0Yu\",\"time\":\"2023-08-17T18:06:45.133030800Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/3dJExGFTPEJtxm0peFNG/cuota_payments/9ySA6jANvJJ2noM4L0Yu\",\"data\":{\"type\":\"Buffer\",\"data\":[10,231,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,57,121,83,65,54,106,65,78,118,74,74,50,110,111,77,52,76,48,89,117,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,21,10,5,65,108,105,97,115,18,12,138,1,9,83,101,112,116,101,109,98,101,114,18,103,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,87,50,85,10,21,10,5,65,108,105,97,115,18,12,138,1,9,83,101,112,116,101,109,98,101,114,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,195,197,167,6,10,14,10,2,116,111,18,8,82,6,8,192,186,222,168,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,101,110,48,106,76,82,79,119,111,116,74,113,85,83,56,101,71,75,109,120,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,195,197,167,6,10,14,10,2,116,111,18,8,82,6,8,192,186,222,168,6,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,18,11,10,5,77,111,110,116,111,18,2,16,50,26,12,8,219,178,248,166,6,16,176,167,147,176,3,34,12,8,180,195,249,166,6,16,248,201,220,179,1,18,231,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,57,121,83,65,54,106,65,78,118,74,74,50,110,111,77,52,76,48,89,117,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,21,10,5,65,108,105,97,115,18,12,138,1,9,83,101,112,116,101,109,98,101,114,18,103,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,87,50,85,10,21,10,5,65,108,105,97,115,18,12,138,1,9,83,101,112,116,101,109,98,101,114,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,195,197,167,6,10,14,10,2,116,111,18,8,82,6,8,192,186,222,168,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,101,110,48,106,76,82,79,119,111,116,74,113,85,83,56,101,71,75,109,120,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,195,197,167,6,10,14,10,2,116,111,18,8,82,6,8,192,186,222,168,6,18,11,10,5,77,111,110,116,111,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,26,12,8,219,178,248,166,6,16,176,167,147,176,3,34,12,8,147,194,249,166,6,16,176,224,140,178,1,26,0]}}"}}
[debug] [2023-08-17T18:06:45.143Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 2.0403ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 2.0403ms"}}
[debug] [2023-08-17T18:06:45.143Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T18:06:45.143Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T18:06:45.143Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T18:06:45.143Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:06:45.156Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:06:45.156Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:06:45.156Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:06:45.156Z"],"workRunningCount":1}
[debug] [2023-08-17T18:06:45.156Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T18:06:45.156Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T18:06:45.156Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T18:06:45.156Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T18:06:45.157Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T18:06:45.158Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"eb275d36-2123-4f61-a0b4-1a88508dd0ba","subject":"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/9ySA6jANvJJ2noM4L0Yu","time":"2023-08-17T18:06:45.144031200Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/3dJExGFTPEJtxm0peFNG/cuota_payments/9ySA6jANvJJ2noM4L0Yu","data":{"type":"Buffer","data":[10,231,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,57,121,83,65,54,106,65,78,118,74,74,50,110,111,77,52,76,48,89,117,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,21,10,5,65,108,105,97,115,18,12,138,1,9,83,101,112,116,101,109,98,101,114,18,103,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,87,50,85,10,21,10,5,65,108,105,97,115,18,12,138,1,9,83,101,112,116,101,109,98,101,114,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,195,197,167,6,10,14,10,2,116,111,18,8,82,6,8,192,186,222,168,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,101,110,48,106,76,82,79,119,111,116,74,113,85,83,56,101,71,75,109,120,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,195,197,167,6,10,14,10,2,116,111,18,8,82,6,8,192,186,222,168,6,18,11,10,5,77,111,110,116,111,18,2,16,50,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,26,12,8,219,178,248,166,6,16,176,167,147,176,3,34,12,8,180,195,249,166,6,16,200,226,214,180,1,18,231,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,57,121,83,65,54,106,65,78,118,74,74,50,110,111,77,52,76,48,89,117,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,21,10,5,65,108,105,97,115,18,12,138,1,9,83,101,112,116,101,109,98,101,114,18,103,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,87,50,85,10,21,10,5,65,108,105,97,115,18,12,138,1,9,83,101,112,116,101,109,98,101,114,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,195,197,167,6,10,14,10,2,116,111,18,8,82,6,8,192,186,222,168,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,101,110,48,106,76,82,79,119,111,116,74,113,85,83,56,101,71,75,109,120,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,195,197,167,6,10,14,10,2,116,111,18,8,82,6,8,192,186,222,168,6,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,18,11,10,5,77,111,110,116,111,18,2,16,50,26,12,8,219,178,248,166,6,16,176,167,147,176,3,34,12,8,180,195,249,166,6,16,248,201,220,179,1,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"eb275d36-2123-4f61-a0b4-1a88508dd0ba\",\"subject\":\"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/9ySA6jANvJJ2noM4L0Yu\",\"time\":\"2023-08-17T18:06:45.144031200Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/3dJExGFTPEJtxm0peFNG/cuota_payments/9ySA6jANvJJ2noM4L0Yu\",\"data\":{\"type\":\"Buffer\",\"data\":[10,231,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,57,121,83,65,54,106,65,78,118,74,74,50,110,111,77,52,76,48,89,117,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,21,10,5,65,108,105,97,115,18,12,138,1,9,83,101,112,116,101,109,98,101,114,18,103,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,87,50,85,10,21,10,5,65,108,105,97,115,18,12,138,1,9,83,101,112,116,101,109,98,101,114,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,195,197,167,6,10,14,10,2,116,111,18,8,82,6,8,192,186,222,168,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,101,110,48,106,76,82,79,119,111,116,74,113,85,83,56,101,71,75,109,120,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,195,197,167,6,10,14,10,2,116,111,18,8,82,6,8,192,186,222,168,6,18,11,10,5,77,111,110,116,111,18,2,16,50,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,26,12,8,219,178,248,166,6,16,176,167,147,176,3,34,12,8,180,195,249,166,6,16,200,226,214,180,1,18,231,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,57,121,83,65,54,106,65,78,118,74,74,50,110,111,77,52,76,48,89,117,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,21,10,5,65,108,105,97,115,18,12,138,1,9,83,101,112,116,101,109,98,101,114,18,103,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,87,50,85,10,21,10,5,65,108,105,97,115,18,12,138,1,9,83,101,112,116,101,109,98,101,114,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,195,197,167,6,10,14,10,2,116,111,18,8,82,6,8,192,186,222,168,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,101,110,48,106,76,82,79,119,111,116,74,113,85,83,56,101,71,75,109,120,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,195,197,167,6,10,14,10,2,116,111,18,8,82,6,8,192,186,222,168,6,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,18,11,10,5,77,111,110,116,111,18,2,16,50,26,12,8,219,178,248,166,6,16,176,167,147,176,3,34,12,8,180,195,249,166,6,16,248,201,220,179,1,26,0]}}"}}
[debug] [2023-08-17T18:06:45.267Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 110.1659ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 110.1659ms"}}
[debug] [2023-08-17T18:06:45.267Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T18:06:45.267Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T18:06:45.267Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T18:06:45.267Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:06:45.270Z] Aug 17, 2023 2:06:45 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:06:45 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:06:45.272Z] Aug 17, 2023 2:06:45 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:06:45 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T18:06:45.283Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:06:45.283Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:06:45.284Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:06:45.283Z"],"workRunningCount":1}
[debug] [2023-08-17T18:06:45.284Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T18:06:45.284Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T18:06:45.284Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T18:06:45.284Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T18:06:45.284Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T18:06:45.285Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"f1ca7c83-4836-4b1b-9710-a04f6b982636","subject":"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/qbL13FYVliP4cUxbBNSX","time":"2023-08-17T18:06:45.267030Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/3dJExGFTPEJtxm0peFNG/cuota_payments/qbL13FYVliP4cUxbBNSX","data":{"type":"Buffer","data":[10,227,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,113,98,76,49,51,70,89,86,108,105,80,52,99,85,120,98,66,78,83,88,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,19,10,5,65,108,105,97,115,18,10,138,1,7,79,99,116,111,98,101,114,18,101,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,85,50,83,10,19,10,5,65,108,105,97,115,18,10,138,1,7,79,99,116,111,98,101,114,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,221,227,168,6,10,14,10,2,116,111,18,8,82,6,8,192,247,129,170,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,68,108,101,52,102,116,81,114,54,80,101,67,103,70,99,50,105,81,74,117,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,221,227,168,6,10,14,10,2,116,111,18,8,82,6,8,192,247,129,170,6,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,18,11,10,5,77,111,110,116,111,18,2,16,50,26,12,8,220,178,248,166,6,16,216,235,232,137,2,34,12,8,180,195,249,166,6,16,224,227,208,181,1,18,227,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,113,98,76,49,51,70,89,86,108,105,80,52,99,85,120,98,66,78,83,88,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,19,10,5,65,108,105,97,115,18,10,138,1,7,79,99,116,111,98,101,114,18,101,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,85,50,83,10,19,10,5,65,108,105,97,115,18,10,138,1,7,79,99,116,111,98,101,114,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,221,227,168,6,10,14,10,2,116,111,18,8,82,6,8,192,247,129,170,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,68,108,101,52,102,116,81,114,54,80,101,67,103,70,99,50,105,81,74,117,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,221,227,168,6,10,14,10,2,116,111,18,8,82,6,8,192,247,129,170,6,18,11,10,5,77,111,110,116,111,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,26,12,8,220,178,248,166,6,16,216,235,232,137,2,34,12,8,147,194,249,166,6,16,184,214,195,179,1,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"f1ca7c83-4836-4b1b-9710-a04f6b982636\",\"subject\":\"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/qbL13FYVliP4cUxbBNSX\",\"time\":\"2023-08-17T18:06:45.267030Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/3dJExGFTPEJtxm0peFNG/cuota_payments/qbL13FYVliP4cUxbBNSX\",\"data\":{\"type\":\"Buffer\",\"data\":[10,227,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,113,98,76,49,51,70,89,86,108,105,80,52,99,85,120,98,66,78,83,88,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,19,10,5,65,108,105,97,115,18,10,138,1,7,79,99,116,111,98,101,114,18,101,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,85,50,83,10,19,10,5,65,108,105,97,115,18,10,138,1,7,79,99,116,111,98,101,114,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,221,227,168,6,10,14,10,2,116,111,18,8,82,6,8,192,247,129,170,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,68,108,101,52,102,116,81,114,54,80,101,67,103,70,99,50,105,81,74,117,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,221,227,168,6,10,14,10,2,116,111,18,8,82,6,8,192,247,129,170,6,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,18,11,10,5,77,111,110,116,111,18,2,16,50,26,12,8,220,178,248,166,6,16,216,235,232,137,2,34,12,8,180,195,249,166,6,16,224,227,208,181,1,18,227,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,113,98,76,49,51,70,89,86,108,105,80,52,99,85,120,98,66,78,83,88,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,19,10,5,65,108,105,97,115,18,10,138,1,7,79,99,116,111,98,101,114,18,101,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,85,50,83,10,19,10,5,65,108,105,97,115,18,10,138,1,7,79,99,116,111,98,101,114,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,221,227,168,6,10,14,10,2,116,111,18,8,82,6,8,192,247,129,170,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,68,108,101,52,102,116,81,114,54,80,101,67,103,70,99,50,105,81,74,117,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,221,227,168,6,10,14,10,2,116,111,18,8,82,6,8,192,247,129,170,6,18,11,10,5,77,111,110,116,111,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,26,12,8,220,178,248,166,6,16,216,235,232,137,2,34,12,8,147,194,249,166,6,16,184,214,195,179,1,26,0]}}"}}
[debug] [2023-08-17T18:06:45.286Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 1.4009ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 1.4009ms"}}
[debug] [2023-08-17T18:06:45.286Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T18:06:45.286Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T18:06:45.286Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T18:06:45.286Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:06:45.300Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:06:45.300Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:06:45.300Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:06:45.300Z"],"workRunningCount":1}
[debug] [2023-08-17T18:06:45.300Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T18:06:45.300Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T18:06:45.300Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T18:06:45.300Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T18:06:45.301Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T18:06:45.302Z] Aug 17, 2023 2:06:45 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:06:45 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:06:45.302Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"0b4e21a9-03af-411c-a2d9-42417446f118","subject":"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/qbL13FYVliP4cUxbBNSX","time":"2023-08-17T18:06:45.287030600Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/3dJExGFTPEJtxm0peFNG/cuota_payments/qbL13FYVliP4cUxbBNSX","data":{"type":"Buffer","data":[10,227,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,113,98,76,49,51,70,89,86,108,105,80,52,99,85,120,98,66,78,83,88,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,19,10,5,65,108,105,97,115,18,10,138,1,7,79,99,116,111,98,101,114,18,101,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,85,50,83,10,19,10,5,65,108,105,97,115,18,10,138,1,7,79,99,116,111,98,101,114,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,221,227,168,6,10,14,10,2,116,111,18,8,82,6,8,192,247,129,170,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,68,108,101,52,102,116,81,114,54,80,101,67,103,70,99,50,105,81,74,117,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,221,227,168,6,10,14,10,2,116,111,18,8,82,6,8,192,247,129,170,6,18,11,10,5,77,111,110,116,111,18,2,16,50,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,26,12,8,220,178,248,166,6,16,216,235,232,137,2,34,12,8,180,195,249,166,6,16,224,236,202,182,1,18,227,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,113,98,76,49,51,70,89,86,108,105,80,52,99,85,120,98,66,78,83,88,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,19,10,5,65,108,105,97,115,18,10,138,1,7,79,99,116,111,98,101,114,18,101,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,85,50,83,10,19,10,5,65,108,105,97,115,18,10,138,1,7,79,99,116,111,98,101,114,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,221,227,168,6,10,14,10,2,116,111,18,8,82,6,8,192,247,129,170,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,68,108,101,52,102,116,81,114,54,80,101,67,103,70,99,50,105,81,74,117,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,221,227,168,6,10,14,10,2,116,111,18,8,82,6,8,192,247,129,170,6,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,18,11,10,5,77,111,110,116,111,18,2,16,50,26,12,8,220,178,248,166,6,16,216,235,232,137,2,34,12,8,180,195,249,166,6,16,224,227,208,181,1,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"0b4e21a9-03af-411c-a2d9-42417446f118\",\"subject\":\"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/qbL13FYVliP4cUxbBNSX\",\"time\":\"2023-08-17T18:06:45.287030600Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/3dJExGFTPEJtxm0peFNG/cuota_payments/qbL13FYVliP4cUxbBNSX\",\"data\":{\"type\":\"Buffer\",\"data\":[10,227,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,113,98,76,49,51,70,89,86,108,105,80,52,99,85,120,98,66,78,83,88,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,19,10,5,65,108,105,97,115,18,10,138,1,7,79,99,116,111,98,101,114,18,101,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,85,50,83,10,19,10,5,65,108,105,97,115,18,10,138,1,7,79,99,116,111,98,101,114,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,221,227,168,6,10,14,10,2,116,111,18,8,82,6,8,192,247,129,170,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,68,108,101,52,102,116,81,114,54,80,101,67,103,70,99,50,105,81,74,117,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,221,227,168,6,10,14,10,2,116,111,18,8,82,6,8,192,247,129,170,6,18,11,10,5,77,111,110,116,111,18,2,16,50,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,26,12,8,220,178,248,166,6,16,216,235,232,137,2,34,12,8,180,195,249,166,6,16,224,236,202,182,1,18,227,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,113,98,76,49,51,70,89,86,108,105,80,52,99,85,120,98,66,78,83,88,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,19,10,5,65,108,105,97,115,18,10,138,1,7,79,99,116,111,98,101,114,18,101,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,85,50,83,10,19,10,5,65,108,105,97,115,18,10,138,1,7,79,99,116,111,98,101,114,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,221,227,168,6,10,14,10,2,116,111,18,8,82,6,8,192,247,129,170,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,68,108,101,52,102,116,81,114,54,80,101,67,103,70,99,50,105,81,74,117,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,221,227,168,6,10,14,10,2,116,111,18,8,82,6,8,192,247,129,170,6,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,18,11,10,5,77,111,110,116,111,18,2,16,50,26,12,8,220,178,248,166,6,16,216,235,232,137,2,34,12,8,180,195,249,166,6,16,224,227,208,181,1,26,0]}}"}}
[debug] [2023-08-17T18:06:45.402Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 101.6687ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 101.6687ms"}}
[debug] [2023-08-17T18:06:45.403Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T18:06:45.403Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T18:06:45.403Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T18:06:45.403Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:06:45.412Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:06:45.412Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:06:45.412Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:06:45.412Z"],"workRunningCount":1}
[debug] [2023-08-17T18:06:45.412Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T18:06:45.412Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T18:06:45.412Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T18:06:45.412Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T18:06:45.413Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T18:06:45.414Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"a7c0f3b3-befb-4b09-9047-c82d81f8886f","subject":"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/GQGKz7ulbaPu5h7lFHhC","time":"2023-08-17T18:06:45.403030500Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/3dJExGFTPEJtxm0peFNG/cuota_payments/GQGKz7ulbaPu5h7lFHhC","data":{"type":"Buffer","data":[10,229,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,71,81,71,75,122,55,117,108,98,97,80,117,53,104,55,108,70,72,104,67,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,20,10,5,65,108,105,97,115,18,11,138,1,8,78,111,118,101,109,98,101,114,18,102,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,86,50,84,10,20,10,5,65,108,105,97,115,18,11,138,1,8,78,111,118,101,109,98,101,114,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,154,135,170,6,10,14,10,2,116,111,18,8,82,6,8,192,145,160,171,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,80,86,78,57,120,84,117,83,87,74,67,107,67,81,78,89,119,110,103,56,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,154,135,170,6,10,14,10,2,116,111,18,8,82,6,8,192,145,160,171,6,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,18,11,10,5,77,111,110,116,111,18,2,16,50,26,12,8,219,178,248,166,6,16,248,144,223,220,3,34,12,8,180,195,249,166,6,16,240,198,196,183,1,18,229,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,71,81,71,75,122,55,117,108,98,97,80,117,53,104,55,108,70,72,104,67,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,20,10,5,65,108,105,97,115,18,11,138,1,8,78,111,118,101,109,98,101,114,18,102,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,86,50,84,10,20,10,5,65,108,105,97,115,18,11,138,1,8,78,111,118,101,109,98,101,114,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,154,135,170,6,10,14,10,2,116,111,18,8,82,6,8,192,145,160,171,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,80,86,78,57,120,84,117,83,87,74,67,107,67,81,78,89,119,110,103,56,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,154,135,170,6,10,14,10,2,116,111,18,8,82,6,8,192,145,160,171,6,18,11,10,5,77,111,110,116,111,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,26,12,8,219,178,248,166,6,16,248,144,223,220,3,34,12,8,147,194,249,166,6,16,144,220,250,180,1,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"a7c0f3b3-befb-4b09-9047-c82d81f8886f\",\"subject\":\"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/GQGKz7ulbaPu5h7lFHhC\",\"time\":\"2023-08-17T18:06:45.403030500Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/3dJExGFTPEJtxm0peFNG/cuota_payments/GQGKz7ulbaPu5h7lFHhC\",\"data\":{\"type\":\"Buffer\",\"data\":[10,229,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,71,81,71,75,122,55,117,108,98,97,80,117,53,104,55,108,70,72,104,67,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,20,10,5,65,108,105,97,115,18,11,138,1,8,78,111,118,101,109,98,101,114,18,102,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,86,50,84,10,20,10,5,65,108,105,97,115,18,11,138,1,8,78,111,118,101,109,98,101,114,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,154,135,170,6,10,14,10,2,116,111,18,8,82,6,8,192,145,160,171,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,80,86,78,57,120,84,117,83,87,74,67,107,67,81,78,89,119,110,103,56,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,154,135,170,6,10,14,10,2,116,111,18,8,82,6,8,192,145,160,171,6,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,18,11,10,5,77,111,110,116,111,18,2,16,50,26,12,8,219,178,248,166,6,16,248,144,223,220,3,34,12,8,180,195,249,166,6,16,240,198,196,183,1,18,229,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,71,81,71,75,122,55,117,108,98,97,80,117,53,104,55,108,70,72,104,67,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,20,10,5,65,108,105,97,115,18,11,138,1,8,78,111,118,101,109,98,101,114,18,102,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,86,50,84,10,20,10,5,65,108,105,97,115,18,11,138,1,8,78,111,118,101,109,98,101,114,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,154,135,170,6,10,14,10,2,116,111,18,8,82,6,8,192,145,160,171,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,80,86,78,57,120,84,117,83,87,74,67,107,67,81,78,89,119,110,103,56,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,154,135,170,6,10,14,10,2,116,111,18,8,82,6,8,192,145,160,171,6,18,11,10,5,77,111,110,116,111,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,26,12,8,219,178,248,166,6,16,248,144,223,220,3,34,12,8,147,194,249,166,6,16,144,220,250,180,1,26,0]}}"}}
[debug] [2023-08-17T18:06:45.414Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 1.6481ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 1.6481ms"}}
[debug] [2023-08-17T18:06:45.415Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T18:06:45.415Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T18:06:45.415Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T18:06:45.415Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:06:45.428Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:06:45.428Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:06:45.428Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:06:45.428Z"],"workRunningCount":1}
[debug] [2023-08-17T18:06:45.428Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T18:06:45.428Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T18:06:45.428Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T18:06:45.428Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T18:06:45.429Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T18:06:45.430Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"8c13add7-089b-446c-a45e-b7d160951fcc","subject":"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/GQGKz7ulbaPu5h7lFHhC","time":"2023-08-17T18:06:45.415033300Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/3dJExGFTPEJtxm0peFNG/cuota_payments/GQGKz7ulbaPu5h7lFHhC","data":{"type":"Buffer","data":[10,229,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,71,81,71,75,122,55,117,108,98,97,80,117,53,104,55,108,70,72,104,67,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,20,10,5,65,108,105,97,115,18,11,138,1,8,78,111,118,101,109,98,101,114,18,102,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,86,50,84,10,20,10,5,65,108,105,97,115,18,11,138,1,8,78,111,118,101,109,98,101,114,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,154,135,170,6,10,14,10,2,116,111,18,8,82,6,8,192,145,160,171,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,80,86,78,57,120,84,117,83,87,74,67,107,67,81,78,89,119,110,103,56,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,154,135,170,6,10,14,10,2,116,111,18,8,82,6,8,192,145,160,171,6,18,11,10,5,77,111,110,116,111,18,2,16,50,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,26,12,8,219,178,248,166,6,16,248,144,223,220,3,34,12,8,180,195,249,166,6,16,208,234,129,184,1,18,229,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,71,81,71,75,122,55,117,108,98,97,80,117,53,104,55,108,70,72,104,67,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,20,10,5,65,108,105,97,115,18,11,138,1,8,78,111,118,101,109,98,101,114,18,102,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,86,50,84,10,20,10,5,65,108,105,97,115,18,11,138,1,8,78,111,118,101,109,98,101,114,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,154,135,170,6,10,14,10,2,116,111,18,8,82,6,8,192,145,160,171,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,80,86,78,57,120,84,117,83,87,74,67,107,67,81,78,89,119,110,103,56,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,154,135,170,6,10,14,10,2,116,111,18,8,82,6,8,192,145,160,171,6,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,18,11,10,5,77,111,110,116,111,18,2,16,50,26,12,8,219,178,248,166,6,16,248,144,223,220,3,34,12,8,180,195,249,166,6,16,240,198,196,183,1,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"8c13add7-089b-446c-a45e-b7d160951fcc\",\"subject\":\"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/GQGKz7ulbaPu5h7lFHhC\",\"time\":\"2023-08-17T18:06:45.415033300Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/3dJExGFTPEJtxm0peFNG/cuota_payments/GQGKz7ulbaPu5h7lFHhC\",\"data\":{\"type\":\"Buffer\",\"data\":[10,229,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,71,81,71,75,122,55,117,108,98,97,80,117,53,104,55,108,70,72,104,67,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,20,10,5,65,108,105,97,115,18,11,138,1,8,78,111,118,101,109,98,101,114,18,102,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,86,50,84,10,20,10,5,65,108,105,97,115,18,11,138,1,8,78,111,118,101,109,98,101,114,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,154,135,170,6,10,14,10,2,116,111,18,8,82,6,8,192,145,160,171,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,80,86,78,57,120,84,117,83,87,74,67,107,67,81,78,89,119,110,103,56,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,154,135,170,6,10,14,10,2,116,111,18,8,82,6,8,192,145,160,171,6,18,11,10,5,77,111,110,116,111,18,2,16,50,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,26,12,8,219,178,248,166,6,16,248,144,223,220,3,34,12,8,180,195,249,166,6,16,208,234,129,184,1,18,229,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,71,81,71,75,122,55,117,108,98,97,80,117,53,104,55,108,70,72,104,67,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,20,10,5,65,108,105,97,115,18,11,138,1,8,78,111,118,101,109,98,101,114,18,102,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,86,50,84,10,20,10,5,65,108,105,97,115,18,11,138,1,8,78,111,118,101,109,98,101,114,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,154,135,170,6,10,14,10,2,116,111,18,8,82,6,8,192,145,160,171,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,80,86,78,57,120,84,117,83,87,74,67,107,67,81,78,89,119,110,103,56,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,154,135,170,6,10,14,10,2,116,111,18,8,82,6,8,192,145,160,171,6,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,18,11,10,5,77,111,110,116,111,18,2,16,50,26,12,8,219,178,248,166,6,16,248,144,223,220,3,34,12,8,180,195,249,166,6,16,240,198,196,183,1,26,0]}}"}}
[debug] [2023-08-17T18:06:45.534Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 104.9103ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 104.9103ms"}}
[debug] [2023-08-17T18:06:45.534Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T18:06:45.534Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T18:06:45.534Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T18:06:45.534Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:06:45.539Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:06:45.539Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:06:45.539Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:06:45.539Z"],"workRunningCount":1}
[debug] [2023-08-17T18:06:45.540Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T18:06:45.540Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T18:06:45.540Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T18:06:45.540Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T18:06:45.541Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T18:06:45.542Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"610322da-2771-4d80-8b1e-fd0d803d2875","subject":"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/c9Ryz4SA3WCQHNRULlvE","time":"2023-08-17T18:06:45.534030700Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/3dJExGFTPEJtxm0peFNG/cuota_payments/c9Ryz4SA3WCQHNRULlvE","data":{"type":"Buffer","data":[10,229,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,99,57,82,121,122,52,83,65,51,87,67,81,72,78,82,85,76,108,118,69,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,20,10,5,65,108,105,97,115,18,11,138,1,8,68,101,99,101,109,98,101,114,18,102,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,86,50,84,10,20,10,5,65,108,105,97,115,18,11,138,1,8,68,101,99,101,109,98,101,114,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,180,165,171,6,10,14,10,2,116,111,18,8,82,6,8,192,206,195,172,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,104,70,72,104,65,112,102,81,116,121,73,57,73,55,81,82,85,55,74,48,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,180,165,171,6,10,14,10,2,116,111,18,8,82,6,8,192,206,195,172,6,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,18,11,10,5,77,111,110,116,111,18,2,16,50,26,12,8,220,178,248,166,6,16,208,234,224,194,1,34,12,8,180,195,249,166,6,16,232,235,251,184,1,18,229,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,99,57,82,121,122,52,83,65,51,87,67,81,72,78,82,85,76,108,118,69,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,20,10,5,65,108,105,97,115,18,11,138,1,8,68,101,99,101,109,98,101,114,18,102,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,86,50,84,10,20,10,5,65,108,105,97,115,18,11,138,1,8,68,101,99,101,109,98,101,114,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,180,165,171,6,10,14,10,2,116,111,18,8,82,6,8,192,206,195,172,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,104,70,72,104,65,112,102,81,116,121,73,57,73,55,81,82,85,55,74,48,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,180,165,171,6,10,14,10,2,116,111,18,8,82,6,8,192,206,195,172,6,18,11,10,5,77,111,110,116,111,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,26,12,8,220,178,248,166,6,16,208,234,224,194,1,34,12,8,147,194,249,166,6,16,160,249,177,182,1,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"610322da-2771-4d80-8b1e-fd0d803d2875\",\"subject\":\"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/c9Ryz4SA3WCQHNRULlvE\",\"time\":\"2023-08-17T18:06:45.534030700Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/3dJExGFTPEJtxm0peFNG/cuota_payments/c9Ryz4SA3WCQHNRULlvE\",\"data\":{\"type\":\"Buffer\",\"data\":[10,229,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,99,57,82,121,122,52,83,65,51,87,67,81,72,78,82,85,76,108,118,69,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,20,10,5,65,108,105,97,115,18,11,138,1,8,68,101,99,101,109,98,101,114,18,102,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,86,50,84,10,20,10,5,65,108,105,97,115,18,11,138,1,8,68,101,99,101,109,98,101,114,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,180,165,171,6,10,14,10,2,116,111,18,8,82,6,8,192,206,195,172,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,104,70,72,104,65,112,102,81,116,121,73,57,73,55,81,82,85,55,74,48,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,180,165,171,6,10,14,10,2,116,111,18,8,82,6,8,192,206,195,172,6,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,18,11,10,5,77,111,110,116,111,18,2,16,50,26,12,8,220,178,248,166,6,16,208,234,224,194,1,34,12,8,180,195,249,166,6,16,232,235,251,184,1,18,229,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,99,57,82,121,122,52,83,65,51,87,67,81,72,78,82,85,76,108,118,69,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,20,10,5,65,108,105,97,115,18,11,138,1,8,68,101,99,101,109,98,101,114,18,102,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,86,50,84,10,20,10,5,65,108,105,97,115,18,11,138,1,8,68,101,99,101,109,98,101,114,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,180,165,171,6,10,14,10,2,116,111,18,8,82,6,8,192,206,195,172,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,104,70,72,104,65,112,102,81,116,121,73,57,73,55,81,82,85,55,74,48,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,180,165,171,6,10,14,10,2,116,111,18,8,82,6,8,192,206,195,172,6,18,11,10,5,77,111,110,116,111,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,26,12,8,220,178,248,166,6,16,208,234,224,194,1,34,12,8,147,194,249,166,6,16,160,249,177,182,1,26,0]}}"}}
[debug] [2023-08-17T18:06:45.542Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 1.6434ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 1.6434ms"}}
[debug] [2023-08-17T18:06:45.543Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T18:06:45.543Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T18:06:45.543Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T18:06:45.543Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:06:45.556Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:06:45.556Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:06:45.556Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:06:45.556Z"],"workRunningCount":1}
[debug] [2023-08-17T18:06:45.556Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T18:06:45.556Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T18:06:45.556Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T18:06:45.557Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T18:06:45.557Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T18:06:45.559Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"030894ed-1e8a-4535-ba48-6ed9741a2d73","subject":"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/c9Ryz4SA3WCQHNRULlvE","time":"2023-08-17T18:06:45.543033700Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/3dJExGFTPEJtxm0peFNG/cuota_payments/c9Ryz4SA3WCQHNRULlvE","data":{"type":"Buffer","data":[10,229,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,99,57,82,121,122,52,83,65,51,87,67,81,72,78,82,85,76,108,118,69,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,20,10,5,65,108,105,97,115,18,11,138,1,8,68,101,99,101,109,98,101,114,18,102,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,86,50,84,10,20,10,5,65,108,105,97,115,18,11,138,1,8,68,101,99,101,109,98,101,114,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,180,165,171,6,10,14,10,2,116,111,18,8,82,6,8,192,206,195,172,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,104,70,72,104,65,112,102,81,116,121,73,57,73,55,81,82,85,55,74,48,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,180,165,171,6,10,14,10,2,116,111,18,8,82,6,8,192,206,195,172,6,18,11,10,5,77,111,110,116,111,18,2,16,50,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,26,12,8,220,178,248,166,6,16,208,234,224,194,1,34,12,8,180,195,249,166,6,16,248,255,184,185,1,18,229,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,99,57,82,121,122,52,83,65,51,87,67,81,72,78,82,85,76,108,118,69,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,20,10,5,65,108,105,97,115,18,11,138,1,8,68,101,99,101,109,98,101,114,18,102,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,86,50,84,10,20,10,5,65,108,105,97,115,18,11,138,1,8,68,101,99,101,109,98,101,114,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,180,165,171,6,10,14,10,2,116,111,18,8,82,6,8,192,206,195,172,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,104,70,72,104,65,112,102,81,116,121,73,57,73,55,81,82,85,55,74,48,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,180,165,171,6,10,14,10,2,116,111,18,8,82,6,8,192,206,195,172,6,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,18,11,10,5,77,111,110,116,111,18,2,16,50,26,12,8,220,178,248,166,6,16,208,234,224,194,1,34,12,8,180,195,249,166,6,16,232,235,251,184,1,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"030894ed-1e8a-4535-ba48-6ed9741a2d73\",\"subject\":\"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/c9Ryz4SA3WCQHNRULlvE\",\"time\":\"2023-08-17T18:06:45.543033700Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/3dJExGFTPEJtxm0peFNG/cuota_payments/c9Ryz4SA3WCQHNRULlvE\",\"data\":{\"type\":\"Buffer\",\"data\":[10,229,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,99,57,82,121,122,52,83,65,51,87,67,81,72,78,82,85,76,108,118,69,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,20,10,5,65,108,105,97,115,18,11,138,1,8,68,101,99,101,109,98,101,114,18,102,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,86,50,84,10,20,10,5,65,108,105,97,115,18,11,138,1,8,68,101,99,101,109,98,101,114,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,180,165,171,6,10,14,10,2,116,111,18,8,82,6,8,192,206,195,172,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,104,70,72,104,65,112,102,81,116,121,73,57,73,55,81,82,85,55,74,48,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,180,165,171,6,10,14,10,2,116,111,18,8,82,6,8,192,206,195,172,6,18,11,10,5,77,111,110,116,111,18,2,16,50,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,26,12,8,220,178,248,166,6,16,208,234,224,194,1,34,12,8,180,195,249,166,6,16,248,255,184,185,1,18,229,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,99,57,82,121,122,52,83,65,51,87,67,81,72,78,82,85,76,108,118,69,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,20,10,5,65,108,105,97,115,18,11,138,1,8,68,101,99,101,109,98,101,114,18,102,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,86,50,84,10,20,10,5,65,108,105,97,115,18,11,138,1,8,68,101,99,101,109,98,101,114,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,180,165,171,6,10,14,10,2,116,111,18,8,82,6,8,192,206,195,172,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,104,70,72,104,65,112,102,81,116,121,73,57,73,55,81,82,85,55,74,48,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,180,165,171,6,10,14,10,2,116,111,18,8,82,6,8,192,206,195,172,6,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,18,11,10,5,77,111,110,116,111,18,2,16,50,26,12,8,220,178,248,166,6,16,208,234,224,194,1,34,12,8,180,195,249,166,6,16,232,235,251,184,1,26,0]}}"}}
[debug] [2023-08-17T18:06:45.656Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 99.3692ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 99.3692ms"}}
[debug] [2023-08-17T18:06:45.657Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T18:06:45.657Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T18:06:45.657Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T18:06:45.657Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:06:45.667Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:06:45.667Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:06:45.667Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:06:45.667Z"],"workRunningCount":1}
[debug] [2023-08-17T18:06:45.667Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T18:06:45.667Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T18:06:45.668Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T18:06:45.668Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T18:06:45.668Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T18:06:45.669Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"cd0dba09-67f5-4e19-8737-b78e55c9d0cc","subject":"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/A1BqyP1rqkZc9iXozOzN","time":"2023-08-17T18:06:45.657030500Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/3dJExGFTPEJtxm0peFNG/cuota_payments/A1BqyP1rqkZc9iXozOzN","data":{"type":"Buffer","data":[10,227,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,65,49,66,113,121,80,49,114,113,107,90,99,57,105,88,111,122,79,122,78,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,19,10,5,65,108,105,97,115,18,10,138,1,7,74,97,110,117,97,114,121,18,101,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,85,50,83,10,19,10,5,65,108,105,97,115,18,10,138,1,7,74,97,110,117,97,114,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,241,200,172,6,10,14,10,2,116,111,18,8,82,6,8,192,139,231,173,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,109,81,73,114,84,52,83,101,100,112,122,119,81,82,87,116,48,99,108,84,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,241,200,172,6,10,14,10,2,116,111,18,8,82,6,8,192,139,231,173,6,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,18,11,10,5,77,111,110,116,111,18,2,16,50,26,12,8,220,178,248,166,6,16,144,172,147,175,2,34,12,8,180,195,249,166,6,16,200,152,179,186,1,18,227,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,65,49,66,113,121,80,49,114,113,107,90,99,57,105,88,111,122,79,122,78,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,19,10,5,65,108,105,97,115,18,10,138,1,7,74,97,110,117,97,114,121,18,101,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,85,50,83,10,19,10,5,65,108,105,97,115,18,10,138,1,7,74,97,110,117,97,114,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,241,200,172,6,10,14,10,2,116,111,18,8,82,6,8,192,139,231,173,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,109,81,73,114,84,52,83,101,100,112,122,119,81,82,87,116,48,99,108,84,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,241,200,172,6,10,14,10,2,116,111,18,8,82,6,8,192,139,231,173,6,18,11,10,5,77,111,110,116,111,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,26,12,8,220,178,248,166,6,16,144,172,147,175,2,34,12,8,147,194,249,166,6,16,144,247,232,183,1,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"cd0dba09-67f5-4e19-8737-b78e55c9d0cc\",\"subject\":\"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/A1BqyP1rqkZc9iXozOzN\",\"time\":\"2023-08-17T18:06:45.657030500Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/3dJExGFTPEJtxm0peFNG/cuota_payments/A1BqyP1rqkZc9iXozOzN\",\"data\":{\"type\":\"Buffer\",\"data\":[10,227,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,65,49,66,113,121,80,49,114,113,107,90,99,57,105,88,111,122,79,122,78,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,19,10,5,65,108,105,97,115,18,10,138,1,7,74,97,110,117,97,114,121,18,101,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,85,50,83,10,19,10,5,65,108,105,97,115,18,10,138,1,7,74,97,110,117,97,114,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,241,200,172,6,10,14,10,2,116,111,18,8,82,6,8,192,139,231,173,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,109,81,73,114,84,52,83,101,100,112,122,119,81,82,87,116,48,99,108,84,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,241,200,172,6,10,14,10,2,116,111,18,8,82,6,8,192,139,231,173,6,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,18,11,10,5,77,111,110,116,111,18,2,16,50,26,12,8,220,178,248,166,6,16,144,172,147,175,2,34,12,8,180,195,249,166,6,16,200,152,179,186,1,18,227,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,65,49,66,113,121,80,49,114,113,107,90,99,57,105,88,111,122,79,122,78,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,19,10,5,65,108,105,97,115,18,10,138,1,7,74,97,110,117,97,114,121,18,101,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,85,50,83,10,19,10,5,65,108,105,97,115,18,10,138,1,7,74,97,110,117,97,114,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,241,200,172,6,10,14,10,2,116,111,18,8,82,6,8,192,139,231,173,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,109,81,73,114,84,52,83,101,100,112,122,119,81,82,87,116,48,99,108,84,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,241,200,172,6,10,14,10,2,116,111,18,8,82,6,8,192,139,231,173,6,18,11,10,5,77,111,110,116,111,18,2,16,25,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,26,12,8,220,178,248,166,6,16,144,172,147,175,2,34,12,8,147,194,249,166,6,16,144,247,232,183,1,26,0]}}"}}
[debug] [2023-08-17T18:06:45.670Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 1.9779ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 1.9779ms"}}
[debug] [2023-08-17T18:06:45.670Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T18:06:45.670Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T18:06:45.670Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T18:06:45.670Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:06:45.683Z] [work-queue] {"queuedWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:06:45.683Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:06:45.683Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0-2023-08-17T18:06:45.683Z"],"workRunningCount":1}
[debug] [2023-08-17T18:06:45.683Z] Accepted request POST /functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0 --> us-central1-handlePayment-0
[debug] [2023-08-17T18:06:45.683Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-08-17T18:06:45.684Z] [functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/ecrphmsb/triggers/us-central1-handlePayment-0, mapping to path=/functions/projects/"}}
[debug] [2023-08-17T18:06:45.684Z] [worker-pool] submitRequest(triggerId=us-central1-handlePayment) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handlePayment)"}}
[info] i  functions: Beginning execution of "us-central1-handlePayment" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Beginning execution of \"us-central1-handlePayment\""}}
[debug] [2023-08-17T18:06:45.684Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: BUSY"}}
[debug] [2023-08-17T18:06:45.686Z] [runtime-status] [20208] RunCloudEvent {"specversion":"1.0","type":"google.cloud.firestore.document.v1.written","source":"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)","id":"d8d5c55c-8484-4c71-a7f3-2d0eaad52e8a","subject":"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/A1BqyP1rqkZc9iXozOzN","time":"2023-08-17T18:06:45.671028700Z","datacontenttype":"application/protobuf","dataschema":"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto","location":"us-central1","project":"ecrphmsb","database":"(default)","namespace":"(default)","document":"students/3dJExGFTPEJtxm0peFNG/cuota_payments/A1BqyP1rqkZc9iXozOzN","data":{"type":"Buffer","data":[10,227,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,65,49,66,113,121,80,49,114,113,107,90,99,57,105,88,111,122,79,122,78,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,19,10,5,65,108,105,97,115,18,10,138,1,7,74,97,110,117,97,114,121,18,101,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,85,50,83,10,19,10,5,65,108,105,97,115,18,10,138,1,7,74,97,110,117,97,114,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,241,200,172,6,10,14,10,2,116,111,18,8,82,6,8,192,139,231,173,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,109,81,73,114,84,52,83,101,100,112,122,119,81,82,87,116,48,99,108,84,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,241,200,172,6,10,14,10,2,116,111,18,8,82,6,8,192,139,231,173,6,18,11,10,5,77,111,110,116,111,18,2,16,50,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,26,12,8,220,178,248,166,6,16,144,172,147,175,2,34,12,8,180,195,249,166,6,16,144,138,173,187,1,18,227,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,65,49,66,113,121,80,49,114,113,107,90,99,57,105,88,111,122,79,122,78,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,19,10,5,65,108,105,97,115,18,10,138,1,7,74,97,110,117,97,114,121,18,101,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,85,50,83,10,19,10,5,65,108,105,97,115,18,10,138,1,7,74,97,110,117,97,114,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,241,200,172,6,10,14,10,2,116,111,18,8,82,6,8,192,139,231,173,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,109,81,73,114,84,52,83,101,100,112,122,119,81,82,87,116,48,99,108,84,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,241,200,172,6,10,14,10,2,116,111,18,8,82,6,8,192,139,231,173,6,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,18,11,10,5,77,111,110,116,111,18,2,16,50,26,12,8,220,178,248,166,6,16,144,172,147,175,2,34,12,8,180,195,249,166,6,16,200,152,179,186,1,26,0]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[runtime-status] [20208] RunCloudEvent {\"specversion\":\"1.0\",\"type\":\"google.cloud.firestore.document.v1.written\",\"source\":\"//firestore.googleapis.com/projects/projects/ecrphmsb/databases/(default)\",\"id\":\"d8d5c55c-8484-4c71-a7f3-2d0eaad52e8a\",\"subject\":\"documents/students/3dJExGFTPEJtxm0peFNG/cuota_payments/A1BqyP1rqkZc9iXozOzN\",\"time\":\"2023-08-17T18:06:45.671028700Z\",\"datacontenttype\":\"application/protobuf\",\"dataschema\":\"https://github.com/googleapis/google-cloudevents/blob/main/proto/google/events/cloud/firestore/v1/data.proto\",\"location\":\"us-central1\",\"project\":\"ecrphmsb\",\"database\":\"(default)\",\"namespace\":\"(default)\",\"document\":\"students/3dJExGFTPEJtxm0peFNG/cuota_payments/A1BqyP1rqkZc9iXozOzN\",\"data\":{\"type\":\"Buffer\",\"data\":[10,227,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,65,49,66,113,121,80,49,114,113,107,90,99,57,105,88,111,122,79,122,78,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,19,10,5,65,108,105,97,115,18,10,138,1,7,74,97,110,117,97,114,121,18,101,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,85,50,83,10,19,10,5,65,108,105,97,115,18,10,138,1,7,74,97,110,117,97,114,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,241,200,172,6,10,14,10,2,116,111,18,8,82,6,8,192,139,231,173,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,109,81,73,114,84,52,83,101,100,112,122,119,81,82,87,116,48,99,108,84,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,241,200,172,6,10,14,10,2,116,111,18,8,82,6,8,192,139,231,173,6,18,11,10,5,77,111,110,116,111,18,2,16,50,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,50,26,12,8,220,178,248,166,6,16,144,172,147,175,2,34,12,8,180,195,249,166,6,16,144,138,173,187,1,18,227,3,10,113,112,114,111,106,101,99,116,115,47,101,99,114,112,104,109,115,98,47,100,97,116,97,98,97,115,101,115,47,40,100,101,102,97,117,108,116,41,47,100,111,99,117,109,101,110,116,115,47,115,116,117,100,101,110,116,115,47,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,47,99,117,111,116,97,95,112,97,121,109,101,110,116,115,47,65,49,66,113,121,80,49,114,113,107,90,99,57,105,88,111,122,79,122,78,18,36,10,9,115,116,117,100,101,110,116,73,100,18,23,138,1,20,51,100,74,69,120,71,70,84,80,69,74,116,120,109,48,112,101,70,78,71,18,14,10,8,68,105,115,99,111,117,110,116,18,2,16,1,18,19,10,5,65,108,105,97,115,18,10,138,1,7,74,97,110,117,97,114,121,18,101,10,12,99,117,111,116,97,68,101,102,97,117,108,116,18,85,50,83,10,19,10,5,65,108,105,97,115,18,10,138,1,7,74,97,110,117,97,114,121,10,11,10,5,77,111,110,116,111,18,2,16,50,10,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,241,200,172,6,10,14,10,2,116,111,18,8,82,6,8,192,139,231,173,6,18,34,10,7,99,117,111,116,97,73,100,18,23,138,1,20,109,81,73,114,84,52,83,101,100,112,122,119,81,82,87,116,48,99,108,84,18,36,10,9,104,111,117,115,101,72,111,108,100,18,23,138,1,20,66,65,86,85,71,112,98,113,119,121,49,49,97,66,82,54,65,55,111,113,18,47,10,7,80,101,114,105,111,100,111,18,36,50,34,10,16,10,4,102,114,111,109,18,8,82,6,8,192,241,200,172,6,10,14,10,2,116,111,18,8,82,6,8,192,139,231,173,6,18,24,10,18,82,101,109,97,105,110,105,110,103,65,109,111,117,110,116,68,117,101,18,2,16,25,18,11,10,5,77,111,110,116,111,18,2,16,50,26,12,8,220,178,248,166,6,16,144,172,147,175,2,34,12,8,180,195,249,166,6,16,200,152,179,186,1,26,0]}}"}}
[debug] [2023-08-17T18:06:45.798Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handlePayment" in 113.9204ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finished \"us-central1-handlePayment\" in 113.9204ms"}}
[debug] [2023-08-17T18:06:45.798Z] [worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"[worker-us-central1-handlePayment-afb47b36-d3d2-4069-82d2-5d3ee629cdd7]: IDLE"}}
[debug] [2023-08-17T18:06:45.798Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-08-17T18:06:45.798Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handlePayment"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-08-17T18:06:45.798Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-08-17T18:06:47.551Z] Aug 17, 2023 2:06:47 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:06:47 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:06:47.553Z] Aug 17, 2023 2:06:47 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:06:47 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T18:06:47.558Z] Aug 17, 2023 2:06:47 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:06:47 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:06:47.583Z] Aug 17, 2023 2:06:47 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:06:47 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:06:47.583Z] Aug 17, 2023 2:06:47 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:06:47 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:06:47.586Z] Aug 17, 2023 2:06:47 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:06:47 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T18:06:47.623Z] Aug 17, 2023 2:06:47 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:06:47 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:07:00.101Z] Aug 17, 2023 2:07:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:07:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:07:00.115Z] Aug 17, 2023 2:07:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:07:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:07:00.142Z] Aug 17, 2023 2:07:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:07:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:07:04.630Z] Aug 17, 2023 2:07:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:07:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:07:04.631Z] Aug 17, 2023 2:07:04 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:07:04 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T18:07:04.637Z] Aug 17, 2023 2:07:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:07:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:07:04.661Z] Aug 17, 2023 2:07:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:07:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:07:04.662Z] Aug 17, 2023 2:07:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:07:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:07:04.664Z] Aug 17, 2023 2:07:04 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:07:04 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T18:07:04.703Z] Aug 17, 2023 2:07:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:07:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:07:15.812Z] Aug 17, 2023 2:07:15 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:07:15 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:07:41.731Z] Aug 17, 2023 2:07:41 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:07:41 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:07:41.731Z] Aug 17, 2023 2:07:41 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:07:41 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:07:41.733Z] Aug 17, 2023 2:07:41 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:07:41 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T18:07:41.734Z] Aug 17, 2023 2:07:41 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:07:41 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:07:41.756Z] Aug 17, 2023 2:07:41 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:07:41 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:07:44.725Z] Aug 17, 2023 2:07:44 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:07:44 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:07:44.726Z] Aug 17, 2023 2:07:44 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:07:44 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T18:07:44.752Z] Aug 17, 2023 2:07:44 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:07:44 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:08:00.545Z] Aug 17, 2023 2:08:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:08:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:08:00.547Z] Aug 17, 2023 2:08:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:08:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:08:00.548Z] Aug 17, 2023 2:08:00 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:08:00 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T18:08:00.549Z] Aug 17, 2023 2:08:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:08:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:08:00.549Z] Aug 17, 2023 2:08:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:08:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:08:00.584Z] Aug 17, 2023 2:08:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:08:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:08:15.830Z] Aug 17, 2023 2:08:15 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:08:15 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:08:20.542Z] Aug 17, 2023 2:08:20 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:08:20 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:08:20.557Z] Aug 17, 2023 2:08:20 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:08:20 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:08:20.588Z] Aug 17, 2023 2:08:20 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:08:20 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:08:20.613Z] Aug 17, 2023 2:08:20 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:08:20 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:08:30.485Z] Aug 17, 2023 2:08:30 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:08:30 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:09:00.503Z] Aug 17, 2023 2:09:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:09:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:09:15.856Z] Aug 17, 2023 2:09:15 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:09:15 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:10:00.533Z] Aug 17, 2023 2:10:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:10:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:10:15.876Z] Aug 17, 2023 2:10:15 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:10:15 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:11:00.545Z] Aug 17, 2023 2:11:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:11:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:11:15.887Z] Aug 17, 2023 2:11:15 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:11:15 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:12:00.563Z] Aug 17, 2023 2:12:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:12:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:12:31.274Z] Aug 17, 2023 2:12:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:12:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:13:00.572Z] Aug 17, 2023 2:13:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:13:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:13:31.291Z] Aug 17, 2023 2:13:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:13:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:14:00.594Z] Aug 17, 2023 2:14:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:14:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:14:31.315Z] Aug 17, 2023 2:14:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:14:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:15:00.606Z] Aug 17, 2023 2:15:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:15:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:15:31.334Z] Aug 17, 2023 2:15:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:15:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:16:00.613Z] Aug 17, 2023 2:16:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:16:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:16:31.338Z] Aug 17, 2023 2:16:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:16:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:17:00.631Z] Aug 17, 2023 2:17:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:17:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:17:31.365Z] Aug 17, 2023 2:17:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:17:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:18:00.653Z] Aug 17, 2023 2:18:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:18:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:18:31.382Z] Aug 17, 2023 2:18:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:18:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:19:00.677Z] Aug 17, 2023 2:19:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:19:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:19:31.411Z] Aug 17, 2023 2:19:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:19:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:20:00.706Z] Aug 17, 2023 2:20:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:20:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:20:31.441Z] Aug 17, 2023 2:20:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:20:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:21:00.725Z] Aug 17, 2023 2:21:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:21:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:21:31.455Z] Aug 17, 2023 2:21:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:21:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:22:00.740Z] Aug 17, 2023 2:22:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:22:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:22:31.476Z] Aug 17, 2023 2:22:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:22:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:23:00.765Z] Aug 17, 2023 2:23:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:23:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:23:31.501Z] Aug 17, 2023 2:23:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:23:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:24:00.785Z] Aug 17, 2023 2:24:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:24:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:24:31.518Z] Aug 17, 2023 2:24:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:24:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:25:00.806Z] Aug 17, 2023 2:25:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:25:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:25:31.531Z] Aug 17, 2023 2:25:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:25:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:26:00.816Z] Aug 17, 2023 2:26:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:26:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:26:31.544Z] Aug 17, 2023 2:26:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:26:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:27:00.834Z] Aug 17, 2023 2:27:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:27:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:27:31.568Z] Aug 17, 2023 2:27:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:27:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:28:00.850Z] Aug 17, 2023 2:28:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:28:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:28:31.589Z] Aug 17, 2023 2:28:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:28:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:29:00.868Z] Aug 17, 2023 2:29:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:29:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:29:31.616Z] Aug 17, 2023 2:29:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:29:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:30:00.892Z] Aug 17, 2023 2:30:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:30:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:30:31.631Z] Aug 17, 2023 2:30:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:30:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:31:00.897Z] Aug 17, 2023 2:31:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:31:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:31:31.647Z] Aug 17, 2023 2:31:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:31:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:32:00.913Z] Aug 17, 2023 2:32:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:32:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:32:14.458Z] Aug 17, 2023 2:32:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:32:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:32:14.458Z] Aug 17, 2023 2:32:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:32:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:32:14.459Z] Aug 17, 2023 2:32:14 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreListenHandler onClose
INFO: channel closed
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:32:14 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreListenHandler onClose\r\nINFO: channel closed\r\n"}}
[debug] [2023-08-17T18:32:14.459Z] Aug 17, 2023 2:32:14 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:32:14 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\r\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\r\n"}}
[debug] [2023-08-17T18:32:14.464Z] Aug 17, 2023 2:32:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:32:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:32:31.676Z] Aug 17, 2023 2:32:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:32:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:33:14.480Z] Aug 17, 2023 2:33:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:33:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:33:31.702Z] Aug 17, 2023 2:33:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:33:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:34:14.499Z] Aug 17, 2023 2:34:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:34:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:34:31.715Z] Aug 17, 2023 2:34:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:34:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:35:14.520Z] Aug 17, 2023 2:35:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:35:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:35:31.730Z] Aug 17, 2023 2:35:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:35:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:36:00.267Z] Aug 17, 2023 2:36:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:36:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:36:31.751Z] Aug 17, 2023 2:36:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:36:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:37:00.285Z] Aug 17, 2023 2:37:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:37:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:37:31.777Z] Aug 17, 2023 2:37:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:37:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:38:00.297Z] Aug 17, 2023 2:38:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:38:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:38:31.799Z] Aug 17, 2023 2:38:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:38:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:39:00.328Z] Aug 17, 2023 2:39:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:39:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:39:31.807Z] Aug 17, 2023 2:39:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:39:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:40:00.359Z] Aug 17, 2023 2:40:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:40:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:40:31.828Z] Aug 17, 2023 2:40:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:40:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:41:00.367Z] Aug 17, 2023 2:41:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:41:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:41:31.834Z] Aug 17, 2023 2:41:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:41:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:42:00.388Z] Aug 17, 2023 2:42:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:42:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:42:31.848Z] Aug 17, 2023 2:42:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:42:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:43:00.415Z] Aug 17, 2023 2:43:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:43:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:43:31.865Z] Aug 17, 2023 2:43:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:43:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:44:00.428Z] Aug 17, 2023 2:44:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:44:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:44:31.885Z] Aug 17, 2023 2:44:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:44:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:45:00.443Z] Aug 17, 2023 2:45:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:45:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:45:31.894Z] Aug 17, 2023 2:45:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:45:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:46:00.457Z] Aug 17, 2023 2:46:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:46:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:46:31.911Z] Aug 17, 2023 2:46:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:46:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:47:00.477Z] Aug 17, 2023 2:47:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:47:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:47:31.926Z] Aug 17, 2023 2:47:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:47:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:48:00.506Z] Aug 17, 2023 2:48:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:48:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:48:31.946Z] Aug 17, 2023 2:48:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:48:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:49:00.536Z] Aug 17, 2023 2:49:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:49:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:49:31.960Z] Aug 17, 2023 2:49:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:49:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:50:00.557Z] Aug 17, 2023 2:50:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:50:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:50:31.972Z] Aug 17, 2023 2:50:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:50:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:51:00.567Z] Aug 17, 2023 2:51:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:51:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:51:31.998Z] Aug 17, 2023 2:51:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:51:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:52:00.586Z] Aug 17, 2023 2:52:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:52:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:52:32.017Z] Aug 17, 2023 2:52:32 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:52:32 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:53:00.603Z] Aug 17, 2023 2:53:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:53:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:53:32.037Z] Aug 17, 2023 2:53:32 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:53:32 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:54:00.610Z] Aug 17, 2023 2:54:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:54:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:54:32.060Z] Aug 17, 2023 2:54:32 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:54:32 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:55:00.623Z] Aug 17, 2023 2:55:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:55:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:55:32.080Z] Aug 17, 2023 2:55:32 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:55:32 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:56:00.636Z] Aug 17, 2023 2:56:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:56:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:56:32.110Z] Aug 17, 2023 2:56:32 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:56:32 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:57:00.648Z] Aug 17, 2023 2:57:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:57:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:57:32.127Z] Aug 17, 2023 2:57:32 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:57:32 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:58:00.668Z] Aug 17, 2023 2:58:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:58:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:58:32.151Z] Aug 17, 2023 2:58:32 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:58:32 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:59:00.688Z] Aug 17, 2023 2:59:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:59:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T18:59:32.171Z] Aug 17, 2023 2:59:32 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 2:59:32 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T19:00:00.710Z] Aug 17, 2023 3:00:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 3:00:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T19:00:32.191Z] Aug 17, 2023 3:00:32 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 3:00:32 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T19:01:00.731Z] Aug 17, 2023 3:01:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 3:01:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T19:01:32.209Z] Aug 17, 2023 3:01:32 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 3:01:32 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T19:02:00.740Z] Aug 17, 2023 3:02:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 3:02:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T19:02:32.237Z] Aug 17, 2023 3:02:32 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 3:02:32 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T19:03:00.765Z] Aug 17, 2023 3:03:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 3:03:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T19:03:32.251Z] Aug 17, 2023 3:03:32 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 3:03:32 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T19:04:00.777Z] Aug 17, 2023 3:04:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 3:04:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T19:04:32.256Z] Aug 17, 2023 3:04:32 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 3:04:32 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T19:05:00.807Z] Aug 17, 2023 3:05:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 3:05:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T19:05:32.280Z] Aug 17, 2023 3:05:32 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 3:05:32 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T19:06:00.832Z] Aug 17, 2023 3:06:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 3:06:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T19:06:32.291Z] Aug 17, 2023 3:06:32 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 3:06:32 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T19:07:00.861Z] Aug 17, 2023 3:07:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 3:07:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T19:07:32.315Z] Aug 17, 2023 3:07:32 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 3:07:32 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T19:08:00.884Z] Aug 17, 2023 3:08:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 3:08:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T19:08:32.340Z] Aug 17, 2023 3:08:32 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 3:08:32 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T19:09:00.907Z] Aug 17, 2023 3:09:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 3:09:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T19:09:32.368Z] Aug 17, 2023 3:09:32 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 3:09:32 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T19:10:00.929Z] Aug 17, 2023 3:10:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 3:10:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T19:10:32.394Z] Aug 17, 2023 3:10:32 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 3:10:32 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T19:11:00.948Z] Aug 17, 2023 3:11:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 3:11:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T19:11:32.414Z] Aug 17, 2023 3:11:32 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 3:11:32 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
[debug] [2023-08-17T19:12:00.971Z] Aug 17, 2023 3:12:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Aug 17, 2023 3:12:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\nINFO: Detected non-HTTP/2 connection.\r\n"}}
